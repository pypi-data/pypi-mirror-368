[tool:pytest]
# Test discovery and execution settings
testpaths = tests
python_files = test_*.py
python_functions = test_*
python_classes = Test*

# Output and reporting settings
addopts = 
    --strict-markers
    --strict-config
    --verbose
    --tb=short
    --showlocals
    --durations=10
    --cov=chart_genius_mcp
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-report=xml:coverage.xml
    --cov-branch
    --cov-fail-under=80
    --benchmark-only
    --benchmark-sort=mean
    --benchmark-columns=min,max,mean,stddev,rounds,iterations
    --benchmark-histogram=histogram

# Test markers for categorization
markers =
    # Performance and load testing
    slow: marks tests as slow (deselect with '-m "not slow"')
    performance: marks tests as performance benchmarks
    benchmark: marks tests as detailed benchmarks
    stress: marks tests as stress/load tests
    
    # Feature categories
    core: marks tests for core functionality
    optimization: marks tests for optimization features
    ai: marks tests that require AI features
    cache: marks tests that require caching
    integration: marks tests as integration tests
    
    # Chart engine specific
    plotly: marks tests specific to Plotly engine
    matplotlib: marks tests specific to Matplotlib engine
    seaborn: marks tests specific to Seaborn engine
    d3: marks tests specific to D3 engine
    
    # Data size categories
    small_data: marks tests with small datasets
    medium_data: marks tests with medium datasets
    large_data: marks tests with large datasets
    
    # Error and edge case testing
    error_handling: marks tests for error scenarios
    edge_cases: marks tests for edge cases
    validation: marks tests for input validation

# Async test configuration
asyncio_mode = auto

# Logging configuration
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Test timeout settings
timeout = 300
timeout_method = thread

# Warnings configuration
filterwarnings =
    ignore::UserWarning
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    # Specific warnings we want to see
    error::chart_genius_mcp.*Warning

# Minimum version requirements
minversion = 7.0 