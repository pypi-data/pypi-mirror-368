[tox]
requires = 
    tox>=4
    tox-uv
env_list = 
    py39, py310, py311, py312, py313
    lint
    build

[testenv]
runner = uv-venv-runner
package = wheel
deps = 
    pytest>=8.4.1
    pytest-cov>=6.2.1
commands = 
    pytest {posargs} tests/ -v --tb=short

[testenv:lint]
deps = 
    ruff
commands = 
    ruff check src/ tests/ examples/ --fix

[testenv:format]
deps = 
    ruff
commands = 
    ruff format src/ tests/ examples/

[testenv:build]
commands = 
    uv build
    uv run twine check dist/*

[testenv:coverage]
deps = 
    {[testenv]deps}
    coverage[toml]
commands = 
    coverage run -m pytest tests/
    coverage report -m
    coverage html

# Quick test for development
[testenv:dev]
deps = 
    {[testenv]deps}
    ruff
commands = 
    ruff check src/ tests/ --fix
    pytest tests/ -v

# GitHub Actions mapping
[gh-actions]
python = 
    3.9: py39
    3.10: py310
    3.11: py311
    3.12: py312
    3.13: py313