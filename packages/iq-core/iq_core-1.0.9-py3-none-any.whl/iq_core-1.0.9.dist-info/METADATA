Metadata-Version: 2.4
Name: iq-core
Version: 1.0.9
Summary: API wrapper para IQ Option
Author-email: CÃ©lio Junior <profissional.celiojunior@outlook.com>
License-Expression: MIT
Project-URL: Homepage, https://github.com/celiovmjr/iq-core
Project-URL: Source, https://github.com/celiovmjr/iq-core
Project-URL: Issues, https://github.com/celiovmjr/iq-core/issues
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Operating System :: OS Independent
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: aiohttp>=3.12.0
Requires-Dist: websockets>=15.0.0
Requires-Dist: cryptography>=45.0.0

# ğŸš€ IQ Core - Advanced Trading Library

<div align="center">

[![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://python.org)
[![Version](https://img.shields.io/badge/Version-1.0.2-green.svg)](https://github.com/celiovmjr/iq-core)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![Architecture](https://img.shields.io/badge/Architecture-DDD-purple.svg)](https://en.wikipedia.org/wiki/Domain-driven_design)

*ğŸ‡§ğŸ‡· Biblioteca Python avanÃ§ada para trading automatizado na IQ Option*  
*ğŸ‡ºğŸ‡¸ Advanced Python library for automated trading on IQ Option*

</div>

---

## ğŸ“‹ Ãndice | Table of Contents

- [ğŸŒŸ VisÃ£o Geral | Overview](#-visÃ£o-geral--overview)
- [ğŸ—ï¸ Arquitetura | Architecture](#ï¸-arquitetura--architecture)
- [âš¡ InÃ­cio RÃ¡pido | Quick Start](#-inÃ­cio-rÃ¡pido--quick-start)
- [ğŸ“š Entidades | Entities](#-entidades--entities)
- [ğŸ”§ ServiÃ§os | Services](#-serviÃ§os--services)
- [ğŸŒ WebSocket Client](#-websocket-client)
- [âš ï¸ ExceÃ§Ãµes | Exceptions](#ï¸-exceÃ§Ãµes--exceptions)
- [ğŸ“– ReferÃªncia da API | API Reference](#-referÃªncia-da-api--api-reference)

---

## ğŸŒŸ VisÃ£o Geral | Overview

### ğŸ‡§ğŸ‡· PortuguÃªs

**IQ Core** Ã© uma biblioteca Python moderna para trading automatizado na IQ Option, construÃ­da com arquitetura orientada ao domÃ­nio (DDD). Oferece uma interface limpa e robusta para desenvolvedores criarem sistemas de trading profissionais.

#### âœ¨ CaracterÃ­sticas Principais

- ğŸ—ï¸ **Arquitetura DDD**: CÃ³digo organizado e maintÃ­vel
- ğŸ”„ **Suporte AssÃ­ncrono**: Performance otimizada com asyncio
- ğŸ›¡ï¸ **Type Safety**: Totalmente tipada com Python 3.10+
- ğŸŒ **WebSocket Real-time**: ComunicaÃ§Ã£o em tempo real
- ğŸ“Š **Multi-Asset Trading**: Binary, Digital, Blitz e Forex
- ğŸ” **SeguranÃ§a**: Tokens criptografados e gerenciamento seguro
- ğŸ“ˆ **GestÃ£o de Risco**: Stop-win, stop-loss e controle de exposiÃ§Ã£o

### ğŸ‡ºğŸ‡¸ English

**IQ Core** is a modern Python library for automated trading on IQ Option, built with Domain-Driven Design (DDD) architecture. It provides a clean and robust interface for developers to create professional trading systems.

#### âœ¨ Key Features

- ğŸ—ï¸ **DDD Architecture**: Organized and maintainable code
- ğŸ”„ **Async Support**: Optimized performance with asyncio
- ğŸ›¡ï¸ **Type Safety**: Fully typed with Python 3.10+
- ğŸŒ **Real-time WebSocket**: Real-time communication
- ğŸ“Š **Multi-Asset Trading**: Binary, Digital, Blitz, and Forex
- ğŸ” **Security**: Encrypted tokens and secure management
- ğŸ“ˆ **Risk Management**: Stop-win, stop-loss, and exposure control

---

## ğŸ—ï¸ Arquitetura | Architecture

```
iq_core/
â”œâ”€â”€ ğŸ“ anotations/          # Decorators and utilities
â”‚   â”œâ”€â”€ connection.py       # Network error handling
â”‚   â””â”€â”€ time.py            # Time measurement decorator
â”œâ”€â”€ ğŸ›ï¸ entities/            # Domain entities
â”‚   â”œâ”€â”€ account.py         # Account and AccountType
â”‚   â”œâ”€â”€ candle.py          # Candle data structure
â”‚   â”œâ”€â”€ candle_stream.py   # Real-time candle stream
â”‚   â”œâ”€â”€ duration.py        # Duration with flexible parsing
â”‚   â”œâ”€â”€ instrument.py      # Trading instruments
â”‚   â”œâ”€â”€ message.py         # WebSocket message protocol
â”‚   â”œâ”€â”€ profile.py         # User profile
â”‚   â”œâ”€â”€ signal.py          # Trading signals
â”‚   â””â”€â”€ trade_result.py    # Trade execution results
â”œâ”€â”€ âš ï¸ exceptions/          # Custom exceptions
â”‚   â”œâ”€â”€ authentication_error.py
â”‚   â”œâ”€â”€ connection_error.py
â”‚   â”œâ”€â”€ iqoption_error.py
â”‚   â”œâ”€â”€ time_error.py
â”‚   â”œâ”€â”€ trading_error.py
â”‚   â””â”€â”€ validation_error.py
â”œâ”€â”€ ğŸ”§ services/            # Business logic services
â”‚   â”œâ”€â”€ interfaces/        # Service interfaces
â”‚   â”œâ”€â”€ account_service.py # Account management
â”‚   â”œâ”€â”€ auth_service.py    # Authentication
â”‚   â”œâ”€â”€ binary_trade_service.py    # Binary options
â”‚   â”œâ”€â”€ blitz_trade_service.py     # Blitz options
â”‚   â”œâ”€â”€ candle_service.py          # Candle data
â”‚   â”œâ”€â”€ cotation_service.py        # Price quotations
â”‚   â”œâ”€â”€ digital_trade_service.py   # Digital options
â”‚   â”œâ”€â”€ forex_trade_service.py     # Forex trading
â”‚   â”œâ”€â”€ instrument_resolver.py     # Instrument resolution
â”‚   â”œâ”€â”€ instrument_service.py      # Instrument management
â”‚   â”œâ”€â”€ token_service.py           # Token management
â”‚   â”œâ”€â”€ trade_mood_service.py      # Trader sentiment
â”‚   â””â”€â”€ trading_manager_service.py # Risk management
â””â”€â”€ ğŸŒ websocket/           # WebSocket communication
    â””â”€â”€ client.py          # WebSocket client
```

---

## âš¡ InÃ­cio RÃ¡pido | Quick Start

### ğŸ“¦ InstalaÃ§Ã£o | Installation

```bash
pip install iq-core
```

### ğŸš€ Uso BÃ¡sico | Basic Usage

#### ğŸ‡§ğŸ‡· Exemplo Simples

```python
import asyncio
from decimal import Decimal
from iq_core import AuthService, InstrumentService, BinaryTradeService
from iq_core.entities import Signal, Direction, Duration, SignalType

async def exemplo_simples():
    # AutenticaÃ§Ã£o
    auth = AuthService()
    ws, profile = await auth.login("seu_email@exemplo.com", "sua_senha")
    
    # Buscar EUR/USD
    instrument_service = InstrumentService(ws)
    eurusd = await instrument_service.fetch(filter_by="EURUSD")
    
    if eurusd:
        # Criar sinal de trading
        signal = Signal(
            instrument=eurusd,
            balance_id=profile.balance_id,
            direction=Direction.CALL,
            amount=Decimal("10.00"),
            expiration=Duration("5m"),
            type=SignalType.BINARY
        )
        
        # Executar trade
        binary_service = BinaryTradeService(ws, profile)
        trade_id = await binary_service.open_trade(signal)
        print(f"Trade aberto: {trade_id}")
    
    await ws.close()

asyncio.run(exemplo_simples())
```

#### ğŸ‡ºğŸ‡¸ Simple Example

```python
import asyncio
from decimal import Decimal
from iq_core import AuthService, InstrumentService, BinaryTradeService
from iq_core.entities import Signal, Direction, Duration, SignalType

async def simple_example():
    # Authentication
    auth = AuthService()
    ws, profile = await auth.login("your_email@example.com", "your_password")
    
    # Search EUR/USD
    instrument_service = InstrumentService(ws)
    eurusd = await instrument_service.fetch(filter_by="EURUSD")
    
    if eurusd:
        # Create trading signal
        signal = Signal(
            instrument=eurusd,
            balance_id=profile.balance_id,
            direction=Direction.CALL,
            amount=Decimal("10.00"),
            expiration=Duration("5m"),
            type=SignalType.BINARY
        )
        
        # Execute trade
        binary_service = BinaryTradeService(ws, profile)
        trade_id = await binary_service.open_trade(signal)
        print(f"Trade opened: {trade_id}")
    
    await ws.close()

asyncio.run(simple_example())
```

---

## ğŸ“š Entidades | Entities

### ğŸ›ï¸ Modelos de DomÃ­nio | Domain Models

#### ğŸ“Š Instrument | Instrumento

```python
from iq_core.entities import Instrument, InstrumentType, MarketType

# Propriedades disponÃ­veis
instrument = Instrument(
    id=1,
    name="EUR/USD",
    symbol="EURUSD",
    group_id=1,
    market=MarketType.FOREX,
    type=[InstrumentType.BINARY, InstrumentType.DIGITAL],
    is_enabled=True,
    is_suspended=False,
    trading=TradingInfo(...)  # InformaÃ§Ãµes de trading
)

# Verificar se pode ser negociado
if instrument.is_tradable():
    print("DisponÃ­vel para trading")

# Verificar se estÃ¡ aberto
if instrument.is_open:
    print("Mercado aberto")
```

#### ğŸ’° Account | Conta

```python
from iq_core.entities import Account, AccountType

# Tipos de conta disponÃ­veis
AccountType.REAL        # Conta real
AccountType.TOURNAMENT  # Torneio
AccountType.PRACTICE    # Conta demo
AccountType.BTC         # Bitcoin
AccountType.ETH         # Ethereum

# Exemplo de conta
account = Account(
    id=12345,
    type=AccountType.PRACTICE,
    amount=10000.0,
    currency="USD",
    is_fiat=True,
    is_marginal=False
)
```

#### â±ï¸ Duration | DuraÃ§Ã£o

```python
from iq_core.entities import Duration

# Formas flexÃ­veis de criar duraÃ§Ãµes
duration1 = Duration("5m")        # 5 minutos
duration2 = Duration("1h30m")     # 1 hora e 30 minutos
duration3 = Duration("45s")       # 45 segundos
duration4 = Duration(300)         # 300 minutos

# OperaÃ§Ãµes aritmÃ©ticas
total = duration1 + duration2     # Soma
remaining = duration3 - "15s"     # SubtraÃ§Ã£o
doubled = duration1 * 2           # MultiplicaÃ§Ã£o

# ConversÃµes
print(f"Minutos: {duration1.minutes()}")
print(f"Segundos: {duration1.seconds()}")
print(f"Milissegundos: {duration1.ms()}")
print(f"Timestamp: {duration1.timestamp()}")

# AtÃ© um horÃ¡rio especÃ­fico
until_close = Duration().until("17:30")

# ComparaÃ§Ãµes
if duration1 > duration2:
    print("Duration1 Ã© maior")
```

#### ğŸ“ˆ Signal | Sinal

```python
from iq_core.entities import Signal, Direction, SignalType
from decimal import Decimal

# DireÃ§Ãµes disponÃ­veis
Direction.CALL  # Alta
Direction.PUT   # Baixa

# Tipos de sinal
SignalType.BINARY   # OpÃ§Ãµes binÃ¡rias
SignalType.DIGITAL  # OpÃ§Ãµes digitais
SignalType.BLITZ    # OpÃ§Ãµes blitz
SignalType.FOREX    # Forex

# Criar sinal
signal = Signal(
    instrument=instrument,
    balance_id=12345,
    direction=Direction.CALL,
    amount=Decimal("25.00"),
    expiration=Duration("5m"),
    type=SignalType.BINARY
)
```

#### ğŸ“Š Candle | Vela

```python
from iq_core.entities import Candle, CandleStream
from datetime import datetime

# Vela histÃ³rica
candle = Candle(
    open=1.1234,
    close=1.1245,
    high=1.1250,
    low=1.1230,
    bid=1.1244,
    ask=1.1246,
    volume=1500.0,
    from_time=datetime.now(),
    to_time=datetime.now(),
    size=300  # 5 minutos em segundos
)

# Vela em tempo real (stream)
candle_stream = CandleStream(
    active_id=1,
    size=300,
    at=1234567890,
    from_time=datetime.now(),
    to_time=datetime.now(),
    id=123,
    open=1.1234,
    close=1.1245,
    min=1.1230,
    max=1.1250,
    ask=1.1246,
    bid=1.1244,
    volume=1500.0,
    phase=None
)
```

#### ğŸ‘¤ Profile | Perfil

```python
from iq_core.entities import Profile

# Perfil do usuÃ¡rio
profile = Profile(
    id=12345,
    name="JoÃ£o Silva",
    email="joao@exemplo.com",
    currency="USD",
    _balance_id=67890,
    is_activated=True,
    balances=[],  # Lista de contas
    nickname="trader123"
)

# Propriedades Ãºteis
print(f"Saldo atual: ${profile.balance}")
print(f"ID da conta ativa: {profile.balance_id}")

# Acessar serviÃ§o de conta
account_service = profile.account
```

#### ğŸ“Š TradeResult | Resultado do Trade

```python
from iq_core.entities import TradeResult, TradeStatus, TradeResultType

# Status do trade
TradeStatus.OPEN      # Aberto
TradeStatus.CLOSED    # Fechado
TradeStatus.PENDING   # Pendente
TradeStatus.CANCELED  # Cancelado

# Resultado do trade
TradeResultType.WIN    # VitÃ³ria
TradeResultType.LOOSE  # Derrota
TradeResultType.DRAW   # Empate

# Exemplo de resultado
result = TradeResult(
    id=123,
    status=TradeStatus.CLOSED,
    result=TradeResultType.WIN,
    invest=Decimal("10.00"),
    profit=Decimal("8.00"),
    pnl=8.0,
    open=1.1234,
    close=1.1245,
    open_time=1234567890,
    close_time=1234567950,
    instrument_type=InstrumentType.BINARY
)

# Verificar se ganhou
if result.is_win:
    print("Trade vencedor!")

# DuraÃ§Ã£o em segundos
duration = result.duration_seconds
```

---

## ğŸ”§ ServiÃ§os | Services

### ğŸ” AuthService | ServiÃ§o de AutenticaÃ§Ã£o

```python
from iq_core import AuthService

async def autenticacao():
    auth = AuthService()
    
    # Login (com cache automÃ¡tico de token)
    ws, profile = await auth.login("email@exemplo.com", "senha")
    
    print(f"UsuÃ¡rio: {profile.name}")
    print(f"Saldo: ${profile.balance}")
    
    # Verificar se estÃ¡ autenticado
    if auth.is_authenticated:
        print("Autenticado com sucesso")
    
    # Token atual
    token = auth.token
    
    # Logout
    await auth.logout()

# Com context manager (recomendado)
async def auth_context():
    async with AuthService().context() as auth:
        ws, profile = await auth.login("email", "senha")
        # Trabalhar aqui
        # Logout automÃ¡tico
```

### ğŸ¦ AccountService | ServiÃ§o de Conta

```python
from iq_core import AccountService
from iq_core.entities import AccountType

async def gerenciar_contas():
    # Assumindo ws e profile inicializados
    account_service = AccountService(ws, profile)
    
    # Carregar saldos
    await account_service.load_balances()
    
    # Obter conta ativa
    active = account_service.active_account()
    print(f"Conta ativa: {active.type} - ${active.amount}")
    
    # Listar todas as contas
    all_accounts = account_service.accounts()
    for account in all_accounts:
        print(f"{account.type}: ${account.amount}")
    
    # Obter conta especÃ­fica por ID
    specific_account = account_service.accounts(balance_id=12345)
    
    # Trocar conta ativa
    await account_service.switch_active_account(AccountType.REAL)
```

### ğŸ” InstrumentService | ServiÃ§o de Instrumentos

```python
from iq_core import InstrumentService

async def buscar_instrumentos():
    service = InstrumentService(ws)
    
    # Buscar todos os instrumentos
    all_instruments = await service.fetch()
    
    # Buscar instrumento especÃ­fico
    eurusd = await service.fetch(filter_by="EURUSD")
    
    # Buscar por ID
    instrument_by_id = await service.fetch(filter_by=1)
    
    # Busca avanÃ§ada
    forex_instruments = await service.fetch(
        groups=["forex"],
        types=["binary-option", "digital-option"],
        only_open=True,
        limit=10,
        offset=0,
        otc=False  # Excluir OTC
    )
    
    # Grupos disponÃ­veis: forex, equity, commodity, index, crypto, etc.
    # Tipos disponÃ­veis: binary-option, turbo-option, blitz-option, digital-option
    
    for instrument in forex_instruments:
        print(f"{instrument.name}: Lucro {instrument.trading.profit}")
        print(f"Aberto: {instrument.is_open}")
        print(f"NegociÃ¡vel: {instrument.is_tradable()}")
```

### ğŸ“Š CandleService | ServiÃ§o de Velas

```python
from iq_core import CandleService
from datetime import datetime, timedelta

async def analisar_velas():
    candle_service = CandleService(ws)
    
    # Obter velas histÃ³ricas
    candles = await candle_service.get_candles(
        active_id=1,      # ID do ativo
        quantity=50,      # Quantidade de velas
        size=300,         # Tamanho em segundos (5 min)
        from_time=datetime.now() - timedelta(hours=4)
    )
    
    if candles:
        print(f"Obtidas {len(candles)} velas")
        last_candle = candles[-1]
        print(f"Ãšltima vela: {last_candle.close}")
    
    # Stream de velas em tempo real
    async for live_candle in candle_service.stream(active_id=1, size=60):
        print(f"Nova vela: O:{live_candle.open} C:{live_candle.close}")
        print(f"Volume: {live_candle.volume}")
        break  # Para o exemplo
```

### ğŸ’¹ ServiÃ§os de Trading | Trading Services

#### ğŸ¯ BinaryTradeService | OpÃ§Ãµes BinÃ¡rias

```python
from iq_core import BinaryTradeService
from iq_core.entities import Signal, Direction, Duration, SignalType
from decimal import Decimal

async def trading_binario():
    binary_service = BinaryTradeService(ws, profile)
    
    # Criar sinal
    signal = Signal(
        instrument=eurusd,
        balance_id=profile.balance_id,
        direction=Direction.CALL,
        amount=Decimal("10.00"),
        expiration=Duration("5m"),
        type=SignalType.BINARY
    )
    
    # Abrir trade
    trade_id = await binary_service.open_trade(signal)
    print(f"Trade binÃ¡rio aberto: {trade_id}")
    
    # Verificar status
    is_closed, result = await binary_service.trade_status(trade_id)
    if is_closed and result:
        print(f"Resultado: {result.result}")
        print(f"Lucro: ${result.profit}")
```

#### ğŸ’ DigitalTradeService | OpÃ§Ãµes Digitais

```python
from iq_core import DigitalTradeService

async def trading_digital():
    digital_service = DigitalTradeService(ws, profile)
    
    signal = Signal(
        instrument=btc_instrument,
        balance_id=profile.balance_id,
        direction=Direction.PUT,
        amount=Decimal("25.00"),
        expiration=Duration("15m"),
        type=SignalType.DIGITAL
    )
    
    try:
        trade_id = await digital_service.open_trade(signal)
        print(f"Trade digital aberto: {trade_id}")
        
        # Verificar resultado
        is_closed, result = await digital_service.trade_status(trade_id)
        
    except TradingError as e:
        print(f"Erro: {e}")
```

#### âš¡ BlitzTradeService | OpÃ§Ãµes Blitz

```python
from iq_core import BlitzTradeService

async def trading_blitz():
    blitz_service = BlitzTradeService(ws, profile)
    
    # Trade rÃ¡pido de 30 segundos
    signal = Signal(
        instrument=gold_instrument,
        balance_id=profile.balance_id,
        direction=Direction.CALL,
        amount=Decimal("5.00"),
        expiration=Duration("30s"),
        type=SignalType.BLITZ
    )
    
    trade_id = await blitz_service.open_trade(signal)
    print(f"Trade Blitz aberto: {trade_id}")
```

#### ğŸ’± ForexTradeService | Forex

```python
from iq_core import ForexTradeService

async def trading_forex():
    forex_service = ForexTradeService(ws)
    
    signal = Signal(
        instrument=eurusd,
        balance_id=profile.balance_id,
        direction=Direction.CALL,
        amount=Decimal("100.00"),
        expiration=Duration("1h"),
        type=SignalType.FOREX
    )
    
    # Abrir posiÃ§Ã£o
    trade_id = await forex_service.open_trade(signal)
    
    # Fechar posiÃ§Ã£o
    closed = await forex_service.close_trade(trade_id)
    
    # Status da posiÃ§Ã£o
    status = await forex_service.trade_status(trade_id)
```

### ğŸ¯ TradingManagerService | Gerenciador de Trading

```python
from iq_core import TradingManagerService, BinaryTradeService, DigitalTradeService

async def gerenciamento_avancado():
    # Configurar serviÃ§os
    services = {
        SignalType.BINARY: BinaryTradeService(ws, profile),
        SignalType.DIGITAL: DigitalTradeService(ws, profile),
    }
    
    # Criar gerenciador
    async with TradingManagerService(
        start_balance=1000.0,      # Saldo inicial
        stop_win_percent=20.0,     # Stop win 20%
        stop_loss_percent=10.0,    # Stop loss 10%
        services=services,
        max_open_trades=3          # MÃ¡x 3 trades simultÃ¢neos
    ) as manager:
        
        # Callback para trades finalizados
        async def on_trade_finished(result, mgr):
            print(f"Trade finalizado: {result.result}")
            print(f"Saldo: ${mgr.balance}")
            print(mgr.summary())
        
        manager.register(on_trade_finished)
        
        # Propriedades Ãºteis
        print(f"Saldo inicial: ${manager.start_balance}")
        print(f"Saldo atual: ${manager.balance}")
        print(f"Lucro: ${manager.profit}")
        print(f"Stop win: ${manager.stop_win}")
        print(f"Stop loss: ${manager.stop_loss}")
        print(f"Total operaÃ§Ãµes: {manager.total_operations}")
        print(f"VitÃ³rias: {manager.total_wins}")
        print(f"Derrotas: {manager.total_losses}")
        print(f"Empates: {manager.total_draws}")
        print(f"% Ganho: {manager.gain_percent}")
        print(f"% Perda: {manager.loss_percent}")
        
        # VerificaÃ§Ãµes
        if manager.can_trade():
            print("Pode operar")
        
        if manager.is_limit_reached():
            print("Limite atingido")
        
        if manager.instrument_limit_reached(instrument_id=1):
            print("Limite do instrumento atingido")
        
        # Executar sinal
        result = await manager.execute(signal)
        
        # RelatÃ³rio
        print(manager.summary())
```

### ğŸ“Š TraderMoodService | Humor do Trader

```python
from iq_core import TraderMoodService

async def analisar_sentimento():
    mood_service = TraderMoodService(ws)
    
    # Monitorar humor para EUR/USD (ID=1)
    async for mood_value in mood_service.subscribe(instrument_id=1):
        print(f"Humor dos traders: {mood_value}%")
        
        # EstratÃ©gia baseada no sentimento
        if mood_value > 70:
            print("Traders muito otimistas - considerar PUT")
        elif mood_value < 30:
            print("Traders muito pessimistas - considerar CALL")
        else:
            print("Sentimento neutro")
        
        # Parar apÃ³s primeira leitura (exemplo)
        break
```

### ğŸ’° CotationService | ServiÃ§o de CotaÃ§Ã£o

```python
from iq_core import CotationService

async def obter_cotacao():
    cotation_service = CotationService(ws)
    
    # Gerar cotaÃ§Ã£o para EUR/USD
    cotation = await cotation_service.generate(active_id=1, size=300)
    
    if cotation:
        print(f"CotaÃ§Ã£o gerada: {cotation}")
    else:
        print("NÃ£o foi possÃ­vel obter cotaÃ§Ã£o")
```

### ğŸ”§ TokenManager | Gerenciador de Tokens

```python
from iq_core import TokenManager

# Criar gerenciador
token_manager = TokenManager(
    directory=".tokens",    # DiretÃ³rio dos tokens
    keyfile=".token_key"   # Arquivo da chave
)

# Salvar token
token_manager.set_token("email@exemplo.com", "token_secreto")

# Obter token
token = token_manager.get_token("email@exemplo.com")

# Remover token
token_manager.remove_token("email@exemplo.com")

# Listar todos os tokens
all_tokens = token_manager.tokens
```

---

## ğŸŒ WebSocket Client

### ğŸ”Œ Cliente WebSocket AvanÃ§ado

```python
from iq_core.websocket import WebSocketClient
from iq_core.entities import Message

async def websocket_avancado():
    ws = WebSocketClient()
    
    # Conectar
    await ws.connect("seu_token_ssid")
    
    # Enviar mensagem personalizada
    response = await ws.request({
        "name": "get-candles",
        "version": "2.0",
        "body": {
            "active_id": 1,
            "size": 300,
            "count": 10,
            "to": ws.current_server_time()
        }
    })
    
    # Subscrever eventos
    await ws.subscribe(
        name="candle-generated",
        version="2.0",
        params={"routingFilters": {"active_id": 1, "size": 300}}
    )
    
    # Callback para eventos
    @ws.handle("candle-generated")
    async def on_candle(data):
        print(f"Nova vela: {data}")
    
    # Aguardar evento com condiÃ§Ã£o
    candle_data = await ws.wait_for(
        name="candle-generated",
        condition=lambda data: data.get("close", 0) > 1.1200,
        timeout=60.0
    )
    
    # Tempo do servidor
    server_time = ws.current_server_time()      # Milissegundos
    server_time_s = ws.current_server_time(ms=False)  # Segundos
    
    # Tempo local da conexÃ£o
    local_time = ws.local_time()
    
    # Calcular expiraÃ§Ã£o
    expiration, index = ws.get_expiration(duration=5)  # 5 minutos
    
    # Cancelar subscriÃ§Ã£o
    await ws.unsubscribe(
        name="candle-generated",
        params={"routingFilters": {"active_id": 1, "size": 300}}
    )
    
    # Remover callback
    ws.off("candle-generated", on_candle)
    
    await ws.close()
```

### ğŸ“¨ Entidade Message

```python
from iq_core.entities import Message, MessageType

# Criar mensagens
send_msg = Message.send(
    request_id=123,
    msg={"name": "get-profile", "version": "1.0", "body": {}}
)

subscribe_msg = Message.subscribe(
    sid=456,
    name="candle-generated",
    version="2.0",
    params={"routingFilters": {"active_id": 1}}
)

unsubscribe_msg = Message.unsubscribe(
    sid=456,
    name="candle-generated",
    version="2.0"
)

set_options_msg = Message.set_options(
    request_id=789,
    send_results=True
)

auth_msg = Message.authenticate(ssid="token_here")

# Converter para dicionÃ¡rio
msg_dict = send_msg.to_dict()

# Criar a partir de dicionÃ¡rio
msg_from_dict = Message.from_dict(msg_dict)

# RepresentaÃ§Ã£o em string
print(str(send_msg))  # JSON formatado
```

---

## âš ï¸ ExceÃ§Ãµes | Exceptions

### ğŸ›¡ï¸ Hierarquia de ExceÃ§Ãµes

```python
from iq_core.exceptions import (
    IQOptionError,           # ExceÃ§Ã£o base
    AuthenticationError,     # Erro de autenticaÃ§Ã£o
    ConnectionError,         # Erro de conexÃ£o
    NetworkUnavailableError, # Rede indisponÃ­vel
    TradingError,           # Erro de trading
    ValidationError,        # Erro de validaÃ§Ã£o
    InvalidTargetTime       # Tempo alvo invÃ¡lido
)

async def tratamento_erros():
    try:
        auth = AuthService()
        ws, profile = await auth.login("email", "senha")
        
    except AuthenticationError as e:
        print(f"Falha na autenticaÃ§Ã£o: {e}")
        
    except NetworkUnavailableError as e:
        print(f"Problema de rede: {e}")
        
    except TradingError as e:
        print(f"Erro no trading: {e}")
        
    except ValidationError as e:
        print(f"Dados invÃ¡lidos: {e}")
        
    except InvalidTargetTime as e:
        print(f"Tempo invÃ¡lido: {e}")
        
    except ConnectionError as e:
        print(f"Erro de conexÃ£o: {e}")
        
    except IQOptionError as e:
        print(f"Erro geral da IQ Option: {e}")
        
    except Exception as e:
        print(f"Erro inesperado: {e}")
```

---

## ğŸ“– ReferÃªncia da API | API Reference

### ğŸ”§ Decoradores | Decorators

#### `@measure_time`
```python
from iq_core.anotations import measure_time

@measure_time
async def minha_funcao():
    # FunÃ§Ã£o serÃ¡ cronometrada automaticamente
    pass
```

#### `@handle_network_errors`
```python
from iq_core.anotations import handle_network_errors

@handle_network_errors
async def operacao_rede():
    # Erros de rede serÃ£o tratados automaticamente
    pass
```

### ğŸ›ï¸ Classes Principais | Core Classes

#### Duration
- `Duration(value)` - Criar duraÃ§Ã£o (string ou nÃºmero)
- `.minutes()` - Converter para minutos (int)
- `.seconds()` - Converter para segundos (float)
- `.ms()` - Converter para milissegundos (float)
- `.timestamp()` - Timestamp futuro (int)
- `.until(time)` - DuraÃ§Ã£o atÃ© horÃ¡rio "HH:MM"
- `.add(value)` - Adicionar valor
- `.sub(value)` - Subtrair valor
- Operadores: `+`, `-`, `*`, `==`, `!=`, `<`, `<=`, `>`, `>=`

#### Signal
- `Signal(instrument, balance_id, direction, amount, expiration, type)`
- ValidaÃ§Ã£o automÃ¡tica de parÃ¢metros
- Tipos: BINARY, DIGITAL, BLITZ, FOREX
- DireÃ§Ãµes: CALL, PUT

#### Instrument
- `.is_tradable()` - Verificar se pode ser negociado
- `.is_open` - Propriedade de status de abertura
- `.trading` - InformaÃ§Ãµes de trading (TradingInfo)

### ğŸ”§ API dos ServiÃ§os | Services API

#### AuthService
- `login(email, password)` - Autenticar usuÃ¡rio
- `logout()` - Desconectar
- `context()` - Context manager
- `.token` - Token atual
- `.is_authenticated` - Status de autenticaÃ§Ã£o

#### InstrumentService
- `fetch(**filters)` - Buscar instrumentos
- Filtros disponÃ­veis:
  - `filter_by`: ID ou sÃ­mbolo especÃ­fico
  - `limit`: Limitar resultados
  - `offset`: PaginaÃ§Ã£o
  - `otc`: Incluir/excluir OTC
  - `groups`: Lista de grupos
  - `types`: Lista de tipos
  - `only_open`: Apenas abertos

#### CandleService
- `get_candles(active_id, quantity, size, from_time)` - Dados histÃ³ricos
- `stream(active_id, size)` - Stream em tempo real

#### Trading Services
- `open_trade(signal)` - Abrir operaÃ§Ã£o
- `trade_status(trade_id)` - Status da operaÃ§Ã£o
- `close_trade(trade_id)` - Fechar operaÃ§Ã£o (Forex)

#### TradingManagerService
- `execute(signal)` - Executar com gestÃ£o de risco
- `register(callback)` - Registrar callback
- `unregister(callback)` - Remover callback
- `can_trade()` - Verificar se pode operar
- `is_limit_reached()` - Verificar limites
- `instrument_limit_reached(id)` - Limite por instrumento
- `close()` - Fechar gerenciador
- Propriedades: `balance`, `profit`, `total_operations`, etc.

#### WebSocketClient
- `connect(ssid)` - Conectar
- `subscribe(name, version, params)` - Subscrever
- `unsubscribe(name, version, params)` - Cancelar subscriÃ§Ã£o
- `request(msg, name)` - RequisiÃ§Ã£o
- `send(msg)` - Enviar mensagem
- `receive(name, request_id, timeout)` - Receber resposta
- `handle(name)` - Decorator para callbacks
- `on(name, callback)` - Registrar callback
- `off(name, callback)` - Remover callback
- `wait_for(name, condition, timeout)` - Aguardar evento
- `current_server_time(ms)` - Tempo do servidor
- `local_time()` - Tempo local da conexÃ£o
- `get_expiration(duration)` - Calcular expiraÃ§Ã£o
- `close()` - Fechar conexÃ£o

---

## ğŸš€ Dicas de Performance | Performance Tips

### ğŸ‡§ğŸ‡· OtimizaÃ§Ãµes

1. **Use Context Managers**: Sempre use `async with` para gerenciar recursos
2. **Reutilize ConexÃµes**: Mantenha a conexÃ£o WebSocket ativa
3. **Async/Await**: Aproveite a concorrÃªncia com asyncio
4. **Cache de Tokens**: Tokens sÃ£o automaticamente cacheados
5. **GestÃ£o de MemÃ³ria**: Limite histÃ³rico de dados em memÃ³ria

### ğŸ‡ºğŸ‡¸ Optimizations

1. **Use Context Managers**: Always use `async with` to manage resources
2. **Reuse Connections**: Keep WebSocket connection alive
3. **Async/Await**: Leverage concurrency with asyncio
4. **Token Caching**: Tokens are automatically cached
5. **Memory Management**: Limit historical data in memory

---

## ğŸ›¡ï¸ SeguranÃ§a | Security

### ğŸ‡§ğŸ‡· Melhores PrÃ¡ticas

- âœ… Tokens sÃ£o criptografados automaticamente
- âœ… Use variÃ¡veis de ambiente para credenciais
- âœ… Implemente rate limiting
- âœ… Monitore logs de erro
- âœ… Use HTTPS apenas

### ğŸ‡ºğŸ‡¸ Best Practices

- âœ… Tokens are automatically encrypted
- âœ… Use environment variables for credentials
- âœ… Implement rate limiting
- âœ… Monitor error logs
- âœ… Use HTTPS only

---

## ğŸ“ License | LicenÃ§a

MIT License - see [LICENSE](LICENSE) file for details.

---

## ğŸ¤ Contributing | Contribuindo

### ğŸ‡§ğŸ‡· Como Contribuir

1. Fork o projeto
2. Crie uma branch para sua feature
3. Commit suas mudanÃ§as
4. Push para a branch
5. Abra um Pull Request

### ğŸ‡ºğŸ‡¸ How to Contribute

1. Fork the project
2. Create a feature branch
3. Commit your changes
4. Push to the branch
5. Open a Pull Request

---

## ğŸ“ Support | Suporte

- ğŸ“§ Email: profissional.celiojunior@outlook.com
- ğŸ› Issues: [GitHub Issues](https://github.com/celiovmjr/iq-core/issues)
- ğŸ“– Documentation: [GitHub Wiki](https://github.com/celiovmjr/iq-core/wiki)

---

<div align="center">

**ğŸ‡§ğŸ‡· Feito com â¤ï¸ para a comunidade de trading**  
**ğŸ‡ºğŸ‡¸ Made with â¤ï¸ for the trading community**

â­ **Se este projeto foi Ãºtil, considere dar uma estrela!**  
â­ **If this project was helpful, consider giving it a star!**

</div>
