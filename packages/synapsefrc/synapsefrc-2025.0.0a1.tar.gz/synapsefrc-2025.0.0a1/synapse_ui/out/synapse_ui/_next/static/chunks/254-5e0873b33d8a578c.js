"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[254],{381:(e,t,a)=>{a.d(t,{A:()=>l});let l=(0,a(9946).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1243:(e,t,a)=>{a.d(t,{A:()=>l});let l=(0,a(9946).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1254:(e,t,a)=>{a.r(t),a.d(t,{default:()=>eN});var l=a(5155),s=a(2115),n=a(6695),i=a(6126),r=a(6051),o=a(7778),c=a(2055),d=a(342),u=a(9946);let p=(0,u.A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);function x(){return(0,l.jsxs)(n.Zp,{style:{backgroundColor:r.pk},className:"border-gray-700 h-full flex flex-col",children:[(0,l.jsx)(n.aR,{}),(0,l.jsx)(n.Wu,{className:"flex-grow flex items-center justify-center min-h-140",style:{color:r.zq},children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(p,{className:"w-16 h-16 mx-auto mb-2 opacity-50"}),(0,l.jsx)("p",{className:"select-none",children:"Pipeline Results"}),(0,l.jsx)("p",{className:"text-sm select-none",children:"Results will appear here"})]})})]})}var m=a(285),h=a(6877),y=a(3717);let f=(0,u.A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var v=a(4020);let g=(0,u.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),j=(0,u.A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),b=(0,u.A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var N=a(8698),w=a(9434);function k(e){let{...t}=e;return(0,l.jsx)(N.bL,{"data-slot":"dropdown-menu",...t})}function z(e){let{...t}=e;return(0,l.jsx)(N.l9,{"data-slot":"dropdown-menu-trigger",...t})}function E(e){let{className:t,sideOffset:a=4,...s}=e;return(0,l.jsx)(N.ZL,{children:(0,l.jsx)(N.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,w.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...s})})}function P(e){let{className:t,inset:a,variant:s="default",...n}=e;return(0,l.jsx)(N.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":s,className:(0,w.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}var S=a(678),C=a(9076),A=a(6978),T=a(1071),_=a(5196),I=a(4416),q=a(1035),V=a(1222),M=a(6335);function R(e){let{visible:t,setVisible:a,pipelineTypes:n,socket:i,index:o}=e,[d,u]=(0,s.useState)(Array.from(n.values())[0]),[p,x]=(0,s.useState)("New Pipeline");return(0,l.jsxs)(q.L,{visible:t,onClose:()=>a(!1),className:"w-[40vw] h-[30vh] -translate-y-40",children:[(0,l.jsxs)(c.V,{gap:"gap-2",children:[(0,l.jsx)(V.A,{label:"Pipeline Name",value:p,onChange:x,textSize:"text-xl"}),(0,l.jsx)(S.m,{label:"Pipeline Type",textSize:"text-xl",value:d,onValueChange:u,options:Array.from(n.values().filter(e=>!(e.type.startsWith("$$")&&e.type.endsWith("$$")))).map(e=>({label:e.type,value:e}))}),(0,l.jsxs)("h2",{className:"text-xl text-center",style:{color:r.zq},children:["Pipeline Index: #",o]})]}),(0,l.jsx)("div",{className:"h-5"}),(0,l.jsxs)(c.f,{gap:"gap-2 pt-4 items-center justify-center",children:[(0,l.jsx)(m.$,{disabled:0===p.length,variant:"outline",className:"rounded-md bg-zinc-900 hover:bg-zinc-700 text-lg cursor-pointer",style:{borderColor:r.Cz,color:r.zq},onClick:()=>{a(!1);let e=M.wS.create({type:M.sE.MESSAGE_TYPE_PROTO_ADD_PIPELINE,pipelineInfo:C.hz.create({name:p,type:d.type,index:o===-1/0?0:o,settingsValues:{}})}),t=M.wS.encode(e).finish();null==i||i.sendBinary(t)},children:(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)(_.A,{}),"Add Pipeline"]})}),(0,l.jsx)(m.$,{variant:"outline",className:"rounded-md bg-zinc-900 hover:bg-zinc-700 text-lg cursor-pointer",style:{borderColor:r.Cz,color:r.zq},onClick:()=>a(!1),children:(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)(I.A,{}),"Close"]})})]})]})}function O(e){let{visible:t,setVisible:a,requestedType:s,currentType:n,setPipelineType:i}=e;return(0,l.jsx)(q.L,{visible:t,onClose:()=>a(!1),className:"w-[40vw] h-[30vh] -translate-y-40",children:(0,l.jsxs)(c.V,{gap:"gap-2",children:[(0,l.jsxs)("h1",{className:"text-center text-3xl",style:{color:r.zq},children:["Are you sure you want to switch pipeline type from",(0,l.jsxs)("span",{className:"font-semibold text-blue-300",children:[" ",null==n?void 0:n.type," "]}),"to",(0,l.jsxs)("span",{className:"font-semibold text-yellow-400",children:[" ",null==s?void 0:s.type," "]}),"?"]}),(0,l.jsx)("h1",{className:"text-lg text-center",style:{color:r.zq},children:"This action will result in all the current pipeline settings being deleted and becoming the defaults for the new pipleine"}),(0,l.jsx)("div",{className:"h-4"}),(0,l.jsx)(m.$,{variant:"outline",size:"sm",className:"rounded-md cursor-pointer bg-green-600 hover:bg-green-500 border-none",onClick:()=>{null==i||i(s),a(!1)},children:(0,l.jsxs)("span",{className:"flex items-center justify-center gap-2 font-bold",style:{color:"black"},children:[(0,l.jsx)(_.A,{}),"Confirm"]})}),(0,l.jsx)(m.$,{variant:"outline",size:"sm",className:"rounded-md cursor-pointer bg-red-600 hover:bg-red-500 border-none",onClick:()=>a(!1),children:(0,l.jsxs)("span",{className:"flex items-center justify-center gap-2",style:{color:"black"},children:[(0,l.jsx)(I.A,{}),"Cancel"]})})]})})}var D=a(1243),L=a(4126);function G(e){let{visible:t,setVisible:a,socket:s,pipelineToBeDeleted:n,onRemovePipeline:i}=e;return(0,l.jsx)(q.L,{visible:t,onClose:()=>a(!1),className:"w-[40vw] h-[30vh] -translate-y-40",children:(0,l.jsxs)(c.V,{children:[(0,l.jsxs)("h2",{className:"text-2xl flex items-center gap-2 text-center",children:[(0,l.jsx)(D.A,{className:"text-yellow-400"}),(0,l.jsx)("span",{className:"text-yellow-400 text-2xl",children:"Warning:"})]}),(0,l.jsxs)("span",{style:{color:r.zq},className:"text-2xl text-center",children:["This action will delete the ",null==n?void 0:n.name," Pipeline and will not be able to be restored"]}),(0,l.jsx)("div",{className:"h-5"}),(0,l.jsxs)(c.V,{gap:"gap-2",style:{color:r.zq},children:[(0,l.jsx)(m.$,{variant:"outline",className:"rounded-md bg-zinc-800 hover:bg-zinc-700 text-lg cursor-pointer",style:{color:r.zq},onClick:()=>{if(n){let e=M.wS.create({type:M.sE.MESSAGE_TYPE_PROTO_DELETE_PIPELINE,removePipelineIndex:null==n?void 0:n.index}),t=M.wS.encode(e).finish();null==s||s.sendBinary(t),i(n)}a(!1)},children:(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)(L.A,{}),"Delete Pipeline"]})}),(0,l.jsx)(m.$,{variant:"outline",className:"rounded-md bg-zinc-800 hover:bg-zinc-700 text-lg cursor-pointer",style:{color:r.zq},onClick:()=>a(!1),children:(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)(I.A,{}),"Cancel"]})})]})]})})}function $(e){var t;let{setSelectedPipeline:a,selectedPipeline:i,selectedPipelineType:o,setSelectedPipelineType:d,selectedCamera:u,setSelectedCamera:p,cameras:x,socket:N,pipelines:w,setpipelines:_,pipelinetypes:I}=e,[q,D]=(0,s.useState)(!1),[L,$]=(0,s.useState)(!1),[B,F]=(0,s.useState)(!1),[Y,W]=(0,s.useState)(!1),[Z,H]=(0,s.useState)(void 0),[K,U]=(0,s.useState)(!1),[X,J]=(0,s.useState)("New Pipeline");return(0,s.useEffect)(()=>{i&&K&&J(i.name)},[K]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.Zp,{style:{backgroundColor:r.pk,color:r.zq},className:"border-gray-700",children:(0,l.jsxs)(n.Wu,{className:"space-y-5",children:[(0,l.jsx)("div",{className:"space-y-0",children:(0,l.jsx)(S.m,{value:u,onValueChange:e=>{p(e)},label:"Camera",options:Array.from(null!=(t=null==x?void 0:x.values())?t:[]).map(e=>({label:(0,l.jsx)("span",{children:e.name}),value:e,key:e.name}))})}),(0,l.jsx)(c.f,{gap:"gap-2",className:"items-center",children:K?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(V.A,{value:X,onChange:e=>J(e),label:"Pipeline Name"}),(0,l.jsx)(m.$,{variant:"outline",size:"sm",className:"rounded-md cursor-pointer bg-zinc-900 hover:bg-zinc-700",style:{borderColor:r.Cz,color:r.zq},onClick:()=>{U(!1)},children:(0,l.jsx)(h.A,{className:"w-4 h-4",style:{color:r.zq}})}),(0,l.jsx)(m.$,{variant:"outline",size:"sm",className:"rounded-md cursor-pointer bg-zinc-900 hover:bg-zinc-700",style:{borderColor:r.Cz,color:r.zq},onClick:()=>{if(i){let e=M.wS.create({type:M.sE.MESSAGE_TYPE_PROTO_SET_PIPELINE_NAME,setPipelineName:C.ZC.create({name:X,pipelineIndex:i.index})}),t=M.wS.encode(e).finish();null==N||N.sendBinary(t)}U(!1)},children:(0,l.jsx)(y.A,{className:"w-4 h-4",style:{color:r.zq}})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(S.m,{label:"Pipeline",value:i,disabled:!q,onValueChange:e=>a(e),options:Array.from(w.entries()).map(e=>{let[t,a]=e;return{label:(0,l.jsxs)("span",{className:"inline-flex items-center gap-2",children:[null==a?void 0:a.name," (#",t,")"," ",(null==u?void 0:u.defaultPipeline)==a.index?(0,l.jsx)(f,{className:"w-4 h-4 text-yellow-500",fill:"yellow"}):void 0]}),value:a,key:a.index.toString()}})}),(0,l.jsxs)(k,{children:[(0,l.jsx)(z,{asChild:!0,children:(0,l.jsx)(m.$,{variant:"outline",size:"sm",className:"rounded-md cursor-pointer bg-zinc-900 hover:bg-zinc-700",style:{borderColor:r.Cz,color:r.zq},children:(0,l.jsx)(v.A,{className:"w-4 h-4",style:{color:r.zq}})})}),(0,l.jsx)(E,{side:"bottom",align:"end",alignOffset:20,className:"rounded-md shadow-lg bg-zinc-800",style:{borderColor:r.Cz,borderWidth:"1px"},children:[{icon:(0,l.jsx)(y.A,{className:"w-4 h-4",style:{color:r.zq}}),label:"Rename",action:()=>U(!0),disabled:()=>void 0===i},{icon:(0,l.jsx)(g,{className:"w-4 h-4",style:{color:r.zq}}),label:"Add Pipeline",action:()=>$(!0),disabled:()=>!1},{icon:(0,l.jsx)(f,{className:"w-4 h-4",style:{color:r.zq}}),label:"Set As Default",action:()=>{if(i&&u){let e=M.wS.create({type:M.sE.MESSAGE_TYPE_PROTO_SET_DEFAULT_PIPELINE,setDefaultPipeline:T.PH.create({cameraIndex:u.index,pipelineIndex:i.index})}),t=M.wS.encode(e).finish();null==N||N.sendBinary(t)}},disabled:()=>void 0===i},{icon:(0,l.jsx)(j,{className:"w-4 h-4",style:{color:r.zq}}),label:"Duplicate",disabled:()=>void 0===i,action:()=>{if(i&&o){var e;let t=M.wS.create({type:M.sE.MESSAGE_TYPE_PROTO_ADD_PIPELINE,pipelineInfo:C.hz.create({name:"Copy Of ".concat(i.name),type:o.type,index:Math.max(...Array.from(w.keys()))+1,settingsValues:null!=(e=i.settingsValues)?e:{}})}),a=M.wS.encode(t).finish();null==N||N.sendBinary(a)}}},{icon:(0,l.jsx)(b,{className:"w-4 h-4",style:{color:r.zq}}),label:"Delete",action:()=>W(!0),disabled:()=>void 0===i||i.index==(null==u?void 0:u.defaultPipeline)}].map(e=>{let{icon:t,label:a,action:s,disabled:n}=e;return(0,l.jsxs)(P,{disabled:n(),className:"flex items-center gap-2 text-sm font-medium px-3 py-2 rounded-md cursor-pointer",style:{color:r.zq,transition:"background 0.15s ease"},onClick:s,onMouseEnter:e=>e.currentTarget.style.backgroundColor=r.CD,onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:[t,a]},a)})})]})]})}),(0,l.jsx)(S.m,{label:"Pipeline Type",value:o,onValueChange:e=>{H(e),F(!0)},options:Array.from(I.values()).filter(e=>!(e.type.startsWith("$$")&&e.type.endsWith("$$"))).map(e=>({label:e.type,value:e,key:e.type}))}),(0,l.jsx)("div",{className:"h-6"}),(0,l.jsx)("div",{className:"flex justify-center items-center",children:(0,l.jsx)(A.A,{label:"Ignore NetworkTables Pipeline",value:q,onToggleAction:D,tooltip:"Toggle to ignore using the pipeline ID from the NetworkTable entry"})})]})}),L&&(0,l.jsx)(R,{visible:L,pipelineTypes:I,setVisible:$,socket:N,index:Math.max(...Array.from(w.keys()))+1}),(0,l.jsx)(O,{visible:B,setVisible:F,requestedType:Z,currentType:o,setPipelineType:e=>{if(d(e),i&&o){var t,a;let l=M.wS.create({type:M.sE.MESSAGE_TYPE_PROTO_ADD_PIPELINE,pipelineInfo:C.hz.create({name:i.name,type:null!=(t=null==e?void 0:e.type)?t:i.type,index:i.index,settingsValues:null!=(a=i.settingsValues)?a:{}})}),s=M.wS.encode(l).finish();null==N||N.sendBinary(s)}}}),Y&&(0,l.jsx)(G,{visible:Y,setVisible:W,socket:N,pipelineToBeDeleted:i,onRemovePipeline:e=>{w.delete(e.index),_(w)}})]})}var B=a(793),F=a(5185),Y=a(6081),W=a(9196),Z=a(8905),H=a(3655),K=a(4315),U=a(5845),X=a(1285),J="Tabs",[Q,ee]=(0,Y.A)(J,[W.RG]),et=(0,W.RG)(),[ea,el]=Q(J),es=s.forwardRef((e,t)=>{let{__scopeTabs:a,value:s,onValueChange:n,defaultValue:i,orientation:r="horizontal",dir:o,activationMode:c="automatic",...d}=e,u=(0,K.jH)(o),[p,x]=(0,U.i)({prop:s,onChange:n,defaultProp:null!=i?i:"",caller:J});return(0,l.jsx)(ea,{scope:a,baseId:(0,X.B)(),value:p,onValueChange:x,orientation:r,dir:u,activationMode:c,children:(0,l.jsx)(H.sG.div,{dir:u,"data-orientation":r,...d,ref:t})})});es.displayName=J;var en="TabsList",ei=s.forwardRef((e,t)=>{let{__scopeTabs:a,loop:s=!0,...n}=e,i=el(en,a),r=et(a);return(0,l.jsx)(W.bL,{asChild:!0,...r,orientation:i.orientation,dir:i.dir,loop:s,children:(0,l.jsx)(H.sG.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:t})})});ei.displayName=en;var er="TabsTrigger",eo=s.forwardRef((e,t)=>{let{__scopeTabs:a,value:s,disabled:n=!1,...i}=e,r=el(er,a),o=et(a),c=eu(r.baseId,s),d=ep(r.baseId,s),u=s===r.value;return(0,l.jsx)(W.q7,{asChild:!0,...o,focusable:!n,active:u,children:(0,l.jsx)(H.sG.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:c,...i,ref:t,onMouseDown:(0,F.m)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():r.onValueChange(s)}),onKeyDown:(0,F.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&r.onValueChange(s)}),onFocus:(0,F.m)(e.onFocus,()=>{let e="manual"!==r.activationMode;u||n||!e||r.onValueChange(s)})})})});eo.displayName=er;var ec="TabsContent",ed=s.forwardRef((e,t)=>{let{__scopeTabs:a,value:n,forceMount:i,children:r,...o}=e,c=el(ec,a),d=eu(c.baseId,n),u=ep(c.baseId,n),p=n===c.value,x=s.useRef(p);return s.useEffect(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,l.jsx)(Z.C,{present:i||p,children:a=>{let{present:s}=a;return(0,l.jsx)(H.sG.div,{"data-state":p?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!s,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:x.current?"0s":void 0},children:s&&r})}})});function eu(e,t){return"".concat(e,"-trigger-").concat(t)}function ep(e,t){return"".concat(e,"-content-").concat(t)}ed.displayName=ec;var ex=a(4355),em=a(381);function eh(e){var t;let{selectedPipeline:a,selectedPipelineType:i,backendConnected:o,setSetting:c,setPipelines:u,pipelines:p,locked:x}=e,[m,h]=(0,s.useState)([]),[y,f]=(0,s.useState)([]);function v(){if(!i||!o){h([]),f([]);return}let e=[],t=[];i.settings.forEach(s=>{var n,i;let r=(0,l.jsx)(B.Nv,{setting:s,setValue:e=>{(0,d.sG)(e)&&(setTimeout(()=>{if(void 0!==a){let t={...a.settingsValues,[s.name]:e},l={...a,settingsValues:t},n=new Map(p);n.set(a.index,l),u(n)}},0),setTimeout(()=>{c(e,s.name,a)},0))},value:null!=(i=null!=(n=null==a?void 0:a.settingsValues[s.name])?n:s.default)?i:(0,B.vR)(""),defaultValue:s.default,locked:x},s.name+s.category);"Camera Properties"===s.category?e.push(r):t.push(r)}),h(e),f(t)}return(0,s.useEffect)(()=>{v()},[i,a,o,x]),(0,s.useEffect)(()=>{v()},[x]),(0,l.jsx)(n.Zp,{style:{backgroundColor:r.pk},className:"border-gray-700 flex-grow overflow-auto",children:(0,l.jsx)(n.aR,{children:(0,l.jsxs)(es,{defaultValue:"input",className:"w-full",style:{color:r.zq},children:[(0,l.jsxs)(ei,{className:"grid w-full grid-cols-2 border-gray-600 rounded-xl gap-2",style:{backgroundColor:r.pk},children:[(0,l.jsx)(eo,{value:"input",className:"bg-zinc-800 rounded-md data-[state=active]:bg-pink-800 hover:bg-zinc-700 transition-colors duration-200 cursor-pointer h-8",children:"Input"}),(0,l.jsx)(eo,{value:"pipeline",className:"bg-zinc-800 rounded-md data-[state=active]:bg-pink-800 hover:bg-zinc-700 transition-colors duration-200 cursor-pointer",children:null!=(t=null==i?void 0:i.type)?t:"Pipeline"})]}),(0,l.jsx)(ed,{value:"input",className:"p-6 space-y-6",children:(0,l.jsx)("div",{style:{color:r.zq},children:m.length>0?(0,l.jsx)("div",{className:"space-y-2",children:m}):(0,l.jsxs)("div",{className:"text-center",style:{color:r.zq},children:[(0,l.jsx)(ex.A,{className:"w-16 h-16 mx-auto mb-2 opacity-50"}),(0,l.jsx)("p",{className:"select-none",children:"Camera Settings"}),(0,l.jsx)("p",{className:"text-sm select-none",children:"Configure camera parameters"})]})})}),(0,l.jsx)(ed,{value:"pipeline",className:"p-6 space-y-6",children:(0,l.jsx)("div",{style:{color:r.zq},children:y.length>0?(0,l.jsx)("div",{className:"space-y-2",children:y}):(0,l.jsxs)("div",{className:"text-center",style:{color:r.zq},children:[(0,l.jsx)(em.A,{className:"w-16 h-16 mx-auto mb-2 opacity-50"}),(0,l.jsx)("p",{className:"select-none",children:"Pipeline Settings"}),(0,l.jsx)("p",{className:"text-sm select-none",children:"Configure pipeline-specific parameters"})]})})})]})})})}let ey=(0,u.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),ef=(0,u.A)("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),ev=(0,u.A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);function eg(e){let{icon:t,text:a,onClick:s}=e;return(0,l.jsx)(m.$,{variant:"outline",className:"rounded-md cursor-pointer bg-gray-800 hover:bg-gray-700 border-none h-full",onClick:s,children:(0,l.jsxs)("span",{className:"flex items-center justify-center gap-2 text-lg",style:{color:r.zq},children:[t,a]})})}function ej(e){let{locked:t,setLocked:a,save:s}=e;return(0,l.jsx)(n.Zp,{style:{backgroundColor:r.pk},className:"border-gray-700 flex flex-col h-full p-2",children:(0,l.jsx)(n.Wu,{children:(0,l.jsxs)(c.f,{gap:"gap-4",justify:"center",children:[(0,l.jsx)(eg,{text:"Save",icon:(0,l.jsx)(ey,{className:"size-10"}),onClick:s}),t?(0,l.jsx)(eg,{text:"Unlock",icon:(0,l.jsx)(ef,{className:"size-10"}),onClick:()=>a(!1)}):(0,l.jsx)(eg,{text:"Lock",icon:(0,l.jsx)(ev,{className:"size-10"}),onClick:()=>a(!0)})]})})})}function eb(e){var t,a;let{selectedCamera:s,cameraPerformance:d}=e;return(0,l.jsxs)(n.Zp,{style:{backgroundColor:r.pk},className:"border-gray-700 flex flex-col h-full max-h-[400px]",children:[(0,l.jsx)(n.aR,{children:(0,l.jsxs)(c.f,{className:"items-center justify-between",children:[(0,l.jsxs)(n.ZB,{className:"flex items-center gap-2",style:{color:r.zq},children:[(0,l.jsx)(ex.A,{className:"w-5 h-5"}),"Camera Stream"]}),(0,l.jsx)(c.f,{gap:"gap-2",className:"items-center",children:(0,l.jsxs)(i.E,{variant:"secondary",className:"bg-stone-700",style:{color:r.zq},children:[(0,l.jsx)(p,{className:"w-3 h-3 mr-1"}),"Processing @ ",null!=(t=null==d?void 0:d.fps)?t:0," FPS â€“"," ",null!=(a=null==d?void 0:d.latencyProcess.toFixed(2))?a:0,"ms latency"]})})]})}),(0,l.jsx)(n.Wu,{className:"flex-grow flex flex-col items-center justify-center",children:(0,l.jsx)(o.I,{stream:null==s?void 0:s.streamPath})})]})}function eN(){let{pipelines:e,connection:t,cameras:a,socket:n,setPipelines:i,pipelinetypes:o,cameraperformance:u}=(0,d.jg)(),[p,m]=(0,s.useState)(e.get(0)),[h,y]=(0,s.useState)(Array.from(o.values()).at(0)),[f,v]=(0,s.useState)(a.get(0)),[g,j]=(0,s.useState)(!1),[b,N]=(0,s.useState)(void 0);return(0,s.useEffect)(()=>{var t,a,l;let s=null!=(a=null!=(t=null==f?void 0:f.pipelineIndex)?t:null==p?void 0:p.index)?a:0,n=e.get(s);if(n||(s=null!=(l=null==f?void 0:f.defaultPipeline)?l:0,n=e.get(s)),n){m(n);let e=o.get(n.type);e?y(e):console.warn("Pipeline type not found for",n.type)}else console.warn("No valid pipeline found for camera",f)},[e,o,f]),(0,s.useEffect)(()=>{f&&N(u.get(f.index))},[u]),(0,s.useEffect)(()=>{Array.from(a.keys()).length>0&&v(T.GI.create(a.get(0)))},[a]),(0,s.useEffect)(()=>{document.title="Synapse Client"},[]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"w-full min-h-screen text-pink-600",style:{backgroundColor:r.Tp,color:r.zq},children:(0,l.jsx)("div",{className:"max-w-8xl mx-auto",style:{backgroundColor:r.Tp,borderRadius:"12px",padding:"10px"},children:(0,l.jsxs)(c.f,{gap:"gap-2",className:"h-full",children:[(0,l.jsxs)(c.V,{className:"flex-[2] space-y-2 h-full",children:[(0,l.jsx)(eb,{selectedCamera:f,cameraPerformance:b}),(0,l.jsx)(eh,{pipelines:e,setPipelines:i,selectedPipeline:p,selectedPipelineType:h,backendConnected:t.backend,setSetting:(e,t,a)=>{if((0,d.sG)(e)){let l=M.wS.create({type:M.sE.MESSAGE_TYPE_PROTO_SET_SETTING,setPipelineSetting:C.Ob.create({pipelineIndex:a.index,value:e,setting:t})}),s=M.wS.encode(l).finish();null==n||n.sendBinary(s)}},locked:g})]}),(0,l.jsxs)(c.V,{className:"flex-[1.2] space-y-2 h-full",children:[(0,l.jsx)($,{setpipelines:i,pipelines:e,pipelinetypes:o,socket:n,setSelectedPipeline:e=>{void 0!==e&&(m(e),y(o.get(e.type)),f&&setTimeout(()=>{let t=M.wS.create({type:M.sE.MESSAGE_TYPE_PROTO_SET_PIPELINE_INDEX,setPipelineIndex:C.Wi.create({cameraIndex:f.index,pipelineIndex:e.index})}),a=M.wS.encode(t).finish();null==n||n.sendBinary(a)},0))},selectedPipeline:p,setSelectedPipelineType:t=>{y(t),setTimeout(()=>{if(p&&t){let a=M.wS.create({type:M.sE.MESSAGE_TYPE_PROTO_SET_TYPE_FOR_PIPELINE,setPipelineType:C.Yc.create({newType:t.type,pipelineIndex:p.index})}),l=M.wS.encode(a).finish();null==n||n.sendBinary(l),p.type=t.type;let s=new Map(e);s.set(p.index,p),i(s)}},0)},selectedPipelineType:h,cameras:a,setSelectedCamera:v,selectedCamera:f}),(0,l.jsx)(ej,{locked:g,setLocked:j,save:()=>{let e=M.wS.create({type:M.sE.MESSAGE_TYPE_PROTO_SAVE,removePipelineIndex:-1}),t=M.wS.encode(e).finish();null==n||n.sendBinary(t)}}),(0,l.jsx)(x,{})]})]})})})})}}}]);