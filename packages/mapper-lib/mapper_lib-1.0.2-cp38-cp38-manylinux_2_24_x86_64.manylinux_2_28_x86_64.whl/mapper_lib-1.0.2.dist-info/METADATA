Metadata-Version: 2.1
Name: mapper-lib
Version: 1.0.2
Summary: Uma biblioteca C++ para mapeamento e transformaÃ§Ã£o de dados
Home-page: https://github.com/compre-sua-peca/csp_mapper
Author: Gustavo de Oliveira
Author-email: Gustavo de Oliveira <devops15@compresuapeca.com.br>
Maintainer-email: Compre Sua PeÃ§a <devops4@compresuapeca.com.br>
License: MIT
Project-URL: Homepage, https://github.com/compre-sua-peca/csp_mapper
Project-URL: Repository, https://github.com/compre-sua-peca/csp_mapper
Project-URL: Issues, https://github.com/compre-sua-peca/csp_mapper/issues
Keywords: mapping,data transformation,c++,performance
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: C++
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.7
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: pybind11>=2.0.0

# Mapper Lib

Uma biblioteca Python de alta performance para mapeamento e transformaÃ§Ã£o de dados, construÃ­da com extensÃµes C++ para mÃ¡xima eficiÃªncia.

## ğŸ“‹ DescriÃ§Ã£o

O **Mapper Lib** Ã© uma biblioteca especializada em transformar e mapear estruturas de dados JSON complexas. Ela oferece funcionalidades para:

- **Flattening**: Converter dicionÃ¡rios aninhados em estruturas planas
- **Field Mapping**: Mapear campos entre diferentes formatos usando configuraÃ§Ãµes JSON
- **High Performance**: ImplementaÃ§Ã£o em C++ para operaÃ§Ãµes rÃ¡pidas de transformaÃ§Ã£o de dados

## ğŸš€ CaracterÃ­sticas

- âš¡ **Alta Performance**: ImplementaÃ§Ã£o em C++ com bindings Python
- ğŸ”§ **ConfigurÃ¡vel**: Mapeamento baseado em arquivos JSON de configuraÃ§Ã£o
- ğŸ **Python Native**: API simples e intuitiva para Python
- ğŸ¯ **FlexÃ­vel**: Suporte a separadores customizÃ¡veis e chaves pai
- ğŸ—ï¸ **Cross-Platform**: Suporte para Windows e Linux

## ğŸ“¦ InstalaÃ§Ã£o

### PrÃ©-requisitos

- Python 3.7+
- Compilador C++ com suporte a C++17
- pybind11

### InstalaÃ§Ã£o via pip

```bash
pip install -r requirements.txt
pip install -e .
```

### InstalaÃ§Ã£o manual

```bash
# Clone o repositÃ³rio
git clone https://github.com/compre-sua-peca/csp_mapper.git
cd csp_mapper

# Instale as dependÃªncias
pip install -r requirements.txt

# Compile e instale
python setup.py build_ext --inplace
python setup.py install
```

## ğŸ’» Exemplos de Uso

### ğŸ“ Como Funciona a ConfiguraÃ§Ã£o

A biblioteca **lÃª arquivos JSON de configuraÃ§Ã£o** do sistema de arquivos. O arquivo deve conter um dicionÃ¡rio onde cada chave representa um "trigger" (gatilho) que define como mapear os campos.

**Estrutura tÃ­pica do arquivo de configuraÃ§Ã£o:**
```json
{
    "trigger_1": {
        "campo_saida_1": "caminho.campo.entrada.1",
        "campo_saida_2": "caminho.campo.entrada.2"
    },
    "trigger_2": {
        "outro_campo": "outro.caminho.campo"
    }
}
```

### Exemplo 1: Mapeamento BÃ¡sico

**Primeiro, crie o arquivo de configuraÃ§Ã£o `mapping_config.json`:**
```json
{
    "user_mapping": {
        "nome": "user.personal.name",
        "idade": "user.personal.age",
        "endereco": "user.address.street",
        "cidade": "user.address.city",
        "pedido_id": "order.id",
        "valor_total": "order.total"
    }
}
```

**Depois, use o Python:**
```python
from mapper import mapper

# Criar instÃ¢ncia do mapper
mapper_instance = mapper(sep=".", parent_key="data")

# Dados de entrada aninhados
input_data = {
    "user": {
        "personal": {
            "name": "JoÃ£o Silva",
            "age": 30
        },
        "address": {
            "street": "Rua das Flores",
            "city": "SÃ£o Paulo"
        }
    },
    "order": {
        "id": "12345",
        "total": 99.99
    }
}

# Mapeamento usando arquivo de configuraÃ§Ã£o
result = mapper_instance.map_dic(
    input_dict=input_data,
    config_path="mapping_config.json",
    trigger="user_mapping"
)
print(result)
```

### Exemplo 2: Mapeamento com Arquivo de ConfiguraÃ§Ã£o

**arquivo_config.json:**
```json
{
    "user_mapping": {
        "nome_completo": "user.personal.name",
        "idade_usuario": "user.personal.age",
        "endereco_completo": "user.address.street",
        "cidade_usuario": "user.address.city"
    },
    "order_mapping": {
        "id_pedido": "order.id",
        "valor": "order.total"
    }
}
```

**Python:**
```python
# Mapeamento usando arquivo de configuraÃ§Ã£o
result = mapper_instance.map_dic(
    input_dict=input_data,
    config_path="arquivo_config.json",
    trigger="user_mapping"
)

print(result)
```

**SaÃ­da:**
```json
{
    "nome_completo": "JoÃ£o Silva",
    "idade_usuario": 30,
    "endereco_completo": "Rua das Flores",
    "cidade_usuario": "SÃ£o Paulo"
}
```

### Exemplo 3: Mapeamento sem Trigger (ConfiguraÃ§Ã£o Completa)

```python
# Mapeamento usando toda a configuraÃ§Ã£o (sem trigger especÃ­fico)
result = mapper_instance.map_dic(
    input_dict=input_data,
    config_path="arquivo_config.json"
    # trigger=None (padrÃ£o)
)

print(result)
```

**SaÃ­da:**
```json
{
    "user_mapping": {
        "nome_completo": "JoÃ£o Silva",
        "idade_usuario": 30,
        "endereco_completo": "Rua das Flores",
        "cidade_usuario": "SÃ£o Paulo"
    },
    "order_mapping": {
        "id_pedido": "12345",
        "valor": 99.99
    }
}
```

### Exemplo 4: Diferentes Separadores

```python
# Usar ponto como separador
mapper_dot = mapper(sep=".", parent_key="")
result_dot = mapper_dot.map_dic(input_data, "config.json", "user_mapping")

# Usar underscore como separador
mapper_underscore = mapper(sep="_", parent_key="")
result_underscore = mapper_underscore.map_dic(input_data, "config.json", "user_mapping")

# Usar barra como separador
mapper_bar = mapper(sep="/", parent_key="")
result_bar = mapper_bar.map_dic(input_data, "config.json", "user_mapping")

print("Resultado com ponto:", result_dot)
print("Resultado com underscore:", result_underscore)
print("Resultado com barra:", result_bar)
```

### Exemplo 5: Mapeamento com Chave Pai

```python
# Mapper com chave pai "api_data"
mapper_with_parent = mapper(sep=".", parent_key="api_data")

result_with_parent = mapper_with_parent.map_dic(input_data, "config.json", "user_mapping")
print("Resultado com chave pai 'api_data':")
print(result_with_parent)
```

## ğŸ”§ API Reference

### Classe `mapper`

#### Construtor
```python
mapper(sep: str = "|", parent_key: str = "")
```

**ParÃ¢metros:**
- `sep`: Separador para concatenar chaves aninhadas (padrÃ£o: "|")
- `parent_key`: Chave pai para prefixar todas as chaves (padrÃ£o: "")

#### MÃ©todos

##### `map_dic(input_dict: dict, config_path: str, trigger: str = None) -> dict`
MÃ©todo principal que combina flattening e mapeamento de campos.

**ParÃ¢metros:**
- `input_dict`: DicionÃ¡rio de entrada a ser mapeado
- `config_path`: Caminho para o arquivo JSON de configuraÃ§Ã£o
- `trigger`: Chave especÃ­fica na configuraÃ§Ã£o a ser usada (opcional)

**Retorna:**
- DicionÃ¡rio com dados mapeados conforme a configuraÃ§Ã£o

**Nota:** Este mÃ©todo internamente utiliza os mÃ©todos privados `_flatten_dict()` e `_mapping_fields()` para realizar o processamento, mas o usuÃ¡rio sÃ³ precisa conhecer este mÃ©todo pÃºblico.

## ğŸ“ Estrutura do Projeto

```
mapper-lib/
â”œâ”€â”€ mapper/                 # MÃ³dulo principal
â”‚   â”œâ”€â”€ __init__.py        # Inicializador do mÃ³dulo
â”‚   â”œâ”€â”€ main.cpp           # ImplementaÃ§Ã£o principal em C++
â”‚   â”œâ”€â”€ mapping_fields.cpp # LÃ³gica de mapeamento de campos
â”‚   â”œâ”€â”€ flattener.cpp      # LÃ³gica de flattening
â”‚   â””â”€â”€ includes/          # Headers especÃ­ficos por plataforma
â”œâ”€â”€ setup.py               # ConfiguraÃ§Ã£o de build
â”œâ”€â”€ pyproject.toml         # ConfiguraÃ§Ã£o do projeto
â”œâ”€â”€ requirements.txt       # DependÃªncias Python
â””â”€â”€ main.py               # Interface Python principal
```

## ğŸ› ï¸ Desenvolvimento

### CompilaÃ§Ã£o

```bash
# Compilar extensÃµes C++
python setup.py build_ext --inplace

# Instalar em modo desenvolvimento
pip install -e .
```

### Testes

```bash
# Executar testes (quando implementados)
python -m pytest tests/
```

## ğŸ“„ LicenÃ§a

Este projeto estÃ¡ licenciado sob a LicenÃ§a MIT - veja o arquivo [LICENSE](LICENSE) para detalhes.

## ğŸ‘¥ ContribuiÃ§Ã£o

ContribuiÃ§Ãµes sÃ£o bem-vindas! Por favor, sinta-se Ã  vontade para:

1. Fazer fork do projeto
2. Criar uma branch para sua feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudanÃ§as (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abrir um Pull Request

## ğŸ“ Suporte

Para suporte e dÃºvidas:

- **Autor:** Gustavo de Oliveira
- **Email:** devops15@compresuapeca.com.br
- **RepositÃ³rio:** https://github.com/compre-sua-peca/csp_mapper

## ğŸ”„ HistÃ³rico de VersÃµes

- **v1.0.2** - VersÃ£o atual com suporte cross-platform
- **v1.0.1** - Melhorias de performance
- **v1.0.0** - LanÃ§amento inicial

---

â­ Se este projeto foi Ãºtil para vocÃª, considere dar uma estrela no repositÃ³rio!
