[tox]
envlist = py27,py38,pep8,develop
skipsdist = True

[base]
project_name = obsender

[testenv]
deps =
    -r{toxinidir}/requirements.txt
    -r{toxinidir}/test-requirements.txt
setenv =
  PACKAGE_NAME=obsender
  TEST_PATH={env:PACKAGE_NAME}/tests/unit
  functional: TEST_PATH={env:PACKAGE_NAME}/tests/functional
commands =
  pytest --cov={env:PACKAGE_NAME} {posargs} --timer-top-n=10 {env:TEST_PATH}

[testenv:pep8]
basepython = python3
deps =
    hacking==2.0.0
commands =
  flake8

[testenv:venv]
commands = {posargs}

[flake8]
show-source = true
builtins = _
exclude = .venv,.git,.tox,dist,docs,*lib/python*,*egg,tools,build*

[testenv:develop]
basepython = python3
deps =
    -r{toxinidir}/requirements.txt
    -r{toxinidir}/test-requirements.txt
    ipython
usedevelop = true
