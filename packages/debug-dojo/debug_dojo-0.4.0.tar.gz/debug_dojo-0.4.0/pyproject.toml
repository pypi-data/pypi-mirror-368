[project]
    name = "debug-dojo"
    description = "Debbugging dojo for Python developers"
    authors = [
        { name = "bwrob", email = "bartosz.marcin.wroblewski@gmail.com" },
    ]
    requires-python = ">=3.10"
    dependencies = [
        "debugpy>=1.8.0",
        "ipdb>=0.13.0",
        "pudb>=2020.1",
        "pydantic>=2.11.7",
        "rich>=12.0.0",
        "tomlkit>=0.13.3",
        "typer>=0.15.0",
    ]
    license = 'MIT'
    license-files = ['LICENSE']
    keywords = [
        "debugging",
        "inspection",
        "pudb",
        "rich",
        "tools",
        "traceback",
    ]
    classifiers = [
        "Development Status :: 3 - Alpha",
        "Intended Audience :: Developers",
        "License :: OSI Approved :: MIT License",
        "Operating System :: OS Independent",
        "Programming Language :: Python :: 3.10",
        "Programming Language :: Python :: 3.11",
        "Programming Language :: Python :: 3.12",
        "Programming Language :: Python :: 3.13",
        "Topic :: Software Development :: Debuggers",
        "Topic :: Software Development :: Libraries :: Python Modules",
    ]
    version = "0.4.0"
    dynamic = ['readme']

    [project.urls]
        Homepage      = "https://github.com/bwrob/debug-dojo"
        Documentation = "https://github.com/bwrob/debug-dojo/blob/main/README.md"
        Source        = "https://github.com/bwrob/debug-dojo/tree/main/src/debug_dojo"
        Changelog     = "https://github.com/bwrob/debug-dojo/blob/main/HISTORY.md"

    [project.scripts]
        "dojo" = "debug_dojo._cli:main"

[dependency-groups]
    dev = [
        "basedpyright>=1.31.0",
        "jupyter>=1.1.1",
        "poethepoet>=0.36.0",
        "ruff>=0.12.4",
    ]

[build-system]
    requires = [
        "hatch-fancy-pypi-readme>=25.1.0",
        "hatchling",
    ]
    build-backend = "hatchling.build"

[tool.hatch.metadata]
    allow-direct-references = true

    [tool.hatch.metadata.hooks.fancy-pypi-readme]
        content-type = 'text/markdown'
        # construct the PyPI readme from README.md and HISTORY.md
        fragments = [
            { path = 'README.md' },
            { text = "\n\n## Changelog\n\n" },
            { path = 'HISTORY.md' },
        ]


[tool.hatch.build.targets.sdist]
    include = [
        "/README.md",
        "/HISTORY.md",
        "/src/debug_dojo",
    ]

[tool.basedpyright]
    typeCheckingMode = "basic"
    pythonVersion    = "3.10"
    strict           = ["src/debug_dojo/*"]
    ignore           = ["examples"]

[tool.poe.tasks]
    lint = "ruff check --fix src"
    format = "ruff format src"
    type-check = "basedpyright --project pyproject.toml src/debug_dojo"
    code-quality = ["format", "lint", "type-check"]
    publish = [
        "code-quality",
        { cmd = "rm -rf dist" },
        { cmd = "uv build" },
        { cmd = "uv publish" },
    ]
