import{S as Ue,i as Ae,s as Ce,N as qe,O as Xe,a as $,d,f as c,g as M,h as p,n as ce,e as v,c as w,q as D,y as Te,u as ze,r as V,X as Et,T as pt,C as K,l as q,D as L,p as X,E as O,F as j,H as xe,I as Fe,K as Ve,v as _t,k as We,$ as It,G as ie,t as we,b as $e,j as ke,L as Pe,J as Dt,P as ut,w as xt,U as Ft}from"../chunks/BCvnKofF.js";import"../chunks/IHki7fMi.js";import{F as Vt}from"../chunks/CU2r43ac.js";import{t as G}from"../chunks/B1cg3iGf.js";import{g as Ct}from"../chunks/CGYlI_FG.js";import{p as Nt}from"../chunks/CGgjhg1p.js";import{a as St,c as Tt,s as zt,u as Bt,k as Mt}from"../chunks/MoMhNtwQ.js";import{u as Wt,a as Pt,g as Ut}from"../chunks/D9ZnwwmI.js";import{g as At,r as Kt,e as Lt,f as Ot,u as jt,h as Ht,a as Rt}from"../chunks/D1Au2jbq.js";import{y as qt,v as Xt}from"../chunks/1xVb8RU2.js";import{S as Gt}from"../chunks/CVAJiM1o.js";import{e as vt}from"../chunks/CSm0urZa.js";import{F as Jt}from"../chunks/BUOVaDDn.js";import{A as Yt}from"../chunks/fItBz09P.js";import"../chunks/CsmmmNou.js";import{b as Qt,c as ft}from"../chunks/BQslAB__.js";import{f as Zt}from"../chunks/CBc5jlPY.js";import{D as el}from"../chunks/BiInIGnl.js";import{T as dt}from"../chunks/DRSCq1dG.js";import{F as tl}from"../chunks/xDnEWi4S.js";import"../chunks/I1CDPYOB.js";import{M as ll}from"../chunks/CAH0SlZd.js";import{R as gt,V as rl,D as sl}from"../chunks/BxImfhqS.js";import{X as nl}from"../chunks/BKFELi7o.js";import{M as ol}from"../chunks/DV_KO-L6.js";import{C as al}from"../chunks/Di5VIvz7.js";import{C as il}from"../chunks/ZQJa094U.js";import{L as cl}from"../chunks/CxpIi-1u.js";import{A as fl}from"../chunks/BUPSeXz7.js";import{S as ul}from"../chunks/xhfJ-qLd.js";function dl(s){let e,t;return{c(){e=qe("svg"),t=qe("path"),this.h()},l(l){e=Xe(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=$(e);t=Xe(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){M(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ce,o:ce,d(l){l&&d(e)}}}function ml(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,r=a.strokeWidth)},[l,r]}class hl extends Ue{constructor(e){super(),Ae(this,e,ml,dl,Ce,{className:0,strokeWidth:1})}}function wt(s,e,t){const l=s.slice();return l[6]=e[t],l}function $t(s){var o,i,f,_,I,b;let e,t,l,r;function a(){return s[4](s[6])}function n(){return s[5](s[6])}return t=new Jt({props:{className:"w-full",colorClassName:(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition",small:s[2],item:s[6],name:((o=s[6])==null?void 0:o.name)??((f=(i=s[6])==null?void 0:i.meta)==null?void 0:f.name),type:"file",size:((_=s[6])==null?void 0:_.size)??((b=(I=s[6])==null?void 0:I.meta)==null?void 0:b.size)??"",loading:s[6].status==="uploading",dismissible:!0}}),t.$on("click",a),t.$on("dismiss",n),{c(){e=v("div"),K(t.$$.fragment),l=q(),this.h()},l(h){e=w(h,"DIV",{class:!0});var x=$(e);L(t.$$.fragment,x),l=X(x),x.forEach(d),this.h()},h(){c(e,"class","mt-1 px-2")},m(h,x){M(h,e,x),O(t,e,null),p(e,l),r=!0},p(h,x){var C,P,U,N,T,k;s=h;const E={};x&3&&(E.colorClassName=(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition"),x&4&&(E.small=s[2]),x&2&&(E.item=s[6]),x&2&&(E.name=((C=s[6])==null?void 0:C.name)??((U=(P=s[6])==null?void 0:P.meta)==null?void 0:U.name)),x&2&&(E.size=((N=s[6])==null?void 0:N.size)??((k=(T=s[6])==null?void 0:T.meta)==null?void 0:k.size)??""),x&2&&(E.loading=s[6].status==="uploading"),t.$set(E)},i(h){r||(D(t.$$.fragment,h),r=!0)},o(h){V(t.$$.fragment,h),r=!1},d(h){h&&d(e),j(t)}}}function pl(s){let e,t,l=vt(s[1]),r=[];for(let n=0;n<l.length;n+=1)r[n]=$t(wt(s,l,n));const a=n=>V(r[n],1,1,()=>{r[n]=null});return{c(){e=v("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=w(n,"DIV",{class:!0});var o=$(e);for(let i=0;i<r.length;i+=1)r[i].l(o);o.forEach(d),this.h()},h(){c(e,"class","max-h-full flex flex-col w-full")},m(n,o){M(n,e,o);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(n,[o]){if(o&15){l=vt(n[1]);let i;for(i=0;i<l.length;i+=1){const f=wt(n,l,i);r[i]?(r[i].p(f,o),D(r[i],1)):(r[i]=$t(f),r[i].c(),D(r[i],1),r[i].m(e,null))}for(Te(),i=l.length;i<r.length;i+=1)a(i);ze()}},i(n){if(!t){for(let o=0;o<l.length;o+=1)D(r[o]);t=!0}},o(n){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)V(r[o]);t=!1},d(n){n&&d(e),Et(r,n)}}}function _l(s,e,t){const l=pt();let{selectedFileId:r=null}=e,{files:a=[]}=e,{small:n=!1}=e;const o=f=>{f.status!=="uploading"&&l("click",f.id)},i=f=>{f.status!=="uploading"&&l("delete",f.id)};return s.$$set=f=>{"selectedFileId"in f&&t(0,r=f.selectedFileId),"files"in f&&t(1,a=f.files),"small"in f&&t(2,n=f.small)},[r,a,n,l,o,i]}class gl extends Ue{constructor(e){super(),Ae(this,e,_l,pl,Ce,{selectedFileId:0,files:1,small:2})}}function vl(s){let e,t;return{c(){e=qe("svg"),t=qe("path"),this.h()},l(l){e=Xe(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=$(e);t=Xe(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){M(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ce,o:ce,d(l){l&&d(e)}}}function wl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,r=a.strokeWidth)},[l,r]}class $l extends Ue{constructor(e){super(),Ae(this,e,wl,vl,Ce,{className:0,strokeWidth:1})}}function kl(s){let e,t;return{c(){e=qe("svg"),t=qe("path"),this.h()},l(l){e=Xe(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=$(e);t=Xe(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){M(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ce,o:ce,d(l){l&&d(e)}}}function bl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,r=a.strokeWidth)},[l,r]}class yl extends Ue{constructor(e){super(),Ae(this,e,bl,kl,Ce,{className:0,strokeWidth:1})}}function Il(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,r;return{c(){e=v("button"),e.innerHTML=t,this.h()},l(a){e=w(a,"BUTTON",{class:!0,"data-svelte-h":!0}),It(e)!=="svelte-144k6kh"&&(e.innerHTML=t),this.h()},h(){c(e,"class","p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1")},m(a,n){M(a,e,n),l||(r=ie(e,"click",s[9]),l=!0)},p:ce,d(a){a&&d(e),l=!1,r()}}}function El(s){let e,t;return e=new dt({props:{content:s[2].t("Add Content"),$$slots:{default:[Il]},$$scope:{ctx:s}}}),{c(){K(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){O(e,l,r),t=!0},p(l,r){const a={};r&4&&(a.content=l[2].t("Add Content")),r&4098&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Dl(s){let e,t,l,r=s[2].t("Upload files")+"",a,n;return e=new hl({props:{strokeWidth:"2"}}),{c(){K(e.$$.fragment),t=q(),l=v("div"),a=we(r),this.h()},l(o){L(e.$$.fragment,o),t=X(o),l=w(o,"DIV",{class:!0});var i=$(l);a=$e(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){O(e,o,i),M(o,t,i),M(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Upload files")+"")&&ke(a,r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),j(e,o)}}}function xl(s){let e,t,l,r=s[2].t("Upload directory")+"",a,n;return e=new tl({props:{strokeWidth:"2"}}),{c(){K(e.$$.fragment),t=q(),l=v("div"),a=we(r),this.h()},l(o){L(e.$$.fragment,o),t=X(o),l=w(o,"DIV",{class:!0});var i=$(l);a=$e(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){O(e,o,i),M(o,t,i),M(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Upload directory")+"")&&ke(a,r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),j(e,o)}}}function Fl(s){let e,t,l,r=s[2].t("Sync directory")+"",a,n;return e=new yl({props:{strokeWidth:"2"}}),{c(){K(e.$$.fragment),t=q(),l=v("div"),a=we(r),this.h()},l(o){L(e.$$.fragment,o),t=X(o),l=w(o,"DIV",{class:!0});var i=$(l);a=$e(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){O(e,o,i),M(o,t,i),M(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Sync directory")+"")&&ke(a,r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),j(e,o)}}}function Vl(s){let e,t;return e=new ft({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Fl]},$$scope:{ctx:s}}}),e.$on("click",s[7]),{c(){K(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){O(e,l,r),t=!0},p(l,r){const a={};r&4100&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Cl(s){let e,t,l,r=s[2].t("Add text content")+"",a,n;return e=new $l({props:{strokeWidth:"2"}}),{c(){K(e.$$.fragment),t=q(),l=v("div"),a=we(r),this.h()},l(o){L(e.$$.fragment,o),t=X(o),l=w(o,"DIV",{class:!0});var i=$(l);a=$e(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){O(e,o,i),M(o,t,i),M(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Add text content")+"")&&ke(a,r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),j(e,o)}}}function Nl(s){let e,t,l,r,a,n,o,i;return e=new ft({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Dl]},$$scope:{ctx:s}}}),e.$on("click",s[5]),l=new ft({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[xl]},$$scope:{ctx:s}}}),l.$on("click",s[6]),a=new dt({props:{content:s[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files."),className:"w-full",$$slots:{default:[Vl]},$$scope:{ctx:s}}}),o=new ft({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Cl]},$$scope:{ctx:s}}}),o.$on("click",s[8]),{c(){K(e.$$.fragment),t=q(),K(l.$$.fragment),r=q(),K(a.$$.fragment),n=q(),K(o.$$.fragment)},l(f){L(e.$$.fragment,f),t=X(f),L(l.$$.fragment,f),r=X(f),L(a.$$.fragment,f),n=X(f),L(o.$$.fragment,f)},m(f,_){O(e,f,_),M(f,t,_),O(l,f,_),M(f,r,_),O(a,f,_),M(f,n,_),O(o,f,_),i=!0},p(f,_){const I={};_&4100&&(I.$$scope={dirty:_,ctx:f}),e.$set(I);const b={};_&4100&&(b.$$scope={dirty:_,ctx:f}),l.$set(b);const h={};_&4&&(h.content=f[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files.")),_&4100&&(h.$$scope={dirty:_,ctx:f}),a.$set(h);const x={};_&4100&&(x.$$scope={dirty:_,ctx:f}),o.$set(x)},i(f){i||(D(e.$$.fragment,f),D(l.$$.fragment,f),D(a.$$.fragment,f),D(o.$$.fragment,f),i=!0)},o(f){V(e.$$.fragment,f),V(l.$$.fragment,f),V(a.$$.fragment,f),V(o.$$.fragment,f),i=!1},d(f){f&&(d(t),d(r),d(n)),j(e,f),j(l,f),j(a,f),j(o,f)}}}function Sl(s){let e,t,l;return t=new Qt({props:{class:"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-sm",sideOffset:4,side:"bottom",align:"end",transition:Zt,$$slots:{default:[Nl]},$$scope:{ctx:s}}}),{c(){e=v("div"),K(t.$$.fragment),this.h()},l(r){e=w(r,"DIV",{slot:!0});var a=$(e);L(t.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"slot","content")},m(r,a){M(r,e,a),O(t,e,null),l=!0},p(r,a){const n={};a&4100&&(n.$$scope={dirty:a,ctx:r}),t.$set(n)},i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){V(t.$$.fragment,r),l=!1},d(r){r&&d(e),j(t)}}}function Tl(s){let e,t,l;function r(n){s[10](n)}let a={align:"end",$$slots:{content:[Sl],default:[El]},$$scope:{ctx:s}};return s[1]!==void 0&&(a.show=s[1]),e=new el({props:a}),xe.push(()=>Fe(e,"show",r)),e.$on("change",s[11]),{c(){K(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,o){O(e,n,o),l=!0},p(n,[o]){const i={};o&4102&&(i.$$scope={dirty:o,ctx:n}),!t&&o&2&&(t=!0,i.show=n[1],Ve(()=>t=!1)),e.$set(i)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function zl(s,e,t){let l;const r=pt(),a=_t("i18n");We(s,a,E=>t(2,l=E));let{onClose:n=()=>{}}=e,o=!1;const i=()=>{r("upload",{type:"files"})},f=()=>{r("upload",{type:"directory"})},_=()=>{r("sync",{type:"directory"})},I=()=>{r("upload",{type:"text"})},b=E=>{E.stopPropagation(),t(1,o=!0)};function h(E){o=E,t(1,o)}const x=E=>{E.detail===!1&&n()};return s.$$set=E=>{"onClose"in E&&t(0,n=E.onClose)},[n,o,l,r,a,i,f,_,I,b,h,x]}class Bl extends Ue{constructor(e){super(),Ae(this,e,zl,Tl,Ce,{onClose:0})}}function Ml(s){let e,t;return e=new dt({props:{content:s[4].t("Voice Input"),$$slots:{default:[Pl]},$$scope:{ctx:s}}}),{c(){K(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){O(e,l,r),t=!0},p(l,r){const a={};r&16&&(a.content=l[4].t("Voice Input")),r&65560&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Wl(s){let e,t,l,r;function a(o){s[12](o)}let n={className:"p-1",onCancel:s[10],onConfirm:s[11]};return s[3]!==void 0&&(n.recording=s[3]),t=new rl({props:n}),xe.push(()=>Fe(t,"recording",a)),{c(){e=v("div"),K(t.$$.fragment),this.h()},l(o){e=w(o,"DIV",{class:!0});var i=$(e);L(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","max-w-full w-full")},m(o,i){M(o,e,i),O(t,e,null),r=!0},p(o,i){const f={};i&8&&(f.onCancel=o[10]),i&12&&(f.onConfirm=o[11]),!l&&i&8&&(l=!0,f.recording=o[3],Ve(()=>l=!1)),t.$set(f)},i(o){r||(D(t.$$.fragment,o),r=!0)},o(o){V(t.$$.fragment,o),r=!1},d(o){o&&d(e),j(t)}}}function Pl(s){let e,t,l,r,a;return t=new ol({props:{className:"size-5"}}),{c(){e=v("button"),K(t.$$.fragment),this.h()},l(n){e=w(n,"BUTTON",{class:!0,type:!0});var o=$(e);L(t.$$.fragment,o),o.forEach(d),this.h()},h(){c(e,"class","p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full"),c(e,"type","button")},m(n,o){M(n,e,o),O(t,e,null),l=!0,r||(a=ie(e,"click",s[13]),r=!0)},p:ce,i(n){l||(D(t.$$.fragment,n),l=!0)},o(n){V(t.$$.fragment,n),l=!1},d(n){n&&d(e),j(t),r=!1,a()}}}function Ul(s){let e,t=s[4].t("Save")+"",l;return{c(){e=v("button"),l=we(t),this.h()},l(r){e=w(r,"BUTTON",{class:!0,type:!0});var a=$(e);l=$e(a,t),a.forEach(d),this.h()},h(){c(e,"class","px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full"),c(e,"type","submit")},m(r,a){M(r,e,a),p(e,l)},p(r,a){a&16&&t!==(t=r[4].t("Save")+"")&&ke(l,t)},d(r){r&&d(e)}}}function Al(s){let e,t,l,r,a,n,o,i,f,_,I,b,h,x,E,C,P,U,N,T,k,B,R,m,g,W,H;l=new nl({props:{className:"size-3.5"}});function J(S){s[9](S)}let ee={placeholder:s[4].t("Write something..."),preserveBreaks:!0};s[2]!==void 0&&(ee.value=s[2]),E=new gt({props:ee}),xe.push(()=>Fe(E,"value",J));const se=[Wl,Ml],Y=[];function de(S,Q){return S[3]?0:1}return T=de(s),k=Y[T]=se[T](s),m=new dt({props:{content:s[4].t("Save"),$$slots:{default:[Ul]},$$scope:{ctx:s}}}),{c(){e=v("div"),t=v("button"),K(l.$$.fragment),r=q(),a=v("div"),n=v("form"),o=v("div"),i=v("div"),f=v("div"),_=v("div"),I=v("input"),h=q(),x=v("div"),K(E.$$.fragment),P=q(),U=v("div"),N=v("div"),k.c(),B=q(),R=v("div"),K(m.$$.fragment),this.h()},l(S){e=w(S,"DIV",{class:!0});var Q=$(e);t=w(Q,"BUTTON",{class:!0,type:!0});var le=$(t);L(l.$$.fragment,le),le.forEach(d),Q.forEach(d),r=X(S),a=w(S,"DIV",{class:!0});var me=$(a);n=w(me,"FORM",{class:!0});var fe=$(n);o=w(fe,"DIV",{class:!0});var ge=$(o);i=w(ge,"DIV",{class:!0});var ne=$(i);f=w(ne,"DIV",{class:!0});var be=$(f);_=w(be,"DIV",{class:!0});var ae=$(_);I=w(ae,"INPUT",{class:!0,type:!0,placeholder:!0}),ae.forEach(d),be.forEach(d),h=X(ne),x=w(ne,"DIV",{class:!0});var oe=$(x);L(E.$$.fragment,oe),oe.forEach(d),ne.forEach(d),ge.forEach(d),P=X(fe),U=w(fe,"DIV",{class:!0});var ve=$(U);N=w(ve,"DIV",{class:!0});var he=$(N);k.l(he),he.forEach(d),B=X(ve),R=w(ve,"DIV",{class:!0});var Be=$(R);L(m.$$.fragment,Be),Be.forEach(d),ve.forEach(d),fe.forEach(d),me.forEach(d),this.h()},h(){c(t,"class","self-center dark:text-white"),c(t,"type","button"),c(e,"class","absolute top-0 right-0 p-5"),c(I,"class","w-full text-3xl font-semibold bg-transparent outline-hidden svelte-1vx7r9s"),c(I,"type","text"),c(I,"placeholder",b=s[4].t("Title")),I.required=!0,c(_,"class","w-full"),c(f,"class","shrink-0 w-full flex justify-between items-center"),c(x,"class","flex-1 w-full h-full"),c(i,"class","max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2"),c(o,"class","flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4"),c(N,"class",""),c(R,"class","shrink-0"),c(U,"class","flex flex-row items-center justify-end text-sm font-medium shrink-0 mt-1 p-4 gap-1.5"),c(n,"class","flex flex-col w-full h-full"),c(a,"class","flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200")},m(S,Q){M(S,e,Q),p(e,t),O(l,t,null),M(S,r,Q),M(S,a,Q),p(a,n),p(n,o),p(o,i),p(i,f),p(f,_),p(_,I),Pe(I,s[1]),p(i,h),p(i,x),O(E,x,null),p(n,P),p(n,U),p(U,N),Y[T].m(N,null),p(U,B),p(U,R),O(m,R,null),g=!0,W||(H=[ie(t,"click",s[7]),ie(I,"input",s[8]),ie(n,"submit",Dt(s[14]))],W=!0)},p(S,Q){(!g||Q&16&&b!==(b=S[4].t("Title")))&&c(I,"placeholder",b),Q&2&&I.value!==S[1]&&Pe(I,S[1]);const le={};Q&16&&(le.placeholder=S[4].t("Write something...")),!C&&Q&4&&(C=!0,le.value=S[2],Ve(()=>C=!1)),E.$set(le);let me=T;T=de(S),T===me?Y[T].p(S,Q):(Te(),V(Y[me],1,1,()=>{Y[me]=null}),ze(),k=Y[T],k?k.p(S,Q):(k=Y[T]=se[T](S),k.c()),D(k,1),k.m(N,null));const fe={};Q&16&&(fe.content=S[4].t("Save")),Q&65552&&(fe.$$scope={dirty:Q,ctx:S}),m.$set(fe)},i(S){g||(D(l.$$.fragment,S),D(E.$$.fragment,S),D(k),D(m.$$.fragment,S),g=!0)},o(S){V(l.$$.fragment,S),V(E.$$.fragment,S),V(k),V(m.$$.fragment,S),g=!1},d(S){S&&(d(e),d(r),d(a)),j(l),j(E),Y[T].d(),j(m),W=!1,ut(H)}}}function Kl(s){let e,t,l;function r(n){s[15](n)}let a={size:"full",containerClassName:"",className:"h-full bg-white dark:bg-gray-900",$$slots:{default:[Al]},$$scope:{ctx:s}};return s[0]!==void 0&&(a.show=s[0]),e=new ll({props:a}),xe.push(()=>Fe(e,"show",r)),{c(){K(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,o){O(e,n,o),l=!0},p(n,[o]){const i={};o&65567&&(i.$$scope={dirty:o,ctx:n}),!t&&o&1&&(t=!0,i.show=n[0],Ve(()=>t=!1)),e.$set(i)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function Ll(s,e,t){let l;const r=_t("i18n");We(s,r,N=>t(4,l=N));const a=pt();let{show:n=!1}=e,o="Untitled",i="",f=!1;const _=()=>{t(0,n=!1)};function I(){o=this.value,t(1,o)}function b(N){i=N,t(2,i)}const h=()=>{t(3,f=!1)},x=N=>{const{text:T,filename:k}=N;t(2,i=`${i}${T} `),t(3,f=!1)};function E(N){f=N,t(3,f)}const C=async()=>{try{let N=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(T){return G.error(l.t("Permission denied when accessing microphone: {{error}}",{error:T})),null});N&&(t(3,f=!0),N.getTracks().forEach(k=>k.stop())),N=null}catch{G.error(l.t("Permission denied when accessing microphone"))}},P=()=>{if(o.trim()===""||i.trim()===""){G.error(l.t("Please fill in all fields.")),t(1,o=o.trim()),t(2,i=i.trim());return}a("submit",{name:o,content:i}),t(0,n=!1),t(1,o=""),t(2,i="")};function U(N){n=N,t(0,n)}return s.$$set=N=>{"show"in N&&t(0,n=N.show)},[n,o,i,f,l,r,a,_,I,b,h,x,E,C,P,U]}class Ol extends Ue{constructor(e){super(),Ae(this,e,Ll,Kl,Ce,{show:0})}}function kt(s){let e,t,l,r,a,n,o;return a=new Yt({props:{$$slots:{default:[jl]},$$scope:{ctx:s}}}),{c(){e=v("div"),t=v("div"),l=v("div"),r=v("div"),K(a.$$.fragment),this.h()},l(i){e=w(i,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var f=$(e);t=w(f,"DIV",{class:!0});var _=$(t);l=w(_,"DIV",{class:!0});var I=$(l);r=w(I,"DIV",{class:!0});var b=$(r);L(a.$$.fragment,b),b.forEach(d),I.forEach(d),_.forEach(d),f.forEach(d),this.h()},h(){c(r,"class","max-w-md"),c(l,"class","m-auto pt-64 flex flex-col justify-center"),c(t,"class","absolute w-full h-full backdrop-blur-sm bg-gray-800/40 flex justify-center"),c(e,"class",n="fixed "+(s[14]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),c(e,"id","dropzone"),c(e,"role","region"),c(e,"aria-label","Drag and Drop Container")},m(i,f){M(i,e,f),p(e,t),p(t,l),p(l,r),O(a,r,null),o=!0},p(i,f){const _={};f[2]&512&&(_.$$scope={dirty:f,ctx:i}),a.$set(_),(!o||f[0]&16384&&n!==(n="fixed "+(i[14]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&c(e,"class",n)},i(i){o||(D(a.$$.fragment,i),o=!0)},o(i){V(a.$$.fragment,i),o=!1},d(i){i&&d(e),j(a)}}}function jl(s){let e,t="Drop any files here to add to my documents";return{c(){e=v("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),It(e)!=="svelte-19eg75t"&&(e.textContent=t),this.h()},h(){c(e,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(l,r){M(l,e,r)},p:ce,d(l){l&&d(e)}}}function Hl(s){let e,t;return e=new Gt({props:{className:"size-5"}}),{c(){K(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){O(e,l,r),t=!0},p:ce,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Rl(s){var lt,rt,st,nt;let e,t,l,r,a,n,o,i,f,_,I,b,h,x,E,C,P=s[13].t("Access")+"",U,N,T,k,B,R,m,g,W,H,J,ee,se,Y,de,S,Q,le,me,fe,ge,ne,be,ae,oe,ve,he,Be,Ye;function mt(y){s[34](y)}function ht(y){s[35](y)}let Ge={allowPublic:((st=(rt=(lt=s[15])==null?void 0:lt.permissions)==null?void 0:rt.sharing)==null?void 0:st.public_knowledge)||((nt=s[15])==null?void 0:nt.role)==="admin",onChange:s[33],accessRoles:["read","write"]};s[7]!==void 0&&(Ge.show=s[7]),s[0].access_control!==void 0&&(Ge.accessControl=s[0].access_control),e=new fl({props:Ge}),xe.push(()=>Fe(e,"show",mt)),xe.push(()=>Fe(e,"accessControl",ht)),x=new cl({props:{strokeWidth:"2.5",className:"size-3.5"}});const Qe=[Xl,ql],ye=[];function Ze(y,Z){return y[3]?0:!y[3]&&y[2]!==null?1:-1}~(m=Ze(s))&&(g=ye[m]=Qe[m](s)),S=new ul({}),ne=new Bl({}),ne.$on("upload",s[50]),ne.$on("sync",s[51]);const et=[Zl,Ql],Ie=[];function tt(y,Z){return y[9].length>0?0:1}return ae=tt(s),oe=Ie[ae]=et[ae](s),{c(){K(e.$$.fragment),r=q(),a=v("div"),n=v("div"),o=v("div"),i=v("div"),f=v("div"),_=v("input"),I=q(),b=v("div"),h=v("button"),K(x.$$.fragment),E=q(),C=v("div"),U=we(P),N=q(),T=v("div"),k=v("input"),B=q(),R=v("div"),g&&g.c(),W=q(),H=v("div"),J=v("div"),ee=v("div"),se=v("div"),Y=v("div"),de=v("div"),K(S.$$.fragment),Q=q(),le=v("input"),fe=q(),ge=v("div"),K(ne.$$.fragment),be=q(),oe.c(),this.h()},l(y){L(e.$$.fragment,y),r=X(y),a=w(y,"DIV",{class:!0});var Z=$(a);n=w(Z,"DIV",{class:!0});var Ne=$(n);o=w(Ne,"DIV",{class:!0});var Ee=$(o);i=w(Ee,"DIV",{class:!0});var De=$(i);f=w(De,"DIV",{class:!0});var Ke=$(f);_=w(Ke,"INPUT",{type:!0,class:!0,placeholder:!0}),Ke.forEach(d),I=X(De),b=w(De,"DIV",{class:!0});var Le=$(b);h=w(Le,"BUTTON",{class:!0,type:!0});var Se=$(h);L(x.$$.fragment,Se),E=X(Se),C=w(Se,"DIV",{class:!0});var Oe=$(C);U=$e(Oe,P),Oe.forEach(d),Se.forEach(d),Le.forEach(d),De.forEach(d),N=X(Ee),T=w(Ee,"DIV",{class:!0});var ot=$(T);k=w(ot,"INPUT",{type:!0,class:!0,placeholder:!0}),ot.forEach(d),Ee.forEach(d),Ne.forEach(d),Z.forEach(d),B=X(y),R=w(y,"DIV",{class:!0});var je=$(R);g&&g.l(je),W=X(je),H=w(je,"DIV",{class:!0});var at=$(H);J=w(at,"DIV",{class:!0});var it=$(J);ee=w(it,"DIV",{class:!0});var u=$(ee);se=w(u,"DIV",{class:!0});var F=$(se);Y=w(F,"DIV",{class:!0});var z=$(Y);de=w(z,"DIV",{class:!0});var A=$(de);L(S.$$.fragment,A),A.forEach(d),Q=X(z),le=w(z,"INPUT",{class:!0,placeholder:!0}),fe=X(z),ge=w(z,"DIV",{});var te=$(ge);L(ne.$$.fragment,te),te.forEach(d),z.forEach(d),F.forEach(d),be=X(u),oe.l(u),u.forEach(d),it.forEach(d),at.forEach(d),je.forEach(d),this.h()},h(){c(_,"type","text"),c(_,"class","text-left w-full font-semibold text-2xl font-primary bg-transparent outline-hidden"),c(_,"placeholder","Knowledge Name"),c(f,"class","w-full"),c(C,"class","text-sm font-medium shrink-0"),c(h,"class","bg-gray-50 hover:bg-gray-100 text-black dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white transition px-2 py-1 rounded-full flex gap-1 items-center"),c(h,"type","button"),c(b,"class","self-center shrink-0"),c(i,"class","flex items-center justify-between w-full px-0.5 mb-1"),c(k,"type","text"),c(k,"class","text-left text-xs w-full text-gray-500 bg-transparent outline-hidden"),c(k,"placeholder","Knowledge Description"),c(T,"class","flex w-full px-1"),c(o,"class","flex-1"),c(n,"class","flex w-full"),c(a,"class","w-full mb-2.5"),c(de,"class","self-center ml-1 mr-3"),c(le,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent"),c(le,"placeholder",me=s[13].t("Search Collection")),c(Y,"class","flex mb-0.5"),c(se,"class","px-3"),c(ee,"class","w-full h-full flex flex-col"),c(J,"class","flex flex-col w-full space-x-2 rounded-lg h-full"),c(H,"class",ve=(s[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"),c(R,"class","flex flex-row flex-1 h-full max-h-full pb-2.5 gap-3")},m(y,Z){O(e,y,Z),M(y,r,Z),M(y,a,Z),p(a,n),p(n,o),p(o,i),p(i,f),p(f,_),Pe(_,s[0].name),p(i,I),p(i,b),p(b,h),O(x,h,null),p(h,E),p(h,C),p(C,U),p(o,N),p(o,T),p(T,k),Pe(k,s[0].description),M(y,B,Z),M(y,R,Z),~m&&ye[m].m(R,null),p(R,W),p(R,H),p(H,J),p(J,ee),p(ee,se),p(se,Y),p(Y,de),O(S,de,null),p(Y,Q),p(Y,le),Pe(le,s[1]),p(Y,fe),p(Y,ge),O(ne,ge,null),p(ee,be),Ie[ae].m(ee,null),he=!0,Be||(Ye=[ie(_,"input",s[36]),ie(_,"input",s[37]),ie(h,"click",s[38]),ie(k,"input",s[39]),ie(k,"input",s[40]),ie(le,"input",s[48]),ie(le,"focus",s[49])],Be=!0)},p(y,Z){var Ke,Le,Se,Oe;const Ne={};Z[0]&32768&&(Ne.allowPublic=((Se=(Le=(Ke=y[15])==null?void 0:Ke.permissions)==null?void 0:Le.sharing)==null?void 0:Se.public_knowledge)||((Oe=y[15])==null?void 0:Oe.role)==="admin"),!t&&Z[0]&128&&(t=!0,Ne.show=y[7],Ve(()=>t=!1)),!l&&Z[0]&1&&(l=!0,Ne.accessControl=y[0].access_control,Ve(()=>l=!1)),e.$set(Ne),Z[0]&1&&_.value!==y[0].name&&Pe(_,y[0].name),(!he||Z[0]&8192)&&P!==(P=y[13].t("Access")+"")&&ke(U,P),Z[0]&1&&k.value!==y[0].description&&Pe(k,y[0].description);let Ee=m;m=Ze(y),m===Ee?~m&&ye[m].p(y,Z):(g&&(Te(),V(ye[Ee],1,1,()=>{ye[Ee]=null}),ze()),~m?(g=ye[m],g?g.p(y,Z):(g=ye[m]=Qe[m](y),g.c()),D(g,1),g.m(R,W)):g=null),(!he||Z[0]&8192&&me!==(me=y[13].t("Search Collection")))&&c(le,"placeholder",me),Z[0]&2&&le.value!==y[1]&&Pe(le,y[1]);let De=ae;ae=tt(y),ae===De?Ie[ae].p(y,Z):(Te(),V(Ie[De],1,1,()=>{Ie[De]=null}),ze(),oe=Ie[ae],oe?oe.p(y,Z):(oe=Ie[ae]=et[ae](y),oe.c()),D(oe,1),oe.m(ee,null)),(!he||Z[0]&8&&ve!==(ve=(y[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"))&&c(H,"class",ve)},i(y){he||(D(e.$$.fragment,y),D(x.$$.fragment,y),D(g),D(S.$$.fragment,y),D(ne.$$.fragment,y),D(oe),he=!0)},o(y){V(e.$$.fragment,y),V(x.$$.fragment,y),V(g),V(S.$$.fragment,y),V(ne.$$.fragment,y),V(oe),he=!1},d(y){y&&(d(r),d(a),d(B),d(R)),j(e,y),j(x),~m&&ye[m].d(),j(S),j(ne),Ie[ae].d(),Be=!1,ut(Ye)}}}function ql(s){let e,t;return e=new sl({props:{className:"h-full",show:s[2]!==null,onClose:s[47],$$slots:{default:[Gl]},$$scope:{ctx:s}}}),{c(){K(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){O(e,l,r),t=!0},p(l,r){const a={};r[0]&4&&(a.show=l[2]!==null),r[0]&4&&(a.onClose=l[47]),r[0]&11268|r[2]&512&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Xl(s){let e,t,l,r;const a=[Yl,Jl],n=[];function o(i,f){return i[10]?0:1}return t=o(s),l=n[t]=a[t](s),{c(){e=v("div"),l.c(),this.h()},l(i){e=w(i,"DIV",{class:!0});var f=$(e);l.l(f),f.forEach(d),this.h()},h(){c(e,"class","flex-1 flex justify-start w-full h-full max-h-full")},m(i,f){M(i,e,f),n[t].m(e,null),r=!0},p(i,f){let _=t;t=o(i),t===_?n[t].p(i,f):(Te(),V(n[_],1,1,()=>{n[_]=null}),ze(),l=n[t],l?l.p(i,f):(l=n[t]=a[t](i),l.c()),D(l,1),l.m(e,null))},i(i){r||(D(l),r=!0)},o(i){V(l),r=!1},d(i){i&&d(e),n[t].d()}}}function bt(s){let e,t,l;function r(n){s[46](n)}let a={className:"input-prose-sm",placeholder:s[13].t("Add content here"),preserveBreaks:!1};return s[11]!==void 0&&(a.value=s[11]),e=new gt({props:a}),xe.push(()=>Fe(e,"value",r)),{c(){K(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,o){O(e,n,o),l=!0},p(n,o){const i={};o[0]&8192&&(i.placeholder=n[13].t("Add content here")),!t&&o[0]&2048&&(t=!0,i.value=n[11],Ve(()=>t=!1)),e.$set(i)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function Gl(s){var R,m;let e,t,l,r,a,n,o,i,f=((m=(R=s[10])==null?void 0:R.meta)==null?void 0:m.name)+"",_,I,b,h,x=s[13].t("Save")+"",E,C,P,U=s[10].id,N,T,k;n=new il({props:{strokeWidth:"2.5"}});let B=bt(s);return{c(){e=v("div"),t=v("div"),l=v("div"),r=v("div"),a=v("button"),K(n.$$.fragment),o=q(),i=v("div"),_=we(f),I=q(),b=v("div"),h=v("button"),E=we(x),C=q(),P=v("div"),B.c(),this.h()},l(g){e=w(g,"DIV",{class:!0});var W=$(e);t=w(W,"DIV",{class:!0});var H=$(t);l=w(H,"DIV",{class:!0});var J=$(l);r=w(J,"DIV",{class:!0});var ee=$(r);a=w(ee,"BUTTON",{class:!0});var se=$(a);L(n.$$.fragment,se),se.forEach(d),ee.forEach(d),o=X(J),i=w(J,"DIV",{class:!0});var Y=$(i);_=$e(Y,f),Y.forEach(d),I=X(J),b=w(J,"DIV",{});var de=$(b);h=w(de,"BUTTON",{class:!0});var S=$(h);E=$e(S,x),S.forEach(d),de.forEach(d),J.forEach(d),C=X(H),P=w(H,"DIV",{class:!0});var Q=$(P);B.l(Q),Q.forEach(d),H.forEach(d),W.forEach(d),this.h()},h(){c(a,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),c(r,"class","mr-2"),c(i,"class","flex-1 text-xl line-clamp-1"),c(h,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(l,"class","shrink-0 mt-1 mb-2 flex items-center"),c(P,"class","flex-1 w-full h-full max-h-full py-2.5 px-3.5 rounded-lg text-sm bg-transparent overflow-y-auto scrollbar-hidden"),c(t,"class","flex flex-col w-full h-full max-h-full"),c(e,"class","flex flex-col justify-start h-full max-h-full p-2")},m(g,W){M(g,e,W),p(e,t),p(t,l),p(l,r),p(r,a),O(n,a,null),p(l,o),p(l,i),p(i,_),p(l,I),p(l,b),p(b,h),p(h,E),p(t,C),p(t,P),B.m(P,null),N=!0,T||(k=[ie(a,"click",s[44]),ie(h,"click",s[45])],T=!0)},p(g,W){var H,J;(!N||W[0]&1024)&&f!==(f=((J=(H=g[10])==null?void 0:H.meta)==null?void 0:J.name)+"")&&ke(_,f),(!N||W[0]&8192)&&x!==(x=g[13].t("Save")+"")&&ke(E,x),W[0]&1024&&Ce(U,U=g[10].id)?(Te(),V(B,1,1,ce),ze(),B=bt(g),B.c(),D(B,1),B.m(P,null)):B.p(g,W)},i(g){N||(D(n.$$.fragment,g),D(B),N=!0)},o(g){V(n.$$.fragment,g),V(B),N=!1},d(g){g&&d(e),j(n),B.d(g),T=!1,ut(k)}}}function Jl(s){let e,t,l=s[13].t("Drag and drop a file to upload or select a file to view")+"",r;return{c(){e=v("div"),t=v("div"),r=we(l),this.h()},l(a){e=w(a,"DIV",{class:!0});var n=$(e);t=w(n,"DIV",{class:!0});var o=$(t);r=$e(o,l),o.forEach(d),n.forEach(d),this.h()},h(){c(t,"class","m-auto text-xs text-center text-gray-200 dark:text-gray-700"),c(e,"class","h-full flex w-full")},m(a,n){M(a,e,n),p(e,t),p(t,r)},p(a,n){n[0]&8192&&l!==(l=a[13].t("Drag and drop a file to upload or select a file to view")+"")&&ke(r,l)},i:ce,o:ce,d(a){a&&d(e)}}}function Yl(s){var B,R;let e,t,l,r,a,n=s[25]((R=(B=s[10])==null?void 0:B.meta)==null?void 0:R.name)+"",o,i,f,_,I,b=s[13].t("Save")+"",h,x,E,C=s[10].id,P,U,N,T=!tr,k=yt(s);return{c(){e=v("div"),t=v("div"),l=q(),r=v("div"),a=v("a"),o=we(n),f=q(),_=v("div"),I=v("button"),h=we(b),x=q(),E=v("div"),k.c(),this.h()},l(m){e=w(m,"DIV",{class:!0});var g=$(e);t=w(g,"DIV",{class:!0});var W=$(t);l=X(W),r=w(W,"DIV",{class:!0});var H=$(r);a=w(H,"A",{class:!0,href:!0,target:!0});var J=$(a);o=$e(J,n),J.forEach(d),H.forEach(d),f=X(W),_=w(W,"DIV",{});var ee=$(_);I=w(ee,"BUTTON",{class:!0});var se=$(I);h=$e(se,b),se.forEach(d),ee.forEach(d),W.forEach(d),x=X(g),E=w(g,"DIV",{class:!0});var Y=$(E);k.l(Y),Y.forEach(d),g.forEach(d),this.h()},h(){c(a,"class","hover:text-gray-500 dark:hover:text-gray-100 hover:underline grow line-clamp-1"),c(a,"href",i=s[10].id?`/api/v1/files/${s[10].id}/content`:"#"),c(a,"target","_blank"),c(r,"class","flex-1 text-xl font-medium"),c(I,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(t,"class","shrink-0 mb-2 flex items-center"),c(E,"class","flex-1 w-full h-full max-h-full text-sm bg-transparent outline-hidden overflow-y-auto scrollbar-hidden"),c(e,"class","flex flex-col w-full h-full max-h-full")},m(m,g){M(m,e,g),p(e,t),p(t,l),p(t,r),p(r,a),p(a,o),p(t,f),p(t,_),p(_,I),p(I,h),p(e,x),p(e,E),k.m(E,null),P=!0,U||(N=ie(I,"click",s[42]),U=!0)},p(m,g){var W,H;(!P||g[0]&1024)&&n!==(n=m[25]((H=(W=m[10])==null?void 0:W.meta)==null?void 0:H.name)+"")&&ke(o,n),(!P||g[0]&1024&&i!==(i=m[10].id?`/api/v1/files/${m[10].id}/content`:"#"))&&c(a,"href",i),(!P||g[0]&8192)&&b!==(b=m[13].t("Save")+"")&&ke(h,b),g[0]&1024&&Ce(C,C=m[10].id)?(Te(),V(k,1,1,ce),ze(),k=yt(m),k.c(),D(k,1),k.m(E,null)):k.p(m,g)},i(m){P||(D(T),D(k),P=!0)},o(m){V(T),V(k),P=!1},d(m){m&&d(e),k.d(m),U=!1,N()}}}function yt(s){let e,t,l;function r(n){s[43](n)}let a={className:"input-prose-sm",placeholder:s[13].t("Add content here"),preserveBreaks:!1};return s[11]!==void 0&&(a.value=s[11]),e=new gt({props:a}),xe.push(()=>Fe(e,"value",r)),{c(){K(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,o){O(e,n,o),l=!0},p(n,o){const i={};o[0]&8192&&(i.placeholder=n[13].t("Add content here")),!t&&o[0]&2048&&(t=!0,i.value=n[11],Ve(()=>t=!1)),e.$set(i)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function Ql(s){let e,t,l=s[13].t("No content found")+"",r;return{c(){e=v("div"),t=v("div"),r=we(l),this.h()},l(a){e=w(a,"DIV",{class:!0});var n=$(e);t=w(n,"DIV",{});var o=$(t);r=$e(o,l),o.forEach(d),n.forEach(d),this.h()},h(){c(e,"class","my-3 flex flex-col justify-center text-center text-gray-500 text-xs")},m(a,n){M(a,e,n),p(e,t),p(t,r)},p(a,n){n[0]&8192&&l!==(l=a[13].t("No content found")+"")&&ke(r,l)},i:ce,o:ce,d(a){a&&d(e)}}}function Zl(s){let e,t,l;return t=new gl({props:{small:!0,files:s[9],selectedFileId:s[2]}}),t.$on("click",s[52]),t.$on("delete",s[53]),{c(){e=v("div"),K(t.$$.fragment),this.h()},l(r){e=w(r,"DIV",{class:!0});var a=$(e);L(t.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"class","flex overflow-y-auto h-full w-full scrollbar-hidden text-xs")},m(r,a){M(r,e,a),O(t,e,null),l=!0},p(r,a){const n={};a[0]&512&&(n.files=r[9]),a[0]&4&&(n.selectedFileId=r[2]),t.$set(n)},i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){V(t.$$.fragment,r),l=!1},d(r){r&&d(e),j(t)}}}function er(s){let e,t,l,r,a,n,o,i,f,_,I,b,h,x,E,C=s[12]&&kt(s);function P(m){s[27](m)}let U={message:s[13].t("This will reset the knowledge base and sync all files. Do you wish to continue?")};s[6]!==void 0&&(U.show=s[6]),t=new al({props:U}),xe.push(()=>Fe(t,"show",P)),t.$on("confirm",s[28]);function N(m){s[29](m)}let T={};s[5]!==void 0&&(T.show=s[5]),a=new Ol({props:T}),xe.push(()=>Fe(a,"show",N)),a.$on("submit",s[30]);const k=[Rl,Hl],B=[];function R(m,g){return m[4]&&m[0]?0:1}return I=R(s),b=B[I]=k[I](s),{c(){C&&C.c(),e=q(),K(t.$$.fragment),r=q(),K(a.$$.fragment),o=q(),i=v("input"),f=q(),_=v("div"),b.c(),this.h()},l(m){C&&C.l(m),e=X(m),L(t.$$.fragment,m),r=X(m),L(a.$$.fragment,m),o=X(m),i=w(m,"INPUT",{id:!0,type:!0}),f=X(m),_=w(m,"DIV",{class:!0,id:!0});var g=$(_);b.l(g),g.forEach(d),this.h()},h(){c(i,"id","files-input"),c(i,"type","file"),i.multiple=!0,i.hidden=!0,c(_,"class","flex flex-col w-full translate-y-1"),c(_,"id","collection-container")},m(m,g){C&&C.m(m,g),M(m,e,g),O(t,m,g),M(m,r,g),O(a,m,g),M(m,o,g),M(m,i,g),M(m,f,g),M(m,_,g),B[I].m(_,null),h=!0,x||(E=[ie(i,"change",s[31]),ie(i,"change",s[32])],x=!0)},p(m,g){m[12]?C?(C.p(m,g),g[0]&4096&&D(C,1)):(C=kt(m),C.c(),D(C,1),C.m(e.parentNode,e)):C&&(Te(),V(C,1,1,()=>{C=null}),ze());const W={};g[0]&8192&&(W.message=m[13].t("This will reset the knowledge base and sync all files. Do you wish to continue?")),!l&&g[0]&64&&(l=!0,W.show=m[6],Ve(()=>l=!1)),t.$set(W);const H={};!n&&g[0]&32&&(n=!0,H.show=m[5],Ve(()=>n=!1)),a.$set(H);let J=I;I=R(m),I===J?B[I].p(m,g):(Te(),V(B[J],1,1,()=>{B[J]=null}),ze(),b=B[I],b?b.p(m,g):(b=B[I]=k[I](m),b.c()),D(b,1),b.m(_,null))},i(m){h||(D(C),D(t.$$.fragment,m),D(a.$$.fragment,m),D(b),h=!0)},o(m){V(C),V(t.$$.fragment,m),V(a.$$.fragment,m),V(b),h=!1},d(m){m&&(d(e),d(r),d(o),d(i),d(f),d(_)),C&&C.d(m),j(t,m),j(a,m),B[I].d(),x=!1,ut(E)}}}let tr=!0;function lr(s,e,t){let l,r,a,n,o,i;We(s,Nt,u=>t(57,l=u)),We(s,St,u=>t(58,a=u)),We(s,Tt,u=>t(59,n=u)),We(s,zt,u=>t(14,o=u)),We(s,Bt,u=>t(15,i=u));const f=_t("i18n");We(s,f,u=>t(13,r=u));let _=!0,I,b=null,h=null,x="",E=!1,C=!1,P=!1,U=null,N=[],T=null,k=null,B="",R=new Map,m=null,g=null,W,H=!1;const J=(u,F)=>{const z=new Blob([F],{type:"text/plain"}),A=qt(z,`${u}.txt`);return A},ee=async u=>{var A,te,ue,pe,re,_e,Me,Je;const F=Xt(),z={type:"file",file:"",id:null,url:"",name:u.name,size:u.size,status:"uploading",error:"",itemId:F};if(z.size==0)return G.error(r.t("You cannot upload an empty file.")),null;if((((A=n==null?void 0:n.file)==null?void 0:A.max_size)??null)!==null&&u.size>(((te=n==null?void 0:n.file)==null?void 0:te.max_size)??0)*1024*1024){u.size,(((ue=n==null?void 0:n.file)==null?void 0:ue.max_size)??0)*1024*1024,G.error(r.t("File size should not exceed {{maxSize}} MB.",{maxSize:(pe=n==null?void 0:n.file)==null?void 0:pe.max_size}));return}t(0,h.files=[...h.files??[],z],h);try{let He=null;(u.type.startsWith("audio/")||u.type.startsWith("video/"))&&((_e=(re=a==null?void 0:a.audio)==null?void 0:re.stt)!=null&&_e.language)&&(He={language:(Je=(Me=a==null?void 0:a.audio)==null?void 0:Me.stt)==null?void 0:Je.language});const ct=await Wt(localStorage.token,u,He).catch(Re=>(G.error(`${Re}`),null));ct?(t(0,h.files=h.files.map(Re=>(Re.itemId===F&&(Re.id=ct.id),delete Re.itemId,Re)),h),await me(ct.id)):G.error(r.t("Failed to upload file."))}catch(He){G.error(`${He}`)}},se=async()=>{const u="showDirectoryPicker"in window;try{u?await de():await S()}catch(F){Q(F)}},Y=u=>u.split("/").some(F=>F.startsWith(".")),de=async()=>{const u=await window.showDirectoryPicker();let F=0,z=0;const A=()=>{const pe=z/F*100;G.info(`Upload Progress: ${z}/${F} (${pe.toFixed(2)}%)`)};async function te(pe){for await(const re of pe.values())re.name.startsWith(".")||(re.kind==="file"?F++:re.kind==="directory"&&(re.name.startsWith(".")||await te(re)))}async function ue(pe,re=""){for await(const _e of pe.values()){if(_e.name.startsWith("."))continue;const Me=re?`${re}/${_e.name}`:_e.name;if(!Y(Me))if(_e.kind==="file"){const Je=await _e.getFile(),He=new File([Je],Me,{type:Je.type});await ee(He),z++,A()}else _e.kind==="directory"&&(_e.name.startsWith(".")||await ue(_e,Me))}}await te(u),A(),F>0&&await ue(u)},S=async()=>new Promise((u,F)=>{const z=document.createElement("input");z.type="file",z.webkitdirectory=!0,z.directory=!0,z.multiple=!0,z.style.display="none",document.body.appendChild(z),z.onchange=async()=>{try{const A=Array.from(z.files).filter(re=>!Y(re.webkitRelativePath));let te=A.length,ue=0;const pe=()=>{const re=ue/te*100;G.info(`Upload Progress: ${ue}/${te} (${re.toFixed(2)}%)`)};pe();for(const re of A)if(!re.name.startsWith(".")){const _e=re.webkitRelativePath||re.name,Me=new File([re],_e,{type:re.type});await ee(Me),ue++,pe()}document.body.removeChild(z),u()}catch(A){F(A)}},z.onerror=A=>{document.body.removeChild(z),F(A)},z.click()}),Q=u=>{u.name==="AbortError"?G.info("Directory selection was cancelled"):(G.error("Error accessing directory"),console.error("Directory access error:",u))},le=async()=>{if(((h==null?void 0:h.files)??[]).length>0){const u=await Kt(localStorage.token,b).catch(F=>{G.error(`${F}`)});u&&(t(0,h=u),G.success(r.t("Knowledge reset successfully.")),se())}else se()},me=async u=>{const F=await Lt(localStorage.token,b,u).catch(z=>(G.error(`${z}`),null));F?(t(0,h=F),G.success(r.t("File added successfully."))):(G.error(r.t("Failed to add file.")),t(0,h.files=h.files.filter(z=>z.id!==u),h))},fe=async u=>{try{const F=await Ot(localStorage.token,b,u);F&&(t(0,h=F),G.success(r.t("File removed successfully.")))}catch(F){console.error("Error in deleteFileHandler:",F),G.error(`${F}`)}},ge=async()=>{const u=T.id,F=B;R.delete(u);const z=Pt(localStorage.token,u,F).catch(te=>{G.error(`${te}`)}),A=await jt(localStorage.token,b,u).catch(te=>{G.error(`${te}`)});z&&A&&(t(0,h=A),G.success(r.t("File content updated successfully.")))},ne=()=>{g&&clearTimeout(g),g=setTimeout(async()=>{if(h.name.trim()===""||h.description.trim()===""){G.error(r.t("Please fill in all fields."));return}await Ht(localStorage.token,b,{...h,name:h.name,description:h.description,access_control:h.access_control}).catch(F=>{G.error(`${F}`)})&&(G.success(r.t("Knowledge updated successfully")),Mt.set(await Rt(localStorage.token)))},1e3)},be=async u=>{u.matches?t(3,_=!0):t(3,_=!1)},ae=async u=>{try{if(t(10,T=u),R.has(u.id)){t(11,B=R.get(u.id));return}const F=await Ut(localStorage.token,u.id);F?(t(11,B=F.data.content),R.set(u.id,F.data.content)):G.error(r.t("No content found in file."))}catch{G.error(r.t("Failed to load file content."))}},oe=u=>{var F,z;u.preventDefault(),(z=(F=u.dataTransfer)==null?void 0:F.types)!=null&&z.includes("Files")?t(12,H=!0):t(12,H=!1)},ve=()=>{t(12,H=!1)},he=async u=>{var F,z,A,te;if(u.preventDefault(),t(12,H=!1),(z=(F=u.dataTransfer)==null?void 0:F.types)!=null&&z.includes("Files")&&(A=u.dataTransfer)!=null&&A.files){const ue=(te=u.dataTransfer)==null?void 0:te.files;if(ue&&ue.length>0)for(const pe of ue)await ee(pe);else G.error(r.t("File not found."))}};xt(async()=>{W=window.matchMedia("(min-width: 1024px)"),W.addEventListener("change",be),be(W);const u=document.getElementById("collection-container");_&&Math.floor(300/u.clientWidth*100),new ResizeObserver(te=>{for(let ue of te)ue.contentRect.width}).observe(u),t(4,b=l.params.id);const z=await At(localStorage.token,b).catch(te=>(G.error(`${te}`),null));z?t(0,h=z):Ct("/workspace/knowledge");const A=document.querySelector("body");A==null||A.addEventListener("dragover",oe),A==null||A.addEventListener("drop",he),A==null||A.addEventListener("dragleave",ve)}),Ft(()=>{W==null||W.removeEventListener("change",be);const u=document.querySelector("body");u==null||u.removeEventListener("dragover",oe),u==null||u.removeEventListener("drop",he),u==null||u.removeEventListener("dragleave",ve)});const Be=u=>{try{return decodeURIComponent(u)}catch{return u}};function Ye(u){C=u,t(6,C)}const mt=()=>{le()};function ht(u){E=u,t(5,E)}const Ge=u=>{const F=J(u.detail.name,u.detail.content);ee(F)};function Qe(){U=this.files,t(8,U)}const ye=async()=>{if(U&&U.length>0){for(const F of U)await ee(F);t(8,U=null);const u=document.getElementById("files-input");u&&(u.value="")}else G.error(r.t("File not found."))},Ze=()=>{ne()};function et(u){P=u,t(7,P)}function Ie(u){s.$$.not_equal(h.access_control,u)&&(h.access_control=u,t(0,h))}function tt(){h.name=this.value,t(0,h)}const lt=()=>{ne()},rt=()=>{t(7,P=!0)};function st(){h.description=this.value,t(0,h)}const nt=()=>{ne()},y=()=>{I.expand()},Z=()=>{ge()};function Ne(u){B=u,t(11,B)}const Ee=()=>{t(2,k=null)},De=()=>{ge()};function Ke(u){B=u,t(11,B)}const Le=()=>{t(2,k=null)};function Se(){x=this.value,t(1,x)}const Oe=()=>{t(2,k=null)},ot=u=>{u.detail.type==="directory"?se():u.detail.type==="text"?t(5,E=!0):document.getElementById("files-input").click()},je=u=>{t(6,C=!0)},at=u=>{t(2,k=k===u.detail?null:u.detail)},it=u=>{u.detail,t(2,k=null),fe(u.detail)};return s.$$.update=()=>{if(s.$$.dirty[0]&1&&h&&h.files&&t(26,m=new Vt(h.files,{keys:["meta.name","meta.description"]})),s.$$.dirty[0]&67108867&&m&&t(9,N=x?m.search(x).map(u=>u.item):(h==null?void 0:h.files)??[]),s.$$.dirty[0]&5)if(k){const u=((h==null?void 0:h.files)??[]).find(F=>F.id===k);u?ae(u):t(10,T=null)}else t(10,T=null)},[h,x,k,_,b,E,C,P,U,N,T,B,H,r,o,i,f,I,J,ee,se,le,fe,ge,ne,Be,m,Ye,mt,ht,Ge,Qe,ye,Ze,et,Ie,tt,lt,rt,st,nt,y,Z,Ne,Ee,De,Ke,Le,Se,Oe,ot,je,at,it]}class rr extends Ue{constructor(e){super(),Ae(this,e,lr,er,Ce,{},null,[-1,-1,-1])}}function sr(s){let e,t;return e=new rr({}),{c(){K(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){O(e,l,r),t=!0},p:ce,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}class Br extends Ue{constructor(e){super(),Ae(this,e,null,sr,Ce,{})}}export{Br as component};
//# sourceMappingURL=31.BR2vHbky.js.map
