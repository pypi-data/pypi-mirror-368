import{e as ae,l as Me,d as Ye,c as Xe,u as Qe}from"./sH8GAILm.js";import{S as ge,i as we,s as be,C as R,D as J,E as K,q as j,r as U,F as q,T as Ke,w as Ze,H as ie,I as fe,K as ce,k as re,v as Se,e as k,t as M,l as x,c as $,a as I,b as N,d as f,p as O,f as g,g as B,h as d,G as ee,j as L,y as Ee,u as Ie,x as et,z as tt,A as rt,B as at,L as Ne,J as st,P as nt}from"./BCvnKofF.js";import"./IHki7fMi.js";import{a as lt,b as ot,u as Pe,e as Le,f as it,h as ke,s as ft,i as ct}from"./Cv1-b8Rp.js";import{T as ut}from"./DU_Fx9CA.js";import{t as _e}from"./BUWMeBOm.js";import{f as dt}from"./BYpoD6Mb.js";import{M as qe}from"./CAH0SlZd.js";import{L as mt}from"./LBO-rmRr.js";import{X as Ge}from"./BKFELi7o.js";import"./DUrXJnPR.js";import{b as ht,c as $e}from"./BaNaiqy5.js";import{f as pt}from"./CBc5jlPY.js";import{D as _t}from"./Dh0SKaKk.js";import{G as gt}from"./C7cYg_99.js";import{P as wt}from"./DaG3ph1s.js";import{T as bt}from"./DRSCq1dG.js";import{A as vt}from"./BGshmsd7.js";import{S as yt}from"./CVAJiM1o.js";import"./DToqdUr_.js";import{T as kt}from"./x4nRNQGH.js";import{K as $t}from"./DD3GHGB_.js";const _r=async(l,e)=>{let r=null;const t=await fetch(`${ae}/folders/`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify(e)}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).catch(a=>(r=a.detail,null));if(r)throw r;return t},gr=async(l="")=>{let e=null;const r=await fetch(`${ae}/folders/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).then(t=>t).catch(t=>(e=t.detail,console.error(t),null));if(e)throw e;return r},wr=async(l,e,r)=>{let t=null;const a=await fetch(`${ae}/folders/${e}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify(r)}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(t=o.detail,console.error(o),null));if(t)throw t;return a},br=async(l,e,r)=>{let t=null;const a=await fetch(`${ae}/folders/${e}/update/expanded`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({is_expanded:r})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(t=o.detail,console.error(o),null));if(t)throw t;return a},vr=async(l,e,r)=>{let t=null;const a=await fetch(`${ae}/folders/${e}/update/parent`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({parent_id:r})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(t=o.detail,console.error(o),null));if(t)throw t;return a},yr=async(l,e)=>{let r=null;const t=await fetch(`${ae}/folders/${e}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).then(a=>a).catch(a=>(r=a.detail,console.error(a),null));if(r)throw r;return t};function Et(l){let e,r;return e=new ut({props:{tags:l[0]}}),e.$on("delete",l[4]),e.$on("add",l[5]),{c(){R(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,a){K(e,t,a),r=!0},p(t,[a]){const o={};a&1&&(o.tags=t[0]),e.$set(o)},i(t){r||(j(e.$$.fragment,t),r=!0)},o(t){U(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}function It(l,e,r){const t=Ke();let{chatId:a=""}=e,o=[];const n=async()=>await lt(localStorage.token,a).catch(async c=>[]),s=async c=>{await ot(localStorage.token,a,c).catch(async p=>(_e.error(`${p}`),null))&&(r(0,o=await n()),await Pe(localStorage.token,a,{tags:o}),await Me.set(await Le(localStorage.token)),t("add",{name:c}))},i=async c=>{await it(localStorage.token,a,c),r(0,o=await n()),await Pe(localStorage.token,a,{tags:o}),await Me.set(await Le(localStorage.token)),t("delete",{name:c})};Ze(async()=>{a&&r(0,o=await n())});const _=c=>{i(c.detail)},m=c=>{s(c.detail)};return l.$$set=c=>{"chatId"in c&&r(3,a=c.chatId)},[o,s,i,a,_,m]}class kr extends ge{constructor(e){super(),we(this,e,It,Et,be,{chatId:3})}}function ze(l){var E;let e,r,t,a,o,n,s,i,_,m,c,h,p;function b(u,y){return u[2].share_id?Tt:St}let T=b(l),D=T(l),v=((E=l[4])==null?void 0:E.features.enable_community_sharing)&&We(l);_=new mt({});function S(u,y){return u[2].share_id?Ct:Dt}let w=S(l),V=w(l);return{c(){e=k("div"),r=k("div"),D.c(),t=x(),a=k("div"),o=k("div"),n=k("div"),v&&v.c(),s=x(),i=k("button"),R(_.$$.fragment),m=x(),V.c(),this.h()},l(u){e=$(u,"DIV",{class:!0});var y=I(e);r=$(y,"DIV",{class:!0});var z=I(r);D.l(z),z.forEach(f),t=O(y),a=$(y,"DIV",{class:!0});var X=I(a);o=$(X,"DIV",{class:!0});var te=I(o);n=$(te,"DIV",{class:!0});var G=I(n);v&&v.l(G),s=O(G),i=$(G,"BUTTON",{class:!0,type:!0,id:!0});var W=I(i);J(_.$$.fragment,W),m=O(W),V.l(W),W.forEach(f),G.forEach(f),te.forEach(f),X.forEach(f),y.forEach(f),this.h()},h(){g(r,"class","text-sm dark:text-gray-300 mb-1"),g(i,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),g(i,"type","button"),g(i,"id","copy-and-share-chat-button"),g(n,"class","flex gap-1"),g(o,"class","flex flex-col items-end space-x-1 mt-3"),g(a,"class","flex justify-end"),g(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(u,y){B(u,e,y),d(e,r),D.m(r,null),d(e,t),d(e,a),d(a,o),d(o,n),v&&v.m(n,null),d(n,s),d(n,i),K(_,i,null),d(i,m),V.m(i,null),c=!0,h||(p=ee(i,"click",l[11]),h=!0)},p(u,y){var z;T===(T=b(u))&&D?D.p(u,y):(D.d(1),D=T(u),D&&(D.c(),D.m(r,null))),(z=u[4])!=null&&z.features.enable_community_sharing?v?v.p(u,y):(v=We(u),v.c(),v.m(n,s)):v&&(v.d(1),v=null),w===(w=S(u))&&V?V.p(u,y):(V.d(1),V=w(u),V&&(V.c(),V.m(i,null)))},i(u){c||(j(_.$$.fragment,u),c=!0)},o(u){U(_.$$.fragment,u),c=!1},d(u){u&&f(e),D.d(),v&&v.d(),q(_),V.d(),h=!1,p()}}}function St(l){let e=l[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",r;return{c(){r=M(e)},l(t){r=N(t,e)},m(t,a){B(t,r,a)},p(t,a){a&8&&e!==(e=t[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&L(r,e)},d(t){t&&f(r)}}}function Tt(l){let e,r=l[3].t("You have shared this chat")+"",t,a,o,n=l[3].t("before")+"",s,i,_,m,c=l[3].t("Click here to")+"",h,p,b,T=l[3].t("delete this link")+"",D,v,S=l[3].t("and create a new shared link.")+"",w,V,E;return{c(){e=k("a"),t=M(r),a=x(),o=k("span"),s=M(n),i=M("."),m=x(),h=M(c),p=x(),b=k("button"),D=M(T),v=x(),w=M(S),this.h()},l(u){e=$(u,"A",{href:!0,target:!0});var y=I(e);t=N(y,r),a=O(y),o=$(y,"SPAN",{class:!0});var z=I(o);s=N(z,n),z.forEach(f),i=N(y,"."),y.forEach(f),m=O(u),h=N(u,c),p=O(u),b=$(u,"BUTTON",{class:!0});var X=I(b);D=N(X,T),X.forEach(f),v=O(u),w=N(u,S),this.h()},h(){g(o,"class","underline"),g(e,"href",_="/s/"+l[2].share_id),g(e,"target","_blank"),g(b,"class","underline")},m(u,y){B(u,e,y),d(e,t),d(e,a),d(e,o),d(o,s),d(e,i),B(u,m,y),B(u,h,y),B(u,p,y),B(u,b,y),d(b,D),B(u,v,y),B(u,w,y),V||(E=ee(b,"click",l[9]),V=!0)},p(u,y){y&8&&r!==(r=u[3].t("You have shared this chat")+"")&&L(t,r),y&8&&n!==(n=u[3].t("before")+"")&&L(s,n),y&4&&_!==(_="/s/"+u[2].share_id)&&g(e,"href",_),y&8&&c!==(c=u[3].t("Click here to")+"")&&L(h,c),y&8&&T!==(T=u[3].t("delete this link")+"")&&L(D,T),y&8&&S!==(S=u[3].t("and create a new shared link.")+"")&&L(w,S)},d(u){u&&(f(e),f(m),f(h),f(p),f(b),f(v),f(w)),V=!1,E()}}}function We(l){let e,r=l[3].t("Share to Open WebUI Community")+"",t,a,o;return{c(){e=k("button"),t=M(r),this.h()},l(n){e=$(n,"BUTTON",{class:!0,type:!0});var s=I(e);t=N(s,r),s.forEach(f),this.h()},h(){g(e,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full"),g(e,"type","button")},m(n,s){B(n,e,s),d(e,t),a||(o=ee(e,"click",l[10]),a=!0)},p(n,s){s&8&&r!==(r=n[3].t("Share to Open WebUI Community")+"")&&L(t,r)},d(n){n&&f(e),a=!1,o()}}}function Dt(l){let e=l[3].t("Copy Link")+"",r;return{c(){r=M(e)},l(t){r=N(t,e)},m(t,a){B(t,r,a)},p(t,a){a&8&&e!==(e=t[3].t("Copy Link")+"")&&L(r,e)},d(t){t&&f(r)}}}function Ct(l){let e=l[3].t("Update and Copy Link")+"",r;return{c(){r=M(e)},l(t){r=N(t,e)},m(t,a){B(t,r,a)},p(t,a){a&8&&e!==(e=t[3].t("Update and Copy Link")+"")&&L(r,e)},d(t){t&&f(r)}}}function jt(l){let e,r,t,a=l[3].t("Share Chat")+"",o,n,s,i,_,m,c,h;i=new Ge({props:{className:"size-5"}});let p=l[2]&&ze(l);return{c(){e=k("div"),r=k("div"),t=k("div"),o=M(a),n=x(),s=k("button"),R(i.$$.fragment),_=x(),p&&p.c(),this.h()},l(b){e=$(b,"DIV",{});var T=I(e);r=$(T,"DIV",{class:!0});var D=I(r);t=$(D,"DIV",{class:!0});var v=I(t);o=N(v,a),v.forEach(f),n=O(D),s=$(D,"BUTTON",{class:!0});var S=I(s);J(i.$$.fragment,S),S.forEach(f),D.forEach(f),_=O(T),p&&p.l(T),T.forEach(f),this.h()},h(){g(t,"class","text-lg font-medium self-center"),g(s,"class","self-center"),g(r,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(b,T){B(b,e,T),d(e,r),d(r,t),d(t,o),d(r,n),d(r,s),K(i,s,null),d(e,_),p&&p.m(e,null),m=!0,c||(h=ee(s,"click",l[8]),c=!0)},p(b,T){(!m||T&8)&&a!==(a=b[3].t("Share Chat")+"")&&L(o,a),b[2]?p?(p.p(b,T),T&4&&j(p,1)):(p=ze(b),p.c(),j(p,1),p.m(e,null)):p&&(Ee(),U(p,1,1,()=>{p=null}),Ie())},i(b){m||(j(i.$$.fragment,b),j(p),m=!0)},o(b){U(i.$$.fragment,b),U(p),m=!1},d(b){b&&f(e),q(i),p&&p.d(),c=!1,h()}}}function Bt(l){let e,r,t;function a(n){l[12](n)}let o={size:"md",$$slots:{default:[jt]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.show=l[0]),e=new qe({props:o}),ie.push(()=>fe(e,"show",a)),{c(){R(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,s){K(e,n,s),t=!0},p(n,[s]){const i={};s&65567&&(i.$$scope={dirty:s,ctx:n}),!r&&s&1&&(r=!0,i.show=n[0],ce(()=>r=!1)),e.$set(i)},i(n){t||(j(e.$$.fragment,n),t=!0)},o(n){U(e.$$.fragment,n),t=!1},d(n){q(e,n)}}}function Vt(l,e,r){let t,a,o;re(l,Ye,w=>r(14,t=w)),re(l,Xe,w=>r(4,o=w));let{chatId:n}=e,s=null,i=null;const _=Se("i18n");re(l,_,w=>r(3,a=w));const m=async()=>{const w=await ft(localStorage.token,n);return i=`${window.location.origin}/s/${w.id}`,r(2,s=await ke(localStorage.token,n)),i},c=async()=>{const w=s.chat;_e.success(a.t("Redirecting you to Open WebUI Community"));const V="https://openwebui.com",E=await window.open(`${V}/chats/upload`,"_blank");window.addEventListener("message",u=>{u.origin===V&&u.data==="loaded"&&E.postMessage(JSON.stringify({chat:w,models:t.filter(y=>w.models.includes(y.id))}),"*")},!1)};let{show:h=!1}=e;const p=w=>s?w?s.id!==w.id||s.share_id!==w.share_id:!1:!0,b=()=>{r(0,h=!1)},T=async()=>{await ct(localStorage.token,n)&&r(2,s=await ke(localStorage.token,n))},D=()=>{c(),r(0,h=!1)},v=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){const V=async()=>{const E=await m();return new Blob([E],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":V()})]).then(()=>!0).catch(E=>(console.error("Async: Could not copy text: ",E),!1))}else dt(await m());_e.success(a.t("Copied shared chat URL to clipboard!")),r(0,h=!1)};function S(w){h=w,r(0,h)}return l.$$set=w=>{"chatId"in w&&r(1,n=w.chatId),"show"in w&&r(0,h=w.show)},l.$$.update=()=>{l.$$.dirty&7&&h&&(async()=>{if(n){const w=await ke(localStorage.token,n);p(w)&&r(2,s=w)}else r(2,s=null)})()},[h,n,s,a,o,_,m,c,b,T,D,v,S]}class $r extends ge{constructor(e){super(),we(this,e,Vt,Bt,be,{chatId:1,show:0})}}function Ut(l){let e;const r=l[8].default,t=et(r,l,l[14],null);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,o){t&&t.m(a,o),e=!0},p(a,o){t&&t.p&&(!e||o&16384)&&tt(t,r,a,a[14],e?at(r,a[14],o,null):rt(a[14]),null)},i(a){e||(j(t,a),e=!0)},o(a){U(t,a),e=!1},d(a){t&&t.d(a)}}}function xt(l){let e,r;return e=new bt({props:{content:l[5].t("More"),$$slots:{default:[Ut]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,a){K(e,t,a),r=!0},p(t,a){const o={};a&32&&(o.content=t[5].t("More")),a&16384&&(o.$$scope={dirty:a,ctx:t}),e.$set(o)},i(t){r||(j(e.$$.fragment,t),r=!0)},o(t){U(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}function Ot(l){let e,r,t,a=l[5].t("Edit")+"",o,n;return e=new wt({props:{strokeWidth:"2"}}),{c(){R(e.$$.fragment),r=x(),t=k("div"),o=M(a),this.h()},l(s){J(e.$$.fragment,s),r=O(s),t=$(s,"DIV",{class:!0});var i=I(t);o=N(i,a),i.forEach(f),this.h()},h(){g(t,"class","flex items-center")},m(s,i){K(e,s,i),B(s,r,i),B(s,t,i),d(t,o),n=!0},p(s,i){(!n||i&32)&&a!==(a=s[5].t("Edit")+"")&&L(o,a)},i(s){n||(j(e.$$.fragment,s),n=!0)},o(s){U(e.$$.fragment,s),n=!1},d(s){s&&(f(r),f(t)),q(e,s)}}}function At(l){let e,r,t,a=l[5].t("Export")+"",o,n;return e=new vt({props:{strokeWidth:"2"}}),{c(){R(e.$$.fragment),r=x(),t=k("div"),o=M(a),this.h()},l(s){J(e.$$.fragment,s),r=O(s),t=$(s,"DIV",{class:!0});var i=I(t);o=N(i,a),i.forEach(f),this.h()},h(){g(t,"class","flex items-center")},m(s,i){K(e,s,i),B(s,r,i),B(s,t,i),d(t,o),n=!0},p(s,i){(!n||i&32)&&a!==(a=s[5].t("Export")+"")&&L(o,a)},i(s){n||(j(e.$$.fragment,s),n=!0)},o(s){U(e.$$.fragment,s),n=!1},d(s){s&&(f(r),f(t)),q(e,s)}}}function Ft(l){let e,r,t,a=l[5].t("Delete")+"",o,n;return e=new gt({props:{strokeWidth:"2"}}),{c(){R(e.$$.fragment),r=x(),t=k("div"),o=M(a),this.h()},l(s){J(e.$$.fragment,s),r=O(s),t=$(s,"DIV",{class:!0});var i=I(t);o=N(i,a),i.forEach(f),this.h()},h(){g(t,"class","flex items-center")},m(s,i){K(e,s,i),B(s,r,i),B(s,t,i),d(t,o),n=!0},p(s,i){(!n||i&32)&&a!==(a=s[5].t("Delete")+"")&&L(o,a)},i(s){n||(j(e.$$.fragment,s),n=!0)},o(s){U(e.$$.fragment,s),n=!1},d(s){s&&(f(r),f(t)),q(e,s)}}}function Mt(l){let e,r,t,a,o,n;return e=new $e({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Ot]},$$scope:{ctx:l}}}),e.$on("click",l[9]),t=new $e({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[At]},$$scope:{ctx:l}}}),t.$on("click",l[10]),o=new $e({props:{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Ft]},$$scope:{ctx:l}}}),o.$on("click",l[11]),{c(){R(e.$$.fragment),r=x(),R(t.$$.fragment),a=x(),R(o.$$.fragment)},l(s){J(e.$$.fragment,s),r=O(s),J(t.$$.fragment,s),a=O(s),J(o.$$.fragment,s)},m(s,i){K(e,s,i),B(s,r,i),K(t,s,i),B(s,a,i),K(o,s,i),n=!0},p(s,i){const _={};i&16416&&(_.$$scope={dirty:i,ctx:s}),e.$set(_);const m={};i&16416&&(m.$$scope={dirty:i,ctx:s}),t.$set(m);const c={};i&16416&&(c.$$scope={dirty:i,ctx:s}),o.$set(c)},i(s){n||(j(e.$$.fragment,s),j(t.$$.fragment,s),j(o.$$.fragment,s),n=!0)},o(s){U(e.$$.fragment,s),U(t.$$.fragment,s),U(o.$$.fragment,s),n=!1},d(s){s&&(f(r),f(a)),q(e,s),q(t,s),q(o,s)}}}function Nt(l){let e,r,t;return r=new ht({props:{class:"w-full max-w-[170px] rounded-lg px-1 py-1.5  z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:-2,side:"bottom",align:l[0],transition:pt,$$slots:{default:[Mt]},$$scope:{ctx:l}}}),{c(){e=k("div"),R(r.$$.fragment),this.h()},l(a){e=$(a,"DIV",{slot:!0});var o=I(e);J(r.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"slot","content")},m(a,o){B(a,e,o),K(r,e,null),t=!0},p(a,o){const n={};o&1&&(n.align=a[0]),o&16430&&(n.$$scope={dirty:o,ctx:a}),r.$set(n)},i(a){t||(j(r.$$.fragment,a),t=!0)},o(a){U(r.$$.fragment,a),t=!1},d(a){a&&f(e),q(r)}}}function Pt(l){let e,r,t;function a(n){l[12](n)}let o={$$slots:{content:[Nt],default:[xt]},$$scope:{ctx:l}};return l[4]!==void 0&&(o.show=l[4]),e=new _t({props:o}),ie.push(()=>fe(e,"show",a)),e.$on("change",l[13]),{c(){R(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,s){K(e,n,s),t=!0},p(n,[s]){const i={};s&16431&&(i.$$scope={dirty:s,ctx:n}),!r&&s&16&&(r=!0,i.show=n[4],ce(()=>r=!1)),e.$set(i)},i(n){t||(j(e.$$.fragment,n),t=!0)},o(n){U(e.$$.fragment,n),t=!1},d(n){q(e,n)}}}function Lt(l,e,r){let t,{$$slots:a={},$$scope:o}=e;const n=Se("i18n");re(l,n,S=>r(5,t=S));const s=Ke();let{align:i="start"}=e,{onEdit:_=()=>{}}=e,{onExport:m=()=>{}}=e,{onDelete:c=()=>{}}=e,h=!1;const p=()=>{_()},b=()=>{m()},T=()=>{c()};function D(S){h=S,r(4,h)}const v=S=>{S.detail===!1&&s("close")};return l.$$set=S=>{"align"in S&&r(0,i=S.align),"onEdit"in S&&r(1,_=S.onEdit),"onExport"in S&&r(2,m=S.onExport),"onDelete"in S&&r(3,c=S.onDelete),"$$scope"in S&&r(14,o=S.$$scope)},[i,_,m,c,h,t,n,s,a,p,b,T,D,v,o]}class Er extends ge{constructor(e){super(),we(this,e,Lt,Pt,be,{align:0,onEdit:1,onExport:2,onDelete:3})}}function zt(l){let e=l[5].t("Create Folder")+"",r;return{c(){r=M(e)},l(t){r=N(t,e)},m(t,a){B(t,r,a)},p(t,a){a&32&&e!==(e=t[5].t("Create Folder")+"")&&L(r,e)},d(t){t&&f(r)}}}function Wt(l){let e=l[5].t("Edit Folder")+"",r;return{c(){r=M(e)},l(t){r=N(t,e)},m(t,a){B(t,r,a)},p(t,a){a&32&&e!==(e=t[5].t("Edit Folder")+"")&&L(r,e)},d(t){t&&f(r)}}}function Re(l){let e,r,t=l[5].t("System Prompt")+"",a,o,n,s,i,_;function m(h){l[13](h)}let c={className:" text-sm w-full bg-transparent outline-hidden ",placeholder:`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`,maxSize:200};return l[3].system_prompt!==void 0&&(c.value=l[3].system_prompt),s=new kt({props:c}),ie.push(()=>fe(s,"value",m)),{c(){e=k("div"),r=k("div"),a=M(t),o=x(),n=k("div"),R(s.$$.fragment),this.h()},l(h){e=$(h,"DIV",{class:!0});var p=I(e);r=$(p,"DIV",{class:!0});var b=I(r);a=N(b,t),b.forEach(f),o=O(p),n=$(p,"DIV",{});var T=I(n);J(s.$$.fragment,T),T.forEach(f),p.forEach(f),this.h()},h(){g(r,"class","mb-2 text-xs text-gray-500"),g(e,"class","my-1")},m(h,p){B(h,e,p),d(e,r),d(r,a),d(e,o),d(e,n),K(s,n,null),_=!0},p(h,p){(!_||p&32)&&t!==(t=h[5].t("System Prompt")+"")&&L(a,t);const b={};!i&&p&8&&(i=!0,b.value=h[3].system_prompt,ce(()=>i=!1)),s.$set(b)},i(h){_||(j(s.$$.fragment,h),_=!0)},o(h){U(s.$$.fragment,h),_=!1},d(h){h&&f(e),q(s)}}}function Rt(l){let e,r,t,a=l[5].t("Knowledge")+"",o;return{c(){e=k("div"),r=k("div"),t=k("div"),o=M(a),this.h()},l(n){e=$(n,"DIV",{slot:!0});var s=I(e);r=$(s,"DIV",{class:!0});var i=I(r);t=$(i,"DIV",{class:!0});var _=I(t);o=N(_,a),_.forEach(f),i.forEach(f),s.forEach(f),this.h()},h(){g(t,"class","mb-2 text-xs text-gray-500"),g(r,"class","flex w-full justify-between"),g(e,"slot","label")},m(n,s){B(n,e,s),d(e,r),d(r,t),d(t,o)},p(n,s){s&32&&a!==(a=n[5].t("Knowledge")+"")&&L(o,a)},d(n){n&&f(e)}}}function Je(l){let e,r,t;return r=new yt({}),{c(){e=k("div"),R(r.$$.fragment),this.h()},l(a){e=$(a,"DIV",{class:!0});var o=I(e);J(r.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"class","ml-2 self-center")},m(a,o){B(a,e,o),K(r,e,null),t=!0},i(a){t||(j(r.$$.fragment,a),t=!0)},o(a){U(r.$$.fragment,a),t=!1},d(a){a&&f(e),q(r)}}}function Jt(l){var je,Be,Ve;let e,r,t,a,o,n,s,i,_,m,c,h,p=l[5].t("Folder Name")+"",b,T,D,v,S,w,V,E,u,y,z,X,te,G,W,se=l[5].t("Save")+"",ue,ve,de,Q,ye,Te;function De(C,A){return C[1]?Wt:zt}let me=De(l),H=me(l);n=new Ge({props:{className:"size-5"}});let F=(((je=l[6])==null?void 0:je.role)==="admin"||(((Ve=(Be=l[6])==null?void 0:Be.permissions.chat)==null?void 0:Ve.system_prompt)??!0))&&Re(l);function He(C){l[14](C)}let Ce={$$slots:{label:[Rt]},$$scope:{ctx:l}};l[3].files!==void 0&&(Ce.selectedItems=l[3].files),z=new $t({props:Ce}),ie.push(()=>fe(z,"selectedItems",He));let P=l[4]&&Je();return{c(){e=k("div"),r=k("div"),t=k("div"),H.c(),a=x(),o=k("button"),R(n.$$.fragment),s=x(),i=k("div"),_=k("div"),m=k("form"),c=k("div"),h=k("div"),b=M(p),T=x(),D=k("div"),v=k("input"),w=x(),V=k("hr"),E=x(),F&&F.c(),u=x(),y=k("div"),R(z.$$.fragment),te=x(),G=k("div"),W=k("button"),ue=M(se),ve=x(),P&&P.c(),this.h()},l(C){e=$(C,"DIV",{});var A=I(e);r=$(A,"DIV",{class:!0});var Z=I(r);t=$(Z,"DIV",{class:!0});var ne=I(t);H.l(ne),ne.forEach(f),a=O(Z),o=$(Z,"BUTTON",{class:!0});var le=I(o);J(n.$$.fragment,le),le.forEach(f),Z.forEach(f),s=O(A),i=$(A,"DIV",{class:!0});var oe=I(i);_=$(oe,"DIV",{class:!0});var Ue=I(_);m=$(Ue,"FORM",{class:!0});var Y=I(m);c=$(Y,"DIV",{class:!0});var he=I(c);h=$(he,"DIV",{class:!0});var xe=I(h);b=N(xe,p),xe.forEach(f),T=O(he),D=$(he,"DIV",{class:!0});var Oe=I(D);v=$(Oe,"INPUT",{class:!0,type:!0,placeholder:!0,autocomplete:!0}),Oe.forEach(f),he.forEach(f),w=O(Y),V=$(Y,"HR",{class:!0}),E=O(Y),F&&F.l(Y),u=O(Y),y=$(Y,"DIV",{class:!0});var Ae=I(y);J(z.$$.fragment,Ae),Ae.forEach(f),te=O(Y),G=$(Y,"DIV",{class:!0});var Fe=I(G);W=$(Fe,"BUTTON",{class:!0,type:!0});var pe=I(W);ue=N(pe,se),ve=O(pe),P&&P.l(pe),pe.forEach(f),Fe.forEach(f),Y.forEach(f),Ue.forEach(f),oe.forEach(f),A.forEach(f),this.h()},h(){g(t,"class","text-lg font-medium self-center"),g(o,"class","self-center"),g(r,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-1"),g(h,"class","mb-1 text-xs text-gray-500"),g(v,"class","w-full text-sm bg-transparent placeholder:text-gray-300 dark:placeholder:text-gray-700 outline-hidden"),g(v,"type","text"),g(v,"placeholder",S=l[5].t("Enter folder name")),g(v,"autocomplete","off"),g(D,"class","flex-1"),g(c,"class","flex flex-col w-full mt-1"),g(V,"class","border-gray-50 dark:border-gray-850 my-2.5 w-full"),g(y,"class","my-2"),g(W,"class",de="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center "+(l[4]?" cursor-not-allowed":"")),g(W,"type","submit"),W.disabled=l[4],g(G,"class","flex justify-end pt-3 text-sm font-medium gap-1.5"),g(m,"class","flex flex-col w-full"),g(_,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),g(i,"class","flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200")},m(C,A){B(C,e,A),d(e,r),d(r,t),H.m(t,null),d(r,a),d(r,o),K(n,o,null),d(e,s),d(e,i),d(i,_),d(_,m),d(m,c),d(c,h),d(h,b),d(c,T),d(c,D),d(D,v),Ne(v,l[2]),d(m,w),d(m,V),d(m,E),F&&F.m(m,null),d(m,u),d(m,y),K(z,y,null),d(m,te),d(m,G),d(G,W),d(W,ue),d(W,ve),P&&P.m(W,null),Q=!0,ye||(Te=[ee(o,"click",l[11]),ee(v,"input",l[12]),ee(m,"submit",st(l[15]))],ye=!0)},p(C,A){var ne,le,oe;me===(me=De(C))&&H?H.p(C,A):(H.d(1),H=me(C),H&&(H.c(),H.m(t,null))),(!Q||A&32)&&p!==(p=C[5].t("Folder Name")+"")&&L(b,p),(!Q||A&32&&S!==(S=C[5].t("Enter folder name")))&&g(v,"placeholder",S),A&4&&v.value!==C[2]&&Ne(v,C[2]),((ne=C[6])==null?void 0:ne.role)==="admin"||(((oe=(le=C[6])==null?void 0:le.permissions.chat)==null?void 0:oe.system_prompt)??!0)?F?(F.p(C,A),A&64&&j(F,1)):(F=Re(C),F.c(),j(F,1),F.m(m,u)):F&&(Ee(),U(F,1,1,()=>{F=null}),Ie());const Z={};A&262176&&(Z.$$scope={dirty:A,ctx:C}),!X&&A&8&&(X=!0,Z.selectedItems=C[3].files,ce(()=>X=!1)),z.$set(Z),(!Q||A&32)&&se!==(se=C[5].t("Save")+"")&&L(ue,se),C[4]?P?A&16&&j(P,1):(P=Je(),P.c(),j(P,1),P.m(W,null)):P&&(Ee(),U(P,1,1,()=>{P=null}),Ie()),(!Q||A&16&&de!==(de="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center "+(C[4]?" cursor-not-allowed":"")))&&g(W,"class",de),(!Q||A&16)&&(W.disabled=C[4])},i(C){Q||(j(n.$$.fragment,C),j(F),j(z.$$.fragment,C),j(P),Q=!0)},o(C){U(n.$$.fragment,C),U(F),U(z.$$.fragment,C),U(P),Q=!1},d(C){C&&f(e),H.d(),q(n),F&&F.d(),q(z),P&&P.d(),ye=!1,nt(Te)}}}function Kt(l){let e,r,t;function a(n){l[16](n)}let o={size:"md",$$slots:{default:[Jt]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.show=l[0]),e=new qe({props:o}),ie.push(()=>fe(e,"show",a)),{c(){R(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,s){K(e,n,s),t=!0},p(n,[s]){const i={};s&262271&&(i.$$scope={dirty:s,ctx:n}),!r&&s&1&&(r=!0,i.show=n[0],ce(()=>r=!1)),e.$set(i)},i(n){t||(j(e.$$.fragment,n),t=!0)},o(n){U(e.$$.fragment,n),t=!1},d(n){q(e,n)}}}function qt(l,e,r){let t,a;re(l,Qe,E=>r(6,a=E));const o=Se("i18n");re(l,o,E=>r(5,t=E));let{show:n=!1}=e,{onSubmit:s=E=>{}}=e,{edit:i=!1}=e,{folder:_=null}=e,m="",c={system_prompt:"",files:[]},h=!1;const p=async()=>{if(r(4,h=!0),((c==null?void 0:c.files)??[]).some(E=>E.status==="uploading")){_e.error(t.t("Please wait until all files are uploaded.")),r(4,h=!1);return}await s({name:m,data:c}),r(0,n=!1),r(4,h=!1)},b=()=>{r(2,m=_.name),r(3,c=_.data||{system_prompt:"",files:[]})},T=()=>{r(0,n=!1)};function D(){m=this.value,r(2,m),r(0,n),r(1,i)}function v(E){l.$$.not_equal(c.system_prompt,E)&&(c.system_prompt=E,r(3,c),r(0,n),r(1,i))}function S(E){l.$$.not_equal(c.files,E)&&(c.files=E,r(3,c),r(0,n),r(1,i))}const w=()=>{p()};function V(E){n=E,r(0,n)}return l.$$set=E=>{"show"in E&&r(0,n=E.show),"onSubmit"in E&&r(9,s=E.onSubmit),"edit"in E&&r(1,i=E.edit),"folder"in E&&r(10,_=E.folder)},l.$$.update=()=>{l.$$.dirty&1024&&_&&b(),l.$$.dirty&3&&!n&&!i&&(r(2,m=""),r(3,c={system_prompt:"",files:[]}))},[n,i,m,c,h,t,a,o,p,s,_,T,D,v,S,w,V]}class Ir extends ge{constructor(e){super(),we(this,e,qt,Kt,be,{show:0,onSubmit:9,edit:1,folder:10})}}export{Ir as F,$r as S,kr as T,Er as a,br as b,vr as c,yr as d,_r as e,gr as g,wr as u};
//# sourceMappingURL=DsEJkt_j.js.map
