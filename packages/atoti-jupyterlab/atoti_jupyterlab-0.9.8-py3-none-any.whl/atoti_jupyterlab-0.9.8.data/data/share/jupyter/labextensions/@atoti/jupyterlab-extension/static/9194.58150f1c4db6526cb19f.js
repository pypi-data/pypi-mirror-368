"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[9194],{77903:(e,t,a)=>{a.d(t,{w:()=>i});var r=a(82842),n=a(1611);const i=e=>{if(0===e.horizontal.captions.length&&0===e.vertical.captions.length)return{};const t=(0,n.y)(e.vertical),a=(0,n.y)(e.horizontal),i=[];for(let e=0;e<t;e++){const t=[];for(let n=0;n<a;n++){const a=0===n?"x":`x${n+1}`,i=(0,r.D)(e);t.push(`${a}${i}`)}i.push(t)}return{grid:{rows:t,columns:a,subplots:i,pattern:"coupled"}}}},82842:(e,t,a)=>{function r(e){return 0===e?"y":"y"+(2*e+1)}a.d(t,{D:()=>r})},1611:(e,t,a)=>{a.d(t,{y:()=>r});const r=({captions:e,limit:t})=>Math.max(1,Math.min(e.length,t))},88442:(e,t,a)=>{var r=a(34231),n=a(68765).axisHoverFormat,i=a(47335).rb,o=a(47335).ay,s=a(4862),l=a(81670),c=a(16678),d=a(52973).k,u=a(44904).extendFlat,f=l({editType:"calc",arrayOk:!0,colorEditType:"style",description:""}),h=u({},r.marker.line.width,{dflt:0}),p=u({width:h,editType:"calc"},s("marker.line")),x=u({line:p,editType:"calc"},s("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style",description:"Sets the opacity of the bars."},pattern:d,cornerradius:{valType:"any",editType:"calc",description:["Sets the rounding of corners. May be an integer number of pixels,","or a percentage of bar width (as a string ending in %). Defaults to `layout.barcornerradius`.","In stack or relative barmode, the first trace to set cornerradius is used for the whole stack."].join(" ")}});e.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:n("x"),yhoverformat:n("y"),text:r.text,texttemplate:o({editType:"plot"},{keys:c.eventDataKeys}),hovertext:r.hovertext,hovertemplate:i({},{keys:c.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed), unless there is another bar stacked on","this one, then the text gets pushed inside.","*auto* tries to position `text` inside the bar, but if","the bar is too small and no bar is stacked on this one","the text is moved outside.","If *none*, no text appears."].join(" ")},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot",description:["Determines if texts are kept at center or start/end points in `textposition` *inside* mode."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"plot",description:["Sets the angle of the tick labels with respect to the bar.","For example, a `tickangle` of -90 draws the tick labels","vertically. With *auto* the texts may automatically be","rotated to fit with the maximum size in bars."].join(" ")},textfont:u({},f,{description:"Sets the font used for `text`."}),insidetextfont:u({},f,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:u({},f,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},cliponaxis:u({},r.cliponaxis,{description:["Determines whether the text nodes","are clipped about the subplot axes.","To show the text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc",description:["Sets where the bar base is drawn (in position axis units).","In *stack* or *relative* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc",description:["Shifts the position where the bar is drawn","(in position axis units).","In *group* barmode,","traces that set *offset* will be excluded","and drawn in *overlay* mode instead."].join(" ")},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc",description:["Sets the bar width (in position axis units)."].join(" ")},marker:x,offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},zorder:r.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"],description:"Renamed to `orientation`."}}}},16678:e=>{e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},55021:(e,t,a)=>{var r=a(35646),n=a(38338),i=a(84127),o=a(56471),s=a(44150),l=a(40004),c=a(7951),d=a(17468),u=a(88442),f=n.coerceFont;function h(e){if(r(e)){if((e=+e)>=0)return e}else if("string"==typeof e&&"%"===(e=e.trim()).slice(-1)&&r(e.slice(0,-1))&&(e=+e.slice(0,-1))>=0)return e+"%"}function p(e,t,a,r,i,o){var s=!(!1===(o=o||{}).moduleHasSelected),l=!(!1===o.moduleHasUnselected),c=!(!1===o.moduleHasConstrain),d=!(!1===o.moduleHasCliponaxis),u=!(!1===o.moduleHasTextangle),h=!(!1===o.moduleHasInsideanchor),p=!!o.hasPathbar,x=Array.isArray(i)||"auto"===i,m=x||"inside"===i,y=x||"outside"===i;if(m||y){var v=f(r,"textfont",a.font),b=n.extendFlat({},v),g=!(e.textfont&&e.textfont.color);if(g&&delete b.color,f(r,"insidetextfont",b),p){var M=n.extendFlat({},v);g&&delete M.color,f(r,"pathbar.textfont",M)}y&&f(r,"outsidetextfont",v),s&&r("selected.textfont.color"),l&&r("unselected.textfont.color"),c&&r("constraintext"),d&&r("cliponaxis"),u&&r("textangle"),r("texttemplate")}m&&h&&r("insidetextanchor")}e.exports={supplyDefaults:function(e,t,a,r){function d(a,r){return n.coerce(e,t,u,a,r)}if(s(e,t,r,d)){l(e,t,r,d),d("xhoverformat"),d("yhoverformat"),d("zorder"),d("orientation",t.x&&!t.y?"h":"v"),d("base"),d("offset"),d("width"),d("text"),d("hovertext"),d("hovertemplate");var f=d("textposition");p(e,0,r,d,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),c(e,t,d,a,r);var h=(t.marker.line||{}).color,x=o.getComponentMethod("errorbars","supplyDefaults");x(e,t,h||i.defaultLine,{axis:"y"}),x(e,t,h||i.defaultLine,{axis:"x",inherit:"y"}),n.coerceSelectionMarkerOpacity(t,d)}else t.visible=!1},crossTraceDefaults:function(e,t){var a,r;function i(e,t){return n.coerce(r._input,r,u,e,t)}for(var o=0;o<e.length;o++)if("bar"===(r=e[o]).type){a=r._input;var s=i("marker.cornerradius",t.barcornerradius);r.marker&&(r.marker.cornerradius=h(s)),"group"===t.barmode&&d(a,r,t,i)}},handleText:p,validateCornerradius:h}},18402:(e,t,a)=>{var r=a(35646),n=a(1915),i=a(38338).isArrayOrTypedArray;t.coerceString=function(e,t,a){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==a?a:e.dflt},t.coerceNumber=function(e,t,a){if(r(t)){t=+t;var n=e.min,i=e.max;if(!(void 0!==n&&t<n||void 0!==i&&t>i))return t}return void 0!==a?a:e.dflt},t.coerceColor=function(e,t,a){return n(t).isValid()?t:void 0!==a?a:e.dflt},t.coerceEnumerated=function(e,t,a){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==a?a:e.dflt},t.getValue=function(e,t){var a;return i(e)?t<e.length&&(a=e[t]):a=e,a},t.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:i(e.marker.line.width)?0:e.marker.line.width}},64228:(e,t,a)=>{var r=a(21132),n=a(35646),i=a(38338),o=a(38854),s=a(84127),l=a(16566),c=a(56471),d=a(57547).tickText,u=a(56993),f=u.recordMinTextSize,h=u.clearMinTextSize,p=a(42470),x=a(18402),m=a(16678),y=a(88442),v=y.text,b=y.textposition,g=a(14599).appendArrayPointValue,M=m.TEXTPAD;function k(e){return e.id}function T(e){if(e.ids)return k}function w(e){return(e>0)-(e<0)}function S(e,t){return e<t?1:-1}function z(e,t,a,r){var n;return!t.uniformtext.mode&&A(a)?(r&&(n=r()),e.transition().duration(a.duration).ease(a.easing).each("end",(function(){n&&n()})).each("interrupt",(function(){n&&n()}))):e}function A(e){return e&&e.duration>0}function L(e,t,a,r,n){return!(e<0||t<0)&&(a<=e&&r<=t||a<=t&&r<=e||(n?e>=a*(t/r):t>=r*(e/a)))}function _(e){return"auto"===e?0:e}function V(e,t){var a=Math.PI/180*t,r=Math.abs(Math.sin(a)),n=Math.abs(Math.cos(a));return{x:e.width*n+e.height*r,y:e.width*r+e.height*n}}function C(e,t,a,r,n,i){var o=!!i.isHorizontal,s=!!i.constrained,l=i.angle||0,c=i.anchor,d="end"===c,u="start"===c,f=((i.leftToRight||0)+1)/2,h=1-f,p=i.hasB,x=i.r,m=i.overhead,y=n.width,v=n.height,b=Math.abs(t-e),g=Math.abs(r-a),k=b>2*M&&g>2*M?M:0;b-=2*k,g-=2*k;var T=_(l);"auto"!==l||y<=b&&v<=g||!(y>b||v>g)||(y>g||v>b)&&y<v==b<g||(T+=90);var w,z,A=V(n,T);if(x&&x-m>M){var L=function(e,t,a,r,n,i,o,s,l){var c,d,u,f,h=Math.max(0,Math.abs(t-e)-2*M),p=Math.max(0,Math.abs(r-a)-2*M),x=i-M,m=o?x-Math.sqrt(x*x-(x-o)*(x-o)):x,y=l?2*x:s?x-o:2*m,v=l?2*x:s?2*m:x-o;return n.y/n.x>=p/(h-y)?f=p/n.y:n.y/n.x<=(p-v)/h?f=h/n.x:!l&&s?(c=n.x*n.x+n.y*n.y/4,u=(h-x)*(h-x)+(p/2-x)*(p/2-x)-x*x,f=(-(d=-2*n.x*(h-x)-n.y*(p/2-x))+Math.sqrt(d*d-4*c*u))/(2*c)):l?(c=(n.x*n.x+n.y*n.y)/4,u=(h/2-x)*(h/2-x)+(p/2-x)*(p/2-x)-x*x,f=(-(d=-n.x*(h/2-x)-n.y*(p/2-x))+Math.sqrt(d*d-4*c*u))/(2*c)):(c=n.x*n.x/4+n.y*n.y,u=(h/2-x)*(h/2-x)+(p-x)*(p-x)-x*x,f=(-(d=-n.x*(h/2-x)-2*n.y*(p-x))+Math.sqrt(d*d-4*c*u))/(2*c)),{scale:f=Math.min(1,f),pad:s?Math.max(0,x-Math.sqrt(Math.max(0,x*x-(x-(p-n.y*f)/2)*(x-(p-n.y*f)/2)))-o):Math.max(0,x-Math.sqrt(Math.max(0,x*x-(x-(h-n.x*f)/2)*(x-(h-n.x*f)/2)))-o)}}(e,t,a,r,A,x,m,o,p);w=L.scale,z=L.pad}else w=1,s&&(w=Math.min(1,b/A.x,g/A.y)),z=0;var C=n.left*h+n.right*f,H=(n.top+n.bottom)/2,P=(e+M)*h+(t-M)*f,O=(a+r)/2,B=0,D=0;if(u||d){var F=(o?A.x:A.y)/2;x&&(d||p)&&(k+=z);var I=o?S(e,t):S(a,r);o?u?(P=e+I*k,B=-I*F):(P=t-I*k,B=I*F):u?(O=a+I*k,D=-I*F):(O=r-I*k,D=I*F)}return{textX:C,textY:H,targetX:P,targetY:O,anchorX:B,anchorY:D,scale:w,rotate:T}}e.exports={plot:function(e,t,a,u,m,y){var k=t.xaxis,H=t.yaxis,P=e._fullLayout,O=e._context.staticPlot;m||(m={mode:P.barmode,norm:P.barmode,gap:P.bargap,groupgap:P.bargroupgap},h("bar",P));var B=i.makeTraceGroups(u,a,"trace bars").each((function(a){var c=r.select(this),u=a[0].trace,h=a[0].t,B="waterfall"===u.type,D="funnel"===u.type,F="histogram"===u.type,I="bar"===u.type,j=I||D,R=0;B&&u.connector.visible&&"between"===u.connector.mode&&(R=u.connector.line.width/2);var q="h"===u.orientation,U=A(m),X=i.ensureSingle(c,"g","points"),E=T(u),Y=X.selectAll("g.point").data(i.identity,E);Y.enter().append("g").classed("point",!0),Y.exit().remove(),Y.each((function(c,T){var A,B,D=r.select(this),X=function(e,t,a,r){var n=[],i=[],o=r?t:a,s=r?a:t;return n[0]=o.c2p(e.s0,!0),i[0]=s.c2p(e.p0,!0),n[1]=o.c2p(e.s1,!0),i[1]=s.c2p(e.p1,!0),r?[n,i]:[i,n]}(c,k,H,q),E=X[0][0],Y=X[0][1],Z=X[1][0],N=X[1][1],W=0==(q?Y-E:N-Z);if(W&&j&&x.getLineWidth(u,c)&&(W=!1),W||(W=!(n(E)&&n(Y)&&n(Z)&&n(N))),c.isBlank=W,W&&(q?Y=E:N=Z),R&&!W&&(q?(E-=S(E,Y)*R,Y+=S(E,Y)*R):(Z-=S(Z,N)*R,N+=S(Z,N)*R)),"waterfall"===u.type){if(!W){var K=u[c.dir].marker;A=K.line.width,B=K.color}}else A=x.getLineWidth(u,c),B=c.mc||u.marker.color;function $(e){var t=r.round(A/2%1,2);return 0===m.gap&&0===m.groupgap?r.round(Math.round(e)-t,2):e}var G=s.opacity(B)<1||A>.01?$:function(e,t,a){return a&&e===t?e:Math.abs(e-t)>=2?$(e):e>t?Math.ceil(e):Math.floor(e)};e._context.staticPlot||(E=G(E,Y,q),Y=G(Y,E,q),Z=G(Z,N,!q),N=G(N,Z,!q));var J,Q=q?k.c2p:H.c2p;J=c.s0>0?c._sMax:c.s0<0?c._sMin:c.s1>0?c._sMax:c._sMin;var ee,te,ae=I||F?function(e,t){if(!e)return 0;var a,r=q?Math.abs(N-Z):Math.abs(Y-E),n=q?Math.abs(Y-E):Math.abs(N-Z),i=G(Math.abs(Q(J,!0)-Q(0,!0))),o=c.hasB?Math.min(r/2,n/2):Math.min(r/2,i);return a="%"===t?r*(Math.min(50,e)/100):e,G(Math.max(Math.min(a,o),0))}(h.cornerradiusvalue,h.cornerradiusform):0,re="M"+E+","+Z+"V"+N+"H"+Y+"V"+Z+"Z",ne=0;if(ae&&c.s){var ie=0===w(c.s0)||w(c.s)===w(c.s0)?c.s1:c.s0;if((ne=G(c.hasB?0:Math.abs(Q(J,!0)-Q(ie,!0))))<ae){var oe=S(E,Y),se=S(Z,N),le=oe===-se?1:0;if(q)if(c.hasB)ee="M"+(E+ae*oe)+","+Z+"A "+ae+","+ae+" 0 0 "+le+" "+E+","+(Z+ae*se)+"V"+(N-ae*se)+"A "+ae+","+ae+" 0 0 "+le+" "+(E+ae*oe)+","+N+"H"+(Y-ae*oe)+"A "+ae+","+ae+" 0 0 "+le+" "+Y+","+(N-ae*se)+"V"+(Z+ae*se)+"A "+ae+","+ae+" 0 0 "+le+" "+(Y-ae*oe)+","+Z+"Z";else{var ce=(te=Math.abs(Y-E)+ne)<ae?ae-Math.sqrt(te*(2*ae-te)):0,de=ne>0?Math.sqrt(ne*(2*ae-ne)):0,ue=oe>0?Math.max:Math.min;ee="M"+E+","+Z+"V"+(N-ce*se)+"H"+ue(Y-(ae-ne)*oe,E)+"A "+ae+","+ae+" 0 0 "+le+" "+Y+","+(N-ae*se-de)+"V"+(Z+ae*se+de)+"A "+ae+","+ae+" 0 0 "+le+" "+ue(Y-(ae-ne)*oe,E)+","+(Z+ce*se)+"Z"}else if(c.hasB)ee="M"+(E+ae*oe)+","+Z+"A "+ae+","+ae+" 0 0 "+le+" "+E+","+(Z+ae*se)+"V"+(N-ae*se)+"A "+ae+","+ae+" 0 0 "+le+" "+(E+ae*oe)+","+N+"H"+(Y-ae*oe)+"A "+ae+","+ae+" 0 0 "+le+" "+Y+","+(N-ae*se)+"V"+(Z+ae*se)+"A "+ae+","+ae+" 0 0 "+le+" "+(Y-ae*oe)+","+Z+"Z";else{var fe=(te=Math.abs(N-Z)+ne)<ae?ae-Math.sqrt(te*(2*ae-te)):0,he=ne>0?Math.sqrt(ne*(2*ae-ne)):0,pe=se>0?Math.max:Math.min;ee="M"+(E+fe*oe)+","+Z+"V"+pe(N-(ae-ne)*se,Z)+"A "+ae+","+ae+" 0 0 "+le+" "+(E+ae*oe-he)+","+N+"H"+(Y-ae*oe+he)+"A "+ae+","+ae+" 0 0 "+le+" "+(Y-fe*oe)+","+pe(N-(ae-ne)*se,Z)+"V"+Z+"Z"}}else ee=re}else ee=re;var xe=z(i.ensureSingle(D,"path"),P,m,y);if(xe.style("vector-effect",O?"none":"non-scaling-stroke").attr("d",isNaN((Y-E)*(N-Z))||W&&e._context.staticPlot?"M0,0Z":ee).call(l.setClipUrl,t.layerClipId,e),!P.uniformtext.mode&&U){var me=l.makePointStyleFns(u);l.singlePointStyle(c,xe,u,me,e)}!function(e,t,a,r,n,s,c,u,h,m,y,k,T){var w,A=t.xaxis,H=t.yaxis,P=e._fullLayout;function O(t,a,r){return i.ensureSingle(t,"text").text(a).attr({class:"bartext bartext-"+w,"text-anchor":"middle","data-notex":1}).call(l.font,r).call(o.convertToTspans,e)}var B=r[0].trace,D="h"===B.orientation,F=function(e,t,a,r,n){var o,s=t[0].trace;return o=s.texttemplate?function(e,t,a,r,n){var o=t[0].trace,s=i.castOption(o,a,"texttemplate");if(!s)return"";var l,c,u,f,h="histogram"===o.type,p="waterfall"===o.type,x="funnel"===o.type,m="h"===o.orientation;function y(e){return d(f,f.c2l(e),!0).text}m?(l="y",c=n,u="x",f=r):(l="x",c=r,u="y",f=n);var v,b=t[a],M={};M.label=b.p,M.labelLabel=M[l+"Label"]=(v=b.p,d(c,c.c2l(v),!0).text);var k=i.castOption(o,b.i,"text");(0===k||k)&&(M.text=k),M.value=b.s,M.valueLabel=M[u+"Label"]=y(b.s);var T={};g(T,o,b.i),(h||void 0===T.x)&&(T.x=m?M.value:M.label),(h||void 0===T.y)&&(T.y=m?M.label:M.value),(h||void 0===T.xLabel)&&(T.xLabel=m?M.valueLabel:M.labelLabel),(h||void 0===T.yLabel)&&(T.yLabel=m?M.labelLabel:M.valueLabel),p&&(M.delta=+b.rawS||b.s,M.deltaLabel=y(M.delta),M.final=b.v,M.finalLabel=y(M.final),M.initial=M.final-M.delta,M.initialLabel=y(M.initial)),x&&(M.value=b.s,M.valueLabel=y(M.value),M.percentInitial=b.begR,M.percentInitialLabel=i.formatPercent(b.begR),M.percentPrevious=b.difR,M.percentPreviousLabel=i.formatPercent(b.difR),M.percentTotal=b.sumR,M.percenTotalLabel=i.formatPercent(b.sumR));var w=i.castOption(o,b.i,"customdata");return w&&(M.customdata=w),i.texttemplateString(s,M,e._d3locale,T,M,o._meta||{})}(e,t,a,r,n):s.textinfo?function(e,t,a,r){var n=e[0].trace,o="h"===n.orientation,s="waterfall"===n.type,l="funnel"===n.type;function c(e){return d(o?a:r,+e,!0).text}var u,f,h=n.textinfo,p=e[t],x=h.split("+"),m=[],y=function(e){return-1!==x.indexOf(e)};if(y("label")&&m.push((f=e[t].p,d(o?r:a,f,!0).text)),y("text")&&(0===(u=i.castOption(n,p.i,"text"))||u)&&m.push(u),s){var v=+p.rawS||p.s,b=p.v,g=b-v;y("initial")&&m.push(c(g)),y("delta")&&m.push(c(v)),y("final")&&m.push(c(b))}if(l){y("value")&&m.push(c(p.s));var M=0;y("percent initial")&&M++,y("percent previous")&&M++,y("percent total")&&M++;var k=M>1;y("percent initial")&&(u=i.formatPercent(p.begR),k&&(u+=" of initial"),m.push(u)),y("percent previous")&&(u=i.formatPercent(p.difR),k&&(u+=" of previous"),m.push(u)),y("percent total")&&(u=i.formatPercent(p.sumR),k&&(u+=" of total"),m.push(u))}return m.join("<br>")}(t,a,r,n):x.getValue(s.text,a),x.coerceString(v,o)}(P,r,n,A,H);w=function(e,t){var a=x.getValue(e.textposition,t);return x.coerceEnumerated(b,a)}(B,n);var I="stack"===k.mode||"relative"===k.mode,j=r[n],R=!I||j._outmost,q=j.hasB,U=m&&m-y>M;if(F&&"none"!==w&&(!j.isBlank&&s!==c&&u!==h||"auto"!==w&&"inside"!==w)){var X=P.font,E=p.getBarColor(r[n],B),Y=p.getInsideTextFont(B,n,X,E),Z=p.getOutsideTextFont(B,n,X),N=B.insidetextanchor||"end",W=a.datum();D?"log"===A.type&&W.s0<=0&&(s=A.range[0]<A.range[1]?0:A._length):"log"===H.type&&W.s0<=0&&(u=H.range[0]<H.range[1]?H._length:0);var K,$,G,J,Q,ee=Math.abs(c-s),te=Math.abs(h-u),ae=ee-2*M,re=te-2*M;if("outside"===w&&(R||j.hasB||(w="inside")),"auto"===w)if(R){w="inside",K=O(a,F,Q=i.ensureUniformFontSize(e,Y)),G=($=l.bBox(K.node())).width,J=$.height;var ne,ie=G>0&&J>0;ne=U?q?L(ae-2*m,re,G,J,D)||L(ae,re-2*m,G,J,D):D?L(ae-(m-y),re,G,J,D)||L(ae,re-2*(m-y),G,J,D):L(ae,re-(m-y),G,J,D)||L(ae-2*(m-y),re,G,J,D):L(ae,re,G,J,D),ie&&ne?w="inside":(w="outside",K.remove(),K=null)}else w="inside";if(!K){var oe=(K=O(a,F,Q=i.ensureUniformFontSize(e,"outside"===w?Z:Y))).attr("transform");if(K.attr("transform",""),G=($=l.bBox(K.node())).width,J=$.height,K.attr("transform",oe),G<=0||J<=0)return void K.remove()}var se,le=B.textangle;se="outside"===w?function(e,t,a,r,n,i){var o,s=!!i.isHorizontal,l=!!i.constrained,c=i.angle||0,d=n.width,u=n.height,f=Math.abs(t-e),h=Math.abs(r-a);o=s?h>2*M?M:0:f>2*M?M:0;var p=1;l&&(p=s?Math.min(1,h/u):Math.min(1,f/d));var x=_(c),m=V(n,x),y=(s?m.x:m.y)/2,v=(n.left+n.right)/2,b=(n.top+n.bottom)/2,g=(e+t)/2,k=(a+r)/2,T=0,w=0,z=s?S(t,e):S(a,r);return s?(g=t-z*o,T=z*y):(k=r+z*o,w=-z*y),{textX:v,textY:b,targetX:g,targetY:k,anchorX:T,anchorY:w,scale:p,rotate:x}}(s,c,u,h,$,{isHorizontal:D,constrained:"both"===B.constraintext||"outside"===B.constraintext,angle:le}):C(s,c,u,h,$,{isHorizontal:D,constrained:"both"===B.constraintext||"inside"===B.constraintext,angle:le,anchor:N,hasB:q,r:m,overhead:y}),se.fontSize=Q.size,f("histogram"===B.type?"bar":B.type,se,P),j.transform=se;var ce=z(K,P,k,T);i.setTransormAndDisplay(ce,se)}else a.select("text").remove()}(e,t,D,a,T,E,Y,Z,N,ae,ne,m,y),t.layerClipId&&l.hideOutsideRangePoint(c,D.select("text"),k,H,u.xcalendar,u.ycalendar)}));var Z=!1===u.cliponaxis;l.setClipUrl(c,Z?null:t.layerClipId,e)}));c.getComponentMethod("errorbars","plot")(e,B,t,m)},toMoveInsideBar:C}},42470:(e,t,a)=>{var r=a(21132),n=a(84127),i=a(16566),o=a(38338),s=a(56471),l=a(56993).resizeText,c=a(88442),d=c.textfont,u=c.insidetextfont,f=c.outsidetextfont,h=a(18402);function p(e,t,a){i.pointStyle(e.selectAll("path"),t,a),x(e,t,a)}function x(e,t,a){e.selectAll("text").each((function(e){var n=r.select(this),s=o.ensureUniformFontSize(a,m(n,e,t,a));i.font(n,s)}))}function m(e,t,a,r){var n=r._fullLayout.font,i=a.textfont;if(e.classed("bartext-inside")){var o=M(t,a);i=v(a,t.i,n,o)}else e.classed("bartext-outside")&&(i=b(a,t.i,n));return i}function y(e,t,a){return g(d,e.textfont,t,a)}function v(e,t,a,r){var i=y(e,t,a);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(i={color:n.contrast(r),family:i.family,size:i.size,weight:i.weight,style:i.style,variant:i.variant,textcase:i.textcase,lineposition:i.lineposition,shadow:i.shadow}),g(u,e.insidetextfont,t,i)}function b(e,t,a){var r=y(e,t,a);return g(f,e.outsidetextfont,t,r)}function g(e,t,a,r){t=t||{};var n=h.getValue(t.family,a),i=h.getValue(t.size,a),o=h.getValue(t.color,a),s=h.getValue(t.weight,a),l=h.getValue(t.style,a),c=h.getValue(t.variant,a),d=h.getValue(t.textcase,a),u=h.getValue(t.lineposition,a),f=h.getValue(t.shadow,a);return{family:h.coerceString(e.family,n,r.family),size:h.coerceNumber(e.size,i,r.size),color:h.coerceColor(e.color,o,r.color),weight:h.coerceString(e.weight,s,r.weight),style:h.coerceString(e.style,l,r.style),variant:h.coerceString(e.variant,c,r.variant),textcase:h.coerceString(e.variant,d,r.textcase),lineposition:h.coerceString(e.variant,u,r.lineposition),shadow:h.coerceString(e.variant,f,r.shadow)}}function M(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}e.exports={style:function(e){var t=r.select(e).selectAll('g[class^="barlayer"]').selectAll("g.trace");l(e,t,"bar");var a=t.size(),n=e._fullLayout;t.style("opacity",(function(e){return e[0].trace.opacity})).each((function(e){("stack"===n.barmode&&a>1||0===n.bargap&&0===n.bargroupgap&&!e[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")})),t.selectAll("g.points").each((function(t){p(r.select(this),t[0].trace,e)})),s.getComponentMethod("errorbars","style")(t)},styleTextPoints:x,styleOnSelect:function(e,t,a){var n=t[0].trace;n.selectedpoints?function(e,t,a){i.selectedPointStyle(e.selectAll("path"),t),function(e,t,a){e.each((function(e){var n,s=r.select(this);if(e.selected){n=o.ensureUniformFontSize(a,m(s,e,t,a));var l=t.selected.textfont&&t.selected.textfont.color;l&&(n.color=l),i.font(s,n)}else i.selectedTextStyle(s,t)}))}(e.selectAll("text"),t,a)}(a,n,e):(p(a,n,e),s.getComponentMethod("errorbars","style")(a))},getInsideTextFont:v,getOutsideTextFont:b,getBarColor:M,resizeText:l}},7951:(e,t,a)=>{var r=a(84127),n=a(6401).hasColorscale,i=a(83465),o=a(38338).coercePattern;e.exports=function(e,t,a,s,l){var c=a("marker.color",s),d=n(e,"marker");d&&i(e,t,l,a,{prefix:"marker.",cLetter:"c"}),a("marker.line.color",r.defaultLine),n(e,"marker.line")&&i(e,t,l,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width"),a("marker.opacity"),o(a,"marker.pattern",c,d),a("selected.marker.color"),a("unselected.marker.color")}},56993:(e,t,a)=>{var r=a(21132),n=a(38338);function i(e){return"_"+e+"Text_minsize"}e.exports={recordMinTextSize:function(e,t,a){if(a.uniformtext.mode){var r=i(e),n=a.uniformtext.minsize,o=t.scale*t.fontSize;t.hide=o<n,a[r]=a[r]||1/0,t.hide||(a[r]=Math.min(a[r],Math.max(o,n)))}},clearMinTextSize:function(e,t){t[i(e)]=void 0},resizeText:function(e,t,a){var i=e._fullLayout,o=i["_"+a+"Text_minsize"];if(o){var s,l="hide"===i.uniformtext.mode;switch(a){case"funnelarea":case"pie":case"sunburst":s="g.slice";break;case"treemap":case"icicle":s="g.slice, g.pathbar";break;default:s="g.points > g.point"}t.selectAll(s).each((function(e){var t=e.transform;if(t){t.scale=l&&t.hide?0:o/t.fontSize;var a=r.select(this).select("text");n.setTransormAndDisplay(a,t)}}))}}}}}]);