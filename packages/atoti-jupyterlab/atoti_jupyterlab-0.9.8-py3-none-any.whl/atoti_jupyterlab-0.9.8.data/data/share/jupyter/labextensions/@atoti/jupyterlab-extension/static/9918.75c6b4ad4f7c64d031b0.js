/*! For license information please see 9918.75c6b4ad4f7c64d031b0.js.LICENSE.txt */
"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[9918,4389,6770,1532,5723,7537],{7537:(e,t,r)=>{r.r(t),r.d(t,{canOpenDrillthroughOnSelection:()=>g,getDrillthroughWidgetFilters:()=>b,pluginMenuItemOpenDrillthrough:()=>_});var n=r(74389),l=r(93345),o=r(95889),a=r(51951),i=r(44494),s=r(76251),u=r(38988),c=r(22392),d=r(22485),h=r(55418),m=r(17553),f=r(76747);function g(e){return void 0!==e&&!(e.axes&&e.axes.length>0)&&void 0!==e.cells&&1===e.cells.length&&void 0!==e.cells[0].value}var p=r(55629),y=r(17348);function b({sourceWidgetFilters:e,tuple:t}){return[...e??[],...t.map((({dimensionName:e,hierarchyName:t,namePath:r})=>({type:"members",dimensionName:e,hierarchyName:t,members:[r]})))]}const _={key:"open-drillthrough",useMenuItem:e=>{const{selection:t,widgetState:r}=e,{cube:_}=(0,f.useCube)(r),{formatMessage:x}=(0,o.useIntl)(),v=(0,s.g)(),C=(0,l.useMemo)((()=>{if(g(t))return t.cells[0].tuple.filter((e=>(0,d.t)(e)||!(0,i.isTotal)((0,h.q)(e,_),e)))}),[_,t]),D=(0,l.useMemo)((()=>{if(C){const e=C.filter((e=>!(0,d.t)(e)));return x({id:"aui.plugins.menu-item.open-drillthrough.openDrillthrough"},{member:e.length>0?(0,i.getTupleCaption)(e,{captionForTotals:x({id:"aui.total"}),cube:_,separator:", ",hasOnlyCaptionForLeafLevels:!0}):void 0})}}),[x,C,_]),O=(0,l.useCallback)((async()=>{if(v&&D&&C&&(0,a.M)(e)){const t=(0,u.z)(e.dashboardState.pagesOrder),n=e.dashboardState.pagesOrder.indexOf(v),l=e.dashboardState.pages[v];if(void 0===r.query.mdx)return;const o=function({name:e,sourceWidget:t,sourceWidgetPage:r,tuple:n,cube:l}){const o=b({sourceWidgetFilters:t.filters,tuple:n}),a={mdx:(0,p.getDefaultMdxDrillthrough)(l.name)};return t.query.mdx&&t.query.mdx.withClause&&(a.mdx.select.withClause=t.query.mdx.withClause),{name:e,content:{0:{...y._.initialState,shouldUseDefaultColumns:!0,query:a,serverKey:t.serverKey,initialCubeName:l.name,filters:o}},layout:{direction:"column",children:[{leafKey:"0",size:1}]},filters:r.filters}}({name:D,sourceWidget:r,sourceWidgetPage:l,tuple:C,cube:_}),a=(0,c.H)(e.dashboardState,{page:o,key:t,index:n+1});e.onDashboardChange(a),e.onActivePageChange(t)}}),[v,_,D,e,C,r]);if((0,a.M)(e)&&C&&r.query.mdx)return{icon:(0,n.Y)(m.IconDrillthrough,{}),label:D,onClick:O}},translations:{"en-US":{openDrillthrough:"Drillthrough {member, select,\n           undefined {}\n           other {on {member}}\n          }"},"fr-FR":{openDrillthrough:"Drillthrough {member, select,\n           undefined {}\n           other {sur {member}}\n          }"}}}},74389:(e,t,r)=>{r.d(t,{FD:()=>i,FK:()=>o,Y:()=>a});var n=r(65723),l=r(42369),o=(r(93345),r(77619),r(4674),r(21880),r(48785),n.Fragment);function a(e,t,r){return l.h.call(t,"css")?n.jsx(l.E,(0,l.c)(e,t),r):n.jsx(e,t,r)}function i(e,t,r){return l.h.call(t,"css")?n.jsxs(l.E,(0,l.c)(e,t),r):n.jsxs(e,t,r)}},62921:(e,t,r)=>{var n=r(93345),l=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,o={},u=null,c=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,n)&&!s.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:l,type:e,key:u,ref:c,props:o,_owner:i.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},65723:(e,t,r)=>{e.exports=r(62921)}}]);