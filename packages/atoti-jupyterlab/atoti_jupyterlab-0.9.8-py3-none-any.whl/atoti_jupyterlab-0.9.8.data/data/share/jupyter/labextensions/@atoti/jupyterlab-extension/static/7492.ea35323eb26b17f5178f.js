(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[7492],{87492:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var a=n(74389),r=n(31529),i=n(93345),o=n(60162),s=n.n(o),d=n(44494),l=n(47695),u=n(22485),g=n(70035),h=n(85781),y=n(58611),f=n(69682),c=n(86491),m=n(55629),w=n(48699),p=n(76747),C=n(44245);const b=(0,r.debounce)((({visibleRange:e,chunkSizes:t,data:n,widgetName:a,onQueryRangesChanged:r})=>{if(!t)return;const i={};let o=!1;(0,w.W)(t).forEach((([r,s])=>{if(void 0===s)throw new Error(`Undefined chunkSize for the axis "${r}" in the lazy loading configuration of "${a}". This is not supported.\nEncountered widgetPlugin.lazyLoading.chunkSizes = ${JSON.stringify(t,void 0,2)}`);const d=m.axisIds[r],l=n.axes.find((e=>e.id===d)),u=l?.range,g=e[r].from,h=e[r].to;if(!u||u.entireAxis)i[d]={from:0,to:s-1};else if(g>=u.from&&h<=u.to)i[d]={from:u.from,to:u.to};else{const e=g+Math.floor((h-g)/2),t=Math.max(0,Math.min(u.axisLength-s,e-Math.ceil(s/2))),n=Math.min(t+s,u.axisLength);i[d]={from:t,to:n},o=o||t!==u.from||n!==u.to}})),o&&r(i)}),300),S=e=>{const{data:t,widgetState:n,onQueryRangesChanged:r}=e,o=n.switchedTo??n.widgetKey,[s]=(0,f.useWidgetPlugins)([o]),d=s?.lazyLoading?.chunkSizes,l=(0,p.useWidgetName)(n),u=(0,i.useCallback)((e=>b({visibleRange:e,chunkSizes:d,data:t,widgetName:l,onQueryRangesChanged:r})),[d,t,l,r]);return(0,a.Y)(C.p,{...e,onVisibleRangeChanged:u})};var v=n(33349),x=n(4435);const R=e=>e,k=(0,i.memo)((0,p.withLoadingOverlay)((e=>{(0,v.useCallOnLoadedAfterFirstProperRender)(e);const{queryResult:t,onSelectionChange:n,widgetState:r,onChange:o,onElementsActioned:s}=e,{widgetKey:l}=e.widgetState,[m]=(0,f.useWidgetPlugins)([l]),w=(0,p.useWidgetName)(r);(0,i.useMemo)((()=>{(0,g.K)(w,r.style?.measures)}),[r.style?.measures,w]);const[C]=(0,h.W0)([m?.cell]),[b]=(0,y.n6)([m?.cellStyle]),k=(0,i.useCallback)((b?.withCellStyle??R)(C?.Cell??c.Y),[C,b]);k.displayName="WithCellStyle";const W=(0,p.useFilters)({widgetState:r}),z=(0,i.useMemo)((()=>[...W.user,...W.dashboard,...W.page,...W.widget].some((({filter:e})=>(0,u.t)(e)))),[W]),M=(0,i.useMemo)((()=>!(0,d.isCellSetEmpty)(t.data)),[t.data]);if((0,p.isMappingEmpty)(r.mapping)&&!z)return(0,a.Y)(x.M,{size:e.widgetState.style?.size,style:e.style,reason:"noQuery"});if(!t.isLoading&&t.error){if((0,d.isErrorInQueryResultOfType)(t.error,"QueryTimeoutException"))throw new d.QueryTimeoutError(t.error);throw new d.QueryError(t.error)}return t.data&&M?(0,a.Y)(S,{Cell:k,containerStyle:e.style,data:t.data,isRowHeaderTree:e.isRowHeaderTree,onChange:o,onSelectionChange:n,widgetState:e.widgetState,onQueryRangesChanged:e.onQueryRangesChanged,onRowsActioned:s}):(0,a.Y)(x.M,{size:e.widgetState.style?.size,style:e.style,...0===t.data?.cells.length?{reason:"noData",widgetState:r,onStateChange:o}:{reason:"noQuery"}})})),((e,t)=>{if((0,p.isWidgetInDashboard)(t)!==(0,p.isWidgetInDashboard)(e))return!1;if((0,p.isWidgetInDashboard)(t)&&(0,p.isWidgetInDashboard)(e)){const{dashboardState:n,...a}=(0,r.omit)(e,"onDashboardChange"),{dashboardState:i,...o}=(0,r.omit)(t,"onDashboardChange"),d=(0,l.W)(n,e.pageKey),u=(0,l.W)(i,t.pageKey);return s()(a,o)&&n.filters===i.filters&&d?.filters===u?.filters&&n.queryContext===i.queryContext&&d?.queryContext===u?.queryContext}return s()(e,t)}))},60162:e=>{e.exports=function(e,t,n,a){var r=n?n.call(a,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),d=0;d<i.length;d++){var l=i[d];if(!s(l))return!1;var u=e[l],g=t[l];if(!1===(r=n?n.call(a,u,g,l):void 0)||void 0===r&&u!==g)return!1}return!0}}}]);