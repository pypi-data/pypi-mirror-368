import{c as g,o as l,b as a,g as Y,r as k,a3 as xe,d as r,F as Z,p as de,k as L,w,a4 as pe,m as ue,D as n,t as q,a5 as ge,a6 as Me,H as Re,S as Oe,q as ne,K as F,aW as we,b4 as G,O as te,a0 as N,a8 as Be,h as T,E as B,e as $e,a$ as Ne,b0 as Te,Z as De,b5 as ze,aX as Fe,a as qe,aG as He,aH as We,aI as Ye,b6 as Ze,aT as Ge,aD as Qe,aE as ve,s as Je,M as Ke,i as W,v as Ce,x as Xe,G as ye,l as $,V as et,T as be,W as ee,Y as tt,$ as st}from"./NPuImVR8.js";import{a as ot,r as rt}from"./C0e45Zpe.js";import{b as Ve,T as nt,r as he,_ as lt,a as at,c as it,e as ut,d as dt}from"./DAHZNFiY.js";import{_ as ct}from"./DQtESi-P.js";import{_ as mt}from"./Cm2HFvx3.js";import{_ as ft}from"./BtofsI7x.js";import{l as pt,d as gt,s as _e,_ as vt,u as yt}from"./ZYnyzn4r.js";import{u as bt}from"./DVwAMWB5.js";import"./BxyzSg_3.js";function ke(S,s){return l(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})])}function ht(S,s){return l(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"})])}const _t={base:"animate-pulse",background:"bg-gray-100 dark:bg-gray-800",rounded:"rounded-md"},kt={class:"mb-4"},xt={class:""},wt={class:"relative rounded-lg shadow flex divide-x divide-gray-200 dark:divide-gray-700","aria-label":"Tabs"},$t=["to","onClick"],Tt=["onClick"],Ct=["onClick"],Vt={class:"absolute right-[1em] focus:outline-none"},Lt=Y({__name:"LiveTabs",props:{currentTab:{},tabs:{}},emits:["close","cancel"],setup(S,{emit:s}){const x=xe(),v=k(x.params.id),y=k(!1),o=k(!1),C=k(null),p=k(null),c=s;function u(i){if(Object.keys(G().tabs).length>=te().planLimits.live_trading_tabs){N("error",`You have reached the limit of "${te().planLimits.live_trading_tabs}" tabs for your "${te().plan}" plan. Please upgrade your plan to add more tabs.`);return}G().addTab(i)}function V(i){Be().push(`/live/${i}`)}function U(i){if(!i.form.routes.length)return"New Tab";if(i.results.exception.error&&i.results.monitoring)return"Error";const m=i.form.routes[0];let f="";const A=i.form.exchange;return A&&(f+=`${A} â€¢ `),m.strategy&&(f+=`${m.strategy} â€¢ `),m.symbol&&(f+=`${m.symbol} â€¢ `),m.timeframe&&(f+=`${m.timeframe}`),f=f.endsWith(" â€¢ ")?f.slice(0,-3):f,i.results.monitoring&&!i.results.finished?`ðŸŸ¢ ${f}`:i.results.exception.error&&i.results.monitoring?`ðŸ”´ ${f}`:i.results.showResults?`${f} | Results`:f}function E(i){C.value=i.id,i.results.exception.error||i.results.finished||i.results.booting?y.value=!0:c("close",C.value)}return(i,m)=>{const f=Oe,A=ne,H=we;return l(),g("div",kt,[a("div",xt,[a("nav",wt,[(l(!0),g(Z,null,de(i.tabs,h=>(l(),L(f,{key:h.id,class:"relative group min-w-0 flex-1 overflow-hidden text-center flex items-center",text:U(h),"open-delay":700,onMouseup:Re(D=>E(h),["middle"])},{default:w(()=>[a("div",{to:`/live/${h.id}`,class:ue([h.id===n(v)?"text-gray-900 dark:text-gray-100 font-bold ":"text-gray-500 dark:text-gray-300 hover:text-gray-700 font-medium ","whitespace-nowrap py-3 px-4 inline-block select-none cursor-pointer focus:outline-none w-full text-xs bg-gray-50 dark:bg-backdrop-dark"]),onClick:D=>V(h.id)},[a("span",null,q(U(h)),1),a("span",{"aria-hidden":"true",class:ue([h.id===n(v)&&Object.keys(i.tabs).length>1?"bg-indigo-400":"bg-transparent dark:bg-gray-600","absolute inset-x-0 bottom-0 h-0.5"])},null,2)],10,$t),(h.results.booting||h.results.monitoring)&&!h.results.finished?pe((l(),g("button",{key:0,class:"absolute right-[0.5em] focus:outline-none",onClick:D=>{o.value=!0,p.value=h.id}},[r(n(ot),{class:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-200 bg-gray-100 dark:bg-gray-700 rounded-full","aria-hidden":"true"})],8,Tt)),[[ge,Object.keys(i.tabs).length>1]]):pe((l(),g("button",{key:1,class:"hidden md:block absolute right-[0.5em] focus:outline-none",onClick:D=>E(h)},[r(n(Me),{class:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-200 bg-gray-100 dark:bg-gray-700 rounded-full","aria-hidden":"true"})],8,Ct)),[[ge,Object.keys(i.tabs).length>1]])]),_:2},1032,["text","onMouseup"]))),128)),r(f,{text:"New Tab",popper:{arrow:!0}},{default:w(()=>[a("div",{class:"select-none cursor-pointer text-gray-400 dark:text-gray-100 hover:text-gray-600 focus:outline-none group relative w-14 overflow-hidden bg-gray-50 dark:bg-backdrop-dark py-3 px-4 font-medium hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center justify-center",onClick:m[0]||(m[0]=h=>u(i.currentTab))},[a("button",Vt,[r(n(rt),{class:"h-6 w-6 rounded-full","aria-hidden":"true"})]),m[5]||(m[5]=a("span",{"aria-hidden":"true",class:"absolute inset-x-0 bottom-0 h-0.5 bg-transparent dark:bg-gray-600"},null,-1))])]),_:1})])]),r(H,{modelValue:n(o),"onUpdate:modelValue":m[2]||(m[2]=h=>F(o)?o.value=h:null),title:"Termination Confirm",description:"Are you sure you want to terminate this session?",type:"info"},{default:w(()=>[r(A,{variant:"solid",color:"red",class:"flex justify-center",label:"Terminate",onClick:m[1]||(m[1]=h=>{c("cancel",n(p)),o.value=!1})})]),_:1},8,["modelValue"]),r(H,{modelValue:n(y),"onUpdate:modelValue":m[4]||(m[4]=h=>F(y)?y.value=h:null),title:"Close Live Tab Confirm",description:"Are you sure you want to close this tab?",cancelBtnContent:"cancel",type:"info"},{default:w(()=>[r(A,{variant:"solid",color:"red",class:"flex justify-center",label:"Close",onClick:m[3]||(m[3]=h=>{c("close",n(C)),y.value=!1})})]),_:1},8,["modelValue"])])}}}),St=Y({__name:"LiveOrders",props:{orders:{}},setup(S){const s=S,x=T(()=>{if(!s.orders.length)return[];const v=[];for(let y=s.orders.length-1;y>=0;y--){const o=s.orders[y];v.push([{value:o.id.slice(-12),style:"text-xs",tooltip:o.id,tag:"code"},{value:B.timestampToTimeOnly(o.created_at),style:"text-xs",tooltip:B.timestampToTime(o.created_at)},{value:o.symbol,style:"text-xs"},{value:o.type,style:"text-xs"},{value:o.side,style:B.colorBasedOnSide(o.side)},{value:o.price,style:"text-xs"},{value:o.qty,style:B.colorBasedOnSide(o.side)},{value:o.status,style:"text-xs"}])}return v});return(v,y)=>{const o=Ve,C=ct;return n(x).length?(l(),L(o,{key:0,data:n(x),"header-items":["ID","Created","Symbol","Type","Side","Price","QTY","Status"],header:""},null,8,["data"])):(l(),L(C,{key:1}))}}}),Pt={class:"flex justify-end item-center"},It={class:"flex justify-end"},Et=Y({__name:"ReportLiveSession",props:{session:{}},emits:["close"],setup(S,{emit:s}){const x=s,v=k(!1),y=S,o=k({description:"",email:""}),C=()=>{x("close")},p=async()=>{if(v.value=!0,!o.value.description){N("error","Please enter a description."),v.value=!1;return}const{data:c,error:u}=await Fe("/system/report-exception",{description:o.value.description,email:o.value.email,traceback:"manual report",mode:"live",attach_logs:!0,session_id:y.session},!0);if(v.value=!1,u.value&&u.value.statusCode!==200){N("error",`[${u.value.statusCode}]: ${u.value.statusText}`);return}const V=c.value;V.status==="success"?(o.value.description="",o.value.email="",N("success",V.message),C()):V.status==="error"&&N("error",V.message)};return(c,u)=>{const V=De,U=Te,E=ze,i=ne,m=Ne;return l(),g(Z,null,[u[5]||(u[5]=a("p",null," If you think something is wrong with your running live session, you can submit a report. By submitting this form, the logs of this session will be sent to Jesse's developers so we can see what's going on. ",-1)),u[6]||(u[6]=a("br",null,null,-1)),u[7]||(u[7]=a("p",null,[$e("Your exchange API keys and strategies are safe and "),a("b",null,"are never sent to us.")],-1)),u[8]||(u[8]=a("br",null,null,-1)),r(m,{state:n(o),class:"space-y-4",onSubmit:p},{default:w(()=>[r(U,{label:"Email (optional)",help:"Enter your email address for us to know who sent the email and possibly reply back to you."},{default:w(()=>[r(V,{modelValue:n(o).email,"onUpdate:modelValue":u[0]||(u[0]=f=>n(o).email=f),placeholder:"Email address...",type:"email"},null,8,["modelValue"])]),_:1}),u[3]||(u[3]=a("br",null,null,-1)),r(U,{label:"Description:",name:"Description"},{default:w(()=>[r(E,{modelValue:n(o).description,"onUpdate:modelValue":u[1]||(u[1]=f=>n(o).description=f),rows:10,placeholder:"Describe what you think is wrong in this session..."},null,8,["modelValue"])]),_:1}),u[4]||(u[4]=a("br",null,null,-1)),a("div",Pt,[a("div",It,[r(i,{color:"gray",variant:"link",class:"mr-8",label:"Cancel",onClick:u[2]||(u[2]=f=>C())}),r(i,{type:"submit",class:"w-48 flex justify-center",label:"Submit",loading:n(v),disabled:n(v)},null,8,["loading","disabled"])])])]),_:1},8,["state"])],64)}}}),jt=Qe(ve.ui.strategy,ve.ui.skeleton,_t),Ut=Y({inheritAttrs:!1,props:{class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(S){const{ui:s,attrs:x}=We("skeleton",Ye(S,"ui"),jt),v=T(()=>Ze(Ge(s.value.base,s.value.background,s.value.rounded),S.class));return{ui:s,attrs:x,skeletonClass:v}}});function At(S,s,x,v,y,o){return l(),g("div",He({class:S.skeletonClass},S.attrs),null,16)}const Mt=qe(Ut,[["render",At]]),Rt={class:"mb-16"},Ot={key:0,class:"rounded overflow-hidden border-2 border-gray-100 dark:border-gray-600 p-4"},Bt={key:1},Nt=Y({__name:"CandlesChart",props:{form:{},results:{}},setup(S){const s=Je(),x=T(()=>Ke().params.id),v=k(!0),y=k(2),o=S,C=k();let p=null,c=null;const u={orderEntries:{},positionEntry:null},V=T(()=>s.value),U=o.form.exchange,E=T(()=>`${U}-${o.results.selectedRoute.symbol}-${o.results.selectedRoute.timeframe}`),i=T(()=>o.results.currentCandles),m=T(()=>{const b=o.results.positions.find(_=>_[0].value===o.results.selectedRoute.symbol);return b===void 0?[]:b}),f=T(()=>m.value[2].value),A=T(()=>Number(m.value[1].value)>0?"long":Number(m.value[1].value)<0?"short":"close");W(V,b=>{re(b)}),W(f,(b,_)=>{c!==null&&b!==_&&D()}),W(()=>o.results.orders,()=>{c!==null&&se()},{deep:!0}),W(i,(b,_)=>{c!==null&&oe(b[E.value],b[E.value])}),Ce(async()=>{setTimeout(async()=>{await H()},200)});async function H(){v.value=!0,await G().fetchCandles(x.value),v.value=!1,_e.width=C.value.clientWidth,p=nt(C.value,_e),p.applyOptions({watermark:{visible:!0,fontSize:16,horzAlign:"left",vertAlign:"bottom",color:"#888",text:`${o.results.selectedRoute.symbol} â€¢ ${o.results.selectedRoute.timeframe}`}}),c=p.addCandlestickSeries(),c.setData(o.results.candles),p.timeScale().fitContent(),c.applyOptions({priceFormat:{type:"price",precision:y.value,minMove:.01}}),oe(o.results.candles[0],o.results.candles[1]),D(),se(),re(V.value)}Xe(()=>{h()});function h(){p!==null&&(p.remove(),p=null),c&&(c=null)}function D(){const b=A.value==="long"?"#00AB5C":"#FF497D";if(u.positionEntry&&c.removePriceLine(u.positionEntry),Number(f.value)>0){const _={price:Number(f.value),color:b,lineWidth:1,lineStyle:0,axisLabelVisible:!0,title:"Entry Price"};u.positionEntry=c.createPriceLine(_)}}function se(){const b=m.value[0].value;for(const _ in u.orderEntries)c.removePriceLine(u.orderEntries[_]),delete u.orderEntries[_];o.results.orders.forEach(_=>{const I=_.side==="buy"?"#00AB5C":"#FF497D",z=ye.startCase(ye.lowerCase(`${_.side} ${_.type}`));if((_.status==="ACTIVE"||_.status==="QUEUED")&&_.symbol===b){const j={price:Number(_.price),color:I,lineWidth:1,lineStyle:0,axisLabelVisible:!0,title:z};u.orderEntries[_.id]=c.createPriceLine(j)}})}function oe(b,_){if(b===void 0)throw new TypeError("candle is undefined!");if(o.results.candles.length===0)return;const I=String(b.open).indexOf("."),z=I===-1?0:String(b.open).length-I-1,j=String(_.open).indexOf("."),Q=j===-1?0:String(_.open).length-j-1,J=z>Q?z:Q;y.value=J,(y.value<0||y.value>100)&&(y.value=0),c.applyOptions({priceFormat:{type:"price",precision:y.value,minMove:Math.pow(10,-J).toFixed(J)}}),c.update(o.results.currentCandles[E.value])}function re(b){p!==null&&p.applyOptions(b==="light"?pt.chart:gt.chart)}function le(b){o.results.selectedRoute=b,h(),H()}return(b,_)=>{const I=Mt,z=ne;return l(),g("div",Rt,[n(v)?(l(),g("div",Ot,[r(I,{class:"h-4 w-full mb-4"}),r(I,{class:"h-4 w-2/3 mb-4"}),r(I,{class:"h-4 w-1/2 mb-4"}),r(I,{class:"h-4 w-full mb-4"}),r(I,{class:"h-4 w-full mb-4"}),r(I,{class:"h-4 w-2/3 mb-4"}),r(I,{class:"h-4 w-full mb-4"}),r(I,{class:"h-4 w-full"})])):$("",!0),a("div",{ref_key:"chartContainer",ref:C,class:ue({"rounded overflow-hidden border-2 border-gray-100 dark:border-gray-600":!n(v)})},null,2),o.form.routes.length>1?(l(),g("div",Bt,[(l(!0),g(Z,null,de(o.form.routes,j=>(l(),L(z,{key:j.symbol,variant:"soft",color:"gray",disabled:b.results.selectedRoute.symbol===j.symbol&&b.results.selectedRoute.timeframe===j.timeframe,class:"mt-2 mr-2",onClick:Q=>le(j)},{default:w(()=>[$e(q(j.symbol)+" â€¢ "+q(j.timeframe),1)]),_:2},1032,["disabled","onClick"]))),128))])):$("",!0)])}}}),Dt={key:0,class:"flex flex-col items-center justify-center select-none mt-[10%]"},zt=["textContent"],Ft={class:"mt-8"},qt={key:1,class:"mx-auto container mt-8"},Ht={key:0,"data-cy":"live-page-content"},Wt={class:"flex justify-between items-center"},Yt={class:"grid grid-cols-1 gap-6"},Zt={class:"flex justify-between items-center"},Gt={key:1},Qt={key:0,class:"mb-8"},Jt={key:0},Kt={key:0,class:"mt-8 lg:mt-0"},Xt={key:1,"data-cy":"live-action-button"},es={key:1,class:"my-8 border-2 dark:border-gray-600 rounded-full"},ts={key:2,class:"bg-white dark:bg-gray-700 grid grid-cols-1 gap-6 border dark:border-gray-600 rounded py-4 px-6 select-none"},ss={class:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate"},os={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},rs={class:"flex justify-between items-center"},ns={class:"flex justify-start items-center"},ls={class:"focus:outline-none flex justify-start items-center"},as={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},is={class:"flex justify-between items-center"},us={class:"flex justify-start items-center"},ds={class:"focus:outline-none flex justify-start items-center"},cs={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},ms={key:3},fs=Y({__name:"LiveTab",props:{form:{},results:{},session:{},tabs:{}},setup(S){const s=S,x=k([]),v=k(!1),y=k(!1),o=k(!1),C=k(!1),p=k(!1),c=k(!1),u=k(!1),V=k(!1),U=k(!1),E=k(!1),i=te(),m=G(),f=k([]);async function A(){if(!(s.results.monitoring||s.results.booting)){if(!s.form.paper_mode){const e=i.exchangeApiKeys.find(t=>t.id===s.form.exchange_api_key_id);e&&(s.form.exchange=e.exchange)}try{f.value=await te().getExchangeSupportedSymbols(s.form.exchange);for(let e=0;e<s.form.routes.length;e++)f.value.includes(s.form.routes[e].symbol)||(s.form.routes[e].symbol=f.value[0]);if(s.form.data_routes.length>0)for(let e=0;e<s.form.data_routes.length;e++)f.value.includes(s.form.data_routes[e].symbol)||(s.form.data_routes[e].symbol=f.value[0])}catch(e){console.error("Error updating supported symbols:",e)}}}Ce(async()=>{setTimeout(async()=>{s.form.exchange&&(!s.results.monitoring&&!s.results.booting||!f.value.length)&&await A()},200)}),W(()=>s.form.exchange,async(e,t)=>{e!==t&&await A()}),W(()=>s.results.monitoring,async e=>{e==!1&&await A()},{deep:!0}),W(()=>s.form.exchange_api_key_id,async(e,t)=>{e!==t&&await A()});const H=T(()=>{const e=[{label:"Exchange",value:s.results.generalInfo.exchange},{label:"Current Time",value:B.timestampToTime(s.results.generalInfo.current_time)},{label:"Debug Mode",value:s.results.generalInfo.debug_mode},{label:"Paper Trade",value:s.results.generalInfo.paper_mode},{label:"PNL",value:`${s.results.generalInfo.pnl} (${s.results.generalInfo.pnl_perc}%)`},{label:"Started",value:B.timestampToTime(s.results.generalInfo.started_at)},{label:"Started/Current Balance",value:`${s.results.generalInfo.started_balance} / ${s.results.generalInfo.current_balance}`},{label:"Trades",value:`${s.results.generalInfo.count_trades}`}];return s.results.generalInfo.leverage_type!=="spot"&&(e.push({label:"Available Margin",value:`${s.results.generalInfo.available_margin}`}),e.push({label:"Leverage",value:`${s.results.generalInfo.leverage}x (${s.results.generalInfo.leverage_type})`})),e}),h=T(()=>i.notificationApiKeys.map(e=>({label:`${e.name} - ${e.driver}`,value:e.id}))),D=T(()=>Math.round(s.results.progressbar.estimated_remaining_seconds)===0?"Please wait...":`${Math.round(s.results.progressbar.estimated_remaining_seconds)} seconds remaining...`),se=T(()=>{if(!s.results.orders)return[];const e=[],t=5,M=s.results.orders.length,R=M-t>=0?M-t:0;for(let K=M-1;K>=R;K--){const P=s.results.orders[K],O=P.status==="PARTIALLY FILLED"?`${P.filled_qty}/${P.qty}`:P.qty;e.push([{value:B.timestampToTimeOnly(P.created_at),style:"text-xs",tooltip:B.timestampToTime(P.created_at)},{value:P.symbol,style:"text-xs"},{value:P.type,style:"text-xs"},{value:P.side,style:B.colorBasedOnSide(P.side)},{value:P.price,style:"text-xs"},{value:O,style:B.colorBasedOnSide(P.side)},{value:P.status,style:"text-xs"}])}return e}),oe=T(()=>{let e=[];const t=i.jesseSupportedTimeframes;return i.settings.live.generate_candles_from_1m||!s.form.exchange?e=t.map(M=>i.planLimits.timeframes.includes(M)?{label:M,value:M,disabled:!1}:{label:`${M} (Upgrade required)`,value:M,disabled:!0}):e=i.exchangeInfo[s.form.exchange].supported_timeframes.map(R=>i.planLimits.timeframes.includes(R)?{label:R,value:R,disabled:!1}:{label:`${R} (Upgrade required)`,value:R,disabled:!0}),e}),re=T(()=>i.liveTradingExchangeNames.map(e=>i.planLimits.exchanges.includes(e)?{label:e,value:e,disabled:!1}:{label:`${e} (Upgrade required)`,value:e,disabled:!0})),le=T(()=>i.exchangeApiKeys.map(e=>i.planLimits.exchanges.includes(e.exchange)?{label:`${e.exchange} - ${e.name}`,value:e.id,disabled:!1}:{label:`${e.exchange} - ${e.name} (Upgrade required)`,value:e.id,disabled:!0})),b=m.cancel,_=m.newLive;function I(e){if(x.value.length){for(let t=0;t<x.value.length;t++)N("error",x.value[t]);return}if(s.form.paper_mode&&!s.form.exchange||!s.form.paper_mode&&s.form.exchange_api_key_id===""){N("error","Please select an exchange");return}m.start(e)}function z(e){m.closeTab(e)}function j(e){E.value=!1,m.stop(e)}function Q(){y.value=!0,navigator.clipboard.writeText(s.results.infoLogs),N("success","Logs copied successfully"),C.value=!0,setTimeout(()=>{C.value=!1},3e3)}function J(){o.value=!0,navigator.clipboard.writeText(s.results.errorLogs),N("success","Logs copied successfully"),p.value=!0,setTimeout(()=>{p.value=!1},3e3)}const ce=T(()=>["basic","pro","enterprise","basic-lifetime","pro-lifetime","enterprise-lifetime","lifetime"].includes(i.plan));return(e,t)=>{const M=St,R=et,K=Et,P=mt,O=ne,Le=we,Se=lt,me=at,X=tt,ae=ft,Pe=it,fe=st,Ie=Te,Ee=Nt,ie=Ve,je=ut,Ue=vt,Ae=dt;return l(),g(Z,null,[r(R,{modelValue:n(c),"onUpdate:modelValue":t[0]||(t[0]=d=>F(c)?c.value=d:null),size:"ultra",title:"Orders"},{default:w(()=>[r(M,{orders:e.results.orders},null,8,["orders"])]),_:1},8,["modelValue"]),r(R,{modelValue:n(u),"onUpdate:modelValue":t[2]||(t[2]=d=>F(u)?u.value=d:null),size:"small",title:"Report An Issue"},{default:w(()=>[r(K,{session:e.session,onClose:t[1]||(t[1]=d=>u.value=!1)},null,8,["session"])]),_:1},8,["modelValue"]),r(R,{modelValue:n(V),"onUpdate:modelValue":t[3]||(t[3]=d=>F(V)?V.value=d:null),title:"Info Logs"},{default:w(()=>[r(P,{logs:e.results.infoLogs},null,8,["logs"])]),buttons:w(()=>[a("button",{class:"ml-2 p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:Q},[n(C)?(l(),L(n(be),{key:0,class:"h-6 w-6","aria-hidden":"true"})):$("",!0),!n(C)&&e.results.infoLogs.length!=0?(l(),L(n(he),{key:1,class:"h-6 w-6","aria-hidden":"true"})):$("",!0)])]),_:1},8,["modelValue"]),r(R,{modelValue:n(U),"onUpdate:modelValue":t[4]||(t[4]=d=>F(U)?U.value=d:null),title:"Error Logs"},{default:w(()=>[r(P,{logs:e.results.errorLogs},null,8,["logs"])]),buttons:w(()=>[a("button",{class:"ml-2 p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:J},[n(p)?(l(),L(n(be),{key:0,class:"h-6 w-6","aria-hidden":"true"})):$("",!0),!n(p)&&e.results.errorLogs.length!=0?(l(),L(n(he),{key:1,class:"h-6 w-6","aria-hidden":"true"})):$("",!0)])]),_:1},8,["modelValue"]),r(Le,{modelValue:n(E),"onUpdate:modelValue":t[6]||(t[6]=d=>F(E)?E.value=d:null),title:"Termination Confirm",description:"Are you sure you want to terminate this session?",type:"info"},{default:w(()=>[r(O,{variant:"solid",color:"red",class:"flex justify-center",label:"Terminate",onClick:t[5]||(t[5]=d=>j((e._.provides[ee]||e.$route).params.id))})]),_:1},8,["modelValue"]),e.results.booting?(l(),g("div",Dt,[a("div",null,[r(Se,{progress:e.results.progressbar.current},null,8,["progress"])]),e.results.exception.error?$("",!0):(l(),g("h3",{key:0,class:"mt-8 animate-pulse",textContent:q(n(D))},null,8,zt)),a("div",Ft,[e.form.debug_mode?(l(),L(O,{key:0,icon:"i-heroicons-clipboard-document-list",variant:"solid",label:"View Logs",size:"xl",class:"flex justify-center w-64",onClick:t[7]||(t[7]=d=>V.value=!0)})):$("",!0),r(O,{color:"gray",class:"w-64 flex justify-center mt-4",size:"xl",ui:{color:{gray:{solid:"text-rose-500 dark:text-rose-400"}}},icon:"i-heroicons-no-symbol",variant:"solid",label:"Cancel",trailing:!1,onClick:t[8]||(t[8]=d=>n(b)((e._.provides[ee]||e.$route).params.id))})]),e.results.exception.error?(l(),g("div",qt,[r(me,{modelValue:n(v),"onUpdate:modelValue":t[9]||(t[9]=d=>F(v)?v.value=d:null),title:e.results.exception.error,content:e.results.exception.traceback,mode:"live","debug-mode":e.form.debug_mode},null,8,["modelValue","title","content","debug-mode"])])):$("",!0)])):(l(),L(Ae,{key:1},{left:w(()=>[!e.results.booting&&!e.results.monitoring&&!e.results.showResults?(l(),g("div",Ht,[r(X,{class:"mb-4",title:"Exchange"}),e.form.paper_mode?(l(),L(ae,{key:0,modelValue:e.form.exchange,"onUpdate:modelValue":t[10]||(t[10]=d=>e.form.exchange=d),placeholder:"Select an exchange...",searchable:"",options:n(re),"value-attribute":"value",size:"lg",class:"mt-2 mb-16"},null,8,["modelValue","options"])):(l(),L(ae,{key:1,modelValue:e.form.exchange_api_key_id,"onUpdate:modelValue":t[11]||(t[11]=d=>e.form.exchange_api_key_id=d),placeholder:"Select an exchange...",searchable:"",options:n(le),"value-attribute":"value",size:"lg",class:"mt-2 mb-16"},{empty:w(()=>[a("div",Wt,[t[23]||(t[23]=a("span",null," No exchange API keys found. Please add at least one: ",-1)),r(O,{to:"/exchange-api-keys",icon:"i-heroicons-plus",type:"link",variant:"solid",size:"sm",label:"Add Exchange API Key"})])]),_:1},8,["modelValue","options"])),r(Pe,{"total-routes-error":n(x),form:e.form,results:e.results,mode:"live",symbols:n(f),timeframes:n(oe)},null,8,["total-routes-error","form","results","symbols","timeframes"]),r(X,{class:"mt-16 mb-4",title:"Options"}),a("div",Yt,[r(fe,{modelValue:e.form.debug_mode,"onUpdate:modelValue":t[12]||(t[12]=d=>e.form.debug_mode=d),title:"Debug Mode",description:"Logs more details, helpful for debugging."},null,8,["modelValue"]),r(fe,{modelValue:e.form.paper_mode,"onUpdate:modelValue":t[13]||(t[13]=d=>e.form.paper_mode=d),title:"Paper Trade",disabled:!n(ce),"disabled-guide":n(ce)?"":"Premium plan required",description:"Trade in real-time using actual exchange data with PAPER money."},null,8,["modelValue","disabled","disabled-guide"]),r(Ie,{label:"Notifications:",help:"Select a notification driver to receive notifications"},{default:w(()=>[r(ae,{modelValue:e.form.notification_api_key_id,"onUpdate:modelValue":t[14]||(t[14]=d=>e.form.notification_api_key_id=d),placeholder:"Select a notification driver",size:"lg",options:n(h),"value-attribute":"value"},{empty:w(()=>[a("div",Zt,[t[24]||(t[24]=a("span",null," No notification API keys found. Please add at least one: ",-1)),r(O,{to:"/notification-api-keys",icon:"i-heroicons-plus",type:"link",variant:"solid",size:"sm",label:"Add Notification API Key"})])]),_:1},8,["modelValue","options"])]),_:1})])])):$("",!0),e.results.monitoring?(l(),g("div",Gt,[e.results.exception.error?(l(),g("div",Qt,[r(me,{title:e.results.exception.error,content:e.results.exception.traceback,mode:"live","debug-mode":e.form.debug_mode},null,8,["title","content","debug-mode"])])):$("",!0),e.results.monitoring&&!e.results.finished&&!e.results.exception.error?(l(),L(Ee,{key:1,results:e.results,form:e.form,exchange:e.form.exchange},null,8,["results","form","exchange"])):$("",!0),r(X,{class:"mb-4",title:"Routes"}),r(ie,{data:e.results.routes,"header-items":["Symbol","Timeframe","Strategy"],header:""},null,8,["data"]),r(X,{class:"mt-12 mb-4",title:"Positions"}),r(ie,{data:e.results.positions,"header-items":["Symbol","QTY","Entry","Price","Liq Price","PNL"],header:""},null,8,["data"]),r(je,{class:"mt-12 mb-4",title:"Orders"},{default:w(()=>[a("button",{type:"button",class:"inline-flex items-center shadow-sm px-4 py-1.5 border border-gray-300 dark:border-gray-900 text-sm leading-5 font-medium rounded-full text-gray-700 dark:text-gray-100 bg-white dark:bg-backdrop-dark hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none",onClick:t[15]||(t[15]=d=>c.value=!0)},[r(n(ht),{class:"-ml-1.5 mr-1 h-5 w-5 text-gray-400","aria-hidden":"true"}),t[25]||(t[25]=a("span",null,"More",-1))])]),_:1}),r(ie,{data:n(se),"header-items":["Created","Symbol","Type","Side","Price","QTY","Status"],header:""},null,8,["data"])])):$("",!0)]),right:w(()=>[e.results.booting?$("",!0):(l(),g("div",Jt,[e.results.monitoring?(l(),g("div",Kt,[e.results.finished?(l(),L(O,{key:0,class:"w-full flex justify-center",variant:"solid",icon:"i-heroicons-plus",size:"xl",label:"New session",onClick:t[16]||(t[16]=d=>n(_)((e._.provides[ee]||e.$route).params.id))})):(l(),L(O,{key:1,class:"w-full flex justify-center",variant:"solid",color:"gray",icon:"i-heroicons-no-symbol",size:"xl",label:e.results.terminating?"Terminating...":"Terminate",ui:{color:{gray:{solid:"text-rose-500 dark:text-rose-400"}}},onClick:t[17]||(t[17]=d=>E.value=!0)},null,8,["label"])),e.results.monitoring||e.results.finished?(l(),L(O,{key:2,class:"w-full flex justify-center mt-4",variant:"solid",color:"gray",icon:"i-heroicons-flag",size:"xl",label:"Report",onClick:t[18]||(t[18]=d=>u.value=!0)})):$("",!0)])):(l(),g("div",Xt,[r(O,{class:"w-full flex justify-center",icon:"i-heroicons-bolt",size:"xl",variant:"solid",label:"Start",trailing:!1,onClick:t[19]||(t[19]=d=>I((e._.provides[ee]||e.$route).params.id))}),Object.keys(e.tabs).length>1?(l(),L(O,{key:0,class:"w-full md:hidden flex justify-center mt-2",icon:"i-heroicons-x-mark",size:"xl",variant:"solid",color:"gray",label:"Close Tab",trailing:!1,onClick:t[20]||(t[20]=d=>z((e._.provides[ee]||e.$route).params.id))})):$("",!0)]))])),e.results.monitoring?(l(),g("hr",es)):$("",!0),e.results.monitoring?(l(),g("dl",ts,[(l(!0),g(Z,null,de(n(H),d=>(l(),g("div",{key:d.label,class:"flex justify-between items-center"},[a("div",ss,q(d.label)+":",1),a("div",os,q(d.value),1)]))),128)),a("div",rs,[a("div",ns,[a("button",{class:"text-sm font-medium text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300 truncate flex items-center hover:underline cursor-pointer focus:outline-none",onClick:t[21]||(t[21]=d=>V.value=!0)},[t[26]||(t[26]=a("span",null,"Info Logs:",-1)),a("span",ls,[r(n(ke),{class:"w-6 h-6 ml-2"})])])]),a("div",as,q(e.results.generalInfo.count_info_logs),1)]),a("div",is,[a("div",us,[a("button",{class:"text-sm font-medium text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300 truncate flex items-center hover:underline cursor-pointer focus:outline-none",onClick:t[22]||(t[22]=d=>U.value=!0)},[t[27]||(t[27]=a("span",null,"Error Logs:",-1)),a("span",ds,[r(n(ke),{class:"w-6 h-6 ml-2 cursor-pointer"})])])]),a("div",cs,q(e.results.generalInfo.count_error_logs),1)])])):$("",!0),e.results.monitoring&&e.results.watchlist.length?(l(),g("div",ms,[r(X,{class:"mt-8 mb-4",title:"Watch List"}),r(Ue,{data:e.results.watchlist},null,8,["data"])])):$("",!0)]),_:1}))],64)}}}),ps={class:"w-full"},$s=Y({__name:"[id]",setup(S){bt({title:"Live/Paper trading - Jesse"});const s=G(),x=T(()=>s.tabs),v=xe(),y=T(()=>v.params.id),o=T(()=>x.value[y.value]);(!Object.keys(o.value).includes("selectedRoute")||Object.keys(o.value.results.selectedRoute).length==0||C(o.value.results.selectedRoute,o.value.form.routes[0]))&&(o.value.results.selectedRoute=o.value.form.routes[0]),o.value.form.exchange==""&&(o.value.form.exchange=o.value.results.generalInfo.exchange),Object.keys(x.value).length===0&&G().addTab();function C(p,c){return!p||!c?!1:p.symbol===c.symbol&&p.timeframe===c.timeframe&&p.strategy===c.strategy}return yt({w:()=>{const p=v.params.id;p&&s.closeTab(p)},ArrowLeft:()=>s.goToPrevTab(y.value),ArrowRight:()=>s.goToNextTab(y.value)}),(p,c)=>{const u=Lt,V=fs;return l(),g(Z,null,[a("div",ps,[r(u,{"current-tab":o.value?o.value.id:null,tabs:x.value,onClose:n(s).closeTab,onCancel:n(s).cancel},null,8,["current-tab","tabs","onClose","onCancel"])]),o.value?(l(),L(V,{key:0,form:o.value.form,results:o.value.results,session:y.value,tabs:x.value},null,8,["form","results","session","tabs"])):$("",!0)],64)}}});export{$s as default};
