Metadata-Version: 2.4
Name: twgy
Version: 3.0.0
Summary: Taiwan Mandarin Phonetic Similarity Processor - å°ç£åœ‹èªèªéŸ³ç›¸ä¼¼æ€§è™•ç†ç³»çµ±
Home-page: https://github.com/yourusername/twgy
Author: TWGY Development Team
Author-email: TWGY Development Team <twgy.dev@example.com>
License: MIT
Project-URL: Homepage, https://github.com/twgy-team/twgy-v3
Project-URL: Repository, https://github.com/twgy-team/twgy-v3.git
Project-URL: Documentation, https://twgy-v3.readthedocs.io/
Project-URL: Bug Tracker, https://github.com/twgy-team/twgy-v3/issues
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: Science/Research
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
Classifier: Topic :: Text Processing :: Linguistic
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: numpy>=1.20.0
Requires-Dist: pandas>=1.3.0
Requires-Dist: pypinyin>=0.44.0
Requires-Dist: dimsim>=0.2.0
Requires-Dist: tqdm>=4.60.0
Requires-Dist: scikit-learn>=1.0.0
Requires-Dist: requests>=2.25.0
Requires-Dist: pyyaml>=5.4.0
Provides-Extra: dev
Requires-Dist: pytest>=6.0; extra == "dev"
Requires-Dist: pytest-cov>=2.0; extra == "dev"
Requires-Dist: black>=21.0; extra == "dev"
Requires-Dist: flake8>=3.8; extra == "dev"
Requires-Dist: mypy>=0.812; extra == "dev"
Requires-Dist: jupyter>=1.0; extra == "dev"
Provides-Extra: full
Requires-Dist: sentence-transformers>=2.0; extra == "full"
Requires-Dist: faiss-cpu>=1.7.0; extra == "full"
Requires-Dist: torch>=1.9.0; extra == "full"
Provides-Extra: api
Requires-Dist: fastapi>=0.68.0; extra == "api"
Requires-Dist: uvicorn>=0.15.0; extra == "api"
Requires-Dist: pydantic>=1.8.0; extra == "api"
Dynamic: author
Dynamic: home-page
Dynamic: requires-python

# TWGY - Taiwan Mandarin Phonetic Similarity Processor
**å°ç£åœ‹èªèªéŸ³ç›¸ä¼¼æ€§è™•ç†ç³»çµ±**

[![Python Version](https://img.shields.io/badge/python-3.8%2B-blue.svg)](https://python.org)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![PyPI Version](https://img.shields.io/pypi/v/twgy.svg)](https://pypi.org/project/twgy/)

TWGY is a comprehensive phonetic similarity processing system specifically optimized for Taiwan Mandarin variations. It provides advanced ASR (Automatic Speech Recognition) post-processing capabilities and phonetic similarity analysis for Chinese text.

## ğŸ¯ Key Features

### Core Functionality
- **Three-Layer Architecture**: L1 consonant filtering â†’ L2 first/last similarity â†’ L3 full phonetic analysis
- **Taiwan Mandarin Optimized**: Handles common Taiwan pronunciation variations:
  - å¹³ç¿¹èˆŒä¸åˆ† (Retroflex/non-retroflex confusion)
  - å‰å¾Œé¼»éŸ³ä¸åˆ† (Front/back nasal confusion)
  - é‚Šé¼»éŸ³ä¸åˆ† (Lateral/nasal confusion)
- **170,000+ Word Dictionary**: Comprehensive Chinese word coverage
- **High Performance**: <250ms processing time with concurrent query support

### Advanced Features
- **DimSim Integration**: Enhanced similarity scoring with deep learning models
- **Batch Processing**: Efficient handling of multiple queries
- **Caching System**: Optimized performance with intelligent caching
- **Training Data Collection**: Automatic data logging for model improvement
- **CLI Interface**: Command-line tools for easy usage
- **RESTful API Ready**: Can be easily wrapped into web services

## ğŸ“¦ Installation

### From PyPI (Recommended)
```bash
pip install twgy
```

### From Source
```bash
git clone https://github.com/yourusername/twgy
cd twgy
pip install -e .
```

### Development Installation
```bash
git clone https://github.com/yourusername/twgy
cd twgy
pip install -e ".[dev]"
```

### Optional Dependencies
```bash
# For enhanced features
pip install "twgy[full]"

# For API development
pip install "twgy[api]"

# All features
pip install "twgy[full,api,dev]"
```

## ğŸš€ Quick Start

### Basic Usage
```python
from twgy import PhoneticReranker

# Initialize the reranker
reranker = PhoneticReranker()

# Find similar words
result = reranker.rerank("çŸ¥é“")
print(result.candidates[:5])
# Output: ['çŸ¥é“', 'æŒ‡å°', 'æ™ºé“', 'å¿—é“', 'åˆ¶å°']

# Check processing details
print(f"Processing time: {result.processing_time_ms:.1f}ms")
print(f"Pipeline: {result.l1_candidates_count} â†’ {result.l2_candidates_count} â†’ {result.l3_candidates_count}")
```

### Convenience Functions
```python
from twgy import quick_rerank, get_similar_words, batch_process

# Quick single query
similar = quick_rerank("çŸ¥é“", max_candidates=5)
print(similar)
# Output: ['çŸ¥é“', 'æŒ‡å°', 'æ™ºé“', 'å¿—é“', 'åˆ¶å°']

# Get similarity scores
similar_with_scores = get_similar_words("çŸ¥é“", threshold=0.7)
for item in similar_with_scores[:3]:
    print(f"{item['word']}: {item['similarity']:.2f}")
# Output:
# æŒ‡å°: 0.85
# æ™ºé“: 0.80
# å¿—é“: 0.75

# Batch processing
words = ["çŸ¥é“", "è³‡é“", "åƒé£¯"]
results = batch_process(words)
for result in results:
    print(f"{result.query}: {len(result.candidates)} candidates")
```

### Advanced Configuration
```python
from twgy import PhoneticReranker, RerankerConfig

# Custom configuration
config = RerankerConfig(
    l3_top_k=20,                    # Return top 20 candidates
    enable_dimsim=True,             # Enable DimSim reranking
    dimsim_stage="L2",              # Apply DimSim at L2 stage
    dimsim_weight=0.3,              # DimSim score weight
    max_processing_time_ms=500.0,   # Performance timeout
    enable_training_data_logging=True  # Collect training data
)

reranker = PhoneticReranker(config)
result = reranker.rerank("èªéŸ³è¾¨è­˜")
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒè¦æ±‚

- Python 3.8+
- å·²å®‰è£èŒå…¸æ•¸æ“š(17è¬è©)
- æ¨è–¦ä½¿ç”¨MPS/CUDAåŠ é€Ÿ

### å®‰è£èˆ‡åˆå§‹åŒ–

```bash
# é€²å…¥é …ç›®ç›®éŒ„
cd TWGY_V3

# å®‰è£ä¾è³´
pip install -r requirements.txt
```

### åŸºç¤ä½¿ç”¨

```python
from src.phonetic_reranker import PhoneticReranker

# åˆå§‹åŒ–ç³»çµ±(è‡ªå‹•è¼‰å…¥17è¬è©å…¸)
reranker = PhoneticReranker()

# ASRéŒ¯èª¤ä¿®æ­£
result = reranker.rerank("è³‡é“")  # è¼¸å…¥éŒ¯èª¤è­˜åˆ¥
print(result.candidates[:5])     # ['çŸ¥é“', 'è‡ªå‹•', 'æŒ‡å°', 'è³‡æ–™', 'æŒ‡æ¨™']
print(f"è™•ç†æ™‚é–“: {result.processing_time_ms:.1f}ms")  # è™•ç†æ™‚é–“: 142.3ms
print(f"ä¿¡å¿ƒåº¦: {result.confidence_score:.2f}")       # ä¿¡å¿ƒåº¦: 0.78

# æ‰¹é‡è™•ç†ASRè¼¸å‡º
queries = ["è³‡é“", "æ¬¡é£¯", "é†¬ç“œ"]
results = reranker.batch_rerank(queries)
for result in results:
    print(f"{result.query} â†’ {result.candidates[0]}")
    # è³‡é“ â†’ çŸ¥é“
    # æ¬¡é£¯ â†’ åƒé£¯  
    # é†¬ç“œ â†’ å°‡ç“œ
```

### é«˜ç´šé…ç½®

```python
from src.phonetic_reranker import PhoneticReranker, RerankerConfig

# è‡ªå®šç¾©é…ç½®
config = RerankerConfig(
    l3_top_k=20,                        # è¿”å›å‰20å€‹å€™é¸
    enable_training_data_logging=True,  # å•Ÿç”¨æ•¸æ“šæ”¶é›†
    max_processing_time_ms=200.0        # è™•ç†æ™‚é–“é™åˆ¶200ms
)

reranker = PhoneticReranker(config)

# å•Ÿç”¨æ•¸æ“šæ”¶é›†çš„è™•ç†
result = reranker.rerank("çŸ¥é“")

# æœƒè©±çµæŸæ™‚å°å‡ºè¨“ç·´æ•¸æ“š
session_summary = reranker.finalize_session()
print(f"æ”¶é›†äº† {session_summary.total_queries} å€‹è¨“ç·´æ¡ˆä¾‹")
```

## ğŸ§ª æ¸¬è©¦èˆ‡é©—è­‰

### é‹è¡Œå®Œæ•´æ¸¬è©¦å¥—ä»¶

```bash
# æ ¸å¿ƒçµ„ä»¶æ¸¬è©¦
python test_l1_consonant_filter.py        # L1è²æ¯ç¯©é¸æ¸¬è©¦
python test_l2_first_last_reranker.py     # L2é¦–å°¾é‡æ’æ¸¬è©¦  
python test_l3_full_phonetic.py           # L3å®Œæ•´ç²¾æ’æ¸¬è©¦

# æ•´åˆæ¸¬è©¦
python test_l1_l2_integration.py          # L1+L2æ•´åˆæ¸¬è©¦
python test_full_pipeline.py              # å®Œæ•´ä¸‰å±¤æ¸¬è©¦

# ä¸»APIæ¸¬è©¦
python src/phonetic_reranker.py           # ä¸»APIåŠŸèƒ½æ¸¬è©¦

# æœ€çµ‚éƒ¨ç½²é©—è­‰(89.5%é€šéç‡)
python test_final_deployment.py           # éƒ¨ç½²å°±ç·’é©—è­‰
```

### ä½¿ç”¨ç¯„ä¾‹

```bash
# å®Œæ•´ä½¿ç”¨ç¯„ä¾‹æ¼”ç¤º
python example_usage.py
```

## ğŸ“ æ‡‰ç”¨å ´æ™¯

### 1. ASRéŒ¯èª¤ä¿®æ­£
```python
# èªéŸ³è­˜åˆ¥å¾Œè™•ç†
asr_errors = ["è³‡é“", "æ¬¡é£¯", "é†¬ç“œ"]
for asr_output in asr_errors:
    result = reranker.rerank(asr_output)
    corrected = result.candidates[0]
    print(f"ASRä¿®æ­£: {asr_output} â†’ {corrected}")
    # ASRä¿®æ­£: è³‡é“ â†’ çŸ¥é“
    # ASRä¿®æ­£: æ¬¡é£¯ â†’ åƒé£¯
    # ASRä¿®æ­£: é†¬ç“œ â†’ å°‡ç“œ
```

### 2. èªéŸ³ç›¸ä¼¼è©æœç´¢
```python
# æŸ¥æ‰¾èªéŸ³ç›¸ä¼¼è©
similar_words = reranker.get_similar_words(
    "çŸ¥é“", 
    similarity_threshold=0.6,
    max_results=10
)
for sim_word in similar_words:
    print(f"{sim_word['word']}: {sim_word['similarity']:.2f}")
```

### 3. æ‰¹é‡è™•ç†æœå‹™  
```python
# é«˜æ•ˆæ‰¹é‡è™•ç†(æ”¯æ´ä¸¦ç™¼)
batch_queries = ["è³‡é“", "æ¬¡é£¯", "é†¬ç“œ", "å®‰å…¨"] * 25  # 100å€‹æŸ¥è©¢
batch_results = reranker.batch_rerank(batch_queries)

# çµ±è¨ˆæ‰¹é‡è™•ç†çµæœ
successful = [r for r in batch_results if not r.error]
avg_time = sum(r.processing_time_ms for r in successful) / len(successful)
print(f"æ‰¹é‡è™•ç†: {len(successful)}/{len(batch_queries)} æˆåŠŸ")
print(f"å¹³å‡è™•ç†æ™‚é–“: {avg_time:.1f}ms")
```

## ğŸ”§ Development

### Setup Development Environment
```bash
git clone https://github.com/yourusername/twgy
cd twgy
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
pip install -e ".[dev]"
```

### Running Tests
```bash
# Run all tests
pytest

# Run with coverage
pytest --cov=twgy

# Run performance tests
pytest -m performance

# Run specific test categories
pytest -m "not slow"
```

### Code Quality
```bash
# Format code
black twgy/

# Check style
flake8 twgy/

# Type checking
mypy twgy/
```

### Building Package
```bash
# Build distribution
python -m build

# Install locally
pip install dist/twgy-3.0.0-py3-none-any.whl
```

## ğŸ“Š Performance Benchmarks

### Processing Speed
- **Simple queries** (e.g., "çŸ¥é“"): ~50-100ms
- **Medium queries** (e.g., "èªéŸ³è¾¨è­˜"): ~100-200ms
- **Complex queries** (e.g., compound terms): ~200-250ms

### Memory Usage
- **Initial load**: ~100MB (dictionary + models)
- **With caches**: ~150MB (includes L1/L2/L3 caches)
- **Peak usage**: ~200MB (during batch processing)

### Accuracy Metrics
- **Exact match in top-5**: >95%
- **Phonetically similar in top-10**: >90%
- **Handles Taiwan variations**: >85%

## ğŸ¤ Contributing

We welcome contributions! Please see our [Contributing Guide](CONTRIBUTING.md) for details.

### Areas for Contribution
- **Performance optimization**: Faster algorithms, better caching
- **Accuracy improvement**: Better phonetic models, more test cases
- **Language support**: Additional Chinese variants, multilingual support
- **Integration**: Web APIs, cloud deployment, ML pipeline integration

### Development Workflow
1. Fork the repository
2. Create a feature branch
3. Make changes with tests
4. Run quality checks
5. Submit a pull request

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ“ Support

- **Documentation**: [https://twgy.readthedocs.io/](https://twgy.readthedocs.io/)
- **Issues**: [GitHub Issues](https://github.com/yourusername/twgy/issues)
- **Discussions**: [GitHub Discussions](https://github.com/yourusername/twgy/discussions)
- **Email**: twgy.dev@example.com

## ğŸ™ Acknowledgments

- **Dictionary Sources**: Various open Chinese dictionaries and corpora
- **Research**: Based on Taiwan Mandarin phonetic variation studies
- **DimSim**: Integration with DimSim similarity models
- **Community**: Contributors and users who provided feedback

## ğŸ”„ Changelog

### v3.0.0 (Current)
- Complete rewrite with three-layer architecture
- DimSim integration for enhanced accuracy
- Comprehensive CLI interface
- Performance optimizations (<250ms processing)
- Training data collection capabilities
- Improved Taiwan Mandarin variation handling

### v2.x (Legacy)
- Basic phonetic similarity processing
- Limited dictionary coverage
- Single-layer processing

---

**Made with â¤ï¸ for the Chinese NLP community**

*TWGY v3.0.0 - Empowering Chinese language processing with Taiwan Mandarin phonetic intelligence*

