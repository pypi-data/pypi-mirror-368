# 注音符號語音學分類表格
# Bopomofo Phonetic Classification Tables

# 聲母分類表格 (按發音部位和方法分組)
initials:
  # 第一排: 雙唇音 (Bilabial)
  row_1_bilabial:
    name: "雙唇音"
    phonemes: ["ㄅ", "ㄆ", "ㄇ", "ㄈ"]
    pinyin: ["b", "p", "m", "f"]
    features:
      place: "bilabial"
      manner: ["stop", "stop", "nasal", "fricative"]
      voicing: ["unvoiced", "unvoiced", "voiced", "unvoiced"]
    similarity_within_row: 0.8
    
  # 第二排: 舌尖音 (Alveolar)  
  row_2_alveolar:
    name: "舌尖音"
    phonemes: ["ㄉ", "ㄊ", "ㄋ", "ㄌ"]
    pinyin: ["d", "t", "n", "l"]
    features:
      place: "alveolar"
      manner: ["stop", "stop", "nasal", "lateral"]
      voicing: ["unvoiced", "unvoiced", "voiced", "voiced"]
    similarity_within_row: 0.8
    
  # 第三排: 舌根音 (Velar)
  row_3_velar:
    name: "舌根音"
    phonemes: ["ㄍ", "ㄎ", "ㄏ"]
    pinyin: ["g", "k", "h"]
    features:
      place: "velar"
      manner: ["stop", "stop", "fricative"]
      voicing: ["unvoiced", "unvoiced", "unvoiced"]
    similarity_within_row: 0.8
    
  # 第四排: 舌面音 (Palatal)
  row_4_palatal:
    name: "舌面音"
    phonemes: ["ㄐ", "ㄑ", "ㄒ"]
    pinyin: ["j", "q", "x"]
    features:
      place: "palatal"
      manner: ["affricate", "affricate", "fricative"]
      voicing: ["unvoiced", "unvoiced", "unvoiced"]
    similarity_within_row: 0.8
    
  # 第五排: 舌尖後音 (Retroflex)
  row_5_retroflex:
    name: "舌尖後音"
    phonemes: ["ㄓ", "ㄔ", "ㄕ", "ㄖ"]
    pinyin: ["zh", "ch", "sh", "r"]
    features:
      place: "retroflex"
      manner: ["affricate", "affricate", "fricative", "approximant"]
      voicing: ["unvoiced", "unvoiced", "unvoiced", "voiced"]
    similarity_within_row: 0.8
    
  # 第六排: 舌尖前音 (Dental)
  row_6_dental:
    name: "舌尖前音"
    phonemes: ["ㄗ", "ㄘ", "ㄙ"]
    pinyin: ["z", "c", "s"]
    features:
      place: "dental"
      manner: ["affricate", "affricate", "fricative"]
      voicing: ["unvoiced", "unvoiced", "unvoiced"]
    similarity_within_row: 0.8

# 跨排相似度 (常見方言變異)
cross_row_similarities:
  # 平翹舌不分
  retroflex_dental:
    rows: ["row_5_retroflex", "row_6_dental"]
    similarity: 0.6
    description: "平翹舌不分 (台灣國語特色)"
    pairs:
      - ["ㄓ", "ㄗ"]  # zh-z
      - ["ㄔ", "ㄘ"]  # ch-c  
      - ["ㄕ", "ㄙ"]  # sh-s
      
  # 舌面音與舌尖後音混淆
  palatal_retroflex:
    rows: ["row_4_palatal", "row_5_retroflex"]
    similarity: 0.5
    description: "舌面音與舌尖後音混淆"
    pairs:
      - ["ㄐ", "ㄓ"]  # j-zh
      - ["ㄑ", "ㄔ"]  # q-ch
      - ["ㄒ", "ㄕ"]  # x-sh

# 韻母分類表格
finals:
  # 單韻母
  simple_vowels:
    name: "單韻母"
    phonemes: ["ㄚ", "ㄛ", "ㄜ", "ㄝ", "ㄞ", "ㄟ", "ㄠ", "ㄡ", "ㄢ", "ㄣ", "ㄤ", "ㄥ", "ㄦ"]
    pinyin: ["a", "o", "e", "e", "ai", "ei", "ao", "ou", "an", "en", "ang", "eng", "er"]
    features:
      type: "simple"
      
  # 複韻母 - ㄧ系列
  i_series:
    name: "ㄧ系列複韻母"
    phonemes: ["ㄧ", "ㄧㄚ", "ㄧㄛ", "ㄧㄝ", "ㄧㄞ", "ㄧㄠ", "ㄧㄡ", "ㄧㄢ", "ㄧㄣ", "ㄧㄤ", "ㄧㄥ"]
    pinyin: ["i", "ia", "io", "ie", "iai", "iao", "iu", "ian", "in", "iang", "ing"]
    features:
      type: "compound"
      series: "i"
      
  # 複韻母 - ㄨ系列  
  u_series:
    name: "ㄨ系列複韻母"
    phonemes: ["ㄨ", "ㄨㄚ", "ㄨㄛ", "ㄨㄞ", "ㄨㄟ", "ㄨㄢ", "ㄨㄣ", "ㄨㄤ", "ㄨㄥ"]
    pinyin: ["u", "ua", "uo", "uai", "ui", "uan", "un", "uang", "ong"]
    features:
      type: "compound"
      series: "u"
      
  # 複韻母 - ㄩ系列
  v_series:
    name: "ㄩ系列複韻母"
    phonemes: ["ㄩ", "ㄩㄝ", "ㄩㄢ", "ㄩㄣ", "ㄩㄥ"]
    pinyin: ["v", "ve", "van", "vn", "iong"]
    features:
      type: "compound"
      series: "v"

# 韻母相似度規則
final_similarities:
  # 前後鼻音不分
  nasal_confusion:
    description: "前後鼻音不分"
    similarity: 0.7
    pairs:
      - ["ㄢ", "ㄤ"]    # an-ang
      - ["ㄣ", "ㄥ"]    # en-eng  
      - ["ㄧㄢ", "ㄧㄤ"] # ian-iang
      - ["ㄨㄢ", "ㄨㄤ"] # uan-uang
      - ["ㄩㄢ", "ㄩㄥ"] # van-iong
      
  # 邊鼻音不分
  lateral_nasal_confusion:
    description: "邊鼻音不分 (l-n)"
    similarity: 0.6
    # 這個主要影響聲母，但會影響整體相似度
    
  # 相似韻母
  similar_finals:
    description: "語音相似的韻母"
    pairs:
      - ["ㄞ", "ㄟ"]    # ai-ei
      - ["ㄠ", "ㄡ"]    # ao-ou
      - ["ㄧ", "ㄜ"]    # i-e (在某些方言中)
      - ["ㄨ", "ㄛ"]    # u-o (在某些方言中)

# 聲調分類
tones:
  tone_1:
    name: "第一聲"
    symbol: "ˉ"
    description: "陰平 (高平調)"
    pitch: "55"
    
  tone_2:
    name: "第二聲" 
    symbol: "ˊ"
    description: "陽平 (中升調)"
    pitch: "35"
    
  tone_3:
    name: "第三聲"
    symbol: "ˇ"
    description: "上聲 (低降升調)"
    pitch: "214"
    
  tone_4:
    name: "第四聲"
    symbol: "ˋ"
    description: "去聲 (高降調)"
    pitch: "51"
    
  tone_5:
    name: "輕聲"
    symbol: "˙"
    description: "輕聲 (短促輕讀)"
    pitch: "0"

# 聲調相似度規則
tone_similarities:
  # 聲調混淆常見模式
  common_confusions:
    - tones: ["tone_1", "tone_4"]
      similarity: 0.3
      description: "一四聲混淆"
    - tones: ["tone_2", "tone_3"] 
      similarity: 0.4
      description: "二三聲混淆"
    - tones: ["tone_5", "tone_1"]
      similarity: 0.2
      description: "輕聲與一聲混淆"

# 整體相似度計算權重
similarity_weights:
  initial_weight: 0.4      # 聲母權重
  final_weight: 0.4        # 韻母權重  
  tone_weight: 0.2         # 聲調權重
  
  # 位置權重 (用於多字詞)
  first_char_weight: 0.4   # 首字權重
  last_char_weight: 0.4    # 尾字權重
  middle_chars_weight: 0.2 # 中間字權重
  
  # 長度懲罰
  length_penalty_factor: 0.1
  max_length_ratio: 2.0