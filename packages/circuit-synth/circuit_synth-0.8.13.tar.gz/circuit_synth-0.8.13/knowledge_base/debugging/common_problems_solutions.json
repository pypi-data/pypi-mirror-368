{
  "common_pcb_problems": {
    "manufacturing_defects": {
      "solder_bridges": {
        "description": "Unwanted solder connection between adjacent pads or traces",
        "common_locations": ["Fine-pitch ICs", "QFN/BGA packages", "0402 components"],
        "detection": ["Visual inspection with microscope", "Continuity test", "In-circuit test"],
        "fixes": ["Solder wick to remove excess", "Flux and reflow", "Hot air rework"],
        "prevention": ["Proper stencil design", "Solder mask between pads", "Controlled solder paste volume"]
      },
      "cold_solder_joints": {
        "description": "Poor solder connection with high resistance",
        "appearance": "Dull, grainy, or cracked surface",
        "symptoms": ["Intermittent connection", "High resistance", "Temperature-dependent failures"],
        "causes": ["Insufficient heat", "Contamination", "Movement during cooling", "Oxidation"],
        "repair": ["Clean with flux", "Reheat with iron", "Add fresh solder"],
        "prevention": ["Proper temperature profile", "Clean surfaces", "Adequate flux"]
      },
      "tombstoning": {
        "description": "Component stands on one end",
        "affected_parts": ["0402 and smaller", "Chip resistors/capacitors"],
        "causes": ["Uneven heating", "Pad size mismatch", "Unequal solder volume"],
        "fix": ["Remove and re-place component", "Adjust reflow profile"],
        "prevention": ["Balanced pad design", "Proper placement", "Controlled heating"]
      },
      "lifted_pads": {
        "description": "Copper pad separated from PCB substrate",
        "causes": ["Excessive heat", "Mechanical stress", "Multiple rework cycles"],
        "symptoms": ["No connection", "Pad moves when probed"],
        "repair": ["Wire jumper to nearest via", "Conductive epoxy", "Circuit frame repair"],
        "prevention": ["Temperature control", "Proper tools", "Limit rework cycles"]
      },
      "via_failures": {
        "types": {
          "barrel_crack": {
            "cause": "Thermal cycling stress",
            "detection": "Intermittent connection with temperature"
          },
          "insufficient_plating": {
            "cause": "Manufacturing defect",
            "detection": "High resistance measurement"
          },
          "drill_breakout": {
            "cause": "Registration error",
            "detection": "Visual inspection, X-ray"
          }
        },
        "testing": ["Via chain test", "4-wire resistance test", "Thermal cycling"],
        "repair": ["Via repair wire", "Conductive epoxy fill", "Alternative routing"]
      }
    },
    "design_issues": {
      "ground_loops": {
        "symptoms": ["Noise in analog circuits", "Communication errors", "EMI problems"],
        "causes": ["Multiple ground paths", "Poor layout", "Improper grounding scheme"],
        "detection": ["Measure ground potential differences", "Current probe on ground"],
        "solutions": ["Single-point grounding", "Differential signaling", "Isolation", "Ground plane cuts"]
      },
      "power_integrity": {
        "voltage_drop": {
          "symptoms": ["Brown-out resets", "Logic errors under load", "Inconsistent operation"],
          "diagnosis": ["Measure voltage at load", "Calculate trace resistance", "Check via count"],
          "fixes": ["Thicker copper", "Wider traces", "More vias", "Remote sense"]
        },
        "rail_collapse": {
          "symptoms": ["Reset during high current events", "Glitches", "Timing failures"],
          "causes": ["Insufficient bulk capacitance", "High trace inductance", "Poor decoupling"],
          "solutions": ["Add bulk capacitors", "Distributed decoupling", "Power plane pairs"]
        },
        "ripple_noise": {
          "sources": ["Switching regulators", "Digital switching", "Inadequate filtering"],
          "measurement": ["AC couple oscilloscope", "Spectrum analyzer", "Use proper probing"],
          "mitigation": ["LC filters", "Linear post-regulator", "Proper layout", "Shield switching nodes"]
        }
      },
      "signal_integrity": {
        "reflections": {
          "symptoms": ["Overshoot/undershoot", "Ringing", "False triggering"],
          "causes": ["Impedance mismatch", "Unterminated lines", "Stubs"],
          "solutions": ["Series termination", "Parallel termination", "AC termination", "Matched impedance"]
        },
        "crosstalk": {
          "symptoms": ["Noise on quiet lines", "Timing errors", "False signals"],
          "mechanisms": ["Capacitive coupling", "Inductive coupling"],
          "mitigation": ["Increase spacing", "Guard traces", "Different layers", "Differential pairs"]
        },
        "ground_bounce": {
          "symptoms": ["Multiple outputs switching cause noise", "False triggering", "Timing skew"],
          "causes": ["Common impedance in ground return", "Simultaneous switching"],
          "fixes": ["Multiple ground pins", "Controlled slew rate", "Separate grounds"]
        }
      },
      "thermal_problems": {
        "inadequate_cooling": {
          "symptoms": ["Component overheating", "Thermal shutdown", "Reduced lifespan"],
          "diagnosis": ["Thermal imaging", "Thermocouple measurement", "Calculate junction temp"],
          "solutions": ["Add heatsink", "Increase copper area", "Forced air cooling", "Better thermal vias"]
        },
        "thermal_cycling_stress": {
          "affected_components": ["BGAs", "Large packages", "Power components"],
          "failure_modes": ["Solder joint cracks", "Via barrel cracks", "Delamination"],
          "mitigation": ["Underfill for BGAs", "Compliant mounting", "CTE matching"]
        }
      }
    },
    "environmental_failures": {
      "moisture_related": {
        "corrosion": {
          "types": ["Galvanic", "Electrolytic", "Fretting"],
          "symptoms": ["Green/white residue", "High resistance", "Opens"],
          "prevention": ["Conformal coating", "Humidity control", "Proper metals", "ENIG finish"]
        },
        "dendritic_growth": {
          "description": "Metal migration between conductors",
          "conditions": ["Voltage bias", "Humidity", "Ionic contamination"],
          "appearance": ["Tree-like growth", "Usually tin or silver"],
          "prevention": ["Clean flux residue", "Conformal coating", "Reduce voltage"]
        },
        "cap_plague": {
          "description": "Electrolytic capacitor failure",
          "symptoms": ["Bulging caps", "Leakage", "High ESR"],
          "causes": ["Poor quality", "Age", "Overtemperature"],
          "detection": ["Visual inspection", "ESR measurement", "Capacitance test"]
        }
      },
      "esd_damage": {
        "symptoms": ["Immediate failure", "Latent damage", "Parametric shift"],
        "sensitive_components": ["MOSFET gates", "CMOS inputs", "LED junctions"],
        "detection": ["Leakage current test", "Curve tracer", "Functional test"],
        "prevention": ["TVS diodes", "Series resistors", "Ground straps", "Proper handling"]
      },
      "vibration_shock": {
        "failure_modes": ["Component lead fatigue", "Solder joint cracks", "Connector wear"],
        "sensitive_areas": ["Large components", "Tall components", "Board edges"],
        "mitigation": ["Stake components", "Underfill", "Vibration dampers", "Flexible mounting"]
      }
    },
    "component_specific_issues": {
      "bga_problems": {
        "head_in_pillow": {
          "description": "Ball and pad separate during reflow",
          "causes": ["Warpage", "Oxidation", "Wrong profile"],
          "detection": ["X-ray 2.5D view", "Cross-section", "Electrical test"],
          "prevention": ["Flat package and PCB", "Proper flux", "Optimized profile"]
        },
        "black_pad": {
          "description": "Ni-P interface failure",
          "symptoms": ["Open connections", "Brittle joints"],
          "cause": "ENIG process issues",
          "detection": ["Only after failure", "Cross-section analysis"]
        },
        "popcorning": {
          "description": "Package cracks from moisture",
          "cause": "Moisture expansion during reflow",
          "prevention": ["Proper baking", "Moisture-sensitive handling", "Storage control"]
        }
      },
      "connector_issues": {
        "contact_wear": {
          "symptoms": ["Intermittent connection", "Increased resistance"],
          "causes": ["Cycling", "Fretting", "Contamination"],
          "detection": ["Contact resistance test", "Visual inspection"],
          "fixes": ["Contact cleaner", "Re-seat", "Replace connector"]
        },
        "pin_damage": {
          "causes": ["Misalignment", "Excessive force", "Multiple insertions"],
          "detection": ["Visual inspection", "Continuity test"],
          "repair": ["Straighten pins", "Solder jumper", "Replace connector"]
        }
      },
      "crystal_oscillator_issues": {
        "no_oscillation": {
          "causes": ["Wrong load caps", "Damaged crystal", "Insufficient drive", "PCB contamination"],
          "diagnosis": ["Probe with scope (10X probe, minimal loading)", "Check DC bias", "Verify load capacitance"],
          "fixes": ["Adjust load caps", "Add series resistor", "Clean PCB", "Replace crystal"]
        },
        "frequency_error": {
          "causes": ["Wrong load capacitance", "Temperature", "Aging", "Mechanical stress"],
          "measurement": ["Frequency counter", "Compare to reference"],
          "correction": ["Adjust load caps", "Use TCXO", "Software calibration"]
        },
        "startup_problems": {
          "symptoms": ["Slow start", "Intermittent start", "No start when cold"],
          "causes": ["Marginal drive", "High ESR", "Contamination"],
          "solutions": ["Reduce damping resistor", "Increase drive", "Clean and dry"]
        }
      }
    },
    "firmware_related_hardware_issues": {
      "timing_problems": {
        "symptoms": ["Intermittent operation", "Temperature dependent", "Works at low speed only"],
        "hardware_causes": ["Long traces", "Inadequate drive strength", "Capacitive loading"],
        "diagnosis": ["Scope timing margins", "Vary clock speed", "Temperature testing"],
        "fixes": ["Adjust drive strength", "Add buffers", "Reduce trace length", "Software delays"]
      },
      "power_sequencing": {
        "symptoms": ["Latch-up", "Initialization failures", "Damaged components"],
        "causes": ["Wrong sequence", "Too fast ramp", "Voltage overshoot"],
        "detection": ["Scope power rails during startup", "Check sequence against datasheet"],
        "solutions": ["Sequencing controller", "RC delays", "Supervisory circuits", "Software control"]
      },
      "configuration_issues": {
        "bootstrap_pins": {
          "symptoms": ["Wrong mode", "Won't boot", "Incorrect speed"],
          "causes": ["Floating pins", "Wrong pull-ups/downs", "Noise during boot"],
          "fixes": ["Add proper pulls", "Check voltages at boot", "Add capacitance for noise"]
        }
      }
    }
  },
  "diagnostic_decision_trees": {
    "board_completely_dead": {
      "sequence": [
        {
          "test": "Check input power",
          "pass": "Go to step 2",
          "fail": "Fix power supply or connection"
        },
        {
          "test": "Check all fuses",
          "pass": "Go to step 3",
          "fail": "Find short before replacing fuse"
        },
        {
          "test": "Check primary power rails",
          "pass": "Go to step 4",
          "fail": "Debug power supply section"
        },
        {
          "test": "Check reset signals",
          "pass": "Go to step 5",
          "fail": "Debug reset generation circuit"
        },
        {
          "test": "Check clock/oscillator",
          "pass": "Check firmware/software",
          "fail": "Debug clock generation"
        }
      ]
    },
    "intermittent_failures": {
      "approach": [
        "Temperature cycling (heat gun/freeze spray)",
        "Mechanical flexing of PCB",
        "Power cycling",
        "Vibration testing",
        "Check all connectors",
        "Look for hairline cracks with microscope",
        "Check for marginal timing",
        "Monitor power during failure"
      ]
    }
  }
}