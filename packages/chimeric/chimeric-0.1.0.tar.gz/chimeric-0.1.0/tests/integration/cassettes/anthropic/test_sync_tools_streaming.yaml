interactions:
- request:
    body: '{"max_tokens": 4096, "messages": [{"role": "user", "content": "What is
      2+2-4-10+50? Tell me a joke."}], "model": "claude-3-5-haiku-latest", "stream":
      true, "tools": [{"name": "add", "description": "Adds two numbers together.",
      "input_schema": {"type": "object", "strict": true, "properties": {"x": {"type":
      "integer", "description": "the first number"}, "y": {"type": "integer", "description":
      "the second number"}}, "required": ["x", "y"], "additionalProperties": false}},
      {"name": "subtract", "description": "Subtracts the second number from the first.",
      "input_schema": {"type": "object", "strict": true, "properties": {"x": {"type":
      "integer", "description": "the first number"}, "y": {"type": "integer", "description":
      "the second number"}}, "required": ["x", "y"], "additionalProperties": false}},
      {"name": "joke", "description": "Returns a joke.", "input_schema": {"type":
      "object", "strict": true, "properties": {}, "additionalProperties": false}}]}'
    headers:
      accept:
      - application/json
      accept-encoding:
      - gzip, deflate
      anthropic-version:
      - '2023-06-01'
      connection:
      - keep-alive
      content-length:
      - '957'
      content-type:
      - application/json
      host:
      - api.anthropic.com
      x-stainless-arch:
      - x64
      x-stainless-async:
      - 'false'
      x-stainless-lang:
      - python
      x-stainless-os:
      - Linux
      x-stainless-package-version:
      - 0.52.2
      x-stainless-read-timeout:
      - '600'
      x-stainless-retry-count:
      - '0'
      x-stainless-runtime:
      - CPython
      x-stainless-runtime-version:
      - 3.13.5
      x-stainless-timeout:
      - NOT_GIVEN
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: 'event: message_start

        data: {"type":"message_start","message":{"id":"msg_01X7hBHFhV7YCjBYgn5riEsY","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":525,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":1,"service_tier":"standard"}}  }


        event: content_block_start

        data: {"type":"content_block_start","index":0,"content_block":{"type":"text","text":""}          }


        event: ping

        data: {"type": "ping"}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"I"}               }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"''ll
        help"}   }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        you calculate"}    }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        that an"}              }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"d
        then"}  }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        tell you a joke."}      }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        Let"}            }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"''s
        break"}     }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        it down step by"}          }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        step:\n\nFirst"}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":",
        let''s add 2 "}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"and
        2:"}              }


        event: content_block_stop

        data: {"type":"content_block_stop","index":0  }


        event: content_block_start

        data: {"type":"content_block_start","index":1,"content_block":{"type":"tool_use","id":"toolu_01XMvfQKCS7znVKWSrcA5Dkn","name":"add","input":{}}
        }


        event: content_block_delta

        data: {"type":"content_block_delta","index":1,"delta":{"type":"input_json_delta","partial_json":""}}


        event: content_block_delta

        data: {"type":"content_block_delta","index":1,"delta":{"type":"input_json_delta","partial_json":"{\"x\":
        2"}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":1,"delta":{"type":"input_json_delta","partial_json":",
        \"y\": 2}"}    }


        event: content_block_stop

        data: {"type":"content_block_stop","index":1           }


        event: message_delta

        data: {"type":"message_delta","delta":{"stop_reason":"tool_use","stop_sequence":null},"usage":{"output_tokens":104}        }


        event: message_stop

        data: {"type":"message_stop"        }


        '
    headers:
      CF-RAY:
      - 966fea7e88f95e39-EWR
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Type:
      - text/event-stream; charset=utf-8
      Date:
      - Tue, 29 Jul 2025 22:05:09 GMT
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      anthropic-ratelimit-input-tokens-limit:
      - '50000'
      anthropic-ratelimit-input-tokens-remaining:
      - '50000'
      anthropic-ratelimit-input-tokens-reset:
      - '2025-07-29T22:05:08Z'
      anthropic-ratelimit-output-tokens-limit:
      - '10000'
      anthropic-ratelimit-output-tokens-remaining:
      - '10000'
      anthropic-ratelimit-output-tokens-reset:
      - '2025-07-29T22:05:08Z'
      anthropic-ratelimit-requests-limit:
      - '50'
      anthropic-ratelimit-requests-remaining:
      - '49'
      anthropic-ratelimit-requests-reset:
      - '2025-07-29T22:05:09Z'
      anthropic-ratelimit-tokens-limit:
      - '60000'
      anthropic-ratelimit-tokens-remaining:
      - '60000'
      anthropic-ratelimit-tokens-reset:
      - '2025-07-29T22:05:08Z'
      cf-cache-status:
      - DYNAMIC
      request-id:
      - req_011CRc4vCSaPS5kpfYx6NqPC
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      via:
      - 1.1 google
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 4096, "messages": [{"role": "user", "content": "What is
      2+2-4-10+50? Tell me a joke."}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_1", "name": "add", "input": {"x": 2, "y": 2}}]}, {"role": "user",
      "content": [{"type": "tool_result", "tool_use_id": "tool_call_1", "content":
      "4", "is_error": false}]}], "model": "claude-3-5-haiku-latest", "stream": true,
      "tools": [{"name": "add", "description": "Adds two numbers together.", "input_schema":
      {"type": "object", "strict": true, "properties": {"x": {"type": "integer", "description":
      "the first number"}, "y": {"type": "integer", "description": "the second number"}},
      "required": ["x", "y"], "additionalProperties": false}}, {"name": "subtract",
      "description": "Subtracts the second number from the first.", "input_schema":
      {"type": "object", "strict": true, "properties": {"x": {"type": "integer", "description":
      "the first number"}, "y": {"type": "integer", "description": "the second number"}},
      "required": ["x", "y"], "additionalProperties": false}}, {"name": "joke", "description":
      "Returns a joke.", "input_schema": {"type": "object", "strict": true, "properties":
      {}, "additionalProperties": false}}]}'
    headers:
      accept:
      - application/json
      accept-encoding:
      - gzip, deflate
      anthropic-version:
      - '2023-06-01'
      connection:
      - keep-alive
      content-length:
      - '1199'
      content-type:
      - application/json
      host:
      - api.anthropic.com
      x-stainless-arch:
      - x64
      x-stainless-async:
      - 'false'
      x-stainless-lang:
      - python
      x-stainless-os:
      - Linux
      x-stainless-package-version:
      - 0.52.2
      x-stainless-read-timeout:
      - '600'
      x-stainless-retry-count:
      - '0'
      x-stainless-runtime:
      - CPython
      x-stainless-runtime-version:
      - 3.13.5
      x-stainless-timeout:
      - NOT_GIVEN
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: 'event: message_start

        data: {"type":"message_start","message":{"id":"msg_01HjvPa7Pc9F5nvBLHgdNxBg","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":606,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":22,"service_tier":"standard"}}       }


        event: content_block_start

        data: {"type":"content_block_start","index":0,"content_block":{"type":"tool_use","id":"toolu_01AXa3gu7h2ocFCeqpttYj1E","name":"subtract","input":{}}}


        event: ping

        data: {"type": "ping"}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":""}           }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"{\"x\":
        4"}              }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":",
        \"y\": 4}"}}


        event: content_block_stop

        data: {"type":"content_block_stop","index":0           }


        event: message_delta

        data: {"type":"message_delta","delta":{"stop_reason":"tool_use","stop_sequence":null},"usage":{"output_tokens":69}      }


        event: message_stop

        data: {"type":"message_stop"              }


        '
    headers:
      CF-RAY:
      - 966fea902d005e39-EWR
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Type:
      - text/event-stream; charset=utf-8
      Date:
      - Tue, 29 Jul 2025 22:05:13 GMT
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      anthropic-ratelimit-input-tokens-limit:
      - '50000'
      anthropic-ratelimit-input-tokens-remaining:
      - '50000'
      anthropic-ratelimit-input-tokens-reset:
      - '2025-07-29T22:05:11Z'
      anthropic-ratelimit-output-tokens-limit:
      - '10000'
      anthropic-ratelimit-output-tokens-remaining:
      - '10000'
      anthropic-ratelimit-output-tokens-reset:
      - '2025-07-29T22:05:11Z'
      anthropic-ratelimit-requests-limit:
      - '50'
      anthropic-ratelimit-requests-remaining:
      - '49'
      anthropic-ratelimit-requests-reset:
      - '2025-07-29T22:05:12Z'
      anthropic-ratelimit-tokens-limit:
      - '60000'
      anthropic-ratelimit-tokens-remaining:
      - '60000'
      anthropic-ratelimit-tokens-reset:
      - '2025-07-29T22:05:11Z'
      cf-cache-status:
      - DYNAMIC
      request-id:
      - req_011CRc4vQVdAxmWDiDWvJ7ce
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      via:
      - 1.1 google
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 4096, "messages": [{"role": "user", "content": "What is
      2+2-4-10+50? Tell me a joke."}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_1", "name": "add", "input": {"x": 2, "y": 2}}]}, {"role": "user",
      "content": [{"type": "tool_result", "tool_use_id": "tool_call_1", "content":
      "4", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "subtract", "input": {"x": 4, "y": 4}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "0", "is_error": false}]}], "model": "claude-3-5-haiku-latest", "stream": true,
      "tools": [{"name": "add", "description": "Adds two numbers together.", "input_schema":
      {"type": "object", "strict": true, "properties": {"x": {"type": "integer", "description":
      "the first number"}, "y": {"type": "integer", "description": "the second number"}},
      "required": ["x", "y"], "additionalProperties": false}}, {"name": "subtract",
      "description": "Subtracts the second number from the first.", "input_schema":
      {"type": "object", "strict": true, "properties": {"x": {"type": "integer", "description":
      "the first number"}, "y": {"type": "integer", "description": "the second number"}},
      "required": ["x", "y"], "additionalProperties": false}}, {"name": "joke", "description":
      "Returns a joke.", "input_schema": {"type": "object", "strict": true, "properties":
      {}, "additionalProperties": false}}]}'
    headers:
      accept:
      - application/json
      accept-encoding:
      - gzip, deflate
      anthropic-version:
      - '2023-06-01'
      connection:
      - keep-alive
      content-length:
      - '1446'
      content-type:
      - application/json
      host:
      - api.anthropic.com
      x-stainless-arch:
      - x64
      x-stainless-async:
      - 'false'
      x-stainless-lang:
      - python
      x-stainless-os:
      - Linux
      x-stainless-package-version:
      - 0.52.2
      x-stainless-read-timeout:
      - '600'
      x-stainless-retry-count:
      - '0'
      x-stainless-runtime:
      - CPython
      x-stainless-runtime-version:
      - 3.13.5
      x-stainless-timeout:
      - NOT_GIVEN
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: 'event: message_start

        data: {"type":"message_start","message":{"id":"msg_01NU1gRVqGjXBQJbU1pPH6XE","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":687,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":23,"service_tier":"standard"}}      }


        event: content_block_start

        data: {"type":"content_block_start","index":0,"content_block":{"type":"tool_use","id":"toolu_01PTStaUTuMHLsQ1y5HSTsfL","name":"subtract","input":{}}       }


        event: ping

        data: {"type": "ping"}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":""}  }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"{\"x\":
        0"}      }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":",
        "}  }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"\"y"}       }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"\":
        10}"}             }


        event: content_block_stop

        data: {"type":"content_block_stop","index":0     }


        event: message_delta

        data: {"type":"message_delta","delta":{"stop_reason":"tool_use","stop_sequence":null},"usage":{"output_tokens":69}          }


        event: message_stop

        data: {"type":"message_stop"          }


        '
    headers:
      CF-RAY:
      - 966feaa03bbf5e39-EWR
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Type:
      - text/event-stream; charset=utf-8
      Date:
      - Tue, 29 Jul 2025 22:05:14 GMT
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      anthropic-ratelimit-input-tokens-limit:
      - '50000'
      anthropic-ratelimit-input-tokens-remaining:
      - '49000'
      anthropic-ratelimit-input-tokens-reset:
      - '2025-07-29T22:05:14Z'
      anthropic-ratelimit-output-tokens-limit:
      - '10000'
      anthropic-ratelimit-output-tokens-remaining:
      - '10000'
      anthropic-ratelimit-output-tokens-reset:
      - '2025-07-29T22:05:13Z'
      anthropic-ratelimit-requests-limit:
      - '50'
      anthropic-ratelimit-requests-remaining:
      - '49'
      anthropic-ratelimit-requests-reset:
      - '2025-07-29T22:05:14Z'
      anthropic-ratelimit-tokens-limit:
      - '60000'
      anthropic-ratelimit-tokens-remaining:
      - '59000'
      anthropic-ratelimit-tokens-reset:
      - '2025-07-29T22:05:13Z'
      cf-cache-status:
      - DYNAMIC
      request-id:
      - req_011CRc4vbSwCAJgtNoCvYs7L
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      via:
      - 1.1 google
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 4096, "messages": [{"role": "user", "content": "What is
      2+2-4-10+50? Tell me a joke."}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_1", "name": "add", "input": {"x": 2, "y": 2}}]}, {"role": "user",
      "content": [{"type": "tool_result", "tool_use_id": "tool_call_1", "content":
      "4", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "subtract", "input": {"x": 4, "y": 4}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "0", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "subtract", "input": {"x": 0, "y": 10}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "-10", "is_error": false}]}], "model": "claude-3-5-haiku-latest", "stream":
      true, "tools": [{"name": "add", "description": "Adds two numbers together.",
      "input_schema": {"type": "object", "strict": true, "properties": {"x": {"type":
      "integer", "description": "the first number"}, "y": {"type": "integer", "description":
      "the second number"}}, "required": ["x", "y"], "additionalProperties": false}},
      {"name": "subtract", "description": "Subtracts the second number from the first.",
      "input_schema": {"type": "object", "strict": true, "properties": {"x": {"type":
      "integer", "description": "the first number"}, "y": {"type": "integer", "description":
      "the second number"}}, "required": ["x", "y"], "additionalProperties": false}},
      {"name": "joke", "description": "Returns a joke.", "input_schema": {"type":
      "object", "strict": true, "properties": {}, "additionalProperties": false}}]}'
    headers:
      accept:
      - application/json
      accept-encoding:
      - gzip, deflate
      anthropic-version:
      - '2023-06-01'
      connection:
      - keep-alive
      content-length:
      - '1696'
      content-type:
      - application/json
      host:
      - api.anthropic.com
      x-stainless-arch:
      - x64
      x-stainless-async:
      - 'false'
      x-stainless-lang:
      - python
      x-stainless-os:
      - Linux
      x-stainless-package-version:
      - 0.52.2
      x-stainless-read-timeout:
      - '600'
      x-stainless-retry-count:
      - '0'
      x-stainless-runtime:
      - CPython
      x-stainless-runtime-version:
      - 3.13.5
      x-stainless-timeout:
      - NOT_GIVEN
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: 'event: message_start

        data: {"type":"message_start","message":{"id":"msg_01DF7oienEQQcj5UiUFLmuZp","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":769,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":23,"service_tier":"standard"}}            }


        event: content_block_start

        data: {"type":"content_block_start","index":0,"content_block":{"type":"tool_use","id":"toolu_01XKLjsEEHLnLA1WqNwmUR9v","name":"add","input":{}}  }


        event: ping

        data: {"type": "ping"}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":""}            }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"{\"x"}    }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"\":
        -"}}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"10"}          }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":",
        \"y\": 5"}     }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"0}"}        }


        event: content_block_stop

        data: {"type":"content_block_stop","index":0    }


        event: message_delta

        data: {"type":"message_delta","delta":{"stop_reason":"tool_use","stop_sequence":null},"usage":{"output_tokens":70}               }


        event: message_stop

        data: {"type":"message_stop"               }


        '
    headers:
      CF-RAY:
      - 966feaa81c9b5e39-EWR
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Type:
      - text/event-stream; charset=utf-8
      Date:
      - Tue, 29 Jul 2025 22:05:15 GMT
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      anthropic-ratelimit-input-tokens-limit:
      - '50000'
      anthropic-ratelimit-input-tokens-remaining:
      - '49000'
      anthropic-ratelimit-input-tokens-reset:
      - '2025-07-29T22:05:15Z'
      anthropic-ratelimit-output-tokens-limit:
      - '10000'
      anthropic-ratelimit-output-tokens-remaining:
      - '10000'
      anthropic-ratelimit-output-tokens-reset:
      - '2025-07-29T22:05:15Z'
      anthropic-ratelimit-requests-limit:
      - '50'
      anthropic-ratelimit-requests-remaining:
      - '49'
      anthropic-ratelimit-requests-reset:
      - '2025-07-29T22:05:16Z'
      anthropic-ratelimit-tokens-limit:
      - '60000'
      anthropic-ratelimit-tokens-remaining:
      - '59000'
      anthropic-ratelimit-tokens-reset:
      - '2025-07-29T22:05:15Z'
      cf-cache-status:
      - DYNAMIC
      request-id:
      - req_011CRc4vgrsVxPavVFdryX8z
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      via:
      - 1.1 google
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 4096, "messages": [{"role": "user", "content": "What is
      2+2-4-10+50? Tell me a joke."}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_1", "name": "add", "input": {"x": 2, "y": 2}}]}, {"role": "user",
      "content": [{"type": "tool_result", "tool_use_id": "tool_call_1", "content":
      "4", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "subtract", "input": {"x": 4, "y": 4}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "0", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "subtract", "input": {"x": 0, "y": 10}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "-10", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "add", "input": {"x": -10, "y": 50}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "40", "is_error": false}]}], "model": "claude-3-5-haiku-latest", "stream": true,
      "tools": [{"name": "add", "description": "Adds two numbers together.", "input_schema":
      {"type": "object", "strict": true, "properties": {"x": {"type": "integer", "description":
      "the first number"}, "y": {"type": "integer", "description": "the second number"}},
      "required": ["x", "y"], "additionalProperties": false}}, {"name": "subtract",
      "description": "Subtracts the second number from the first.", "input_schema":
      {"type": "object", "strict": true, "properties": {"x": {"type": "integer", "description":
      "the first number"}, "y": {"type": "integer", "description": "the second number"}},
      "required": ["x", "y"], "additionalProperties": false}}, {"name": "joke", "description":
      "Returns a joke.", "input_schema": {"type": "object", "strict": true, "properties":
      {}, "additionalProperties": false}}]}'
    headers:
      accept:
      - application/json
      accept-encoding:
      - gzip, deflate
      anthropic-version:
      - '2023-06-01'
      connection:
      - keep-alive
      content-length:
      - '1942'
      content-type:
      - application/json
      host:
      - api.anthropic.com
      x-stainless-arch:
      - x64
      x-stainless-async:
      - 'false'
      x-stainless-lang:
      - python
      x-stainless-os:
      - Linux
      x-stainless-package-version:
      - 0.52.2
      x-stainless-read-timeout:
      - '600'
      x-stainless-retry-count:
      - '0'
      x-stainless-runtime:
      - CPython
      x-stainless-runtime-version:
      - 3.13.5
      x-stainless-timeout:
      - NOT_GIVEN
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: 'event: message_start

        data: {"type":"message_start","message":{"id":"msg_01SUnayf7nfGdtM25hjLbknR","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":851,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":2,"service_tier":"standard"}}  }


        event: content_block_start

        data: {"type":"content_block_start","index":0,"content_block":{"type":"text","text":""}          }


        event: ping

        data: {"type": "ping"}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"Let"}        }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        me break"}        }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        down"}        }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        the calculation"}        }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        for"}     }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        you:"}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"\n2"}         }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        + 2 "}        }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"="}          }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        4\n4 "}      }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"-
        4 ="}  }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        0\n0 "}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"-
        10 ="}               }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        -10\n-10"}          }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        + 50 "}     }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"=
        40\n\nSo"}            }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        the final answer is "}  }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"40.\n\nNow"}}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":",
        let me tell you"}    }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        a joke:"}   }


        event: content_block_stop

        data: {"type":"content_block_stop","index":0       }


        event: content_block_start

        data: {"type":"content_block_start","index":1,"content_block":{"type":"tool_use","id":"toolu_014fc7o48W6W1M9Tt7f2HZf9","name":"joke","input":{}}         }


        event: content_block_delta

        data: {"type":"content_block_delta","index":1,"delta":{"type":"input_json_delta","partial_json":""}        }


        event: content_block_stop

        data: {"type":"content_block_stop","index":1   }


        event: message_delta

        data: {"type":"message_delta","delta":{"stop_reason":"tool_use","stop_sequence":null},"usage":{"output_tokens":105}             }


        event: message_stop

        data: {"type":"message_stop" }


        '
    headers:
      CF-RAY:
      - 966feaaf9c645e39-EWR
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Type:
      - text/event-stream; charset=utf-8
      Date:
      - Tue, 29 Jul 2025 22:05:18 GMT
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      anthropic-ratelimit-input-tokens-limit:
      - '50000'
      anthropic-ratelimit-input-tokens-remaining:
      - '49000'
      anthropic-ratelimit-input-tokens-reset:
      - '2025-07-29T22:05:16Z'
      anthropic-ratelimit-output-tokens-limit:
      - '10000'
      anthropic-ratelimit-output-tokens-remaining:
      - '10000'
      anthropic-ratelimit-output-tokens-reset:
      - '2025-07-29T22:05:16Z'
      anthropic-ratelimit-requests-limit:
      - '50'
      anthropic-ratelimit-requests-remaining:
      - '48'
      anthropic-ratelimit-requests-reset:
      - '2025-07-29T22:05:17Z'
      anthropic-ratelimit-tokens-limit:
      - '60000'
      anthropic-ratelimit-tokens-remaining:
      - '59000'
      anthropic-ratelimit-tokens-reset:
      - '2025-07-29T22:05:16Z'
      cf-cache-status:
      - DYNAMIC
      request-id:
      - req_011CRc4vn1gG1dg3bidMjyHj
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      via:
      - 1.1 google
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 4096, "messages": [{"role": "user", "content": "What is
      2+2-4-10+50? Tell me a joke."}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_1", "name": "add", "input": {"x": 2, "y": 2}}]}, {"role": "user",
      "content": [{"type": "tool_result", "tool_use_id": "tool_call_1", "content":
      "4", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "subtract", "input": {"x": 4, "y": 4}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "0", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "subtract", "input": {"x": 0, "y": 10}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "-10", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "add", "input": {"x": -10, "y": 50}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "40", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_1", "name": "joke", "input": {}}]}, {"role": "user", "content":
      [{"type": "tool_result", "tool_use_id": "tool_call_1", "content": "Why did the
      chicken cross the road? To get to the other side!", "is_error": false}]}], "model":
      "claude-3-5-haiku-latest", "stream": true, "tools": [{"name": "add", "description":
      "Adds two numbers together.", "input_schema": {"type": "object", "strict": true,
      "properties": {"x": {"type": "integer", "description": "the first number"},
      "y": {"type": "integer", "description": "the second number"}}, "required": ["x",
      "y"], "additionalProperties": false}}, {"name": "subtract", "description": "Subtracts
      the second number from the first.", "input_schema": {"type": "object", "strict":
      true, "properties": {"x": {"type": "integer", "description": "the first number"},
      "y": {"type": "integer", "description": "the second number"}}, "required": ["x",
      "y"], "additionalProperties": false}}, {"name": "joke", "description": "Returns
      a joke.", "input_schema": {"type": "object", "strict": true, "properties": {},
      "additionalProperties": false}}]}'
    headers:
      accept:
      - application/json
      accept-encoding:
      - gzip, deflate
      anthropic-version:
      - '2023-06-01'
      connection:
      - keep-alive
      content-length:
      - '2231'
      content-type:
      - application/json
      host:
      - api.anthropic.com
      x-stainless-arch:
      - x64
      x-stainless-async:
      - 'false'
      x-stainless-lang:
      - python
      x-stainless-os:
      - Linux
      x-stainless-package-version:
      - 0.52.2
      x-stainless-read-timeout:
      - '600'
      x-stainless-retry-count:
      - '0'
      x-stainless-runtime:
      - CPython
      x-stainless-runtime-version:
      - 3.13.5
      x-stainless-timeout:
      - NOT_GIVEN
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: 'event: message_start

        data: {"type":"message_start","message":{"id":"msg_01NJDvUWBjowmrBTRDapmsn6","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":911,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":2,"service_tier":"standard"}}             }


        event: content_block_start

        data: {"type":"content_block_start","index":0,"content_block":{"type":"text","text":""}   }


        event: ping

        data: {"type": "ping"}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"Let"}           }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        me break"}      }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        down"}     }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        the"}    }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        calculation"}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        for"}         }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        you"}           }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":":\n2"}          }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        + 2 "}        }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"="}
        }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        4\n4 "}   }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"-
        4 ="}          }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        0\n0 "}     }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"-"}    }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        10 = -"}              }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"10\n-10
        "}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"+
        50 ="}  }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        40\n\nSo the"}          }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        final"}}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        answer is 40."}        }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"\n\nAn"}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"d
        here''s"}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        a classic"}              }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        joke for"}     }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        you:"}               }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        Why"}           }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        did the chicken cross the"}   }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        road? To get to"}}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        the other side!"}              }


        event: content_block_stop

        data: {"type":"content_block_stop","index":0  }


        event: message_delta

        data: {"type":"message_delta","delta":{"stop_reason":"end_turn","stop_sequence":null},"usage":{"output_tokens":88}               }


        event: message_stop

        data: {"type":"message_stop"              }


        '
    headers:
      CF-RAY:
      - 966feac5a96b5e39-EWR
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Type:
      - text/event-stream; charset=utf-8
      Date:
      - Tue, 29 Jul 2025 22:05:20 GMT
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      anthropic-ratelimit-input-tokens-limit:
      - '50000'
      anthropic-ratelimit-input-tokens-remaining:
      - '49000'
      anthropic-ratelimit-input-tokens-reset:
      - '2025-07-29T22:05:20Z'
      anthropic-ratelimit-output-tokens-limit:
      - '10000'
      anthropic-ratelimit-output-tokens-remaining:
      - '10000'
      anthropic-ratelimit-output-tokens-reset:
      - '2025-07-29T22:05:20Z'
      anthropic-ratelimit-requests-limit:
      - '50'
      anthropic-ratelimit-requests-remaining:
      - '49'
      anthropic-ratelimit-requests-reset:
      - '2025-07-29T22:05:20Z'
      anthropic-ratelimit-tokens-limit:
      - '60000'
      anthropic-ratelimit-tokens-remaining:
      - '59000'
      anthropic-ratelimit-tokens-reset:
      - '2025-07-29T22:05:20Z'
      cf-cache-status:
      - DYNAMIC
      request-id:
      - req_011CRc4w34oFUAFZm5m6zGR6
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      via:
      - 1.1 google
    status:
      code: 200
      message: OK
version: 1
