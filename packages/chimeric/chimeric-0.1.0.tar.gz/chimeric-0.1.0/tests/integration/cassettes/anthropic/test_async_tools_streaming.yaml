interactions:
- request:
    body: '{"max_tokens": 4096, "messages": [{"role": "user", "content": "What is
      2+2-4-10+50? Tell me a joke."}], "model": "claude-3-5-haiku-latest", "stream":
      true, "tools": [{"name": "add", "description": "Adds two numbers together.",
      "input_schema": {"type": "object", "strict": true, "properties": {"x": {"type":
      "integer", "description": "the first number"}, "y": {"type": "integer", "description":
      "the second number"}}, "required": ["x", "y"], "additionalProperties": false}},
      {"name": "subtract", "description": "Subtracts the second number from the first.",
      "input_schema": {"type": "object", "strict": true, "properties": {"x": {"type":
      "integer", "description": "the first number"}, "y": {"type": "integer", "description":
      "the second number"}}, "required": ["x", "y"], "additionalProperties": false}},
      {"name": "joke", "description": "Returns a joke.", "input_schema": {"type":
      "object", "strict": true, "properties": {}, "additionalProperties": false}}]}'
    headers:
      accept:
      - application/json
      accept-encoding:
      - gzip, deflate
      anthropic-version:
      - '2023-06-01'
      connection:
      - keep-alive
      content-length:
      - '957'
      content-type:
      - application/json
      host:
      - api.anthropic.com
      x-stainless-arch:
      - x64
      x-stainless-async:
      - async:asyncio
      x-stainless-lang:
      - python
      x-stainless-os:
      - Linux
      x-stainless-package-version:
      - 0.52.2
      x-stainless-read-timeout:
      - '600'
      x-stainless-retry-count:
      - '0'
      x-stainless-runtime:
      - CPython
      x-stainless-runtime-version:
      - 3.13.5
      x-stainless-timeout:
      - NOT_GIVEN
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: 'event: message_start

        data: {"type":"message_start","message":{"id":"msg_01RwtSJRaYT1aMQc2w3YtWTZ","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":525,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":1,"service_tier":"standard"}}         }


        event: content_block_start

        data: {"type":"content_block_start","index":0,"content_block":{"type":"text","text":""}      }


        event: ping

        data: {"type": "ping"}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"I"}           }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"''ll"}    }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        help"}}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        you calculate"}        }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        that"} }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        an"}  }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"d
        then"}  }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        tell you a joke."}  }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        Let"}               }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"''s
        break"}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        it down step"}      }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        by"}      }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        step:"}       }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"\n\nFirst"}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":",
        let"}   }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"''s
        calculate"}              }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        2+2:"}}


        event: content_block_stop

        data: {"type":"content_block_stop","index":0             }


        event: content_block_start

        data: {"type":"content_block_start","index":1,"content_block":{"type":"tool_use","id":"toolu_016trzZR1EN7KXjRzLCx2HPD","name":"add","input":{}}}


        event: content_block_delta

        data: {"type":"content_block_delta","index":1,"delta":{"type":"input_json_delta","partial_json":""}               }


        event: content_block_delta

        data: {"type":"content_block_delta","index":1,"delta":{"type":"input_json_delta","partial_json":"{\"x\":
        2"}       }


        event: content_block_delta

        data: {"type":"content_block_delta","index":1,"delta":{"type":"input_json_delta","partial_json":",
        \"y\":"}}


        event: content_block_delta

        data: {"type":"content_block_delta","index":1,"delta":{"type":"input_json_delta","partial_json":"
        2}"}     }


        event: content_block_stop

        data: {"type":"content_block_stop","index":1       }


        event: message_delta

        data: {"type":"message_delta","delta":{"stop_reason":"tool_use","stop_sequence":null},"usage":{"output_tokens":102}               }


        event: message_stop

        data: {"type":"message_stop"              }


        '
    headers:
      CF-RAY:
      - 966fead4088ac5dc-EWR
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Type:
      - text/event-stream; charset=utf-8
      Date:
      - Tue, 29 Jul 2025 22:05:24 GMT
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      anthropic-ratelimit-input-tokens-limit:
      - '50000'
      anthropic-ratelimit-input-tokens-remaining:
      - '50000'
      anthropic-ratelimit-input-tokens-reset:
      - '2025-07-29T22:05:22Z'
      anthropic-ratelimit-output-tokens-limit:
      - '10000'
      anthropic-ratelimit-output-tokens-remaining:
      - '10000'
      anthropic-ratelimit-output-tokens-reset:
      - '2025-07-29T22:05:22Z'
      anthropic-ratelimit-requests-limit:
      - '50'
      anthropic-ratelimit-requests-remaining:
      - '49'
      anthropic-ratelimit-requests-reset:
      - '2025-07-29T22:05:23Z'
      anthropic-ratelimit-tokens-limit:
      - '60000'
      anthropic-ratelimit-tokens-remaining:
      - '60000'
      anthropic-ratelimit-tokens-reset:
      - '2025-07-29T22:05:22Z'
      cf-cache-status:
      - DYNAMIC
      request-id:
      - req_011CRc4wCvPDgDnCjea3FBXc
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      via:
      - 1.1 google
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 4096, "messages": [{"role": "user", "content": "What is
      2+2-4-10+50? Tell me a joke."}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_1", "name": "add", "input": {"x": 2, "y": 2}}]}, {"role": "user",
      "content": [{"type": "tool_result", "tool_use_id": "tool_call_1", "content":
      "4", "is_error": false}]}], "model": "claude-3-5-haiku-latest", "stream": true,
      "tools": [{"name": "add", "description": "Adds two numbers together.", "input_schema":
      {"type": "object", "strict": true, "properties": {"x": {"type": "integer", "description":
      "the first number"}, "y": {"type": "integer", "description": "the second number"}},
      "required": ["x", "y"], "additionalProperties": false}}, {"name": "subtract",
      "description": "Subtracts the second number from the first.", "input_schema":
      {"type": "object", "strict": true, "properties": {"x": {"type": "integer", "description":
      "the first number"}, "y": {"type": "integer", "description": "the second number"}},
      "required": ["x", "y"], "additionalProperties": false}}, {"name": "joke", "description":
      "Returns a joke.", "input_schema": {"type": "object", "strict": true, "properties":
      {}, "additionalProperties": false}}]}'
    headers:
      accept:
      - application/json
      accept-encoding:
      - gzip, deflate
      anthropic-version:
      - '2023-06-01'
      connection:
      - keep-alive
      content-length:
      - '1199'
      content-type:
      - application/json
      host:
      - api.anthropic.com
      x-stainless-arch:
      - x64
      x-stainless-async:
      - async:asyncio
      x-stainless-lang:
      - python
      x-stainless-os:
      - Linux
      x-stainless-package-version:
      - 0.52.2
      x-stainless-read-timeout:
      - '600'
      x-stainless-retry-count:
      - '0'
      x-stainless-runtime:
      - CPython
      x-stainless-runtime-version:
      - 3.13.5
      x-stainless-timeout:
      - NOT_GIVEN
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: 'event: message_start

        data: {"type":"message_start","message":{"id":"msg_014rQJDuA3uD9bGQxdMdtV4Y","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":606,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":22,"service_tier":"standard"}}       }


        event: content_block_start

        data: {"type":"content_block_start","index":0,"content_block":{"type":"tool_use","id":"toolu_01Gkt5MBfYoVnZnyATV7bud6","name":"subtract","input":{}}         }


        event: ping

        data: {"type": "ping"}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":""}  }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"{\""}              }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"x\":
        4"}          }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":",
        \"y\""}    }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":":
        4}"}              }


        event: content_block_stop

        data: {"type":"content_block_stop","index":0        }


        event: message_delta

        data: {"type":"message_delta","delta":{"stop_reason":"tool_use","stop_sequence":null},"usage":{"output_tokens":69}             }


        event: message_stop

        data: {"type":"message_stop" }


        '
    headers:
      CF-RAY:
      - 966feaeddd73c5dc-EWR
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Type:
      - text/event-stream; charset=utf-8
      Date:
      - Tue, 29 Jul 2025 22:05:27 GMT
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      anthropic-ratelimit-input-tokens-limit:
      - '50000'
      anthropic-ratelimit-input-tokens-remaining:
      - '50000'
      anthropic-ratelimit-input-tokens-reset:
      - '2025-07-29T22:05:26Z'
      anthropic-ratelimit-output-tokens-limit:
      - '10000'
      anthropic-ratelimit-output-tokens-remaining:
      - '10000'
      anthropic-ratelimit-output-tokens-reset:
      - '2025-07-29T22:05:26Z'
      anthropic-ratelimit-requests-limit:
      - '50'
      anthropic-ratelimit-requests-remaining:
      - '49'
      anthropic-ratelimit-requests-reset:
      - '2025-07-29T22:05:27Z'
      anthropic-ratelimit-tokens-limit:
      - '60000'
      anthropic-ratelimit-tokens-remaining:
      - '60000'
      anthropic-ratelimit-tokens-reset:
      - '2025-07-29T22:05:26Z'
      cf-cache-status:
      - DYNAMIC
      request-id:
      - req_011CRc4wWdFEC7SdYYBfHZ8D
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      via:
      - 1.1 google
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 4096, "messages": [{"role": "user", "content": "What is
      2+2-4-10+50? Tell me a joke."}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_1", "name": "add", "input": {"x": 2, "y": 2}}]}, {"role": "user",
      "content": [{"type": "tool_result", "tool_use_id": "tool_call_1", "content":
      "4", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "subtract", "input": {"x": 4, "y": 4}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "0", "is_error": false}]}], "model": "claude-3-5-haiku-latest", "stream": true,
      "tools": [{"name": "add", "description": "Adds two numbers together.", "input_schema":
      {"type": "object", "strict": true, "properties": {"x": {"type": "integer", "description":
      "the first number"}, "y": {"type": "integer", "description": "the second number"}},
      "required": ["x", "y"], "additionalProperties": false}}, {"name": "subtract",
      "description": "Subtracts the second number from the first.", "input_schema":
      {"type": "object", "strict": true, "properties": {"x": {"type": "integer", "description":
      "the first number"}, "y": {"type": "integer", "description": "the second number"}},
      "required": ["x", "y"], "additionalProperties": false}}, {"name": "joke", "description":
      "Returns a joke.", "input_schema": {"type": "object", "strict": true, "properties":
      {}, "additionalProperties": false}}]}'
    headers:
      accept:
      - application/json
      accept-encoding:
      - gzip, deflate
      anthropic-version:
      - '2023-06-01'
      connection:
      - keep-alive
      content-length:
      - '1446'
      content-type:
      - application/json
      host:
      - api.anthropic.com
      x-stainless-arch:
      - x64
      x-stainless-async:
      - async:asyncio
      x-stainless-lang:
      - python
      x-stainless-os:
      - Linux
      x-stainless-package-version:
      - 0.52.2
      x-stainless-read-timeout:
      - '600'
      x-stainless-retry-count:
      - '0'
      x-stainless-runtime:
      - CPython
      x-stainless-runtime-version:
      - 3.13.5
      x-stainless-timeout:
      - NOT_GIVEN
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: 'event: message_start

        data: {"type":"message_start","message":{"id":"msg_01DmrkT9gz3LfJQJuDDo26nX","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":687,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":23,"service_tier":"standard"}}      }


        event: content_block_start

        data: {"type":"content_block_start","index":0,"content_block":{"type":"tool_use","id":"toolu_01NbydumhwUhbb4UGv4kvydm","name":"subtract","input":{}}
        }


        event: ping

        data: {"type": "ping"}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":""}  }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"{\"x\":
        0"}   }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":",
        \"y\": 10}"}     }


        event: content_block_stop

        data: {"type":"content_block_stop","index":0     }


        event: message_delta

        data: {"type":"message_delta","delta":{"stop_reason":"tool_use","stop_sequence":null},"usage":{"output_tokens":69}}


        event: message_stop

        data: {"type":"message_stop"      }


        '
    headers:
      CF-RAY:
      - 966feaf7e995c5dc-EWR
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Type:
      - text/event-stream; charset=utf-8
      Date:
      - Tue, 29 Jul 2025 22:05:28 GMT
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      anthropic-ratelimit-input-tokens-limit:
      - '50000'
      anthropic-ratelimit-input-tokens-remaining:
      - '49000'
      anthropic-ratelimit-input-tokens-reset:
      - '2025-07-29T22:05:28Z'
      anthropic-ratelimit-output-tokens-limit:
      - '10000'
      anthropic-ratelimit-output-tokens-remaining:
      - '10000'
      anthropic-ratelimit-output-tokens-reset:
      - '2025-07-29T22:05:27Z'
      anthropic-ratelimit-requests-limit:
      - '50'
      anthropic-ratelimit-requests-remaining:
      - '49'
      anthropic-ratelimit-requests-reset:
      - '2025-07-29T22:05:28Z'
      anthropic-ratelimit-tokens-limit:
      - '60000'
      anthropic-ratelimit-tokens-remaining:
      - '59000'
      anthropic-ratelimit-tokens-reset:
      - '2025-07-29T22:05:27Z'
      cf-cache-status:
      - DYNAMIC
      request-id:
      - req_011CRc4wdSmTtEMNVD47p5rP
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      via:
      - 1.1 google
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 4096, "messages": [{"role": "user", "content": "What is
      2+2-4-10+50? Tell me a joke."}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_1", "name": "add", "input": {"x": 2, "y": 2}}]}, {"role": "user",
      "content": [{"type": "tool_result", "tool_use_id": "tool_call_1", "content":
      "4", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "subtract", "input": {"x": 4, "y": 4}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "0", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "subtract", "input": {"x": 0, "y": 10}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "-10", "is_error": false}]}], "model": "claude-3-5-haiku-latest", "stream":
      true, "tools": [{"name": "add", "description": "Adds two numbers together.",
      "input_schema": {"type": "object", "strict": true, "properties": {"x": {"type":
      "integer", "description": "the first number"}, "y": {"type": "integer", "description":
      "the second number"}}, "required": ["x", "y"], "additionalProperties": false}},
      {"name": "subtract", "description": "Subtracts the second number from the first.",
      "input_schema": {"type": "object", "strict": true, "properties": {"x": {"type":
      "integer", "description": "the first number"}, "y": {"type": "integer", "description":
      "the second number"}}, "required": ["x", "y"], "additionalProperties": false}},
      {"name": "joke", "description": "Returns a joke.", "input_schema": {"type":
      "object", "strict": true, "properties": {}, "additionalProperties": false}}]}'
    headers:
      accept:
      - application/json
      accept-encoding:
      - gzip, deflate
      anthropic-version:
      - '2023-06-01'
      connection:
      - keep-alive
      content-length:
      - '1696'
      content-type:
      - application/json
      host:
      - api.anthropic.com
      x-stainless-arch:
      - x64
      x-stainless-async:
      - async:asyncio
      x-stainless-lang:
      - python
      x-stainless-os:
      - Linux
      x-stainless-package-version:
      - 0.52.2
      x-stainless-read-timeout:
      - '600'
      x-stainless-retry-count:
      - '0'
      x-stainless-runtime:
      - CPython
      x-stainless-runtime-version:
      - 3.13.5
      x-stainless-timeout:
      - NOT_GIVEN
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: 'event: message_start

        data: {"type":"message_start","message":{"id":"msg_01MwUNknVh1aQsD9fuL4ThgG","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":769,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":25,"service_tier":"standard"}}    }


        event: content_block_start

        data: {"type":"content_block_start","index":0,"content_block":{"type":"tool_use","id":"toolu_01MKs6EYErcGnnW2CxTpCTS7","name":"add","input":{}}
        }


        event: ping

        data: {"type": "ping"}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":""}  }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"{\"x"}    }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"\":
        -10"}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":",
        \"y\""}    }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":":
        "} }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"50}"}          }


        event: content_block_stop

        data: {"type":"content_block_stop","index":0             }


        event: message_delta

        data: {"type":"message_delta","delta":{"stop_reason":"tool_use","stop_sequence":null},"usage":{"output_tokens":70}          }


        event: message_stop

        data: {"type":"message_stop"          }


        '
    headers:
      CF-RAY:
      - 966feb01cb92c5dc-EWR
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Type:
      - text/event-stream; charset=utf-8
      Date:
      - Tue, 29 Jul 2025 22:05:29 GMT
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      anthropic-ratelimit-input-tokens-limit:
      - '50000'
      anthropic-ratelimit-input-tokens-remaining:
      - '49000'
      anthropic-ratelimit-input-tokens-reset:
      - '2025-07-29T22:05:29Z'
      anthropic-ratelimit-output-tokens-limit:
      - '10000'
      anthropic-ratelimit-output-tokens-remaining:
      - '10000'
      anthropic-ratelimit-output-tokens-reset:
      - '2025-07-29T22:05:29Z'
      anthropic-ratelimit-requests-limit:
      - '50'
      anthropic-ratelimit-requests-remaining:
      - '49'
      anthropic-ratelimit-requests-reset:
      - '2025-07-29T22:05:30Z'
      anthropic-ratelimit-tokens-limit:
      - '60000'
      anthropic-ratelimit-tokens-remaining:
      - '59000'
      anthropic-ratelimit-tokens-reset:
      - '2025-07-29T22:05:29Z'
      cf-cache-status:
      - DYNAMIC
      request-id:
      - req_011CRc4wkCKSfjvnditGoRcQ
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      via:
      - 1.1 google
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 4096, "messages": [{"role": "user", "content": "What is
      2+2-4-10+50? Tell me a joke."}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_1", "name": "add", "input": {"x": 2, "y": 2}}]}, {"role": "user",
      "content": [{"type": "tool_result", "tool_use_id": "tool_call_1", "content":
      "4", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "subtract", "input": {"x": 4, "y": 4}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "0", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "subtract", "input": {"x": 0, "y": 10}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "-10", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "add", "input": {"x": -10, "y": 50}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "40", "is_error": false}]}], "model": "claude-3-5-haiku-latest", "stream": true,
      "tools": [{"name": "add", "description": "Adds two numbers together.", "input_schema":
      {"type": "object", "strict": true, "properties": {"x": {"type": "integer", "description":
      "the first number"}, "y": {"type": "integer", "description": "the second number"}},
      "required": ["x", "y"], "additionalProperties": false}}, {"name": "subtract",
      "description": "Subtracts the second number from the first.", "input_schema":
      {"type": "object", "strict": true, "properties": {"x": {"type": "integer", "description":
      "the first number"}, "y": {"type": "integer", "description": "the second number"}},
      "required": ["x", "y"], "additionalProperties": false}}, {"name": "joke", "description":
      "Returns a joke.", "input_schema": {"type": "object", "strict": true, "properties":
      {}, "additionalProperties": false}}]}'
    headers:
      accept:
      - application/json
      accept-encoding:
      - gzip, deflate
      anthropic-version:
      - '2023-06-01'
      connection:
      - keep-alive
      content-length:
      - '1942'
      content-type:
      - application/json
      host:
      - api.anthropic.com
      x-stainless-arch:
      - x64
      x-stainless-async:
      - async:asyncio
      x-stainless-lang:
      - python
      x-stainless-os:
      - Linux
      x-stainless-package-version:
      - 0.52.2
      x-stainless-read-timeout:
      - '600'
      x-stainless-retry-count:
      - '0'
      x-stainless-runtime:
      - CPython
      x-stainless-runtime-version:
      - 3.13.5
      x-stainless-timeout:
      - NOT_GIVEN
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: 'event: message_start

        data: {"type":"message_start","message":{"id":"msg_016DDnHM7Bzpt6CcxUQxxvgu","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":851,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":2,"service_tier":"standard"}}               }


        event: content_block_start

        data: {"type":"content_block_start","index":0,"content_block":{"type":"text","text":""}               }


        event: ping

        data: {"type": "ping"}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"Let"}          }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        me break"}          }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        down"}        }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        the calculation"}    }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        step by"}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        step:\n2"}     }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        + 2 "}       }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"="}          }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        4\n4 "}  }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"-
        4 ="}   }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        0\n0 "}          }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"-
        10 ="}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        -10\n-10"}     }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        + 50 "}               }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"=
        40\n\nSo"}       }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        the final result"}     }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        is 40."}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"\n\nNow"}         }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":","}   }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        let"}     }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        me"}              }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        tell you a joke:"}       }


        event: content_block_stop

        data: {"type":"content_block_stop","index":0            }


        event: content_block_start

        data: {"type":"content_block_start","index":1,"content_block":{"type":"tool_use","id":"toolu_01EQ5Ktr7Le6Bnzoq9LzoFz7","name":"joke","input":{}}           }


        event: content_block_delta

        data: {"type":"content_block_delta","index":1,"delta":{"type":"input_json_delta","partial_json":""}    }


        event: content_block_stop

        data: {"type":"content_block_stop","index":1          }


        event: message_delta

        data: {"type":"message_delta","delta":{"stop_reason":"tool_use","stop_sequence":null},"usage":{"output_tokens":106}             }


        event: message_stop

        data: {"type":"message_stop"  }


        '
    headers:
      CF-RAY:
      - 966feb094fd7c5dc-EWR
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Type:
      - text/event-stream; charset=utf-8
      Date:
      - Tue, 29 Jul 2025 22:05:30 GMT
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      anthropic-ratelimit-input-tokens-limit:
      - '50000'
      anthropic-ratelimit-input-tokens-remaining:
      - '49000'
      anthropic-ratelimit-input-tokens-reset:
      - '2025-07-29T22:05:31Z'
      anthropic-ratelimit-output-tokens-limit:
      - '10000'
      anthropic-ratelimit-output-tokens-remaining:
      - '10000'
      anthropic-ratelimit-output-tokens-reset:
      - '2025-07-29T22:05:30Z'
      anthropic-ratelimit-requests-limit:
      - '50'
      anthropic-ratelimit-requests-remaining:
      - '48'
      anthropic-ratelimit-requests-reset:
      - '2025-07-29T22:05:31Z'
      anthropic-ratelimit-tokens-limit:
      - '60000'
      anthropic-ratelimit-tokens-remaining:
      - '59000'
      anthropic-ratelimit-tokens-reset:
      - '2025-07-29T22:05:30Z'
      cf-cache-status:
      - DYNAMIC
      request-id:
      - req_011CRc4wqMNrXkmdFjqA3jJr
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      via:
      - 1.1 google
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 4096, "messages": [{"role": "user", "content": "What is
      2+2-4-10+50? Tell me a joke."}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_1", "name": "add", "input": {"x": 2, "y": 2}}]}, {"role": "user",
      "content": [{"type": "tool_result", "tool_use_id": "tool_call_1", "content":
      "4", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "subtract", "input": {"x": 4, "y": 4}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "0", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "subtract", "input": {"x": 0, "y": 10}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "-10", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_0", "name": "add", "input": {"x": -10, "y": 50}}]}, {"role":
      "user", "content": [{"type": "tool_result", "tool_use_id": "tool_call_0", "content":
      "40", "is_error": false}]}, {"role": "assistant", "content": [{"type": "tool_use",
      "id": "tool_call_1", "name": "joke", "input": {}}]}, {"role": "user", "content":
      [{"type": "tool_result", "tool_use_id": "tool_call_1", "content": "Why did the
      chicken cross the road? To get to the other side!", "is_error": false}]}], "model":
      "claude-3-5-haiku-latest", "stream": true, "tools": [{"name": "add", "description":
      "Adds two numbers together.", "input_schema": {"type": "object", "strict": true,
      "properties": {"x": {"type": "integer", "description": "the first number"},
      "y": {"type": "integer", "description": "the second number"}}, "required": ["x",
      "y"], "additionalProperties": false}}, {"name": "subtract", "description": "Subtracts
      the second number from the first.", "input_schema": {"type": "object", "strict":
      true, "properties": {"x": {"type": "integer", "description": "the first number"},
      "y": {"type": "integer", "description": "the second number"}}, "required": ["x",
      "y"], "additionalProperties": false}}, {"name": "joke", "description": "Returns
      a joke.", "input_schema": {"type": "object", "strict": true, "properties": {},
      "additionalProperties": false}}]}'
    headers:
      accept:
      - application/json
      accept-encoding:
      - gzip, deflate
      anthropic-version:
      - '2023-06-01'
      connection:
      - keep-alive
      content-length:
      - '2231'
      content-type:
      - application/json
      host:
      - api.anthropic.com
      x-stainless-arch:
      - x64
      x-stainless-async:
      - async:asyncio
      x-stainless-lang:
      - python
      x-stainless-os:
      - Linux
      x-stainless-package-version:
      - 0.52.2
      x-stainless-read-timeout:
      - '600'
      x-stainless-retry-count:
      - '0'
      x-stainless-runtime:
      - CPython
      x-stainless-runtime-version:
      - 3.13.5
      x-stainless-timeout:
      - NOT_GIVEN
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: 'event: message_start

        data: {"type":"message_start","message":{"id":"msg_01K9SZ2BPqbuWYxksD9akLmK","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":911,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":2,"service_tier":"standard"}}     }


        event: content_block_start

        data: {"type":"content_block_start","index":0,"content_block":{"type":"text","text":""}}


        event: ping

        data: {"type": "ping"}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"Let"}         }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        me break"}       }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        down"}}


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        the calculation"}           }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        for"}               }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        you:"}  }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"\n2
        + 2"} }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        ="}              }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        4\n4 "}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"-
        4 ="}          }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        0\n0 "}           }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"-
        10 ="}   }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        -10\n-10"}    }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        + 50 "}        }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"=
        40\n\nSo"}            }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        the final answer is "}               }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"40."}              }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        "}          }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"\n\nAn"}      }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"d
        here''s"}             }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        a classic"}          }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        joke for"}      }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        you:"}               }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        Why"}      }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        did the chicken cross the"}               }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        road? To get to"}              }


        event: content_block_delta

        data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"
        the other side!"}        }


        event: content_block_stop

        data: {"type":"content_block_stop","index":0          }


        event: message_delta

        data: {"type":"message_delta","delta":{"stop_reason":"end_turn","stop_sequence":null},"usage":{"output_tokens":89}     }


        event: message_stop

        data: {"type":"message_stop"    }


        '
    headers:
      CF-RAY:
      - 966feb153ed1c5dc-EWR
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Type:
      - text/event-stream; charset=utf-8
      Date:
      - Tue, 29 Jul 2025 22:05:33 GMT
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      anthropic-ratelimit-input-tokens-limit:
      - '50000'
      anthropic-ratelimit-input-tokens-remaining:
      - '49000'
      anthropic-ratelimit-input-tokens-reset:
      - '2025-07-29T22:05:33Z'
      anthropic-ratelimit-output-tokens-limit:
      - '10000'
      anthropic-ratelimit-output-tokens-remaining:
      - '10000'
      anthropic-ratelimit-output-tokens-reset:
      - '2025-07-29T22:05:32Z'
      anthropic-ratelimit-requests-limit:
      - '50'
      anthropic-ratelimit-requests-remaining:
      - '49'
      anthropic-ratelimit-requests-reset:
      - '2025-07-29T22:05:33Z'
      anthropic-ratelimit-tokens-limit:
      - '60000'
      anthropic-ratelimit-tokens-remaining:
      - '59000'
      anthropic-ratelimit-tokens-reset:
      - '2025-07-29T22:05:32Z'
      cf-cache-status:
      - DYNAMIC
      request-id:
      - req_011CRc4wyrMRfpnJUtwgYokq
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      via:
      - 1.1 google
    status:
      code: 200
      message: OK
version: 1
