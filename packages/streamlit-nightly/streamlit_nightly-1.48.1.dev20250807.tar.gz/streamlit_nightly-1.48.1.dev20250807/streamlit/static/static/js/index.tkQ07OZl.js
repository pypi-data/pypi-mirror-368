import{s as k,r as o,aW as D,ap as H,cU as W,aF as B,j as n,bR as j,c5 as O,bS as _,bv as G,bT as K,aG as $,cV as q}from"./index.Dc_WcSRe.js";import{u as w}from"./uniqueId.BSNvz4do.js";import{I as A}from"./InputInstructions.CCKHyB20.js";import{a as N}from"./useBasicWidgetState.BHQC2RZK.js";import{u as J,a as M,b as Q}from"./useUpdateUiValue.DxMTtdn6.js";import{I as X}from"./input.NT4Vz3vJ.js";import"./FormClearHelper.DgvKxH31.js";import"./inputUtils.CptNuJwn.js";import"./base-input.CS49-0A1.js";const Y=k("div",{target:"e1o1zy6o0"})("position:relative;");function Z({disabled:a,element:t,widgetMgr:s,fragmentId:u}){const[r,c]=o.useState(()=>I(s,t)??null),[T,y]=D(),[i,p]=o.useState(!1),x=o.useCallback(()=>{c(t.default??null),p(!0)},[t.default]),[V,m]=N({getStateFromWidgetMgr:I,getDefaultStateFromProto:tt,getCurrStateFromProto:et,updateWidgetMgrState:at,element:t,widgetMgr:s,fragmentId:u,onFormCleared:x});J(V,r,c,i);const[F,g]=o.useState(!1),e=H(),[f]=o.useState(()=>w("text_input_")),{placeholder:C,formId:l,icon:d,maxChars:b}=t,h=o.useCallback(()=>{p(!1),m({value:r,fromUi:!0})},[r,m]),v=W({formId:l})?s.allowFormEnterToSubmit(l):i,E=F&&T>e.breakpoints.hideWidgetDetails,z=o.useCallback(()=>{i&&h(),g(!1)},[i,h]),R=o.useCallback(()=>{g(!0)},[]),L=M({formId:l,maxChars:b,setDirty:p,setUiValue:c,setValueWithSource:m}),P=Q(l,h,i,s,u),S=d?.startsWith(":material"),U=S?"lg":"base";return B(Y,{className:"stTextInput","data-testid":"stTextInput",ref:y,children:[n(K,{label:t.label,disabled:a,labelVisibility:j(t.labelVisibility?.value),htmlFor:f,children:t.help&&n(O,{children:n(_,{content:t.help,placement:G.TOP_RIGHT})})}),n(X,{value:r??"",placeholder:C,onBlur:z,onFocus:R,onChange:L,onKeyPress:P,"aria-label":t.label,disabled:a,id:f,type:ot(t),autoComplete:t.autocomplete,startEnhancer:d&&n($,{"data-testid":"stTextInputIcon",iconValue:d,size:U}),overrides:{Input:{style:{fontWeight:e.fontWeights.normal,minWidth:0,lineHeight:e.lineHeights.inputWidget,paddingRight:e.spacing.sm,paddingLeft:e.spacing.md,paddingBottom:e.spacing.sm,paddingTop:e.spacing.sm,"::placeholder":{color:e.colors.fadedText60}}},Root:{props:{"data-testid":"stTextInputRootElement"},style:{height:e.sizes.minElementHeight,borderLeftWidth:e.sizes.borderWidth,borderRightWidth:e.sizes.borderWidth,borderTopWidth:e.sizes.borderWidth,borderBottomWidth:e.sizes.borderWidth,paddingLeft:d?e.spacing.sm:0}},StartEnhancer:{style:{paddingLeft:0,paddingRight:0,minWidth:e.iconSizes.lg,color:S?e.colors.fadedText60:"inherit"}}}}),E&&n(A,{dirty:i,value:r??"",maxLength:b,inForm:W({formId:l}),allowEnterToSubmit:v})]})}function I(a,t){return a.getStringValue(t)??null}function tt(a){return a.default??null}function et(a){return a.value??null}function at(a,t,s,u){t.setStringValue(a,s.value,{fromUi:s.fromUi},u)}function ot(a){return a.type===q.Type.PASSWORD?"password":"text"}const mt=o.memo(Z);export{mt as default};
