"use strict";(self.webpackChunkteamized_reactapp=self.webpackChunkteamized_reactapp||[]).push([[575],{221:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(4848),l=n(9336),i=n(6540);function a({title:e,className:t="",children:n}){const a=(0,i.useRef)(null);return(0,i.useEffect)(()=>{const e=new l.m_(a.current);return()=>e.dispose()},[]),(0,s.jsx)("abbr",{className:t,title:e,"data-bs-toggle":"tooltip",ref:a,children:n})}},1818:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(4848),l=n(1820);const i={Column:function({className:e="",size:t=12,sizes:n={},grow:l=!1,children:i}){let a=`dashboard-column d-flex flex-column ${e} col-${t}`;for(const e of Object.keys(n))a+=` col-${e}-${n[e]}`;return l&&(a+=" flex-grow-1"),(0,s.jsx)("div",{className:a,children:i})},Page:function({loading:e=!1,title:t=null,subtitle:n=null,text:l=null,children:i}){return(0,s.jsxs)("div",{className:"dashboard p-0 w-100 h-100 d-flex flex-column",children:[t&&(0,s.jsx)("h4",{className:"dashboard-title pt-3 mx-3 text-bold",children:t}),n&&(0,s.jsx)("h5",{className:"dashboard-subtitle mt-2 mx-3",children:n}),l&&(0,s.jsx)("p",{className:"dashboard-text mt-2 mx-3",children:l}),e?(0,s.jsxs)("div",{className:"w-100 flex-grow-1 d-flex flex-column align-items-center justify-content-center",children:[(0,s.jsx)("div",{className:"spinner-border mb-3",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Laden..."})}),(0,s.jsx)("p",{children:"Seiteninhalt wird geladen..."})]}):(0,s.jsx)("div",{className:"dashboard-row row w-100 g-0 ms-0 px-2 pt-2",children:i})]})},Row:function({className:e="",grow:t=!1,children:n}){let l=`dashboard-row row w-100 g-0 ${e}`;return t&&(l+=" flex-grow-1"),(0,s.jsx)("div",{className:l,children:n})},Tile:function({title:e=null,help:t=null,grow:n=!1,className:i="",children:a=null,loading:r=!1,ref:c=null}){let o=`dashboard-tile row border border-dark rounded mx-2 mb-3 mt-0 flex-column ${i}`;return n&&(o+=" flex-grow-1"),(0,s.jsxs)("div",{className:o,ref:c,children:[e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("h5",{className:"dashboard-tile-title pt-2 text-bold",style:{flexBasis:0},children:[e,t&&(0,s.jsx)(l.A,{className:"ms-2 small",title:t})]}),(0,s.jsx)("hr",{className:"m-0"})]}),(0,s.jsx)("div",{className:"p-2 w-100 overflow-auto flex-grow-1",children:r?(0,s.jsxs)("div",{className:"text-center my-5",children:[(0,s.jsx)("i",{className:"fa-solid fa-spinner fa-spin"}),(0,s.jsx)("span",{className:"ms-2",children:"Daten werden geladen..."})]}):a})]})}}},1820:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(4848),l=n(221);function i({title:e,icon:t="fa-solid fa-info-circle",className:n=""}){return(0,s.jsx)(l.A,{className:n,title:e,children:(0,s.jsx)("i",{className:t})})}},3335:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(4848);function l({show:e=!0,noTopBorder:t=!1,children:n}){return e?(0,s.jsx)("tfoot",{className:t?"border-top-0":"",children:(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:100,className:"border-bottom-0",children:(0,s.jsx)("div",{className:"w-100 d-inline-flex justify-content-end gap-2",children:n})})})}):null}var i=n(6540);const a={VerticalDataTable:function({items:e,children:t}){const n={head:null,foot:null};return i.Children.forEach(t,e=>{if(i.isValidElement(e))switch(e.type){case"thead":n.head=e;break;case"tfoot":case l:n.foot=e;break;default:console.warn("VerticalDataTable: Unsupported child type",e.type)}}),(0,s.jsxs)("table",{className:"table mb-0",children:[n.head,(0,s.jsx)("tbody",{children:e.map((e,t)=>({item:e,index:t})).filter(({item:e})=>!e.hide).map(({item:e,index:t})=>(0,s.jsxs)("tr",{className:e.isDebugId?"debug-id":"",children:[(0,s.jsxs)("th",{scope:"row",className:e.limitWidth?"pe-3":"",style:{width:e.limitWidth?"1px":void 0},children:[e.label,":"]}),(0,s.jsx)("td",{children:e.value})]},t))}),n.foot]})},ButtonFooter:l,SimpleTable:function({className:e="",children:t}){const n=`table mb-0 ${e}`;return(0,s.jsx)("table",{className:n,children:t})},Th:function({className:e="",children:t,noWrapFlex:n=!1}){return n?(0,s.jsx)("th",{className:"text-nowrap {className}",children:(0,s.jsx)("div",{className:"d-flex flex-nowrap gap-1",children:t})}):(0,s.jsx)("th",{className:e,children:t})}}},6780:(e,t,n)=>{n.d(t,{A:()=>l});var s=n(4848);function l({text:e,preserveLineBreaks:t=!0}){const n=/((?:https?:\/\/|www\.)[^\s/$.?#].\S*)/gi,l=e.split(n);return(0,s.jsx)("span",{style:{whiteSpace:t?"pre-wrap":"normal"},children:l.map((e,t)=>{if(e.match(n)){const n=e.startsWith("http")?e:`https://${e}`;return(0,s.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:e},t)}return e})})}},8575:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var s=n(4848),l=n(6540),i=n(5687),a=n(5206),r=n(855),c=n(1889),o=n(8811);async function d(e,t,n,s){return await async function(e,t,n,s){return await i.n.put(`teams/${e}/todolists/${t}/items/${n}`,s)}(e,t,n,s).then(s=>(o.c(e).todolists[t].items[n]=s.item,s.item))}var u=n(416),m=n(4100),h=n(1818),b=n(3335),p=n(1820),x=n(221),f=n(6780);function w({team:e,selectedList:t,onListDeleted:n,isAdmin:l}){const a=(0,u.qb)();return t?(0,s.jsx)(b.A.VerticalDataTable,{items:[{label:"Name",value:t.name},{label:"Beschreibung",value:(0,s.jsx)(f.A,{text:t.description}),limitWidth:!0},{label:"Farbe",value:(0,s.jsx)("i",{style:{color:t.color},className:"fa-solid fa-circle small"})},{label:"ID",value:t.id,isDebugId:!0}],children:(0,s.jsx)(b.A.ButtonFooter,{noTopBorder:!0,children:l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"btn btn-outline-dark me-2",onClick:()=>{(async function(e,t){return await(0,r.rP)({title:"To-do-Liste bearbeiten",html:`\n            <p>Team: ${e.name}</p><hr />\n            <label class="swal2-input-label" for="swal-input-name">Name:</label>\n            <input type="text" id="swal-input-name" class="swal2-input" placeholder="${t.name}" value="${t.name}">\n            <label class="swal2-input-label" for="swal-input-description">Beschreibung:</label>\n            <textarea id="swal-input-description" class="swal2-textarea" placeholder="${t.description}">${t.description}</textarea>\n            <label class="swal2-input-label" for="swal-input-color">Farbe:</label>\n            <input type="color" id="swal-input-color" class="swal2-input form-control-color" value="${t.color}">\n        `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Speichern",cancelButtonText:"Abbrechen",preConfirm:async()=>{const n=document.getElementById("swal-input-name").value,s=document.getElementById("swal-input-description").value,l=document.getElementById("swal-input-color").value;return n?(r.YU.showLoading(),await async function(e,t,n){return await async function(e,t,n){return await i.n.put(`teams/${e}/todolists/${t}`,n)}(e,t,n).then(t=>(o.c(e).todolists[t.todolist.id]=t.todolist,t.todolist))}(e.id,t.id,{name:n,description:s,color:l})):(r.YU.showValidationMessage("Bitte gib einen Namen ein!"),!1)}})})(e,t).then(e=>{e.isConfirmed&&a()})},children:"Bearbeiten"}),(0,s.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>{(async function(e,t){return await(0,r.U_)(`Willst du folgende To-do-Liste wirklich löschen?<br /><br />\n            <b>Name:</b> ${t.name} <br />\n            <b>Beschreibung: </b>${t.description} <br />\n            <b>Anzahl Listeneinträge: </b>${Object.keys(t.items).length}\n        `,async()=>await async function(e,t){return await async function(e,t){return await i.n.delete(`teams/${e}/todolists/${t}`)}(e,t).then(()=>{delete o.c(e).todolists[t]})}(e.id,t.id))})(e,t).then(e=>{e.isConfirmed&&(n(),a())})},children:"Löschen"})]}):(0,s.jsx)(x.A,{title:"Diese Aktionen stehen nur Admins zur Verfügung",children:(0,s.jsx)("button",{className:"btn btn-outline-dark disabled",children:"Bearbeiten/Löschen"})})})}):(0,s.jsxs)("p",{className:"ms-1 mb-0",children:[(0,s.jsx)("span",{className:"me-1",children:"Im ausgewählten Team ist noch keine To-do-Liste vorhanden."}),l?(0,s.jsx)(p.A,{title:'Du kannst mit den "Liste erstellen"-Knopf weiter oben eine neue Liste erstellen.'}):(0,s.jsx)(p.A,{title:"Bitte wende dich an einen Admin dieses Teams, um eine neue Liste zu erstellen."})]})}function j({list:e,isSelected:t,onSelect:n}){return(0,s.jsx)("div",{className:"py-1 mb-1",style:{paddingLeft:t?".5rem":"calc(.5rem + 3px)",borderLeftWidth:t?"8px":"5px",borderLeftColor:e.color,borderLeftStyle:"solid",cursor:"pointer",opacity:t?1:.75,fontWeight:t?"bold":"normal"},onClick:()=>{t||n(e.id)},children:(0,s.jsx)("span",{className:"d-inline-block w-100",children:e.name})})}function g({team:e,lists:t,selectedList:n,onListSelect:l,isAdmin:a}){return(0,s.jsxs)(s.Fragment,{children:[t.length>0&&(0,s.jsx)("div",{className:"mb-2",children:t.map(e=>(0,s.jsx)(j,{list:e,onSelect:l,isSelected:n?.id===e.id},e.id))}),a?(0,s.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{(async function(e){return await(0,r.rP)({title:"To-do-Liste erstellen",html:`\n            <p>Team: ${e.name}</p><hr />\n            <label class="swal2-input-label" for="swal-input-name">Name:</label>\n            <input type="text" id="swal-input-name" class="swal2-input" placeholder="Listenname">\n            <label class="swal2-input-label" for="swal-input-description">Beschreibung:</label>\n            <textarea id="swal-input-description" class="swal2-textarea" placeholder="Listenbeschreibung"></textarea>\n            <label class="swal2-input-label" for="swal-input-color">Farbe:</label>\n            <input type="color" id="swal-input-color" class="swal2-input form-control-color">\n        `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Erstellen",cancelButtonText:"Abbrechen",preConfirm:async()=>{const t=document.getElementById("swal-input-name").value,n=document.getElementById("swal-input-description").value,s=document.getElementById("swal-input-color").value;return t?(r.YU.showLoading(),await async function(e,t){return await async function(e,t){return await i.n.post(`teams/${e}/todolists`,t)}(e,t).then(t=>(o.c(e).todolists[t.todolist.id]=t.todolist,t.todolist))}(e.id,{name:t,description:n,color:s})):(r.YU.showValidationMessage("Bitte gib einen Namen ein!"),!1)}})})(e).then(e=>{e.isConfirmed&&l(e.value.id)})},children:"Liste erstellen"}):(0,s.jsx)(x.A,{title:"Diese Aktion steht nur Admins zur Verfügung",children:(0,s.jsx)("button",{className:"btn btn-outline-dark disabled",children:"Liste erstellen"})})]})}function N({team:e,list:t,item:n}){const l=(0,u.qb)();return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:n.done?(0,s.jsx)("a",{className:"btn btn-success disabled",title:"Erledigt",children:(0,s.jsx)("i",{className:"fa-solid fa-circle-check"})}):(0,s.jsx)("a",{className:"btn btn-outline-success border-1",onClick:()=>{d(e.id,t.id,n.id,{done:!0}).then(l)},title:"Als erledigt markieren",children:(0,s.jsx)("i",{className:"fa-regular fa-circle-check"})})}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{children:n.name})}),(0,s.jsx)("td",{children:(0,s.jsx)("a",{className:"btn btn-outline-dark border-1",onClick:()=>{(async function(e,t,n){return await(0,r.rP)({title:n.name,html:`\n            <p style="white-space: pre-line;">${n.description||"<i>Keine zusätzliche Notiz vorhanden</i>"}</p>\n            <hr />\n            <span class="swal2-label">\n                ${n.done?"Erledigt am "+(0,c.sq)(new Date(n.done_at)):"Noch nicht erledigt"}\n            </span>\n        `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Bearbeiten",cancelButtonText:"Schliessen"}).then(async s=>{if(s.isConfirmed)return await async function(e,t,n){return await(0,r.rP)({title:"Listeneintrag bearbeiten",html:`\n            <p>Team: ${e.name}</p><p>Liste: ${t.name}</p><hr />\n            <label class="swal2-input-label" for="swal-input-name">Titel:</label>\n            <input type="text" id="swal-input-name" class="swal2-input w-100" placeholder="${n.name}" value="${n.name}">\n            <label class="swal2-input-label" for="swal-input-description">Zusätzliche Notiz:</label>\n            <textarea id="swal-input-description" class="swal2-textarea w-100" placeholder="${n.description}">${n.description}</textarea><hr />\n            <label for="swal-input-done" class="swal2-checkbox d-flex">\n                <input type="checkbox" value="0" id="swal-input-done" ${n.done?"checked":""}>\n                <span class="swal2-label">Erledigt</span>\n            </label>\n        `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Speichern",cancelButtonText:"Abbrechen",preConfirm:async()=>{const s=document.getElementById("swal-input-name").value,l=document.getElementById("swal-input-description").value,i=document.getElementById("swal-input-done").checked;return s?(r.YU.showLoading(),await d(e.id,t.id,n.id,{name:s,description:l,done:i})):(r.YU.showValidationMessage("Du musst einen Titel angeben!"),!1)}})}(e,t,n)})})(e,t,n).then(e=>{e?.isConfirmed&&l()})},title:"Ansehen oder bearbeiten",children:(0,s.jsx)("i",{className:"fa-solid fa-eye"})})}),(0,s.jsx)("td",{children:(0,s.jsx)("a",{className:"btn btn-outline-danger border-1",onClick:()=>{(async function(e,t,n){return await(0,r.ZX)(`Willst du folgenden Listeneintrag wirklich löschen?<br /><br /><b>Name:</b> ${n.name} <br /><b>Beschreibung: </b>${n.description}`,async()=>await async function(e,t,n){return await async function(e,t,n){return await i.n.delete(`teams/${e}/todolists/${t}/items/${n}`)}(e,t,n).then(()=>{delete o.c(e).todolists[t].items[n]})}(e.id,t.id,n.id))})(e,t,n).then(e=>{e.isConfirmed&&l()})},title:"Löschen",children:(0,s.jsx)("i",{className:"fa-solid fa-trash"})})}),(0,s.jsx)("td",{className:"debug-id",children:n.id})]})}function y({team:e,selectedList:t,isAdmin:n}){const a=(0,u.qb)(),[c,d]=(0,l.useState)(!1),[m,h]=(0,l.useState)(!1),x=(0,l.useId)(),f=(0,l.useId)();if(!t)return(0,s.jsxs)("p",{className:"ms-1 mb-0",children:[(0,s.jsx)("span",{className:"me-1",children:"Im ausgewählten Team ist noch keine To-do-Liste vorhanden."}),n?(0,s.jsx)(p.A,{title:'Du kannst mit den "Liste erstellen"-Knopf eine neue Liste erstellen.'}):(0,s.jsx)(p.A,{title:"Bitte wende dich an einen Admin dieses Teams, um eine neue Liste zu erstellen."})]});let w=Object.values(t.items);return m||(w=w.filter(e=>!e.done)),(0,s.jsxs)("form",{onSubmit:n=>{n.preventDefault();const s=document.getElementById(f),l=s.value;""===l?(0,r.n7)("Leeres Feld","Bitte gib einen Namen ein"):(d(!0),async function(e,t,n){return await async function(e,t,n){return await i.n.post(`teams/${e}/todolists/${t}/items`,n)}(e,t,n).then(n=>(o.c(e).todolists[t].items[n.id]=n.item,n.item))}(e.id,t.id,{name:l}).then(()=>{s.value="",d(!1),a()}))},children:[(0,s.jsxs)("div",{className:"form-check form-switch m-2",children:[(0,s.jsx)("input",{className:"form-check-input",type:"checkbox",role:"switch",id:x,onChange:e=>{h(e.target.checked)}}),(0,s.jsx)("label",{className:"form-check-label ms-1",htmlFor:x,children:"Erledigte anzeigen"})]}),(0,s.jsxs)(b.A.SimpleTable,{className:"table-borderless",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-0",style:{width:"1px"}}),(0,s.jsx)("th",{className:"p-0"}),(0,s.jsx)("th",{className:"p-0",style:{width:"1px"}}),(0,s.jsx)("th",{className:"p-0",style:{width:"1px"}}),(0,s.jsx)("th",{className:"p-0 debug-id"})]})}),(0,s.jsxs)("tbody",{children:[w.map(n=>(0,s.jsx)(N,{item:n,list:t,team:e},n.id)),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("a",{className:"btn btn-outline-success border-1 disabled",children:(0,s.jsx)("i",{className:"fa-regular fa-circle-check"})})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",className:"form-control",disabled:c,placeholder:"Neues Element hinzufügen",id:f,maxLength:50})}),(0,s.jsx)("td",{colSpan:2,children:(0,s.jsx)("button",{type:"submit",className:"btn btn-success",disabled:c,title:"Erstellen",children:(0,s.jsx)("i",{className:"fa-solid fa-plus"})})})]})]})]})]})}function v(){const e=(0,u.qb)(),t=(0,m.CQ)(),n=t?.team,[i,r]=(0,l.useState)(null),c=t.todolists,d=t._state.todolists._initial,b=n.member.is_admin;(0,l.useEffect)(()=>{p(),d&&async function(e){return await o.zV(e,a.T.TODOLISTS)}(n.id).then(e)});const p=()=>{const e=i&&Object.hasOwn(c,i),t=Object.keys(c),n=t.length>0;!e&&n?r(t[0]):e||null===i||r(null)},x=i&&t.todolists[i];return(0,s.jsxs)(h.A.Page,{title:"To-do-Listen",subtitle:"Behalte den Überblick über die Aufgaben deines Teams",loading:d,children:[(0,s.jsxs)(h.A.Column,{sizes:{lg:4},children:[(0,s.jsx)(h.A.Tile,{title:"Listenübersicht",help:"Wechsle zwischen den To-do-Listen deines Teams oder erstelle eine neue.",children:(0,s.jsx)(g,{team:n,lists:Object.values(c),selectedList:x,onListSelect:r,isAdmin:b})}),(0,s.jsx)(h.A.Tile,{title:"Listendetails",help:"Sieh dir Infos zur oben ausgewählten Liste an.",children:(0,s.jsx)(w,{team:n,selectedList:x,onListDeleted:()=>r(null),isAdmin:b})})]}),(0,s.jsx)(h.A.Column,{sizes:{lg:8},children:(0,s.jsx)(h.A.Tile,{title:x?"To-do-Liste: "+x.name:"To-do-Liste",children:(0,s.jsx)(y,{team:n,selectedList:x,isAdmin:b})})})]})}}}]);