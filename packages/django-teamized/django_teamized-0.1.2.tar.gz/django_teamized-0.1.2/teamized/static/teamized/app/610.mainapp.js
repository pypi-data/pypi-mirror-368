"use strict";(self.webpackChunkteamized_reactapp=self.webpackChunkteamized_reactapp||[]).push([[610],{221:(e,s,l)=>{l.d(s,{A:()=>i});var t=l(4848),n=l(9336),a=l(6540);function i({title:e,className:s="",children:l}){const i=(0,a.useRef)(null);return(0,a.useEffect)(()=>{const e=new n.m_(i.current);return()=>e.dispose()},[]),(0,t.jsx)("abbr",{className:s,title:e,"data-bs-toggle":"tooltip",ref:i,children:l})}},1818:(e,s,l)=>{l.d(s,{A:()=>a});var t=l(4848),n=l(1820);const a={Column:function({className:e="",size:s=12,sizes:l={},grow:n=!1,children:a}){let i=`dashboard-column d-flex flex-column ${e} col-${s}`;for(const e of Object.keys(l))i+=` col-${e}-${l[e]}`;return n&&(i+=" flex-grow-1"),(0,t.jsx)("div",{className:i,children:a})},Page:function({loading:e=!1,title:s=null,subtitle:l=null,text:n=null,children:a}){return(0,t.jsxs)("div",{className:"dashboard p-0 w-100 h-100 d-flex flex-column",children:[s&&(0,t.jsx)("h4",{className:"dashboard-title pt-3 mx-3 text-bold",children:s}),l&&(0,t.jsx)("h5",{className:"dashboard-subtitle mt-2 mx-3",children:l}),n&&(0,t.jsx)("p",{className:"dashboard-text mt-2 mx-3",children:n}),e?(0,t.jsxs)("div",{className:"w-100 flex-grow-1 d-flex flex-column align-items-center justify-content-center",children:[(0,t.jsx)("div",{className:"spinner-border mb-3",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Laden..."})}),(0,t.jsx)("p",{children:"Seiteninhalt wird geladen..."})]}):(0,t.jsx)("div",{className:"dashboard-row row w-100 g-0 ms-0 px-2 pt-2",children:a})]})},Row:function({className:e="",grow:s=!1,children:l}){let n=`dashboard-row row w-100 g-0 ${e}`;return s&&(n+=" flex-grow-1"),(0,t.jsx)("div",{className:n,children:l})},Tile:function({title:e=null,help:s=null,grow:l=!1,className:a="",children:i=null,loading:r=!1,ref:d=null}){let c=`dashboard-tile row border border-dark rounded mx-2 mb-3 mt-0 flex-column ${a}`;return l&&(c+=" flex-grow-1"),(0,t.jsxs)("div",{className:c,ref:d,children:[e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("h5",{className:"dashboard-tile-title pt-2 text-bold",style:{flexBasis:0},children:[e,s&&(0,t.jsx)(n.A,{className:"ms-2 small",title:s})]}),(0,t.jsx)("hr",{className:"m-0"})]}),(0,t.jsx)("div",{className:"p-2 w-100 overflow-auto flex-grow-1",children:r?(0,t.jsxs)("div",{className:"text-center my-5",children:[(0,t.jsx)("i",{className:"fa-solid fa-spinner fa-spin"}),(0,t.jsx)("span",{className:"ms-2",children:"Daten werden geladen..."})]}):i})]})}}},1820:(e,s,l)=>{l.d(s,{A:()=>a});var t=l(4848),n=l(221);function a({title:e,icon:s="fa-solid fa-info-circle",className:l=""}){return(0,t.jsx)(n.A,{className:l,title:e,children:(0,t.jsx)("i",{className:s})})}},3335:(e,s,l)=>{l.d(s,{A:()=>i});var t=l(4848);function n({show:e=!0,noTopBorder:s=!1,children:l}){return e?(0,t.jsx)("tfoot",{className:s?"border-top-0":"",children:(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:100,className:"border-bottom-0",children:(0,t.jsx)("div",{className:"w-100 d-inline-flex justify-content-end gap-2",children:l})})})}):null}var a=l(6540);const i={VerticalDataTable:function({items:e,children:s}){const l={head:null,foot:null};return a.Children.forEach(s,e=>{if(a.isValidElement(e))switch(e.type){case"thead":l.head=e;break;case"tfoot":case n:l.foot=e;break;default:console.warn("VerticalDataTable: Unsupported child type",e.type)}}),(0,t.jsxs)("table",{className:"table mb-0",children:[l.head,(0,t.jsx)("tbody",{children:e.map((e,s)=>({item:e,index:s})).filter(({item:e})=>!e.hide).map(({item:e,index:s})=>(0,t.jsxs)("tr",{className:e.isDebugId?"debug-id":"",children:[(0,t.jsxs)("th",{scope:"row",className:e.limitWidth?"pe-3":"",style:{width:e.limitWidth?"1px":void 0},children:[e.label,":"]}),(0,t.jsx)("td",{children:e.value})]},s))}),l.foot]})},ButtonFooter:n,SimpleTable:function({className:e="",children:s}){const l=`table mb-0 ${e}`;return(0,t.jsx)("table",{className:l,children:s})},Th:function({className:e="",children:s,noWrapFlex:l=!1}){return l?(0,t.jsx)("th",{className:"text-nowrap {className}",children:(0,t.jsx)("div",{className:"d-flex flex-nowrap gap-1",children:s})}):(0,t.jsx)("th",{className:e,children:s})}}},4610:(e,s,l)=>{l.r(s),l.d(s,{default:()=>x});var t=l(4848),n=l(31),a=l(855),i=l(4100),r=l(1818),d=l(3335),c=l(1820),o=l(416);function m({team:e,isSelected:s}){const l=(0,o.qb)(),a=(0,i.G0)(),r=(0,i.oi)(),d=()=>{r(e.id),a("team")};return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"align-middle text-center",children:(0,t.jsx)("span",{children:e.membercount})}),(0,t.jsxs)("td",{className:"py-2",children:[(0,t.jsx)("span",{children:e.name}),(0,t.jsx)("br",{className:"d-none d-lg-inline-block"}),(0,t.jsx)("i",{className:"d-none d-lg-inline-block",children:e.description})]}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{children:e.member.role_text})}),s?(0,t.jsx)("td",{children:(0,t.jsx)("a",{className:"btn btn-outline-success border-1",onClick:()=>{r(e.id)},title:"Zu Team wechseln",children:(0,t.jsx)("i",{className:"fa-regular fa-circle-check"})})}):(0,t.jsx)("td",{children:(0,t.jsx)("a",{className:"btn btn-success disabled",title:"Ausgewählt",children:(0,t.jsx)("i",{className:"fa-solid fa-circle-check"})})}),e.member.is_admin?(0,t.jsx)("td",{children:(0,t.jsx)("a",{className:"btn btn-outline-dark border-1",onClick:d,title:"Verwalten",children:(0,t.jsx)("i",{className:"fa-solid fa-pen-to-square"})})}):(0,t.jsx)("td",{children:(0,t.jsx)("a",{className:"btn btn-outline-dark border-1",onClick:d,title:"Ansehen",children:(0,t.jsx)("i",{className:"fa-solid fa-eye"})})}),e.member.is_owner?(0,t.jsx)("td",{children:(0,t.jsx)("a",{className:"btn btn-outline-danger border-1",onClick:()=>{n.l9(e).then(e=>{e.isConfirmed&&l()})},title:"Team löschen",children:(0,t.jsx)("i",{className:"fa-solid fa-trash"})})}):(0,t.jsx)("td",{children:(0,t.jsx)("a",{className:"btn btn-outline-danger border-1",onClick:()=>{n.ZK(e).then(e=>{e.isConfirmed&&l()})},title:"Team verlassen",children:(0,t.jsx)("i",{className:"fa-solid fa-right-from-bracket"})})}),(0,t.jsx)("td",{className:"debug-id",children:e.id})]})}function h({teams:e,selectedTeamId:s}){return(0,t.jsxs)(d.A.SimpleTable,{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-center",style:{width:"1px"},children:(0,t.jsx)(c.A,{icon:"fa-solid fa-users",title:"Anzahl Mitglieder"})}),(0,t.jsxs)("th",{children:[(0,t.jsx)("span",{children:"Name "}),(0,t.jsx)("span",{className:"d-none d-lg-inline-block",children:"& Beschreibung"})]}),(0,t.jsx)("th",{children:"Deine Rolle"}),(0,t.jsx)("th",{style:{width:"1px"}}),(0,t.jsx)("th",{style:{width:"1px"}}),(0,t.jsx)("th",{style:{width:"1px"}}),(0,t.jsx)("th",{className:"debug-id",children:"ID"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsx)(m,{team:e,isSelected:e.id!==s},e.id))})]})}function x({teams:e}){const{selectedTeamId:s}=(0,i.FR)(),l=(0,i.HR)(),d=new URL(window.location.href).searchParams.get("invite")??"";return(0,t.jsx)(r.A.Page,{title:"Deine Teams",subtitle:"Verwalte deine Teams, erstelle ein neues oder trete einem bei",children:(0,t.jsxs)(r.A.Column,{children:[(0,t.jsx)(r.A.Tile,{title:"Teamübersicht",children:(0,t.jsx)(h,{teams:e,selectedTeamId:s})}),(0,t.jsxs)(r.A.Tile,{title:"Team erstellen oder beitreten",children:[(0,t.jsx)("p",{className:"mx-1",children:'Klicke auf "Team erstellen", um ein neues Team zu erstellen oder gib einen Einladungstoken ein und klicke auf "Team beitreten", um einem Team beizutreten.'}),(0,t.jsxs)("div",{className:"input-group my-2 px-1",children:[(0,t.jsx)("button",{type:"button",className:"btn btn-outline-success border-1",onClick:()=>{n.Y0().then(e=>{e.isConfirmed&&l({update:{selectedPage:"team",selectedTeamId:e.value.id}})})},children:"Team erstellen"}),(0,t.jsx)("input",{id:"invite-token",type:"text",className:"form-control",placeholder:"Token der Einladung",defaultValue:d}),(0,t.jsx)("button",{type:"button",className:"btn btn-outline-primary border-1",onClick:()=>{const e=document.getElementById("invite-token").value;(0,a.mr)("Einladung wird geprüft..."),n._m(e).then(e=>{e.isConfirmed&&l({update:{selectedPage:"team",selectedTeamId:e.value.id},remove:["invite"]})}).catch(()=>{l({remove:["invite"]})})},children:"Team beitreten"})]})]})]})})}}}]);