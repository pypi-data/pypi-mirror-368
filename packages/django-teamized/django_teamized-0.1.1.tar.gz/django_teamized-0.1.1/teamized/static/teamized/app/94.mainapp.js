"use strict";(self.webpackChunkteamized_reactapp=self.webpackChunkteamized_reactapp||[]).push([[94],{221:(e,n,t)=>{t.d(n,{A:()=>i});var a=t(4848),l=t(9336),s=t(6540);function i({title:e,className:n="",children:t}){const i=(0,s.useRef)(null);return(0,s.useEffect)(()=>{const e=new l.m_(i.current);return()=>e.dispose()},[]),(0,a.jsx)("abbr",{className:n,title:e,"data-bs-toggle":"tooltip",ref:i,children:t})}},1818:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(4848),l=t(1820);const s={Column:function({className:e="",size:n=12,sizes:t={},grow:l=!1,children:s}){let i=`dashboard-column d-flex flex-column ${e} col-${n}`;for(const e of Object.keys(t))i+=` col-${e}-${t[e]}`;return l&&(i+=" flex-grow-1"),(0,a.jsx)("div",{className:i,children:s})},Page:function({loading:e=!1,title:n=null,subtitle:t=null,text:l=null,children:s}){return(0,a.jsxs)("div",{className:"dashboard p-0 w-100 h-100 d-flex flex-column",children:[n&&(0,a.jsx)("h4",{className:"dashboard-title pt-3 mx-3 text-bold",children:n}),t&&(0,a.jsx)("h5",{className:"dashboard-subtitle mt-2 mx-3",children:t}),l&&(0,a.jsx)("p",{className:"dashboard-text mt-2 mx-3",children:l}),e?(0,a.jsxs)("div",{className:"w-100 flex-grow-1 d-flex flex-column align-items-center justify-content-center",children:[(0,a.jsx)("div",{className:"spinner-border mb-3",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Laden..."})}),(0,a.jsx)("p",{children:"Seiteninhalt wird geladen..."})]}):(0,a.jsx)("div",{className:"dashboard-row row w-100 g-0 ms-0 px-2 pt-2",children:s})]})},Row:function({className:e="",grow:n=!1,children:t}){let l=`dashboard-row row w-100 g-0 ${e}`;return n&&(l+=" flex-grow-1"),(0,a.jsx)("div",{className:l,children:t})},Tile:function({title:e=null,help:n=null,grow:t=!1,className:s="",children:i=null,loading:r=!1,ref:d=null}){let c=`dashboard-tile row border border-dark rounded mx-2 mb-3 mt-0 flex-column ${s}`;return t&&(c+=" flex-grow-1"),(0,a.jsxs)("div",{className:c,ref:d,children:[e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h5",{className:"dashboard-tile-title pt-2 text-bold",style:{flexBasis:0},children:[e,n&&(0,a.jsx)(l.A,{className:"ms-2 small",title:n})]}),(0,a.jsx)("hr",{className:"m-0"})]}),(0,a.jsx)("div",{className:"p-2 w-100 overflow-auto flex-grow-1",children:r?(0,a.jsxs)("div",{className:"text-center my-5",children:[(0,a.jsx)("i",{className:"fa-solid fa-spinner fa-spin"}),(0,a.jsx)("span",{className:"ms-2",children:"Daten werden geladen..."})]}):i})]})}}},1820:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(4848),l=t(221);function s({title:e,icon:n="fa-solid fa-info-circle",className:t=""}){return(0,a.jsx)(l.A,{className:t,title:e,children:(0,a.jsx)("i",{className:n})})}},3335:(e,n,t)=>{t.d(n,{A:()=>i});var a=t(4848);function l({show:e=!0,noTopBorder:n=!1,children:t}){return e?(0,a.jsx)("tfoot",{className:n?"border-top-0":"",children:(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:100,className:"border-bottom-0",children:(0,a.jsx)("div",{className:"w-100 d-inline-flex justify-content-end gap-2",children:t})})})}):null}var s=t(6540);const i={VerticalDataTable:function({items:e,children:n}){const t={head:null,foot:null};return s.Children.forEach(n,e=>{if(s.isValidElement(e))switch(e.type){case"thead":t.head=e;break;case"tfoot":case l:t.foot=e;break;default:console.warn("VerticalDataTable: Unsupported child type",e.type)}}),(0,a.jsxs)("table",{className:"table mb-0",children:[t.head,(0,a.jsx)("tbody",{children:e.map((e,n)=>({item:e,index:n})).filter(({item:e})=>!e.hide).map(({item:e,index:n})=>(0,a.jsxs)("tr",{className:e.isDebugId?"debug-id":"",children:[(0,a.jsxs)("th",{scope:"row",className:e.limitWidth?"pe-3":"",style:{width:e.limitWidth?"1px":void 0},children:[e.label,":"]}),(0,a.jsx)("td",{children:e.value})]},n))}),t.foot]})},ButtonFooter:l,SimpleTable:function({className:e="",children:n}){const t=`table mb-0 ${e}`;return(0,a.jsx)("table",{className:t,children:n})},Th:function({className:e="",children:n,noWrapFlex:t=!1}){return t?(0,a.jsx)("th",{className:"text-nowrap {className}",children:(0,a.jsx)("div",{className:"d-flex flex-nowrap gap-1",children:n})}):(0,a.jsx)("th",{className:e,children:n})}}},6780:(e,n,t)=>{t.d(n,{A:()=>l});var a=t(4848);function l({text:e,preserveLineBreaks:n=!0}){const t=/((?:https?:\/\/|www\.)[^\s/$.?#].\S*)/gi,l=e.split(t);return(0,a.jsx)("span",{style:{whiteSpace:n?"pre-wrap":"normal"},children:l.map((e,n)=>{if(e.match(t)){const t=e.startsWith("http")?e:`https://${e}`;return(0,a.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:e},n)}return e})})}},7094:(e,n,t)=>{t.r(n),t.d(n,{default:()=>U});var a=t(4848),l=t(6540),s=t(4692),i=t.n(s),r=t(5687),d=t(5206),c=t(855),o=t(1889),u=t(8811);function m(e,n){let t,a;return n.fullday?(t=(0,o.cJ)(new Date(n.dstart)),a=(0,o.cJ)(new Date(n.dend))):(t=(0,o.cJ)(new Date(n.dtstart)),a=new Date(n.dtend)),(0,o.h$)(e,t,a)}function h(e,n){return e.filter(e=>m(n,e))}async function p(e,n){return await(0,c.rP)({title:"Kalender bearbeiten",html:`\n            <p>Team: ${e.name}</p><hr />\n            <label class="swal2-input-label" for="swal-input-name">Name:</label>\n            <input type="text" id="swal-input-name" class="swal2-input" placeholder="${n.name}" value="${n.name}">\n            <label class="swal2-input-label" for="swal-input-description">Beschreibung:</label>\n            <textarea id="swal-input-description" class="swal2-textarea" placeholder="${n.description}">${n.description}</textarea>\n            <label class="swal2-input-label" for="swal-input-color">Farbe:</label>\n            <input type="color" id="swal-input-color" class="swal2-input form-control-color" value="${n.color}">\n        `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Speichern",cancelButtonText:"Abbrechen",preConfirm:async()=>{const t=document.getElementById("swal-input-name").value,a=document.getElementById("swal-input-description").value,l=document.getElementById("swal-input-color").value;return t?(c.YU.showLoading(),await async function(e,n,t){return await async function(e,n,t){return await r.n.put(`teams/${e}/calendars/${n}`,t)}(e,n,t).then(n=>(u.c(e).calendars[n.calendar.id]=n.calendar,n.calendar))}(e.id,n.id,{name:t,description:a,color:l})):(c.YU.showValidationMessage("Bitte gib einen Namen ein!"),!1)}})}function b(e=!1){i()("#swal-input-fullday").prop("checked")?(i()(".fullday-only").show(),i()(".partday-only").hide(),e||(i()("#swal-input-dstart").val((0,o.VT)(i()("#swal-input-dtstart").val(),!0)),i()("#swal-input-dend").val((0,o.VT)(i()("#swal-input-dtend").val(),!0)))):(i()(".fullday-only").hide(),i()(".partday-only").show(),e||(i()("#swal-input-dtstart").val((0,o.VT)((0,o.VC)(i()("#swal-input-dstart").val()),!1)),i()("#swal-input-dtend").val((0,o.VT)((0,o.VC)(i()("#swal-input-dend").val()),!1))))}async function f({team:e,prefilledEvent:n,calendars:t,selectedCalendarId:a,titleText:l,confirmButtonText:s,action:r}){let d="",u="",m="",h="";return n.fullday?(d=(0,o.VT)(n.dstart,!0),u=(0,o.VT)(n.dend,!0)):(m=(0,o.VT)(n.dtstart),h=(0,o.VT)(n.dtend)),await(0,c.rP)({title:l,html:`\n            <p>Team: ${e.name}</p><hr />\n            <label class="swal2-input-label" for="swal-input-calendar">Kalender:</label>\n            <select id="swal-input-calendar" class="swal2-input swal2-select"></select><hr />\n            <label class="swal2-input-label" for="swal-input-name">Name:</label>\n            <input type="text" id="swal-input-name" class="swal2-input" placeholder="${n.name}" value="${n.name}">\n            <label class="swal2-input-label" for="swal-input-description">Beschreibung:</label>\n            <textarea id="swal-input-description" class="swal2-textarea" placeholder="${n.description}">${n.description}</textarea>\n            <label class="swal2-input-label" for="swal-input-location">Ort:</label>\n            <input type="text" id="swal-input-location" class="swal2-input" placeholder="${n.location}" value="${n.location}">\n            <label for="swal-input-fullday" class="swal2-checkbox d-flex">\n                <input type="checkbox" ${n.fullday?"checked":""} id="swal-input-fullday">\n                <span class="swal2-label">Ganztägig</span>\n            </label><hr />\n            <label class="swal2-input-label fullday-only" for="swal-input-dstart">Von:</label>\n            <input type="date" id="swal-input-dstart" class="swal2-input fullday-only" value="${d}">\n            <label class="swal2-input-label fullday-only" for="swal-input-dend">Bis:</label>\n            <input type="date" id="swal-input-dend" class="swal2-input fullday-only" value="${u}">\n            <label class="swal2-input-label partday-only" for="swal-input-dtstart">Von:</label>\n            <input type="datetime-local" id="swal-input-dtstart" class="swal2-input partday-only" value="${m}">\n            <label class="swal2-input-label partday-only" for="swal-input-dtend">Bis:</label>\n            <input type="datetime-local" id="swal-input-dtend" class="swal2-input partday-only" value="${h}">\n        `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:s,cancelButtonText:"Abbrechen",didOpen:()=>{b(!0),i()("#swal-input-fullday").on("change",()=>b());const e=i()("#swal-input-calendar");e.html(t.map(e=>`\n                                <option value="${e.id}">\n                                    ${e.name}\n                                </option>\n                            `).join("")),e.val(a)},preConfirm:async()=>{const e=i()("#swal-input-calendar").val(),n=i()("#swal-input-name").val(),t=i()("#swal-input-description").val(),a=i()("#swal-input-location").val(),l=i()("#swal-input-fullday").prop("checked");if(!n)return c.YU.showValidationMessage("Es wird ein Name benötigt!"),!1;if(l){const l=i()("#swal-input-dstart").val(),s=i()("#swal-input-dend").val();if(!l||!s)return c.YU.showValidationMessage("Start- und Enddatum sind Pflichtfelder!"),!1;if(new Date(l)>new Date(s))return c.YU.showValidationMessage("Startdatum muss vor dem Enddatum liegen!"),!1;const d={name:n,description:t,location:a,fullday:!0,dstart:l,dend:s,dtstart:null,dtend:null};return c.YU.showLoading(),await r(e,d)}{const l=i()("#swal-input-dtstart").val(),s=i()("#swal-input-dtend").val();if(!l||!s)return c.YU.showValidationMessage("Start- und Endzeit sind Pflichtfelder!"),!1;if(new Date(l)>new Date(s))return c.YU.showValidationMessage("Startdatum muss vor dem Enddatum liegen!"),!1;const d={name:n,description:t,location:a,fullday:!1,dstart:null,dend:null,dtstart:(0,o.VC)(l),dtend:(0,o.VC)(s)};return c.YU.showLoading(),await r(e,d)}}})}async function w(e,n,t){return await async function(e,n,t){return await r.n.post(`teams/${e}/calendars/${n}/events`,t)}(e,n,t).then(t=>(u.c(e).calendars[n].events[t.id]=t.event,t.event))}async function x(e,n,t,a){return await async function(e,n,t,a){return await r.n.put(`teams/${e}/calendars/${n}/events/${t}`,a)}(e,n,t,a).then(a=>(u.c(e).calendars[n].events[t]=a.event,a.event))}async function g(e,n,t,a,l=!1){return await f({team:e,prefilledEvent:a,calendars:t,selectedCalendarId:n.id,titleText:l?"Ereignis kopieren":"Ereignis bearbeiten",confirmButtonText:l?"Kopie erstellen":"Speichern",action:async(t,s)=>l?await w(e.id,t,s):t==n.id?await x(e.id,n.id,a.id,s):(await async function(e,n,t,a){return await async function(e,n,t,a){return await r.n.post(`teams/${e}/calendars/${n}/events/${t}/move/${a}`)}(e,n,t,a).then(()=>{const l=u.c(e);l.calendars[a].events[t]=l.calendars[n].events[t],delete l.calendars[n].events[t]})}(e.id,n.id,a.id,t),await x(e.id,t,a.id,s))})}var y=t(416),j=t(4100),v=t(1818),N=t(3335),k=t(6780);function D({team:e,event:n,calendars:t}){const l=(0,y.qb)();if(!n)return(0,a.jsx)("p",{className:"ms-1 mb-1",children:"Kein Ereignis ausgewählt"});let s,i;return n.fullday?(s=o.sq(new Date(n.dstart)),i=o.sq(new Date(n.dend))):(s=o.ln(new Date(n.dtstart)),i=o.ln(new Date(n.dtend))),(0,a.jsx)(N.A.VerticalDataTable,{items:[{label:"Name",value:n.name},{label:"Beschreibung",value:(0,a.jsx)(k.A,{text:n.description}),hide:!n.description,limitWidth:!0},{label:"Ort",value:n.location,hide:!n.location},{label:"Start",value:s},{label:"Ende",value:i},{label:"Kalender",value:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{style:{color:n.calendar?.color},className:"fa-solid fa-circle small me-2"}),n.calendar?.name]})},{label:"ID",value:n.id,isDebugId:!0}],children:(0,a.jsxs)(N.A.ButtonFooter,{noTopBorder:!0,children:[(0,a.jsx)("button",{className:"btn btn-outline-dark",onClick:()=>{g(e,n.calendar,t,n).then(e=>{e.isConfirmed&&l()})},children:"Bearbeiten"}),(0,a.jsx)("button",{className:"btn btn-outline-dark",onClick:()=>{g(e,n.calendar,t,n,!0).then(e=>{e.isConfirmed&&l()})},children:"Duplizieren"}),(0,a.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>{(async function(e,n,t){return await(0,c.ZX)(`Willst du folgendes Ereignis wirklich löschen?<br /><br /><b>Name:</b> ${t.name} <br /><b>Beschreibung: </b>${t.description}`,async()=>await async function(e,n,t){return await async function(e,n,t){return await r.n.delete(`teams/${e}/calendars/${n}/events/${t}`)}(e,n,t).then(()=>{delete u.c(e).calendars[n].events[t]})}(e.id,n.id,t.id))})(e,n.calendar,n).then(e=>{e.isConfirmed&&l()})},children:"Löschen"})]})})}var T=t(1820);function C({isSelected:e,onSelect:n,event:t,selectedDate:l}){return(0,a.jsxs)("div",{className:"ps-2 mb-1",style:{borderLeftWidth:"5px",borderLeftStyle:t.fullday?"solid":"dotted",borderLeftColor:t.calendar.color,cursor:"pointer",opacity:e?.75:1},onClick:()=>{n(e?null:t.id)},children:[(0,a.jsx)("b",{className:"d-inline-block w-100",children:t.name}),(0,a.jsx)("span",{className:"d-inline-block w-100",children:(()=>{const e=o.cJ(l),n=o.cJ(l,1);if(t.fullday){const n=new Date(t.dstart),a=new Date(t.dend),l=o.ny(e,n),s=o.ny(e,a);return l&&s?"Ganztägig":"Vom "+o.sq(n)+" bis am "+o.sq(a)}{const a=new Date(t.dtstart),l=new Date(t.dtend),s=a.getTime()>=e.getTime(),i=l.getTime()<n.getTime();return s&&i?"Von "+o.Dm(a)+" bis "+o.Dm(l)+" Uhr":s?"Ab "+o.Dm(a)+" Uhr":i?"Bis "+o.Dm(l)+" Uhr":"Ganztägig"}})()}),t.location&&(0,a.jsx)("i",{className:"d-inline-block w-100",children:t.location})]})}function $({team:e,calendars:n,events:t,onEventSelect:l,selectedEvent:s,selectedCalendar:i,selectedDate:r,isAdmin:d}){const c=(0,y.qb)(),u=t.sort((e,n)=>e.fullday&&n.fullday?new Date(e.dstart).getTime()-new Date(n.dstart).getTime():e.fullday||n.fullday?e.fullday?-1:1:new Date(e.dtstart).getTime()-new Date(n.dtstart).getTime()),m=null!=i,h=t.length>0;return m?(0,a.jsxs)(a.Fragment,{children:[h?u.map(e=>(0,a.jsx)(C,{event:e,selectedDate:r,onSelect:l,isSelected:!!s&&s.id===e.id},e.id)):(0,a.jsx)("p",{className:"ms-1 mb-1",children:"Keine Ereignisse an diesem Datum."}),(0,a.jsx)("button",{className:"btn btn-outline-success mt-2",onClick:()=>{(async function(e,n,t,a){const l=(0,o.VT)(n),s={id:"",name:"",description:"",location:"",fullday:!1,dtstart:l,dtend:l,dstart:null,dend:null};return await f({team:e,prefilledEvent:s,calendars:t,selectedCalendarId:a,titleText:"Ereignis erstellen",confirmButtonText:"Erstellen",action:async(n,t)=>await w(e.id,n,t)})})(e,r,n,i.id).then(e=>{e.isConfirmed&&c()})},children:"Ereignis erstellen"})]}):(0,a.jsxs)("p",{className:"ms-1 mb-0",children:[(0,a.jsx)("span",{className:"me-1",children:"Im ausgewählten Team ist noch kein Kalender vorhanden."}),d?(0,a.jsx)(T.A,{title:'Du kannst mit den "Neu erstellen"-Knopf weiter unten einen neuen Kalender erstellen.'}):(0,a.jsx)(T.A,{title:"Bitte wende dich an einen Admin dieses Teams, um einen neuen Kalender zu erstellen."})]})}var A=t(221);function B({team:e,selectedCalendar:n,onCalendarDeleted:t,isAdmin:l}){const s=(0,y.qb)();return n?(0,a.jsx)(N.A.VerticalDataTable,{items:[{label:"Name",value:n.name},{label:"Beschreibung",value:(0,a.jsx)(k.A,{text:n.description}),limitWidth:!0},{label:"Farbe",value:(0,a.jsx)("i",{style:{color:n.color},className:"fa-solid fa-circle small"})},{label:"ID",value:n.id,isDebugId:!0}],children:(0,a.jsxs)(N.A.ButtonFooter,{noTopBorder:!0,children:[l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"btn btn-outline-dark",onClick:()=>{p(e,n).then(e=>{e.isConfirmed&&s()})},children:"Bearbeiten"}),(0,a.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>{(async function(e,n){return await(0,c.U_)(`Willst du folgenden Kalender wirklich löschen?<br /><br />\n            <b>Name:</b> ${n.name} <br />\n            <b>Beschreibung: </b>${n.description} <br />\n            <b>Anzahl Events: </b>${Object.keys(n.events).length}\n        `,async()=>await async function(e,n){return await async function(e,n){return await r.n.delete(`teams/${e}/calendars/${n}`)}(e,n).then(()=>{delete u.c(e).calendars[n]})}(e.id,n.id))})(e,n).then(e=>{e.isConfirmed&&(t(),s())})},children:"Löschen"})]}):(0,a.jsx)(A.A,{title:"Diese Aktionen stehen nur Admins zur Verfügung",children:(0,a.jsx)("button",{className:"btn btn-outline-dark disabled",children:"Bearbeiten/Löschen"})}),(0,a.jsx)("button",{className:"btn btn-outline-info",onClick:async()=>{await async function(e){const n=e.ics_url,t="webcal://"+n.split("//")[1];(0,c.rP)({title:"Kalender abonnieren",html:`\n    Um den Kalender zu abonnieren, hast du zwei Möglichkeiten:\n    <hr>\n    <h5>1) Webcal-Link</h5>\n    <p>Auf allen Apple-Geräten sowie weiteren unterstützten Geräten kannst du Webcal-Links direkt in deiner Kalender-App\n    öffnen. Bei manchen anderen Apps (z. B. Google Calendar) musst du den Link kopieren und manuell einfügen.</p>\n    <a href="${t}" target="_blank" class="btn btn-outline-info">Webcal-URL</a>\n    <hr>\n    <h5>2) HTTP(S)-Link</h5>\n    <p>Falls dein Gerät oder deine App Webcal-Links nicht unterstützt, kannst du auch folgenden Link verwenden. Füge\n    diesen im "Kalender abonnieren"-Dialog (o. ä.) deiner Kalenderapp ein.</p>\n    <input class="swal2-input" type="url" readonly value="${n}">\n  `,showCancelButton:!0,showConfirmButton:!1,cancelButtonText:"Schliessen"})}(n)},children:"Abonnieren"})]})}):(0,a.jsxs)("p",{className:"ms-1 mb-0",children:[(0,a.jsx)("span",{className:"me-1",children:"Im ausgewählten Team ist noch kein Kalender vorhanden."}),l?(0,a.jsx)(T.A,{title:'Du kannst mit den "Kalender erstellen"-Knopf weiter oben eine neue Liste erstellen.'}):(0,a.jsx)(T.A,{title:"Bitte wende dich an einen Admin dieses Teams, um einen neuen Kalender zu erstellen."})]})}function S({date:e,isSelected:n,isToday:t,isInSelectedMonth:l,events:s,onSelect:i}){const r=[];for(const e of s)r.includes(e.calendar.color)||r.push(e.calendar.color);return(0,a.jsx)("div",{onClick:()=>{i(e)},children:(0,a.jsxs)("div",{className:(()=>{let e="d-flex justify-content-center align-items-center flex-column rounded-circle dm-noinvert";return e+=n&&t?" bg-danger fw-bold ":n?" bg-primary ":t?" text-danger fw-bold":" ",l||(e+=" opacity-50"),e})(),style:{width:"3em",height:"3em",cursor:"pointer"},children:[(0,a.jsx)("span",{children:e.getDate()}),n?null:(0,a.jsx)("span",{style:{fontSize:"0.4rem",height:"0.4rem"},children:r.map(e=>(0,a.jsx)("span",{style:{color:e},children:(0,a.jsx)("i",{className:"fa-solid fa-circle"})},e))})]})})}function E({firstDay:e,events:n,selectedDate:t,selectedMonth:l,onDateSelect:s}){const i=[];for(let n=0;n<7;n++)i.push(o.cJ(e,n));return(0,a.jsx)("div",{className:"d-flex justify-content-around my-3",children:i.map((e,i)=>(0,a.jsx)(S,{date:e,events:h(n,e),isToday:o.ny(e,new Date),isSelected:o.ny(t,e),isInSelectedMonth:o.ny(l,o._0(e)),onSelect:s},i))})}const K=["Mo","Di","Mi","Do","Fr","Sa","So"],V=[0,1,2,3,4,5,6];function z({selectedDate:e,onDateSelect:n,events:t}){const[s,i]=(0,l.useState)(o._0(new Date)),r=new Date,d=o.ny(e,r)&&o.ny(s,o._0(r)),c=o.g0(s),u=s.toLocaleString(void 0,{month:"long",year:"numeric"});return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,a.jsx)("h4",{className:"mb-0 ms-1",children:u}),(0,a.jsxs)("div",{className:"btn-group",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-outline-dark",onClick:()=>{i(o._0(s,-1))},children:(0,a.jsx)("i",{className:"fa-solid fa-arrow-left"})}),(0,a.jsx)("button",{type:"button",className:d?"btn btn-outline-dark disabled":"btn btn-outline-dark",onClick:()=>{const e=new Date;i(o._0(e,0)),n(e)},children:"Heute"}),(0,a.jsx)("button",{type:"button",className:"btn btn-outline-dark",onClick:()=>{i(o._0(s,1))},children:(0,a.jsx)("i",{className:"fa-solid fa-arrow-right"})})]})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("div",{className:"d-flex justify-content-around my-3",children:K.map(e=>(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"d-flex justify-content-center align-items-center flex-column",style:{width:"3em",height:"2em"},children:(0,a.jsx)("b",{children:e})})},e))}),V.map(l=>(0,a.jsx)(E,{firstDay:o.cJ(c,7*l),selectedMonth:s,selectedDate:e,onDateSelect:n,events:t},l))]})]})}function L({isSelected:e,onSelect:n,calendar:t}){return(0,a.jsx)("div",{className:"py-1 mb-1",style:{paddingLeft:e?".5rem":"calc(.5rem + 3px)",borderLeftWidth:e?"8px":"5px",borderLeftColor:t.color,borderLeftStyle:"solid",cursor:"pointer",opacity:e?1:.75,fontWeight:e?"bold":"normal"},onClick:()=>{e||n(t.id)},children:(0,a.jsx)("span",{className:"d-inline-block w-100",children:t.name})})}function I({team:e,calendars:n,selectedCalendar:t,onCalendarSelect:l,isAdmin:s}){return(0,a.jsxs)(a.Fragment,{children:[n.length>0&&(0,a.jsx)("div",{className:"mb-2",children:n.map(e=>(0,a.jsx)(L,{calendar:e,onSelect:l,isSelected:t?.id===e.id},e.id))}),s?(0,a.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{(async function(e){return await(0,c.rP)({title:"Kalender erstellen",html:`\n            <p>Team: ${e.name}</p><hr />\n            <label class="swal2-input-label" for="swal-input-name">Name:</label>\n            <input type="text" id="swal-input-name" class="swal2-input" placeholder="Kalendername">\n            <label class="swal2-input-label" for="swal-input-description">Beschreibung:</label>\n            <textarea id="swal-input-description" class="swal2-textarea" placeholder="Kalenderbeschreibung"></textarea>\n            <label class="swal2-input-label" for="swal-input-color">Farbe:</label>\n            <input type="color" id="swal-input-color" class="swal2-input form-control-color">\n        `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Erstellen",cancelButtonText:"Abbrechen",preConfirm:async()=>{const n=document.getElementById("swal-input-name").value,t=document.getElementById("swal-input-description").value,a=document.getElementById("swal-input-color").value;return n?(c.YU.showLoading(),await async function(e,n){return await async function(e,n){return await r.n.post(`teams/${e}/calendars`,n)}(e,n).then(n=>(u.c(e).calendars[n.calendar.id]=n.calendar,n.calendar))}(e.id,{name:n,description:t,color:a})):(c.YU.showValidationMessage("Bitte gib einen Namen ein"),!1)}})})(e).then(e=>{e.isConfirmed&&l(e.value.id)})},children:"Kalender erstellen"}):(0,a.jsx)(A.A,{title:"Diese Aktion steht nur Admins zur Verfügung",children:(0,a.jsx)("button",{className:"btn btn-outline-dark disabled",children:"Kalender erstellen"})})]})}function U(){const e=(0,y.qb)(),[n,t]=(0,l.useState)(o.cJ(new Date)),[s,i]=(0,l.useState)(null),[r,c]=(0,l.useState)(null),p=(0,j.CQ)(),b=p?.team,f=p.calendars,w=Object.values(f),x=p._state.calendars._initial,g=b.member.is_admin,N=function(e){const n={};return Object.values(e).forEach(e=>{Object.values(e.events).forEach(t=>{n[t.id]={...t,calendar:e}})}),n}(w);(0,l.useEffect)(()=>{k(),T(),x&&async function(e){return await u.zV(e,d.T.CALENDARS)}(b.id).then(e)});const k=()=>{const e=Object.hasOwn(f,s),n=Object.keys(f),t=n.length>0;!e&&t?i(n[0]):e||i(null)},T=()=>{r&&(Object.hasOwn(N,r)||c(null))},C=o.sq(n),A=p.calendars[s],S=N[r];return(0,a.jsxs)(v.A.Page,{title:"Kalender",subtitle:"Kalender für dich und dein Team",loading:x,children:[(0,a.jsxs)(v.A.Column,{sizes:{lg:6},className:"order-lg-2",children:[(0,a.jsx)(v.A.Tile,{title:"Ereignisübersicht",help:"Hier werden Ereignisse aus allen Kalendern des aktuellen Teams angezeigt",children:(0,a.jsx)(z,{onDateSelect:e=>{if(t(o.cJ(e)),r){const n=N[r];n&&!m(e,n)&&c(null)}},selectedDate:n,events:Object.values(N)})}),(0,a.jsx)(v.A.Tile,{title:"Ereignisse am "+C,help:"Klicke auf einen Tag in der Ereignisübersicht, um zu diesem zu wechseln.",children:(0,a.jsx)($,{onEventSelect:c,selectedDate:n,selectedEvent:S,selectedCalendar:A,calendars:w,events:h(Object.values(N),n),team:b,isAdmin:g})})]}),(0,a.jsxs)(v.A.Column,{sizes:{lg:6},children:[(0,a.jsx)(v.A.Tile,{title:"Ausgewähltes Ereignis",help:"Klicke auf ein Ereignis in der Ereignisliste, um es auszuwählen/abzuwählen.",className:"order-lg-3",children:(0,a.jsx)(D,{event:S,team:b,calendars:w})}),(0,a.jsx)(v.A.Tile,{title:"Kalenderübersicht",help:"Wechsle zwischen den Kalendern deines Teams oder erstelle einen neuen. Diese Auswahl hat keinen Einfluss auf die angezeigten Ereignisse.",children:(0,a.jsx)(I,{onCalendarSelect:i,team:b,calendars:w,selectedCalendar:A,isAdmin:g})}),(0,a.jsx)(v.A.Tile,{title:"Kalenderdetails",help:"Sieh dir Infos zum oben ausgewählten Kalender an.",children:(0,a.jsx)(B,{team:b,selectedCalendar:A,onCalendarDeleted:()=>i(null),isAdmin:g})})]})]})}}}]);