"use strict";(self.webpackChunkteamized_reactapp=self.webpackChunkteamized_reactapp||[]).push([[128],{6128:(e,n,i)=>{i.r(n),i.d(n,{default:()=>k});var s=i(4848),t=i(8826),l=i(31),r=i(416),a=i(4100),d=i(1818),c=i(3335),o=i(1820),h=i(221),m=i(6780),x=i(6540),b=i(855);function j({team:e,invite:n}){const i=(0,r.qb)(),t=window.location.href.split("?")[0]+"?invite="+n.token;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(m.A,{text:n.note})}),(0,s.jsxs)("td",{children:[(0,s.jsx)("abbr",{title:n.token,className:"me-1",onClick:()=>{navigator.clipboard.writeText(n.token).then(()=>(0,b.Sv)("Der Token wurde in die Zwischenablage kopiert.","Token kopiert"))},children:(0,s.jsx)("i",{className:"fa-solid fa-key"})}),(0,s.jsx)("abbr",{title:t,onClick:()=>{navigator.clipboard.writeText(t).then(()=>(0,b.Sv)("Der Link wurde in die Zwischenablage kopiert.","Link kopiert"))},children:(0,s.jsx)("i",{className:"fa-solid fa-link"})})]}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{children:n.valid_until?new Date(n.valid_until).toLocaleString():"∞"})}),(0,s.jsx)("td",{className:"text-align-end",children:(0,s.jsxs)("span",{children:[n.uses_used,"/",n.uses_left]})}),(0,s.jsx)("td",{children:(0,s.jsx)("a",{className:"btn btn-outline-dark border-1",onClick:()=>{l.aZ(e,n).then(e=>{e.isConfirmed&&i()})},title:"Einladung bearbeiten",children:(0,s.jsx)("i",{className:"fa-solid fa-pen-to-square"})})}),(0,s.jsx)("td",{children:(0,s.jsx)("a",{className:"btn btn-outline-danger border-1",onClick:()=>{l.ZH(e,n).then(e=>{e.isConfirmed&&i()})},title:"Einladung löschen",children:(0,s.jsx)("i",{className:"fa-solid fa-trash"})})}),(0,s.jsx)("td",{className:"debug-id",children:n.id})]})}function u({teamData:e}){const n=(0,r.qb)(),i=e?.team,t=Object.values(e.invites),a=e._state.invites._initial;return(0,x.useEffect)(()=>{a&&l.Bf(i.id).then(n)}),(0,s.jsxs)(c.A.SimpleTable,{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Notiz"}),(0,s.jsxs)(c.A.Th,{noWrapFlex:!0,children:[(0,s.jsx)("span",{children:"Teilen"}),(0,s.jsx)(o.A,{title:"Auf Icons klicken, um Token bzw. Link zu kopieren"})]}),(0,s.jsx)("th",{style:{minWidth:"6rem"},children:"Gültig bis"}),(0,s.jsxs)(c.A.Th,{noWrapFlex:!0,children:[(0,s.jsx)("span",{children:"Verwendungen"}),(0,s.jsx)(o.A,{title:"Bereits verwendet / noch verfügbar"})]}),(0,s.jsx)("th",{style:{width:"1px"}}),(0,s.jsx)("th",{style:{width:"1px"}}),(0,s.jsx)("th",{className:"debug-id",children:"ID"})]})}),(0,s.jsx)("tbody",{children:a?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:4,children:"Laden..."})}):0===t.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:4,children:"Keine Einladungen vorhanden"})}):t.map(e=>(0,s.jsx)(j,{invite:e,team:i},e.id))}),(0,s.jsx)(c.A.ButtonFooter,{children:(0,s.jsx)("button",{type:"button",className:"btn btn-outline-success border-1",onClick:()=>{l.yX(i).then(e=>{e.isConfirmed&&n()})},children:"Einladung erstellen"})})]})}function f({team:e,member:n,loggedInMember:i}){const t=(0,a.G0)(),d=(0,r.qb)();return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("img",{src:n.user.avatar_url,alt:`Avatar von ${n.user.username}`,width:"32",height:"32",className:"rounded-circle"})}),(0,s.jsx)("td",{children:(0,s.jsxs)("span",{children:[n.user.first_name," ",n.user.last_name]})}),(0,s.jsxs)("td",{className:"py-2",children:[(0,s.jsx)("span",{children:n.user.username}),(0,s.jsx)("br",{}),(0,s.jsx)("a",{href:"mailto:"+n.user.email,children:n.user.email})]}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{children:n.role_text})}),i.is_owner&&(n.is_owner?(0,s.jsx)("td",{}):n.is_admin?(0,s.jsx)("td",{children:(0,s.jsx)("a",{className:"btn btn-outline-dark border-1",onClick:()=>{l.JR(e,n).then(e=>{e.isConfirmed&&d()})},children:"Degradieren"})}):(0,s.jsx)("td",{children:(0,s.jsx)("a",{className:"btn btn-outline-dark border-1",onClick:()=>{l.Zu(e,n).then(e=>{e.isConfirmed&&d()})},children:"Befördern"})})),n.id===i.id?i.is_owner?(0,s.jsx)("td",{}):(0,s.jsx)("td",{children:(0,s.jsx)("a",{className:"btn btn-outline-danger border-1",onClick:()=>{l.ZK(e).then(e=>{e.isConfirmed&&(t("teamlist"),d())})},title:"Team verlassen",children:(0,s.jsx)("i",{className:"fa-solid fa-right-from-bracket"})})}):i.is_owner||i.is_admin&&!n.is_admin?(0,s.jsx)("td",{children:(0,s.jsx)("a",{className:"btn btn-outline-danger border-1",onClick:()=>{l.UY(e,n).then(e=>{e.isConfirmed&&d()})},title:"Mitglied entfernen",children:(0,s.jsx)("i",{className:"fa-solid fa-trash"})})}):(0,s.jsx)("td",{}),(0,s.jsx)("td",{className:"debug-id",children:n.id})]})}function g({teamData:e}){const n=(0,r.qb)(),i=e.team,t=i.member,a=Object.values(e.members),d=e._state.members._initial;return(0,x.useEffect)(()=>{d&&l.iT(i.id).then(n)}),(0,s.jsxs)(c.A.SimpleTable,{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{style:{width:"32px"},className:"text-center",children:(0,s.jsx)(o.A,{title:"Das Profilbild wird anhand der E-Mail-Adresse auf gravatar.com abgerufen"})}),(0,s.jsx)("th",{children:"Name"}),(0,s.jsx)(c.A.Th,{noWrapFlex:!0,children:"Benutzername & E-Mail"}),(0,s.jsx)("th",{children:"Rolle"}),t.is_owner&&(0,s.jsx)("th",{style:{width:"1px"}}),(0,s.jsx)("th",{style:{width:"1px"}}),(0,s.jsx)("th",{className:"debug-id",children:"ID"})]})}),(0,s.jsx)("tbody",{children:d?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:4,children:"Laden..."})}):a.map(e=>(0,s.jsx)(f,{member:e,team:i,loggedInMember:i.member},e.id))})]})}function k(){const e=(0,r.qb)(),n=(0,a.CQ)(),i=n?.team,x=(0,a.G0)();let b=!0,j="";return i.club?(b=!1,j="Das Team kann nicht gelöscht werden, solange der Vereinsmodus aktiv ist."):i.membercount>1&&(b=!1,j="Das Team kann nicht gelöscht werden, solange du nicht das einzige Mitglied bist."),(0,s.jsx)(d.A.Page,{title:"Dein Team",subtitle:"Infos über dein ausgewähltes Team",children:(0,s.jsxs)(d.A.Column,{children:[(0,s.jsx)(d.A.Tile,{title:null===i.club?"Teaminfos":(0,s.jsxs)("div",{children:["Teaminfos",(0,s.jsxs)("div",{className:"badge bg-info ms-2",children:["Vereinsmodus aktiviert",(0,s.jsx)(o.A,{title:"In diesem Team sind erweiterte Vereinsfunktionen verfügbar.",className:"ms-1"})]})]}),children:(0,s.jsx)(c.A.VerticalDataTable,{items:[{label:"Name",value:i.name},{label:"Beschreibung",value:(0,s.jsx)(m.A,{text:i.description}),limitWidth:!0},{label:"Mitglieder",value:i.membercount},{label:"ID",value:i.id,isDebugId:!0}],children:(0,s.jsxs)(c.A.ButtonFooter,{show:i.member.is_owner,noTopBorder:!0,children:[(0,s.jsx)("button",{className:"btn btn-outline-dark border-1",onClick:()=>{l.My(i).then(n=>{n.isConfirmed&&e()})},children:"Team bearbeiten"}),b?(0,s.jsx)("button",{className:"btn btn-outline-danger border-1",onClick:async()=>{await l.l9(i).then(n=>{n.isConfirmed&&(x("teamlist"),e())})},children:"Team löschen"}):(0,s.jsx)(h.A,{title:j,children:(0,s.jsx)("button",{className:"btn btn-outline-danger border-1",disabled:!0,children:"Team löschen"})}),!i.club&&(0,s.jsx)("button",{className:"btn btn-outline-info border-1",onClick:()=>{t.dM(i).then(n=>{n.isConfirmed&&(x("club"),e())})},children:"Vereinsmodus aktivieren"})]})})}),(0,s.jsx)(d.A.Tile,{title:"Mitglieder",children:(0,s.jsx)(g,{teamData:n})}),i.member.is_owner&&(0,s.jsx)(d.A.Tile,{title:"Einladungen",children:(0,s.jsx)(u,{teamData:n})})]})})}}}]);