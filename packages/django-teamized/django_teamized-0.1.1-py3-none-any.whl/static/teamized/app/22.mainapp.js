"use strict";(self.webpackChunkteamized_reactapp=self.webpackChunkteamized_reactapp||[]).push([[22],{9022:(e,s,i)=>{i.r(s),i.d(s,{default:()=>f});var n=i(4848),t=i(8826),l=i(416),a=i(4100),r=i(1818),d=i(3335),c=i(6780),h=i(6540),m=i(1820);function o({team:e,group:s,isAdmin:i}){const a=(0,l.qb)();return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("span",{children:s.name})}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{children:s.description})}),i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("td",{children:(0,n.jsx)("a",{className:"btn btn-outline-primary border-1",onClick:async()=>{await t.rQ(s)},title:"Mitgliederportfolios teilen (API)",children:(0,n.jsx)("i",{className:"fa-solid fa-share"})})}),(0,n.jsx)("td",{children:(0,n.jsx)("a",{className:"btn btn-outline-dark border-1",onClick:()=>{t.el(e,s).then(e=>{e.isConfirmed&&a()})},title:"Gruppe bearbeiten",children:(0,n.jsx)("i",{className:"fa-solid fa-pen-to-square"})})}),(0,n.jsx)("td",{children:(0,n.jsx)("a",{className:"btn btn-outline-danger border-1",onClick:()=>{t.Ry(e,s).then(e=>{e.isConfirmed&&a()})},title:"Gruppe löschen",children:(0,n.jsx)("i",{className:"fa-solid fa-trash"})})})]}),(0,n.jsx)("td",{className:"debug-id",children:s.id})]})}function x({team:e,clubGroups:s,isAdmin:i}){const a=(0,l.qb)();return(0,n.jsxs)(d.A.SimpleTable,{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Gruppenname"}),(0,n.jsx)("th",{children:"Beschreibung"}),i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("th",{style:{width:"1px"}}),(0,n.jsx)("th",{style:{width:"1px"}}),(0,n.jsx)("th",{style:{width:"1px"}})]}),(0,n.jsx)("th",{className:"debug-id",children:"ID"})]})}),(0,n.jsx)("tbody",{children:s.map(s=>(0,n.jsx)(o,{group:s,team:e,isAdmin:i},s.id))}),(0,n.jsx)(d.A.ButtonFooter,{show:i,children:(0,n.jsx)("button",{type:"button",className:"btn btn-outline-success border-1",onClick:()=>{t.EM(e).then(e=>{e.isConfirmed&&a()})},children:"Gruppe erstellen"})})]})}var b=i(1889);function j({team:e,clubMember:s,isAdmin:i,isOwner:a}){const r=(0,l.qb)();return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("span",{children:s.first_name})}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{children:s.last_name})}),(0,n.jsx)("td",{children:null===s.birth_date?null:(0,n.jsxs)("span",{children:[(0,b.sq)(new Date(s.birth_date))," (",(0,b.QO)(s.birth_date),")"]})}),(0,n.jsx)("td",{children:(0,n.jsx)("a",{href:"mailto:"+s.email,children:s.email})}),a&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("td",{children:(0,n.jsx)("a",{className:"btn btn-outline-primary border-1",onClick:async()=>{await t.wE(e.id,s.id)},title:"Magischer Link erstellen",children:(0,n.jsx)("i",{className:"fa-solid fa-key"})})})}),i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("td",{children:(0,n.jsx)("a",{className:"btn btn-outline-dark border-1",onClick:()=>{t.Vz(e,s).then(e=>{e.isConfirmed&&r()})},title:"Mitglied bearbeiten",children:(0,n.jsx)("i",{className:"fa-solid fa-user-pen"})})}),(0,n.jsx)("td",{children:(0,n.jsx)("a",{className:"btn btn-outline-dark border-1",onClick:async()=>{await t.tU(e,s)},title:"Portfolio bearbeiten",children:(0,n.jsx)("i",{className:"fa-solid fa-file-pen"})})}),(0,n.jsx)("td",{children:(0,n.jsx)("a",{className:"btn btn-outline-dark border-1",onClick:()=>{t.Ok(e,s).then(e=>{e.isConfirmed&&r()})},title:"Gruppen anpassen",children:(0,n.jsx)("i",{className:"fa-solid fa-users-rectangle"})})}),(0,n.jsx)("td",{children:(0,n.jsx)("a",{className:"btn btn-outline-danger border-1",onClick:()=>{t._l(e,s).then(e=>{e.isConfirmed&&r()})},title:"Mitglied entfernen",children:(0,n.jsx)("i",{className:"fa-solid fa-trash"})})})]}),(0,n.jsx)("td",{className:"debug-id",children:s.id})]})}function u({team:e,clubMembers:s,isAdmin:i,isOwner:a}){const r=(0,l.qb)();return(0,n.jsxs)(d.A.SimpleTable,{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Vorname"}),(0,n.jsx)("th",{children:"Nachname"}),(0,n.jsx)("th",{children:"Geburtsdatum"}),(0,n.jsxs)(d.A.Th,{noWrapFlex:!0,children:[(0,n.jsx)("span",{children:"E-Mail-Adresse"}),(0,n.jsx)(m.A,{title:"Eine E-Mail-Adresse kann nicht mehrfach verwendet werden.",icon:"fa-solid fa-circle-exclamation text-warning"})]}),a&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("th",{style:{width:"1px"}})}),i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("th",{style:{width:"1px"}}),(0,n.jsx)("th",{style:{width:"1px"}}),(0,n.jsx)("th",{style:{width:"1px"}}),(0,n.jsx)("th",{style:{width:"1px"}})]}),(0,n.jsx)("th",{className:"debug-id",children:"ID"})]})}),(0,n.jsx)("tbody",{children:s.map(s=>(0,n.jsx)(j,{clubMember:s,team:e,isAdmin:i,isOwner:a},s.id))}),(0,n.jsx)(d.A.ButtonFooter,{show:i,children:(0,n.jsx)("button",{type:"button",className:"btn btn-outline-success border-1",onClick:()=>{t.xV(e).then(e=>{e.isConfirmed&&r()})},children:"Mitglied erstellen"})})]})}function p({teamData:e}){const s=(0,l.qb)(),[i,a]=(0,h.useState)("all"),r=e.team,d=e.team.member.is_owner,c=e.team.member.is_admin,o=Object.values(e.club_members),b=Object.values(e.club_groups),j=e._state.club_members._initial,p=e._state.club_groups._initial;return(0,h.useEffect)(()=>{j&&t.sM(r.id).then(s),p&&t.V5(r.id).then(s)}),j||p?(0,n.jsx)("p",{className:"ms-2",children:"Wird geladen..."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"m-2 border-0",children:(0,n.jsxs)("ul",{className:"nav nav-tabs",children:[(0,n.jsx)("li",{className:"nav-item",children:(0,n.jsxs)("button",{className:"all"===i?"nav-link active":"nav-link",onClick:()=>a("all"),children:["Alle (",o.length,")"]})}),b.map(e=>(0,n.jsx)("li",{className:"nav-item",children:(0,n.jsxs)("button",{className:i===e.id?"nav-link active":"nav-link",onClick:()=>a(e.id),children:[e.name," (",e.memberids.length,")",e.description&&(0,n.jsx)(m.A,{className:"ms-1",title:e.description})]})},e.id)),(0,n.jsx)("li",{className:"nav-item ms-auto",children:(0,n.jsx)("button",{className:"edit"===i?"nav-link active":"nav-link",onClick:()=>a("edit"),children:(0,n.jsx)("i",{className:"fa-solid fa-pen-to-square"})})})]})}),"all"===i?(0,n.jsx)(u,{team:r,clubMembers:o,isAdmin:c,isOwner:d}):"edit"===i?(0,n.jsx)(x,{team:r,clubGroups:b,isAdmin:c}):(0,n.jsx)(u,{team:r,clubMembers:o.filter(s=>e.club_groups[i].memberids.includes(s.id)),isAdmin:c,isOwner:d})]})}function f(){const e=(0,l.qb)(),s=(0,a.CQ)(),i=s?.team,h=(0,a.G0)(),m=i.club;return(0,n.jsx)(r.A.Page,{title:"Verein",subtitle:"Verwalte deinen Verein",loading:void 0===m,children:(0,n.jsxs)(r.A.Column,{children:[(0,n.jsx)(r.A.Tile,{title:"Vereinsinfos",children:(0,n.jsx)(d.A.VerticalDataTable,{items:[{label:"Name",value:m.name},{label:"Login URL",value:(0,n.jsx)("a",{target:"_blank",href:m.url,rel:"noreferrer",children:m.slug})},{label:"Beschreibung",value:(0,n.jsx)(c.A,{text:m.description}),limitWidth:!0},{label:"Mitglieder",value:m.membercount},{label:"ID",value:m.id,isDebugId:!0}],children:(0,n.jsxs)(d.A.ButtonFooter,{show:i.member.is_owner,noTopBorder:!0,children:[(0,n.jsx)("button",{className:"btn btn-outline-dark border-1 me-2",onClick:()=>{t.zl(i).then(s=>{s.isConfirmed&&e()})},children:"Verein bearbeiten"}),(0,n.jsx)("button",{className:"btn btn-outline-danger border-1",onClick:async()=>{await t.eA(i).then(s=>{s.isConfirmed&&(h("team"),e())})},children:"Verein löschen"})]})})}),(0,n.jsx)(r.A.Tile,{title:"Vereinsmitglieder",children:(0,n.jsx)(p,{teamData:s})})]})})}}}]);