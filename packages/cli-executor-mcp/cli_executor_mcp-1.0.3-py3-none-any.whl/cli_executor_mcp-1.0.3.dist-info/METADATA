Metadata-Version: 2.4
Name: cli-executor-mcp
Version: 1.0.3
Summary: åŸºäºFastMCPçš„MCPæœåŠ¡å™¨ï¼Œç”¨äºæ‰§è¡ŒCLIå‘½ä»¤
Author-email: CaptainJi <jiqing19861123@163.com>
License-Expression: MIT
Project-URL: Homepage, https://github.com/CaptainJi/cli_executor
Project-URL: Bug Tracker, https://github.com/CaptainJi/cli_executor/issues
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Operating System :: OS Independent
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: fastmcp>=2.11.0
Requires-Dist: httpx>=0.24.0
Requires-Dist: loguru
Provides-Extra: dev
Requires-Dist: loguru>=0.7.0; extra == "dev"
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Dynamic: license-file

# CLI Executor MCP

[![Python Version](https://img.shields.io/badge/python-3.8+-blue.svg)](https://python.org)
[![FastMCP](https://img.shields.io/badge/FastMCP-2.11+-green.svg)](https://github.com/jlowin/fastmcp)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

åŸºäºFastMCPæ„å»ºçš„æ¨¡å‹ä¸Šä¸‹æ–‡åè®®(MCP)æœåŠ¡å™¨ï¼Œä½¿å¤§è¯­è¨€æ¨¡å‹èƒ½å¤Ÿæ‰§è¡ŒCLIå‘½ä»¤è¿›è¡Œç³»ç»Ÿéƒ¨ç½²å’Œç®¡ç†ä»»åŠ¡ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸš€ **FastMCPå®ç°** - åŸºäºFastMCPæ¡†æ¶æ„å»º
- ğŸ”§ **å‘½ä»¤æ‰§è¡Œ** - æ‰§è¡Œå•ä¸ªCLIå‘½ä»¤ï¼Œæ”¯æŒç¯å¢ƒå˜é‡åŠ è½½
- ğŸ“œ **è„šæœ¬æ‰§è¡Œ** - è¿è¡Œå¤šè¡Œè„šæœ¬ï¼Œæ”¯æŒè¶…æ—¶æ§åˆ¶
- ğŸ“ **ç›®å½•æ“ä½œ** - åˆ—å‡ºç›®å½•å†…å®¹ï¼Œæ˜¾ç¤ºè¯¦ç»†æ–‡ä»¶ä¿¡æ¯
- ğŸ–¥ï¸ **ç³»ç»Ÿä¿¡æ¯** - å…¨é¢çš„ç³»ç»Ÿå’Œç¯å¢ƒè¯¦æƒ…
- ğŸ“‹ **éƒ¨ç½²æ¨¡æ¿** - å³ç”¨å‹éƒ¨ç½²æç¤ºæ¨¡æ¿
- âš¡ **å¤šç§ä¼ è¾“æ–¹å¼** - æ”¯æŒstdioå’Œstreamable-HTTP
- ğŸ›¡ï¸ **å®‰å…¨ç‰¹æ€§** - è¶…æ—¶å¤„ç†å’Œé”™è¯¯ç®¡ç†
- ğŸ” **è·¨å¹³å°** - æ”¯æŒLinuxã€macOSå’ŒWindows

## ğŸ“¦ å®‰è£…

```bash
pip install cli-executor-mcp
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¯åŠ¨æœåŠ¡å™¨

#### Stdioä¼ è¾“ï¼ˆé»˜è®¤ï¼‰
```bash
cli-executor-mcp
```

#### Streamable HTTPä¼ è¾“
```bash
cli-executor-mcp --port 8000
```

#### æŒ‡å®šä¸»æœºå’Œç«¯å£
```bash
cli-executor-mcp --host 0.0.0.0 --port 8000
```

#### è°ƒè¯•æ¨¡å¼
```bash
cli-executor-mcp --debug
```

### ä¸MCPå®¢æˆ·ç«¯é…åˆä½¿ç”¨

æœåŠ¡å™¨æä¾›çš„å·¥å…·ã€èµ„æºå’Œæç¤ºå¯ä»¥è¢«ä»»ä½•å…¼å®¹MCPçš„å®¢æˆ·ç«¯ä½¿ç”¨ï¼š

```python
import fastmcp

# è¿æ¥åˆ°æœåŠ¡å™¨
client = fastmcp.Client("stdio", command="cli-executor-mcp")

# æ‰§è¡Œå‘½ä»¤
result = await client.call_tool("execute_command", {"command": "ls -la"})
print(result)
```

## ğŸ› ï¸ å¯ç”¨å·¥å…·

### `execute_command`
æ‰§è¡Œå•ä¸ªCLIå‘½ä»¤ï¼Œæ”¯æŒç¯å¢ƒå˜é‡åŠ è½½ã€‚

**å‚æ•°ï¼š**
- `command` (str): è¦æ‰§è¡Œçš„å‘½ä»¤
- `working_dir` (str, å¯é€‰): æ‰§è¡Œç›®å½•
- `timeout` (int, å¯é€‰): å‘½ä»¤è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼Œé»˜è®¤ï¼š30ï¼‰

**ç¤ºä¾‹ï¼š**
```python
await client.call_tool("execute_command", {
    "command": "python --version",
    "working_dir": "/home/user/project"
})
```

### `execute_script`
æ‰§è¡Œå¤šè¡Œè„šæœ¬ï¼Œæ”¯æŒé€‚å½“çš„shellå¤„ç†ã€‚

**å‚æ•°ï¼š**
- `script` (str): è¦æ‰§è¡Œçš„è„šæœ¬å†…å®¹
- `working_dir` (str, å¯é€‰): æ‰§è¡Œç›®å½•
- `shell` (str, å¯é€‰): ä½¿ç”¨çš„shellï¼ˆé»˜è®¤ï¼š"bash"ï¼‰
- `timeout` (int, å¯é€‰): è„šæœ¬è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼Œé»˜è®¤ï¼š60ï¼‰

**ç¤ºä¾‹ï¼š**
```python
await client.call_tool("execute_script", {
    "script": """
    #!/bin/bash
    echo "å¼€å§‹éƒ¨ç½²..."
    npm install
    npm run build
    echo "éƒ¨ç½²å®Œæˆï¼"
    """,
    "working_dir": "/var/www/myapp"
})
```

### `list_directory`
åˆ—å‡ºç›®å½•å†…å®¹ï¼Œæ˜¾ç¤ºè¯¦ç»†æ–‡ä»¶ä¿¡æ¯ã€‚

**å‚æ•°ï¼š**
- `path` (str, å¯é€‰): è¦åˆ—å‡ºçš„ç›®å½•è·¯å¾„ï¼ˆé»˜è®¤ä¸ºå½“å‰ç›®å½•ï¼‰
- `show_hidden` (bool, å¯é€‰): æ˜¯å¦æ˜¾ç¤ºéšè—æ–‡ä»¶ï¼ˆé»˜è®¤ï¼šfalseï¼‰

**ç¤ºä¾‹ï¼š**
```python
await client.call_tool("list_directory", {
    "path": "/home/user",
    "show_hidden": true
})
```

## ğŸ“š èµ„æº

### `system://info`
è·å–å…¨é¢çš„ç³»ç»Ÿä¿¡æ¯ï¼ŒåŒ…æ‹¬æ“ä½œç³»ç»Ÿè¯¦æƒ…ã€Pythonç‰ˆæœ¬ã€ç¯å¢ƒå˜é‡å’Œå½“å‰å·¥ä½œç›®å½•ã€‚

**ç¤ºä¾‹ï¼š**
```python
info = await client.read_resource("system://info")
print(info)
```

## ğŸ“ æç¤º

### `deploy_application`
ä¸ºåº”ç”¨ç¨‹åºç”Ÿæˆéƒ¨ç½²æŒ‡ä»¤ã€‚

**å‚æ•°ï¼š**
- `app_name` (str): è¦éƒ¨ç½²çš„åº”ç”¨ç¨‹åºåç§°
- `target_dir` (str): éƒ¨ç½²ç›®æ ‡ç›®å½•
- `repo_url` (str, å¯é€‰): Gitä»“åº“URL

**ç¤ºä¾‹ï¼š**
```python
prompt = await client.get_prompt("deploy_application", {
    "app_name": "my-web-app",
    "target_dir": "/var/www/my-web-app",
    "repo_url": "https://github.com/user/my-web-app.git"
})
```

## âš™ï¸ é…ç½®

### å‘½ä»¤è¡Œé€‰é¡¹

```bash
cli-executor-mcp --help
```

| é€‰é¡¹ | æè¿° | é»˜è®¤å€¼ |
|------|------|--------|
| `--transport` | ä¼ è¾“åè®® (stdio, streamable-http) | streamable-http |
| `--host` | HTTPæœåŠ¡å™¨ç»‘å®šä¸»æœº | 127.0.0.1 |
| `--port` | HTTPæœåŠ¡å™¨ç«¯å£ | 8000 |
| `--debug` | å¯ç”¨è°ƒè¯•æ—¥å¿— | false |

### ç¯å¢ƒå˜é‡

æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡é…ç½®æœåŠ¡å™¨ï¼š

- `CLI_EXECUTOR_HOST`: HTTPæœåŠ¡å™¨ä¸»æœº
- `CLI_EXECUTOR_PORT`: HTTPæœåŠ¡å™¨ç«¯å£
- `CLI_EXECUTOR_TRANSPORT`: ä¼ è¾“ç±»å‹
- `CLI_EXECUTOR_DEBUG`: å¯ç”¨è°ƒè¯•æ¨¡å¼

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

- âš ï¸ **å±é™©å‘½ä»¤**: è¿è¡Œç ´åæ€§å‘½ä»¤å¦‚`rm -rf`å‰è¯·åŠ¡å¿…ç¡®è®¤
- â±ï¸ **é•¿æ—¶é—´è¿è¡Œçš„å‘½ä»¤**: å¯¹äºé•¿æ—¶é—´è¿è¡Œçš„è¿›ç¨‹ä½¿ç”¨`nohup`ï¼Œå¹¶ç”¨`tail -f`ç›‘æ§
- ğŸ” **æƒé™**: æœåŠ¡å™¨ä»¥å¯åŠ¨ç”¨æˆ·çš„æƒé™è¿è¡Œ
- ğŸŒ **ç½‘ç»œè®¿é—®**: ä½¿ç”¨HTTPä¼ è¾“æ—¶ï¼Œè¯·ç¡®ä¿ç½‘ç»œå®‰å…¨
- ğŸ“ **æ–‡ä»¶è®¿é—®**: æœåŠ¡å™¨å¯ä»¥è®¿é—®ç”¨æˆ·æœ‰æƒé™çš„ä»»ä½•æ–‡ä»¶

## ğŸ—ï¸ å¼€å‘

### è®¾ç½®å¼€å‘ç¯å¢ƒ

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/CaptainJi/cli_executor.git
cd cli_executor

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate

# ä»¥å¼€å‘æ¨¡å¼å®‰è£…
pip install -e .

# å®‰è£…å¼€å‘ä¾èµ–
pip install fastmcp[dev]
```

### è¿è¡Œæµ‹è¯•

```bash
# ä»¥è°ƒè¯•æ¨¡å¼è¿è¡ŒæœåŠ¡å™¨
cli-executor-mcp --debug

# ä½¿ç”¨MCPå®¢æˆ·ç«¯æµ‹è¯•
python -c "
import asyncio
import fastmcp

async def test():
    client = fastmcp.Client('stdio', command='cli-executor-mcp')
    result = await client.call_tool('execute_command', {'command': 'echo Hello, World!'})
    print(result)

asyncio.run(test())
"
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - è¯¦è§[LICENSE](LICENSE)æ–‡ä»¶ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·éšæ—¶æäº¤Pull Requestã€‚

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°ä»»ä½•é—®é¢˜æˆ–æœ‰ç–‘é—®ï¼Œè¯·åœ¨GitHubä¸Š[æäº¤issue](https://github.com/CaptainJi/cli_executor/issues)ã€‚
