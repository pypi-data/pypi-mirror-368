seed_everything: 2434
trainer:
  logger: true
  enable_checkpointing: true
  gradient_clip_val: 0.5
  gradient_clip_algorithm: norm
  #accumulate_grad_batches: 10
  num_nodes: 1
  precision: 16-mixed
  devices: 1
  enable_progress_bar: true
  overfit_batches: 0.0
  max_steps: 500000
  limit_val_batches: 0.0
  log_every_n_steps: 1
  accelerator: gpu
  strategy: ddp
  sync_batchnorm: false
  enable_model_summary: true

model:
  class_path: DiffusionLM
  init_args:
    num_emb: 706
    output_dim: 128
    emb_dim: 768
    dim_feedforward: 1536
    nhead: 8
    num_layers: 8
    cfg_dropout: 0.1
    cfg_weighting: 2.0
    with_context: true
    dropout: 0.1
    layer_norm_eps: 1.0e-05
    norm_first: true

    # --- STFT / Mel settings for 44 100 Hz, 128-band BigVGAN ---
    #sample_rate: 44100         # BigVGAN sampling rate
    #n_fft: 2048                # FFT size for mel computation
    #win_length: 2048           # Window length
    #hop_length: 512            # Hop (frame) shift
    #f_min: 0.0                 # Lower mel cutoff
    #f_max: 22050.0             # Upper mel cutoff (sr/2)
    #n_mels: 128                # Number of mel channels (128-band)
    #normalize: true           # Scale mel to [0,1] or similar
    max_input_length: 1024
    max_output_length: 384     # = (segment_length / hop_length) + 1

    #pad: 0
    #power: 1.0
    #normalized: false
    #wkwargs: null
    #center: true
    #pad_mode: reflect
    #onesided: true

data:
  class_path: data.ConcatData
  init_args:
    batch_size: 32
    midi_output_size: null
    with_context: true

    # --- Data loader segment length at 44.1 kHz ---
    sample_rate: 44100
    segment_length: 196608    # e.g., ~5.12 s @ 44 100 Hz (81920 at 16 kHz â†’ 225792)

    musicnet_path: null
    maestro_path: /home/ubuntu/MAESTRO/maestro-v3.0.0/
    slakh_path: null
    guitarset_path: null
    urmp_wav_path: null
    urmp_midi_path: null

