"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{60324:function(e,t,r){r.d(t,{q:function(){return o}});var n=r(65023);async function o(e,t,r){performance.now();try{if(!e)return{error:"No user id"};let o=await fetch("".concat(n.ho,"/feedback/remove"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,conversation_id:t,query_id:r})});if(!o.ok)return console.error("Delete Feedback error! status: ".concat(o.status," ").concat(o.statusText)),{error:"Failed to delete feedback"};return await o.json()}catch(e){return console.error("Delete Feedback error:",e),{error:"Failed to delete feedback"}}finally{}}},8148:function(e,t,r){r.d(t,{W:function(){return u},CollectionProvider:function(){return d}});var n=r(57437),o=r(2265),a=r(65023);async function i(e){performance.now();try{if(!e)return[];let t=await fetch("".concat(a.ho,"/collections/").concat(e,"/list"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)return console.error("Get Collections error! status: ".concat(t.status," ").concat(t.statusText)),[];return(await t.json()).collections}catch(e){return console.error("Get Collections error:",e),[]}finally{}}var s=r(94078);async function c(e,t){performance.now();try{let r=await fetch("".concat(a.ho,"/collections/").concat(e,"/metadata/").concat(t),{method:"DELETE"});if(!r.ok)return console.error("Deleting collection metadata error! status: ".concat(r.status," ").concat(r.statusText)),{error:r.statusText};return{error:""}}catch(e){return console.error(e instanceof Error?e.message:String(e)),{error:"Error deleting collection metadata"}}finally{}}var l=r(38195);let u=(0,o.createContext)({collections:[],fetchCollections:()=>{},loadingCollections:!1,deleteCollection:()=>{},getRandomPrompts:()=>[]}),d=e=>{let{children:t}=e,{id:r,fetchCollectionFlag:a,initialized:d}=(0,o.useContext)(s.B),{showErrorToast:f,showSuccessToast:g}=(0,o.useContext)(l.u),[m,p]=(0,o.useState)([]),[h,y]=(0,o.useState)(!1),v=(0,o.useRef)(r),x=(0,o.useRef)(!1);(0,o.useEffect)(()=>{!x.current&&r&&d&&(x.current=!0,v.current=r,w())},[r,d]),(0,o.useEffect)(()=>{w()},[a]);let w=async()=>{if(!v.current)return;p([]),y(!0);let e=await i(v.current);p(e),y(!1),g("".concat(e.length," Collections Loaded"))},b=async e=>{if(!v.current)return;let t=await c(v.current,e);t.error?f("Failed to Delete Collection",t.error):(g("Collection Deleted",'Collection "'.concat(e,'" has been deleted successfully.')),w())};return(0,n.jsx)(u.Provider,{value:{collections:m,fetchCollections:w,loadingCollections:h,deleteCollection:b,getRandomPrompts:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return m.reduce((e,t)=>e.concat(t.prompts||[]),[]).sort(()=>.5-Math.random()).slice(0,e)}},children:t})}},55903:function(e,t,r){r.d(t,{L:function(){return x},ConversationProvider:function(){return w}});var n=r(57437),o=r(2265),a=r(93837);let i={id:(0,a.Z)(),name:"New Conversation",error:!1,tree_updates:[],timestamp:new Date,enabled_collections:{},tree:[],base_tree:null,current:"",queries:{},initialized:!1};var s=r(8148),c=r(94078),l=r(65023);async function u(e){performance.now();try{let t=await fetch("".concat(l.ho,"/db/").concat(e,"/saved_trees"),{method:"GET"});if(!t.ok)return console.error("Error fetching saved trees! status: ".concat(t.status," ").concat(t.statusText)),{trees:{},error:"Error fetching saved conversations"};return await t.json()}catch(e){return console.error(e instanceof Error?e.message:String(e)),{trees:{},error:"Error fetching saved conversations"}}finally{}}async function d(e,t){performance.now();try{let r=await fetch("".concat(l.ho,"/db/").concat(e,"/load_tree/").concat(t),{method:"GET"});if(!r.ok)return console.error("Error fetching saved conversation ".concat(t,"! status: ").concat(r.status," ").concat(r.statusText)),{rebuild:[],error:"Error fetching saved conversation ".concat(t)};return await r.json()}catch(e){return console.error(e instanceof Error?e.message:String(e)),{rebuild:[],error:"Error fetching saved conversation ".concat(t)}}finally{}}async function f(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];performance.now();try{let n=await fetch("".concat(l.ho,"/init/tree/").concat(e,"/").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({low_memory:r})});if(!n.ok)return console.error("Initializing tree failed! status: ".concat(n.status,", error: ").concat(n.statusText)),{conversation_id:t,error:"Failed to initialize tree",tree:null};let o=await n.json();if(null==o.tree)return{conversation_id:t,error:"Failed to initialize tree",tree:null};let a=e=>{e.choosen=!1,e.blocked=!1,e.options&&Object.values(e.options).forEach(e=>{a(e)})};return a(o.tree),o.tree.choosen=!0,o}catch(e){return console.error(e instanceof Error?e.message:String(e)),{conversation_id:t,error:"Failed to initialize tree",tree:null}}finally{}}async function g(e,t,r){performance.now();try{let n=await fetch("".concat(l.ho,"/util/follow_up_suggestions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,conversation_id:t,auth_key:r})});if(!n.ok)return console.error("Error fetching follow_up_suggestions! status: ".concat(n.status," ").concat(n.statusText)),{suggestions:[],error:"Error fetching follow_up_suggestions! status: ".concat(n.status," ").concat(n.statusText)};return await n.json()}catch(e){return console.error(e instanceof Error?e.message:String(e)),{suggestions:[],error:"Error fetching follow_up_suggestions!}"}}finally{}}async function m(e,t){performance.now();try{let r=await fetch("".concat(l.ho,"/db/").concat(e,"/delete_tree/").concat(t),{method:"DELETE",body:JSON.stringify({})});if(!r.ok)return console.error("Error deleting conversation ".concat(t,"! status: ").concat(r.status," ").concat(r.statusText)),{error:"Error deleting conversation ".concat(t)};return await r.json()}catch(e){return console.error(e instanceof Error?e.message:String(e)),{error:"Error deleting conversation ".concat(t)}}finally{}}async function p(e,t,r,n){performance.now();try{if(!e)return{error:"No user id"};let o=await fetch("".concat(l.ho,"/feedback/add"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,conversation_id:t,query_id:r,feedback:n})});if(!o.ok)return console.error("Add Feedback error! status: ".concat(o.status," ").concat(o.statusText)),{error:"Failed to add feedback"};return await o.json()}catch(e){return console.error("Add Feedback error:",e),{error:"Failed to add feedback"}}finally{}}var h=r(60324),y=r(19206),v=r(99376);let x=(0,o.createContext)({conversations:[],setConversations:()=>{},currentConversation:null,setCurrentConversation:()=>{},creatingNewConversation:!1,setCreatingNewConversation:()=>{},loadingConversations:!1,startNewConversation:()=>{},conversationPreviews:{},addConversation:()=>Promise.resolve(null),removeConversation:()=>{},selectConversation:()=>{},setConversationStatus:()=>{},setAllConversationStatuses:()=>{},addMessageToConversation:()=>{},initializeEnabledCollections:()=>{},handleConversationError:()=>{},toggleCollectionEnabled:()=>{},handleWebsocketMessage:()=>{},updateTree:()=>{},addTreeToConversation:()=>{},changeBaseToQuery:()=>{},addQueryToConversation:()=>{},finishQuery:()=>{},updateNERForQuery:()=>{},updateFeedbackForQuery:()=>{},triggerAllCollections:()=>{},handleAllConversationsError:()=>{},addSuggestionToConversation:()=>{},getAllEnabledCollections:()=>[],loadConversationsFromDB:()=>{}}),w=e=>{let{children:t}=e,{collections:r}=(0,o.useContext)(s.W),{id:l,enableRateLimitDialog:w,initialized:b}=(0,o.useContext)(c.B),{changePage:_}=(0,o.useContext)(y._),C=(0,v.useSearchParams)(),N=(0,v.usePathname)(),S=(0,o.useRef)(!1),[T,j]=(0,o.useState)([]),[k,E]=(0,o.useState)({}),[D,z]=(0,o.useState)(null),[q,O]=(0,o.useState)(!1),[P,R]=(0,o.useState)(!1),F=async(e,t)=>""===e?null:await f(e,t),A=async()=>{if(l){for(let[e,t]of(O(!0),Object.entries((await u(l||"")).trees)))t&&t.title&&t.last_update_time&&E(r=>({...r,[e]:t}));O(!1)}},I=async(e,t,n)=>{if(T.find(t=>t.id===e))z(e);else{let o=await d(l||"",e);R(!0);let a=await F(l||"",e);if(null!=a&&null!=r&&null!=a.tree){let i=o.rebuild.filter(e=>e&&"user_prompt"===e.type),s={};for(let t of i){let r=U(e,t.payload.prompt,t.query_id,T);s[t.query_id]=r}let c={enabled_collections:r.reduce((e,t)=>({...e,[t.name]:!0}),{}),id:e,name:t,tree_updates:[],tree:a.tree?[...i.map(e=>({...a.tree,name:e.payload.prompt})),a.tree]:[],base_tree:a.tree||null,queries:s,current:"",initialized:!0,error:!1,timestamp:n};for(let t of(i.forEach(t=>{J(e,t.payload.prompt)}),j(e=>[...e,c]),o.rebuild))H(t)}R(!1)}},L=async e=>{if(!(null==e?void 0:e.trim())||P)return null;let t=(0,a.Z)();R(!0);let[n]=await Promise.all([F(e,t)]);if(null===n||null===r||null===n.tree)return R(!1),null;let o={...i,id:t,timestamp:new Date,tree:[n.tree],base_tree:n.tree,enabled_collections:r.reduce((e,t)=>({...e,[t.name]:!0}),{})};return j([...T||[],o]),z(t),R(!1),E(e=>({...e,[t]:{title:o.name,last_update_time:new Date().toISOString()}})),_("chat",{conversation:t},!0),o},W=(e,t)=>{j(r=>r.map(r=>r.id===t?{...r,current:e}:r))},M=async(e,t)=>{j(r=>r.map(r=>r.id===t?{...r,name:e}:r)),E(r=>({...r,[t]:{title:e,last_update_time:new Date().toISOString()}}))},Z=async(e,t,r)=>{if(!r)return;let n=await g(r,e,"");G([{type:"suggestion",id:(0,a.Z)(),conversation_id:e,query_id:t,user_id:r,payload:{error:"",suggestions:n.suggestions}}],e,t)},G=(e,t,r)=>{j(n=>n.map(n=>n.id===t?n.queries[r]?{...n,initialized:!0,queries:{...n.queries,[r]:{...n.queries[r],messages:[...n.queries[r].messages,...e]}}}:(console.warn("Query ".concat(r," not found in conversation ").concat(t," ").concat(JSON.stringify(Object.keys(n.queries)))),n):n))},V=e=>{let t=e.payload,r=(e,n,o)=>{if(!e)return null;if(e.id!==o.node||e.blocked){if(!e.options||!(Object.keys(e.options).length>0))return e;{let o=Object.entries(e.options).reduce((e,o)=>{let[a,i]=o,s=r(i,n,t);return s&&(e[a]=s),e},{});return{...e,options:o,blocked:!0}}}{let t=Object.entries(e.options).reduce((e,t)=>{let[r,a]=t;return r===o.decision?e[r]={...a,choosen:!0,reasoning:o.reasoning,options:o.reset?n?{base:n}:{}:a.options||{}}:e[r]=a,e},{});return{...e,options:t,blocked:!0}}};j(n=>n.map(n=>{if(n.id===e.conversation_id){let e=r(n.tree[t.tree_index],n.base_tree,t),o=[...n.tree||[]];return e&&(o[t.tree_index]=e),{...n,tree:o,tree_updates:[...n.tree_updates,t]}}return n}))},J=(e,t)=>{var r,n;let o=(null===(n=T.find(t=>t.id===e))||void 0===n?void 0:null===(r=n.tree)||void 0===r?void 0:r.length)||1;j(r=>r.map(r=>{if(r.id===e){let e=[...r.tree];return e[o-1]&&(e[o-1]={...e[o-1],name:t}),{...r,tree:e}}return r}))},U=function(e,t,r,n){var o,i;let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c={type:"User",id:(0,a.Z)(),query_id:r,conversation_id:e,user_id:l||"",payload:{type:"text",metadata:{},code:{language:"",title:"",text:""},objects:[t]}};return{id:r,query:t,finished:!1,query_start:new Date,query_end:null,feedback:null,NER:null,index:(null===(i=n.find(t=>t.id===e))||void 0===i?void 0:null===(o=i.queries[r])||void 0===o?void 0:o.index)||0,messages:[c,...s]}},B=(e,t)=>{j(r=>r.map(r=>r.id===e&&r.queries[t]?{...r,queries:{...r.queries,[t]:{...r.queries[t],finished:!0,query_end:new Date}}}:r))},Q=(e,t,r)=>{j(n=>n.map(n=>n.id===e&&n.queries[t]?{...n,queries:{...n.queries,[t]:{...n.queries[t],NER:r}}}:n))},Y=async(e,t,r)=>{let n=T.find(t=>t.id===e);n&&!n.error&&(n.queries[t].feedback===r?(await (0,h.q)(l||"",e,t),j(r=>r.map(r=>r.id===e&&r.queries[t]?{...r,queries:{...r.queries,[t]:{...r.queries[t],feedback:null}}}:r))):(X(l||"",e,t,r),j(n=>n.map(n=>n.id===e&&n.queries[t]?{...n,queries:{...n.queries,[t]:{...n.queries[t],feedback:r}}}:n))))},X=async(e,t,r,n)=>await p(e,t,r,n),$=e=>{j(t=>t.map(t=>t.id===e?{...t,error:!0}:t))},H=e=>{if("status"===e.type)W(e.payload.text,e.conversation_id);else if("title"===e.type)M(e.payload.title,e.conversation_id);else if("ner"===e.type){let t=e.payload;Q(e.conversation_id,e.query_id,t)}else"completed"===e.type?(W("",e.conversation_id),B(e.conversation_id,e.query_id),Z(e.conversation_id,e.query_id,e.user_id)):"tree_update"===e.type?V(e):(["error","tree_timeout_error","rate_limit_error","authentication_error"].includes(e.type)&&($(e.conversation_id),B(e.conversation_id,e.query_id),W("",e.conversation_id)),"rate_limit_error"===e.type&&w(),G([e],e.conversation_id,e.query_id))},K=async()=>{z(null),_("chat",{},!0)};return(0,o.useEffect)(()=>{r&&j(e=>e.map(e=>e.enabled_collections&&0!==Object.keys(e.enabled_collections).length?e:{...e,enabled_collections:r.reduce((e,t)=>({...e,[t.name]:!0}),{})}))},[r]),(0,o.useEffect)(()=>{l&&!S.current&&b&&(S.current=!0,A())},[l,b]),(0,o.useEffect)(()=>{if(C.get("conversation")&&"/"===N&&S.current){let e=C.get("conversation");if(e!==D&&e){if(!k[e]){_("chat",{},!0);return}let t=T.find(t=>t.id===e),r=k[e].title;t||I(e,r,new Date(k[e].last_update_time)),z(e)}}},[C,N,k]),(0,n.jsx)(x.Provider,{value:{setConversations:j,setCurrentConversation:z,conversations:T,currentConversation:D,addConversation:L,removeConversation:e=>{D===e&&z(null),j([]),E({}),m(l||"",e),A()},selectConversation:e=>{_("chat",{conversation:e},!0)},setConversationStatus:W,setAllConversationStatuses:e=>{j(t=>t.map(t=>({...t,current:e})))},addMessageToConversation:G,initializeEnabledCollections:(e,t)=>{j(r=>r.map(r=>r.id===t?{...r,enabled_collections:e}:r))},toggleCollectionEnabled:(e,t)=>{j(r=>r.map(r=>{if(r.id===t){let t={...r.enabled_collections,[e]:!r.enabled_collections[e]};return{...r,enabled_collections:t}}return r}))},updateTree:V,addTreeToConversation:e=>{j(t=>t.map(t=>t.id===e&&t.base_tree?{...t,tree:[...t.tree,{...t.base_tree}]}:t))},startNewConversation:K,changeBaseToQuery:J,addQueryToConversation:(e,t,r)=>{j(n=>n.map(o=>{let a=U(e,t,r,n);return o.id===e?{...o,queries:{...o.queries,[r]:a}}:o}))},creatingNewConversation:P,conversationPreviews:k,loadingConversations:q,setCreatingNewConversation:R,finishQuery:B,updateNERForQuery:Q,updateFeedbackForQuery:Y,triggerAllCollections:(e,t)=>{j(r=>r.map(r=>{if(r.id===e){let e=Object.keys(r.enabled_collections).reduce((e,r)=>(e[r]=t,e),{});return{...r,enabled_collections:e}}return r}))},handleConversationError:$,handleAllConversationsError:()=>{j(e=>e.map(e=>({...e,error:!0})))},addSuggestionToConversation:Z,getAllEnabledCollections:()=>T.reduce((e,t)=>[...e,...Object.entries(t.enabled_collections||{}).filter(e=>{let[t,r]=e;return!0===r}).map(e=>{let[t,r]=e;return t})],[]),loadConversationsFromDB:A,handleWebsocketMessage:H},children:t})}},87374:function(e,t,r){r.d(t,{EvaluationProvider:function(){return c},F:function(){return s}});var n=r(57437),o=r(2265),a=r(99376),i=r(19206);let s=(0,o.createContext)({evalPage:null,changeEvalPage:()=>{},showFeedbackNotification:!0,disableFeedbackNotification:()=>{}}),c=e=>{let{children:t}=e,{changePage:r}=(0,o.useContext)(i._),c=(0,a.useSearchParams)(),l=(0,a.usePathname)(),[u,d]=(0,o.useState)(null),[f,g]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{"/eval"===l?d(null):"/eval/feedback"===l&&d("feedback")},[c,l]),(0,n.jsx)(s.Provider,{value:{evalPage:u,changeEvalPage:e=>{null===e?r("eval",{},!0):r("eval",{page:e},!0)},showFeedbackNotification:f,disableFeedbackNotification:()=>{g(!1)}},children:t})}},19206:function(e,t,r){r.d(t,{RouterProvider:function(){return c},_:function(){return s}});var n=r(57437),o=r(2265),a=r(99376),i=r(38195);let s=(0,o.createContext)({currentPage:"chat",changePage:()=>{}}),c=e=>{let{children:t}=e,{showSuccessToast:r}=(0,o.useContext)(i.u),[c,l]=(0,o.useState)("chat"),u=(0,a.useSearchParams)();return(0,o.useEffect)(()=>{let e=u.get("page")||"chat";l(["chat","data","collection","settings","eval","feedback","elysia","display"].includes(e)?e:"chat"),u.get("page")||l("chat")},[u]),(0,n.jsx)(s.Provider,{value:{currentPage:c,changePage:function(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)t={page:e,...r};else{let n={};u.forEach((e,t)=>{n[t]=e}),t={...n,page:e,...r}}let o="/?".concat(new URLSearchParams(t).toString());n?window.history.replaceState(null,"",o):window.history.pushState(null,"",o)}},children:t})}},94078:function(e,t,r){r.d(t,{B:function(){return y},SessionProvider:function(){return v}});var n=r(57437),o=r(2265),a=r(99376),i=r(65023);async function s(e){performance.now();try{let t=await fetch("".concat(i.ho,"/init/user/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok)return console.error("Initializing user failed! status: ".concat(t.status,", error: ").concat(t.statusText)),{error:"Failed to initialize user",user_exists:!1,config:null,frontend_config:null,correct_settings:{base_model:!1,base_provider:!1,complex_model:!1,complex_provider:!1,wcd_url:!1,wcd_api_key:!1}};return await t.json()}catch(e){return console.error(e instanceof Error?e.message:String(e)),{error:"Failed to initialize user",user_exists:!1,config:null,frontend_config:null,correct_settings:{base_model:!1,base_provider:!1,complex_model:!1,complex_provider:!1,wcd_url:!1,wcd_api_key:!1}}}finally{}}async function c(e,t,r){let n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];performance.now();try{if(!e||!t)return{error:"No user id or backend config",config:null,frontend_config:null,warnings:[]};let o=await fetch("".concat(i.ho,"/user/config/").concat(e,"/").concat(t.id),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,config:t,frontend_config:r,default:n})});if(!o.ok)return console.error("Saving Config error! status: ".concat(o.status," ").concat(o.statusText)),{error:"Saving Config error! status: ".concat(o.status," ").concat(o.statusText),config:null,frontend_config:null,warnings:[]};return await o.json()}catch(e){return console.error("Saving Config error:",e),{error:e,config:null,frontend_config:null,warnings:[]}}finally{}}async function l(e){performance.now();try{if(!e)return{error:"No user id",configs:[],warnings:[]};let t=await fetch("".concat(i.ho,"/user/config/").concat(e,"/list"),{method:"GET",headers:{"Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(!t.ok)return console.error("Get Config List error! status: ".concat(t.status," ").concat(t.statusText)),{error:"Get Config List error! status: ".concat(t.status," ").concat(t.statusText),configs:[],warnings:[]};return await t.json()}catch(e){return console.error("Get Config List error:",e),{error:e,configs:[],warnings:[]}}finally{}}async function u(e){performance.now();try{if(!e)return{error:"No user id",config:null,frontend_config:null,warnings:[]};let t=await fetch("".concat(i.ho,"/user/config/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)return console.error("Get Config error! status: ".concat(t.status," ").concat(t.statusText)),{error:"Get Config error! status: ".concat(t.status," ").concat(t.statusText),config:null,frontend_config:null,warnings:[]};return await t.json()}catch(e){return console.error("Get Config error:",e),{error:e,config:null,frontend_config:null,warnings:[]}}finally{}}async function d(e){performance.now();try{if(!e)return{error:"No user id",config:null,frontend_config:null,warnings:[]};let t=await fetch("".concat(i.ho,"/user/config/").concat(e,"/new"),{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok)return console.error("Creating new Config error! status: ".concat(t.status," ").concat(t.statusText)),{error:"Creating new Config error! status: ".concat(t.status," ").concat(t.statusText),config:null,frontend_config:null,warnings:[]};let r=await t.json();return{error:"",config:r.config,frontend_config:r.frontend_config,warnings:r.warnings}}catch(e){return console.error("Creating new Config error:",e),{error:e,config:null,frontend_config:null,warnings:[]}}finally{}}async function f(e,t){performance.now();try{if(!e||!t)return{error:"No user id or config id",config:null,frontend_config:null,warnings:[]};let r=await fetch("".concat(i.ho,"/user/config/").concat(e,"/").concat(t,"/load"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)return console.error("Loading Config error! status: ".concat(r.status," ").concat(r.statusText)),{error:"Loading Config error! status: ".concat(r.status," ").concat(r.statusText),config:null,frontend_config:null,warnings:[]};return await r.json()}catch(e){return console.error("Loading Config error:",e),{error:e,config:null,frontend_config:null,warnings:[]}}finally{}}async function g(e,t){performance.now();try{if(!e||!t)return{error:"No user id or config id"};let r=await fetch("".concat(i.ho,"/user/config/").concat(e,"/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!r.ok)return console.error("Deleting Config error! status: ".concat(r.status," ").concat(r.statusText)),{error:"Deleting Config error! status: ".concat(r.status," ").concat(r.statusText)};return await r.json()}catch(e){return console.error("Deleting Config error:",e),{error:e}}finally{}}var m=r(38195),p=r(84764);let h="device_id",y=(0,o.createContext)({mode:"home",id:"",showRateLimitDialog:!1,enableRateLimitDialog:()=>{},userConfig:null,fetchCurrentConfig:()=>{},configIDs:[],updateConfig:()=>{},handleCreateConfig:()=>{},getConfigIDs:()=>{},handleLoadConfig:()=>{},handleDeleteConfig:()=>{},loadingConfig:!1,loadingConfigs:!1,correctSettings:null,fetchCollectionFlag:!1,initialized:!1}),v=e=>{let{children:t}=e,{showErrorToast:r,showSuccessToast:i,showWarningToast:v}=(0,o.useContext)(m.u),[x,w]=(0,o.useState)("home"),b=(0,a.usePathname)(),[_,C]=(0,o.useState)(!1),N=function(){let[e,t]=(0,o.useState)(null);return(0,o.useEffect)(()=>{let e=localStorage.getItem(h);if(e){t(e);return}p.ZP.load().then(e=>e.get().then(e=>{localStorage.setItem(h,e.visitorId),t(e.visitorId)}))},[]),e}(),[S,T]=(0,o.useState)(null),[j,k]=(0,o.useState)([]),[E,D]=(0,o.useState)(null),[z,q]=(0,o.useState)(!1),[O,P]=(0,o.useState)(!1),R=(0,o.useRef)(!1),[F,A]=(0,o.useState)(!1),I=()=>{A(e=>!e)},L=async e=>{if(P(!0),k([]),!e)return;let t=await l(e);if(t.warnings.length>0){t.warnings.forEach(e=>{v("Configuration List with Warning",e)});return}if(t.error){r("Failed to Load Configuration List",t.error);return}k(t.configs.sort((e,t)=>new Date(t.last_update_time).getTime()-new Date(e.last_update_time).getTime())),P(!1)},W=async()=>{if(q(!0),!N)return;let e=await u(N);if(e.error){console.error(e.error),r("Failed to Load Configuration",e.error);return}T({backend:e.config,frontend:e.frontend_config}),q(!1)};(0,o.useEffect)(()=>{!R.current&&N&&M()},[N]),(0,o.useEffect)(()=>{"/"===b?w("home"):b.startsWith("/data")||b.startsWith("/collection")?w("data-explorer"):b.startsWith("/eval")?w("evaluation"):b.startsWith("/about/data")?w("about-data"):b.startsWith("/about")?w("about"):b.startsWith("/settings")&&w("settings")},[b]);let M=async()=>{if(!N)return;let e=await s(N);if(q(!0),e.error){console.error(e.error),r("Failed to Initialize User",e.error);return}L(N),T({backend:e.config,frontend:e.frontend_config}),D(e.correct_settings),q(!1),i("User Initialized"),R.current=!0},Z=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];q(!0);let n=await c(N,e.backend,e.frontend,t);n.error?(console.error(n.error),r("Failed to Save Configuration",n.error)):n.warnings.length>0?n.warnings.forEach(e=>{v("Configuration Saved with Warning",e)}):i("Configuration Saved","Your configuration has been saved successfully."),T({backend:n.config,frontend:n.frontend_config}),L(N||""),q(!1),I()},G=async(e,t)=>{if(!e||!t)return;q(!0);let n=await f(e,t);n.error?(console.error(n.error),r("Failed to Load Configuration",n.error)):n.warnings.length>0?n.warnings.forEach(e=>{v("Configuration Loaded with Warning",e)}):i("Configuration Loaded","Configuration loaded successfully."),T({backend:n.config,frontend:n.frontend_config}),q(!1)},V=async e=>{if(!e)return;q(!0);let t=await d(e);t.error?(console.error(t.error),r("Failed to Create Configuration",t.error)):i("Configuration Created","New configuration created successfully."),T({backend:t.config,frontend:t.frontend_config}),L(e),q(!1)},J=async(e,t,n)=>{if(!e||!t)return;q(!0);let o=await g(e,t);if(o.error)console.error(o.error),r("Failed to Delete Configuration",o.error);else if(i("Configuration Deleted","Configuration deleted successfully."),n){let r=j.find(e=>e.config_id!==t);r?G(e,r.config_id):T(null)}L(e),q(!1)};return(0,n.jsx)(y.Provider,{value:{mode:x,id:N,showRateLimitDialog:_,enableRateLimitDialog:()=>{C(!0)},userConfig:S,fetchCurrentConfig:W,configIDs:j,updateConfig:Z,handleCreateConfig:V,getConfigIDs:L,handleLoadConfig:G,handleDeleteConfig:J,loadingConfig:z,loadingConfigs:O,correctSettings:E,fetchCollectionFlag:F,initialized:R.current},children:t})}},10193:function(e,t,r){r.d(t,{J:function(){return c},SocketProvider:function(){return l}});var n=r(57437),o=r(2265),a=r(65023),i=r(55903),s=r(38195);let c=(0,o.createContext)({socketOnline:!1,sendQuery:async()=>!1}),l=e=>{let{children:t}=e,{setConversationStatus:r,setAllConversationStatuses:l,handleAllConversationsError:u,getAllEnabledCollections:d,handleWebsocketMessage:f}=(0,o.useContext)(i.L),{showErrorToast:g,showSuccessToast:m}=(0,o.useContext)(s.u),[p,h]=(0,o.useState)(!1),[y,v]=(0,o.useState)(),[x,w]=(0,o.useState)(!1),b=(0,o.useRef)(!1);(0,o.useEffect)(()=>{w(!0)},[]),(0,o.useEffect)(()=>{if(!b.current)return;let e=setInterval(()=>{p&&(null==y?void 0:y.readyState)!==WebSocket.CLOSED&&y||(console.log("Elysia not online, trying to reconnect..."),b.current=!1,w(e=>!e))},5e3);return()=>clearInterval(e)},[p,y]),(0,o.useEffect)(()=>{if(b.current)return;b.current=!0;let e=new WebSocket((0,a.Zq)()+"query");e.onopen=()=>{h(!0),m("Connected to Elysia")},e.onmessage=e=>{try{let t=JSON.parse(e.data);f(t)}catch(e){}},e.onerror=e=>{h(!1),v(void 0),l(""),u(),g("Connection to Elysia lost")},e.onclose=()=>{h(!1),l(""),v(void 0),u(),g("Connection to Elysia lost")},v(e)},[x]);let _=async function(e,t,n,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];r("Thinking...",n);let s=d();return null==y||y.send(JSON.stringify({user_id:e,query:t,query_id:o,conversation_id:n,collection_names:s,route:a,mimick:i})),Promise.resolve(!0)};return(0,n.jsx)(c.Provider,{value:{socketOnline:p,sendQuery:_},children:t})}},38195:function(e,t,r){r.d(t,{ToastProvider:function(){return d},u:function(){return u}});var n=r(57437),o=r(65023),a=r(2265),i=r(65898),s=r(8148),c=r(94078),l=r(89534);let u=(0,a.createContext)({analyzeCollection:()=>{},currentToasts:[],showErrorToast:()=>{},showSuccessToast:()=>{},showWarningToast:()=>{}}),d=e=>{let{children:t}=e,{toast:r}=(0,i.pm)(),{fetchCollections:d}=(0,a.useContext)(s.W),{id:f}=(0,a.useContext)(c.B),[g,m]=(0,a.useState)([]),[p,h]=(0,a.useState)(),[y,v]=(0,a.useState)(!1),x=(0,a.useRef)(!1),w=(0,a.useRef)(),b=e=>{let t=Math.floor((Date.now()-e)/1e3),r=Math.floor(t/60),n=t%60;return r>0?"".concat(r,"m ").concat(n,"s"):"".concat(n,"s")},_=(0,a.useCallback)((e,t)=>{r({title:e,description:t||"An error occurred. Please try again.",variant:"destructive",action:(0,n.jsx)(l.gD,{altText:"Close",children:"Close"})})},[r]),C=(0,a.useCallback)((e,t)=>{r({title:e,description:t,variant:"default"})},[r]),N=(0,a.useCallback)((e,t)=>{r({title:e,description:t||"Please review this warning.",variant:"warning",action:(0,n.jsx)(l.gD,{altText:"Dismiss",children:"Dismiss"})})},[r]),S=(0,a.useCallback)((e,t)=>{if(g.some(t=>t.collection_name===e.name)){setTimeout(()=>{r({title:"Already analyzing "+e.name+"...",description:"Please wait for it to finish before analyzing again."})},0);return}setTimeout(()=>{let n=Date.now(),o=r({title:"0% - Starting analysis of "+e.name+"...",description:"Connecting to server... (0s)",progress:0,duration:1e6});m(r=>{let a=[...r,{collection_name:e.name,toast:o,progress:0,startTime:n,currentMessage:"Connecting to server..."}];if(!p||!t)return _("Error analyzing "+e.name+"...","Connection to Elysia lost (Socket: "+p+") (ID: "+t+")"),m(t=>t.filter(t=>t.collection_name!==e.name)),r;{let r={user_id:t,collection_name:e.name};p.send(JSON.stringify(r))}return a})},0)},[g,p,r]),T=(e,t,r)=>{m(n=>{let o=n.find(t=>t.collection_name===e);if(!o)return n;let a=Number((100*t).toFixed(2)),i=b(o.startTime);return o.toast.update({id:o.toast.id,title:"".concat(Math.round(a),"% - Analyzing ").concat(o.collection_name,"..."),description:"".concat(r," (").concat(i,")"),progress:a}),n.map(t=>t.collection_name===e?{...t,progress:a,currentMessage:r}:t)})},j=(e,t)=>{m(r=>{let o=r.find(t=>t.collection_name===e);if(!o)return r;let a=b(o.startTime);return t?o.toast.update({id:o.toast.id,title:"100% - Error analyzing ".concat(o.collection_name,"..."),variant:"destructive",description:"".concat(t," (Total time: ").concat(a,")"),progress:100,action:(0,n.jsx)(l.gD,{altText:"Close",onClick:()=>o.toast.dismiss(),children:"Close"})}):o.toast.update({id:o.toast.id,title:"100% - Done!",description:"Collection analyzed successfully (Total time: ".concat(a,")"),progress:100,action:(0,n.jsx)(l.gD,{altText:"Close",onClick:()=>o.toast.dismiss(),children:"Close"})}),r.filter(t=>t.collection_name!==e)}),d()};return(0,a.useEffect)(()=>{v(!0)},[f]),(0,a.useEffect)(()=>{if(x.current)return;x.current=!0;let e=new WebSocket((0,o.Zq)()+"process_collection");h(e),e.onopen=()=>{},e.onerror=e=>{h(void 0)},e.onclose=()=>{h(void 0)},e.onmessage=e=>{let t=JSON.parse(e.data);if(!t.type||"heartbeat"!==t.type){if(!t.type||!t.collection_name){console.warn("Received invalid message from processing socket: "+e.data),"error"===t.type&&(_("Error analyzing "+t.collection_name+"...",t.error||"Unknown error"),j(t.collection_name,t.error||""));return}t.error?j(t.collection_name,t.error||""):"update"===t.type?T(t.collection_name,t.progress,t.message):"completed"===t.type?j(t.collection_name,""):j(t.collection_name,t.error||"")}}},[y]),(0,a.useEffect)(()=>{if(!x.current)return;let e=setInterval(()=>{(null==p?void 0:p.readyState)!==WebSocket.CLOSED&&p||(x.current=!1,console.log("Processing Socket not online, reconnecting..."),v(e=>!e))},5e3);return()=>clearInterval(e)},[p]),(0,a.useEffect)(()=>(g.length>0?w.current=setInterval(()=>{m(e=>{let t=!1,r=e.map(e=>{if(e.progress<100){let r=b(e.startTime);e.toast.update({id:e.toast.id,title:"".concat(Math.round(e.progress),"% - Analyzing ").concat(e.collection_name,"..."),description:"".concat(e.currentMessage," (").concat(r,")"),progress:e.progress}),t=!0}return e});return t?r:e})},1e3):w.current&&clearInterval(w.current),()=>{w.current&&clearInterval(w.current)}),[g.length]),(0,n.jsx)(u.Provider,{value:{analyzeCollection:S,currentToasts:g,showErrorToast:_,showSuccessToast:C,showWarningToast:N},children:t})}},65023:function(e,t,r){r.d(t,{Zq:function(){return a},h5:function(){return o},ho:function(){return n}});let n="",o="/static/",a=()=>{{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/")}}},62869:function(e,t,r){r.d(t,{z:function(){return l}});var n=r(57437),o=r(2265),a=r(37053),i=r(90535),s=r(94508);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 active:scale-95 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-background_alt text-secondary hover:bg-foreground hover:text-primary",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",accept:"bg-accent text-primary shadow-sm hover:bg-accent/90",outline:"border border-input shadow-sm hover:bg-foreground_alt hover:text-primary",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-foreground_alt hover:text-primary border border-transparent",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-8 w-8"}},defaultVariants:{variant:"default",size:"default"}}),l=o.forwardRef((e,t)=>{let{className:r,variant:o,size:i,asChild:l=!1,...u}=e,d=l?a.g7:"button";return(0,n.jsx)(d,{className:(0,s.cn)(c({variant:o,size:i,className:r})),ref:t,...u})});l.displayName="Button"},19060:function(e,t,r){r.d(t,{X:function(){return c}});var n=r(57437),o=r(2265),a=r(45236),i=r(59559),s=r(94508);let c=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.fC,{ref:t,className:(0,s.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-secondary focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-foreground_alt  data-[state=checked]:text-primary",r),...o,children:(0,n.jsx)(a.z$,{className:(0,s.cn)("flex items-center justify-center text-current"),children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})})})});c.displayName=a.fC.displayName},26110:function(e,t,r){r.d(t,{$N:function(){return m},Be:function(){return p},Vq:function(){return c},cN:function(){return g},cZ:function(){return d},fK:function(){return f}});var n=r(57437),o=r(2265),a=r(18638),i=r(44986),s=r(94508);let c=a.fC;a.xz;let l=a.h_;a.x8;let u=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.aV,{ref:t,className:(0,s.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...o})});u.displayName=a.aV.displayName;let d=o.forwardRef((e,t)=>{let{className:r,children:o,...c}=e;return(0,n.jsxs)(l,{children:[(0,n.jsx)(u,{}),(0,n.jsxs)(a.VY,{ref:t,className:(0,s.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-2xl translate-x-[-50%] translate-y-[-50%] gap-4 border border-foreground bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...c,children:[o,(0,n.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(i.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});d.displayName=a.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let g=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,s.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};g.displayName="DialogFooter";let m=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.Dx,{ref:t,className:(0,s.cn)("text-lg font-semibold leading-none tracking-tight",r),...o})});m.displayName=a.Dx.displayName;let p=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.dk,{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...o})});p.displayName=a.dk.displayName},84190:function(e,t,r){r.d(t,{$F:function(){return d},AW:function(){return g},Ju:function(){return y},VD:function(){return v},Xi:function(){return m},_x:function(){return f},bO:function(){return p},h_:function(){return u},qB:function(){return h}});var n=r(57437),o=r(2265),a=r(40964),i=r(76848),s=r(59559),c=r(78084),l=r(94508);let u=a.fC,d=a.xz;a.ZA,a.Uv,a.Tr;let f=a.Ee;o.forwardRef((e,t)=>{let{className:r,inset:o,children:s,...c}=e;return(0,n.jsxs)(a.fF,{ref:t,className:(0,l.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-foreground data-[state=open]:bg-foreground_alt [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",o&&"pl-8",r),...c,children:[s,(0,n.jsx)(i.Z,{className:"ml-auto"})]})}).displayName=a.fF.displayName,o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.tu,{ref:t,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...o})}).displayName=a.tu.displayName;let g=o.forwardRef((e,t)=>{let{className:r,sideOffset:o=4,...i}=e;return(0,n.jsx)(a.Uv,{children:(0,n.jsx)(a.VY,{ref:t,sideOffset:o,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border border-foreground_alt bg-background_alt p-1 text-primary","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...i})})});g.displayName=a.VY.displayName;let m=o.forwardRef((e,t)=>{let{className:r,inset:o,...i}=e;return(0,n.jsx)(a.ck,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-foreground_alt focus:text-primary data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",o&&"pl-8",r),...i})});m.displayName=a.ck.displayName;let p=o.forwardRef((e,t)=>{let{className:r,children:o,checked:i,...c}=e;return(0,n.jsxs)(a.oC,{ref:t,className:(0,l.cn)("relative flex cursor-pointer select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-background_alt focus:text-primary data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:i,...c,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(a.wU,{children:(0,n.jsx)(s.Z,{className:"h-4 w-4"})})}),o]})});p.displayName=a.oC.displayName;let h=o.forwardRef((e,t)=>{let{className:r,children:o,...i}=e;return(0,n.jsxs)(a.Rk,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-foreground_alt focus:text-primary data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(a.wU,{children:(0,n.jsx)(c.Z,{className:"h-2 w-2 fill-current"})})}),o]})});h.displayName=a.Rk.displayName;let y=o.forwardRef((e,t)=>{let{className:r,inset:o,...i}=e;return(0,n.jsx)(a.__,{ref:t,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",o&&"pl-8",r),...i})});y.displayName=a.__.displayName;let v=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.Z0,{ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-secondary",r),...o})});v.displayName=a.Z0.displayName},95186:function(e,t,r){r.d(t,{I:function(){return i}});var n=r(57437),o=r(2265),a=r(94508);let i=o.forwardRef((e,t)=>{let{className:r,type:o,...i}=e;return(0,n.jsx)("input",{type:o,className:(0,a.cn)("flex h-9 w-full rounded-md border border-foreground_alt bg-transparent px-3 py-1 text-sm md:text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},6512:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(57437),o=r(2265),a=r(55156),i=r(94508);let s=o.forwardRef((e,t)=>{let{className:r,orientation:o="horizontal",decorative:s=!0,...c}=e;return(0,n.jsx)(a.f,{ref:t,decorative:s,orientation:o,className:(0,i.cn)("shrink-0 bg-foreground_alt","horizontal"===o?"h-[1px] w-full":"h-full w-[1px]",r),...c})});s.displayName=a.f.displayName},93022:function(e,t,r){r.d(t,{O:function(){return a}});var n=r(57437),o=r(94508);function a(e){let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,o.cn)("animate-pulse rounded-md bg-primary/10",t),...r})}},89534:function(e,t,r){r.d(t,{FN:function(){return f},Mi:function(){return p},VW:function(){return l},_i:function(){return u},gD:function(){return g},lj:function(){return h},sA:function(){return m}});var n=r(57437),o=r(2265),a=r(79856),i=r(90535),s=r(44986),c=r(94508);let l=a.zt,u=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.l_,{ref:t,className:(0,c.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 gap-1 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...o})});u.displayName=a.l_.displayName;let d=(0,i.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border border-secondary bg-background_alt text-primary",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground",warning:"warning group border-warning bg-warning text-primary"}},defaultVariants:{variant:"default"}}),f=o.forwardRef((e,t)=>{let{className:r,variant:o,progress:i,...s}=e;return(0,n.jsxs)(a.fC,{ref:t,className:(0,c.cn)(d({variant:o}),"relative",r),...s,children:[void 0!==i&&(0,n.jsx)("div",{className:"absolute left-0 bottom-0 right-0 h-1 w-full bg-secondary",children:(0,n.jsx)("div",{className:"h-full bg-primary transition-all duration-150 ease-linear",style:{width:"".concat(Math.max(0,Math.min(100,i)),"%")}})}),s.children]})});f.displayName=a.fC.displayName;let g=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.aU,{ref:t,className:(0,c.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...o})});g.displayName=a.aU.displayName;let m=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.x8,{ref:t,className:(0,c.cn)("absolute right-1 top-1 rounded-md p-1 text-primary opacity-0 transition-opacity hover:text-secondary focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...o,children:(0,n.jsx)(s.Z,{className:"h-4 w-4"})})});m.displayName=a.x8.displayName;let p=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.Dx,{ref:t,className:(0,c.cn)("text-sm font-semibold [&+div]:text-xs",r),...o})});p.displayName=a.Dx.displayName;let h=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.dk,{ref:t,className:(0,c.cn)("text-sm opacity-90",r),...o})});h.displayName=a.dk.displayName},81103:function(e,t,r){r.d(t,{_v:function(){return u},aJ:function(){return l},pn:function(){return s},u:function(){return c}});var n=r(57437),o=r(2265),a=r(56561),i=r(94508);let s=a.zt,c=a.fC,l=a.xz,u=o.forwardRef((e,t)=>{let{className:r,sideOffset:o=4,...s}=e;return(0,n.jsx)(a.h_,{children:(0,n.jsx)(a.VY,{ref:t,sideOffset:o,className:(0,i.cn)("z-40 overflow-hidden rounded-md bg-background_alt px-3 py-1.5 text-xs text-primary animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...s})})});u.displayName=a.VY.displayName},65898:function(e,t,r){r.d(t,{pm:function(){return f}});var n=r(2265);let o=0,a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},s=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1e3)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],l={toasts:[]};function u(e){l=s(l,e),c.forEach(e=>{e(l)})}function d(e){let{...t}=e,r=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>u({type:"DISMISS_TOAST",toastId:r});return u({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(l);return n.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},94508:function(e,t,r){r.d(t,{cn:function(){return a}});var n=r(61994),o=r(53335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.m6)((0,n.W)(t))}}}]);