# https://numpy.org/devdocs/dev/depending_on_numpy.html#numpy-2-abi-handling
[build-system]
requires = ["setuptools>=45", "numpy>=2.0.0rc1", "pkgconfig", "wheel", "cibuildwheel"]
build-backend = "setuptools.build_meta"

[project]
name = "python-pgplot"
version = "1.6.1"
description = "Python bindings for PGPLOT"
authors = [
    {name = "Marjolein Verkouter", email = "verkouter@jive.eu"},
    #{name = "Nick Patavalis", email = "npat@efault.net"},
]
readme = "README.md"
requires-python = ">=3.9"
dependencies = [
    "numpy>=1.19.0",
#    "pkgconfig"
]

[external]
build-requires = [
    "virtual:compiler/c",
    "pkg:generic/pkg-config",
    "pkg:generic/giza",
]
host-requires = [
      "pkg:generic/giza",
]
dependencies = [
      "pkg:generic/giza",
]

[project.urls]
Homepage = "https://github.com/haavee/ppgplot"

[tool.setuptools]
packages = ["ppgplot"]
package-dir = {"ppgplot" = "src"}

[tool.cibuildwheel]
# Test that giza is available
before-build = "pkg-config --exists giza && echo 'giza found' || echo 'giza NOT found'"
# Not on Windhoos, nor on musllinux (wtf)
# No numpy2 on Py3.8 
skip = ["*-win*", "*musllinux*", "cp38-*" ]
