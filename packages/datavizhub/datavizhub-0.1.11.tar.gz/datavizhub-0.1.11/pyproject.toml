[tool.poetry]
name = "datavizhub"
version = "0.1.11"
description = "A tool to ingest data from various sources and formats, create imagery or video based on that data, and send the results to various locations for dissemination."
authors = ["Eric Hackathorn <eric.j.hackathorn@noaa.gov>"]
include = [
    "src/datavizhub/assets/**",
]
license = "MIT"
readme = "README.md"
packages = [
    { include = "datavizhub", from = "src" }
]

[tool.poetry.urls]
Homepage = "https://github.com/NOAA-GSL/datavizhub"
Documentation = "https://github.com/NOAA-GSL/datavizhub/blob/main/README.md"
Source = "https://github.com/NOAA-GSL/datavizhub"
Tracker = "https://github.com/NOAA-GSL/datavizhub/issues"

[tool.poetry.dependencies]
python = ">=3.9,<4.0"
python-dotenv = "^0.19.1"
# Optional feature dependencies (installed via extras)
boto3 = { version = "^1.17", optional = true }
PyVimeo = { version = "^1.0", optional = true }
requests = { version = "^2.25", optional = true }
pygrib = { version = "^2.1.5", optional = true }
scipy = { version = "^1.12.0", optional = true }
siphon = { version = "^0.9", optional = true }
cartopy = { version = "^0.22.0", optional = true }
matplotlib = { version = "^3.8.3", optional = true }
netcdf4 = { version = "^1.6.5", optional = true }
xarray = { version = "^2024.3.0", optional = true }
ffmpeg-python = { version = "^0.2.0", optional = true }

[tool.poetry.extras]
# Install only what you need, e.g.:
#   pip install datavizhub[datatransfer]
#   pip install datavizhub[processing]
#   pip install datavizhub[visualization]
# Or everything:
#   pip install datavizhub[all]
datatransfer = [
    "boto3",
    "PyVimeo",
    "requests",
]
processing = [
    "pygrib",
    "scipy",
    "siphon",
    "ffmpeg-python",
]
visualization = [
    "cartopy",
    "matplotlib",
]
all = [
    "boto3",
    "PyVimeo",
    "requests",
    "pygrib",
    "scipy",
    "siphon",
    "ffmpeg-python",
    "cartopy",
    "matplotlib",
    "netcdf4",
    "xarray",
]

[tool.poetry.group.dev.dependencies]
coverage = "^7.4.0"
py = ">=1.11.0"
pytest = "^6.2"
pytest-cov = "^4.1"
ruff = "^0.1.6"

[tool.poetry.plugins."poetry.plugin"]
"dynamic-versioning" = "poetry_dynamic_versioning"

[tool.poetry-dynamic-versioning]
enable = true

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

[tool.pytest.ini_options]
testpaths = ["tests"]
addopts = "-s -v --durations=0"
cache_dir = ".cache/pytest_cache"

[tool.coverage.run]
branch = true
source = ["src"]
command_line = "-m pytest"

[tool.coverage.report]
show_missing = true

[tool.coverage.xml]
output = "coverage.xml"
