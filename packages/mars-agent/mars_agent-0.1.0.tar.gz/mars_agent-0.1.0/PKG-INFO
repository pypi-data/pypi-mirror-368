Metadata-Version: 2.4
Name: mars-agent
Version: 0.1.0
Summary: Mars Agent - åŸºäºä¸»å‰¯ä»£ç†æ¶æ„çš„AIä»£ç†ç³»ç»Ÿï¼Œæ”¯æŒMCPåè®®å’Œæµå¼å¤„ç†
Home-page: https://github.com/Shy2593666979/Mars-Agent
Author: MingGuang Tian
Author-email: MingGuang Tian <2593666979@qq.com>
License: Apache-2.0
Project-URL: Homepage, https://github.com/Shy2593666979/Mars-Agent
Project-URL: Repository, https://github.com/Shy2593666979/Mars-Agent
Project-URL: Documentation, https://github.com/Shy2593666979/Mars-Agent#readme
Project-URL: Bug Tracker, https://github.com/Shy2593666979/Mars-Agent/issues
Keywords: ai,agent,mcp,streaming,llm,chatbot
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
Requires-Python: >=3.11
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: mcp>=1.6.0
Requires-Dist: openai>=1.12.0
Requires-Dist: langgraph>=0.3.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: black>=23.0; extra == "dev"
Requires-Dist: flake8>=6.0; extra == "dev"
Requires-Dist: mypy>=1.0; extra == "dev"
Dynamic: author
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-python

# Mars Agent æ¶æ„è®¾è®¡

> GitHubä»“åº“ï¼šhttps://github.com/Shy2593666979/Mars-Agent

## ğŸ¯ æ¶æ„æ¦‚è¿°

Mars Agent æä¾›ä¸¤ç§ä¸åŒçš„Agentæ‰§è¡Œç­–ç•¥ï¼Œæ»¡è¶³ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼š

1. **MarsAgent**: å¹¶å‘æ‰§è¡Œç­–ç•¥ - å°†æ¯ä¸ªMCPæœåŠ¡å™¨å’Œæ’ä»¶é›†åˆå½“ä½œç‹¬ç«‹Agentå¹¶å‘æ‰§è¡Œ
2. **MarsPlanAgent**: è§„åˆ’æ‰§è¡Œç­–ç•¥ - å…ˆåˆ¶å®šæ‰§è¡Œè®¡åˆ’ï¼Œå†æŒ‰è®¡åˆ’é€æ­¥è°ƒç”¨å·¥å…·

### ğŸ“‹ MarsAgent æ¶æ„ (å¹¶å‘æ‰§è¡Œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ  MarsAgent (ä¸»æ§åˆ¶å™¨)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢ å¹¶å‘è°ƒåº¦å¤šä¸ªAgent                                      â”‚ â”‚
â”‚  â”‚ â€¢ æ±‡æ€»æ‰€æœ‰Agentç»“æœ                                      â”‚ â”‚
â”‚  â”‚ â€¢ ç»Ÿä¸€æ¨¡å‹è°ƒç”¨å’Œå›å¤                                      â”‚ â”‚
â”‚  â”‚ â€¢ æµå¼äº‹ä»¶ç®¡ç†                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â¬†                                  â”‚
â”‚                    ğŸ“¡ äº‹ä»¶æ±‡èš (Event Aggregation)             â”‚
â”‚    â¬†              â¬†              â¬†              â¬†            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚ğŸ”§ Pluginâ”‚  â”‚ğŸ› ï¸ MCP-A â”‚  â”‚ğŸ› ï¸ MCP-B â”‚  â”‚ğŸ› ï¸ MCP-C â”‚           â”‚
â”‚ â”‚ Agent   â”‚  â”‚ Agent   â”‚  â”‚ Agent   â”‚  â”‚ Agent   â”‚           â”‚
â”‚ â”‚â€¢ æ’ä»¶é›†åˆâ”‚  â”‚â€¢ åœ°å›¾æœåŠ¡â”‚  â”‚â€¢ åŠå…¬æœåŠ¡â”‚  â”‚â€¢ å…¶ä»–...â”‚           â”‚
â”‚ â”‚â€¢ å·¥å…·æ‰§è¡Œâ”‚  â”‚â€¢ å·¥å…·æ‰§è¡Œâ”‚  â”‚â€¢ å·¥å…·æ‰§è¡Œâ”‚  â”‚â€¢ å·¥å…·æ‰§è¡Œâ”‚           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚        å¹¶å‘æ‰§è¡Œ (Concurrent Execution)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“‹ MarsPlanAgent æ¶æ„ (è§„åˆ’æ‰§è¡Œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ğŸ§  MarsPlanAgent (è§„åˆ’æ§åˆ¶å™¨)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Step 1: ğŸ” æ”¶é›†æ‰€æœ‰å¯ç”¨å·¥å…·                              â”‚ â”‚
â”‚  â”‚ Step 2: ğŸ¤– LLMåˆ¶å®šæ‰§è¡Œè®¡åˆ’                               â”‚ â”‚
â”‚  â”‚ Step 3: âš¡ æŒ‰è®¡åˆ’é€æ­¥æ‰§è¡Œ                                â”‚ â”‚
â”‚  â”‚ Step 4: ğŸ“Š æ±‡æ€»ç»“æœå¹¶å›å¤                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  ğŸ“‹ Planning Phase (è®¡åˆ’é˜¶æ®µ)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ› ï¸ æ‰€æœ‰MCPå·¥å…· + ğŸ”§ æ’ä»¶å·¥å…· â†’ ğŸ¤– LLM â†’ ğŸ“ æ‰§è¡Œè®¡åˆ’     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â¬‡                                  â”‚
â”‚  âš¡ Execution Phase (æ‰§è¡Œé˜¶æ®µ)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“ Plan Step 1 â†’ ğŸ”§ Tool Call â†’ âœ… Result              â”‚ â”‚
â”‚  â”‚ ğŸ“ Plan Step 2 â†’ ğŸ”§ Tool Call â†’ âœ… Result              â”‚ â”‚
â”‚  â”‚ ğŸ“ Plan Step N â†’ ğŸ”§ Tool Call â†’ âœ… Result              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                     Sequential Execution                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—ï¸ æ ¸å¿ƒå·®å¼‚å¯¹æ¯”

| ç‰¹æ€§ | MarsAgent (å¹¶å‘æ‰§è¡Œ) | MarsPlanAgent (è§„åˆ’æ‰§è¡Œ) |
|------|---------------------|------------------------|
| **æ‰§è¡Œç­–ç•¥** | å¹¶å‘æ‰§è¡Œæ‰€æœ‰Agent | å…ˆè§„åˆ’åæŒ‰æ­¥éª¤æ‰§è¡Œ |
| **Agentåˆ’åˆ†** | æ¯ä¸ªMCPæœåŠ¡å™¨ + æ’ä»¶é›†åˆ | ç»Ÿä¸€å·¥å…·æ±  |
| **é€‚ç”¨åœºæ™¯** | ç‹¬ç«‹ä»»åŠ¡ã€å¿«é€Ÿå“åº” | å¤æ‚æµç¨‹ã€ä¾èµ–ä»»åŠ¡ |
| **æ‰§è¡Œæ•ˆç‡** | é«˜å¹¶å‘ï¼Œé€Ÿåº¦å¿« | æœ‰åºæ‰§è¡Œï¼Œé€»è¾‘æ¸…æ™° |
| **å·¥å…·åè°ƒ** | æ— åè°ƒï¼Œç‹¬ç«‹æ‰§è¡Œ | æ™ºèƒ½åè°ƒï¼Œæ­¥éª¤ä¼˜åŒ– |

## ğŸ”„ æ‰§è¡Œæµç¨‹å¯¹æ¯”

### MarsAgent æ‰§è¡Œæµç¨‹

```mermaid
sequenceDiagram
    participant User
    participant MarsAgent as ğŸ  MarsAgent
    participant PluginAgent as ğŸ”§ Plugin Agent
    participant MCPAgent1 as ğŸ› ï¸ MCP Agent A
    participant MCPAgent2 as ğŸ› ï¸ MCP Agent B
    participant Model as ğŸ¤– LLM Model

    User->>MarsAgent: å‘é€æ¶ˆæ¯
    
    par å¹¶å‘æ‰§è¡Œæ‰€æœ‰Agent
        MarsAgent->>PluginAgent: æ‰§è¡Œæ’ä»¶å·¥å…·
        PluginAgent-->>MarsAgent: è¿”å›ç»“æœA
    and
        MarsAgent->>MCPAgent1: æ‰§è¡ŒMCPå·¥å…·
        MCPAgent1-->>MarsAgent: è¿”å›ç»“æœB
    and
        MarsAgent->>MCPAgent2: æ‰§è¡ŒMCPå·¥å…·  
        MCPAgent2-->>MarsAgent: è¿”å›ç»“æœC
    end
    
    MarsAgent->>MarsAgent: æ±‡æ€»æ‰€æœ‰Agentç»“æœ
    MarsAgent->>Model: è°ƒç”¨æ¨¡å‹ç”Ÿæˆå›å¤
    Model-->>User: è¿”å›æœ€ç»ˆå›å¤
```

### MarsPlanAgent æ‰§è¡Œæµç¨‹

```mermaid
sequenceDiagram
    participant User
    participant PlanAgent as ğŸ§  MarsPlanAgent
    participant ToolPool as ğŸ› ï¸ å·¥å…·æ± 
    participant Model as ğŸ¤– LLM Model

    User->>PlanAgent: å‘é€æ¶ˆæ¯
    
    PlanAgent->>ToolPool: æ”¶é›†æ‰€æœ‰å¯ç”¨å·¥å…·
    ToolPool-->>PlanAgent: è¿”å›å·¥å…·åˆ—è¡¨
    
    PlanAgent->>Model: åˆ¶å®šæ‰§è¡Œè®¡åˆ’
    Model-->>PlanAgent: è¿”å›æ‰§è¡Œè®¡åˆ’
    
    loop æŒ‰è®¡åˆ’é€æ­¥æ‰§è¡Œ
        PlanAgent->>ToolPool: æ‰§è¡Œè®¡åˆ’æ­¥éª¤N
        ToolPool-->>PlanAgent: è¿”å›æ­¥éª¤ç»“æœ
    end
    
    PlanAgent->>PlanAgent: æ±‡æ€»æ‰€æœ‰æ­¥éª¤ç»“æœ
    PlanAgent->>Model: è°ƒç”¨æ¨¡å‹ç”Ÿæˆå›å¤
    Model-->>User: è¿”å›æœ€ç»ˆå›å¤
```

## ğŸ¨ è®¾è®¡ä¼˜åŠ¿

### MarsAgent ä¼˜åŠ¿
- **é«˜å¹¶å‘**: å¤šAgentå¹¶å‘æ‰§è¡Œï¼Œå“åº”é€Ÿåº¦å¿«
- **èµ„æºéš”ç¦»**: æ¯ä¸ªMCPæœåŠ¡ç‹¬ç«‹Agentï¼Œæ•…éšœéš”ç¦»
- **æ‰©å±•æ€§å¼º**: æ–°å¢MCPæœåŠ¡å³æ–°å¢Agent
- **é€‚åˆç‹¬ç«‹ä»»åŠ¡**: æ— ä¾èµ–å…³ç³»çš„å·¥å…·è°ƒç”¨

### MarsPlanAgent ä¼˜åŠ¿
- **æ™ºèƒ½è§„åˆ’**: LLMåˆ¶å®šæœ€ä¼˜æ‰§è¡Œè®¡åˆ’
- **æ­¥éª¤åè°ƒ**: å¤„ç†æœ‰ä¾èµ–å…³ç³»çš„å¤æ‚ä»»åŠ¡
- **é€»è¾‘æ¸…æ™°**: æŒ‰è®¡åˆ’æœ‰åºæ‰§è¡Œï¼Œä¾¿äºè°ƒè¯•
- **é€‚åˆå¤æ‚æµç¨‹**: å¤šæ­¥éª¤ã€æœ‰ä¾èµ–çš„ä»»åŠ¡åœºæ™¯

## ğŸ“¦ å®‰è£…

```bash
pip install git+https://github.com/Shy2593666979/Mars-Agent

# æˆ–è€…

pip install mars-agent
```

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### MarsAgent (å¹¶å‘æ‰§è¡Œ) ç¤ºä¾‹

```python
import asyncio
from datetime import datetime

from mars_agent import MarsAgent
from mars_agent.schema import MarsModelConfig, MCPSSEConfig, MarsResponseChunk

# å®šä¹‰è‡ªå®šä¹‰å‡½æ•°
def get_current_time():
    """è·å–å½“å‰æ—¶é—´"""
    return datetime.now().strftime('%Y-%m-%d %H:%M:%S')

def test_weather(location: str):
    """æŸ¥è¯¢æŒ‡å®šåœ°ç‚¹çš„å¤©æ°”ä¿¡æ¯"""
    return f"The weather in {location} is sunny, 25Â°C"

async def main():
    # åˆå§‹åŒ–MarsAgent
    agent = MarsAgent(
        # å·¥å…·è°ƒç”¨æ¨¡å‹é…ç½®ï¼ˆå¯é€‰é…ç½®ï¼Œè‹¥ä¸æŒ‡å®štool callæ¨¡å‹ï¼Œé»˜è®¤å·¥å…·è°ƒç”¨å’Œå¯¹è¯æ¨¡å‹ä½¿ç”¨åŒä¸€ä¸ªï¼‰
        tool_call_model_config=MarsModelConfig(
            model="qwen-plus",
            api_key="your-api-key",
            base_url="https://dashscope.aliyuncs.com/compatible-mode/v1"
        ),
        # å¯¹è¯æ¨¡å‹é…ç½®
        model_config=MarsModelConfig(
            model="qwen-plus", 
            api_key="your-api-key",
            base_url="https://dashscope.aliyuncs.com/compatible-mode/v1"
        ),
        # è‡ªå®šä¹‰å‡½æ•°ï¼ˆå°†ä½œä¸ºä¸€ä¸ªPlugin Agentï¼‰
        functions=[get_current_time, test_weather],
        # MCPæœåŠ¡å™¨é…ç½®ï¼ˆæ¯ä¸ªMCPæœåŠ¡å™¨å°†ä½œä¸ºä¸€ä¸ªç‹¬ç«‹Agentï¼‰
        mcp_configs=[
            MCPSSEConfig(
                server_name="åœ°å›¾æœåŠ¡",
                url="https://your-mcp-server.com/sse",
            ),
            MCPSSEConfig(
                server_name="åŠå…¬æœåŠ¡",
                url="https://your-office-server.com/sse",
                personal_config={
                    "app_id": "your-app-id", 
                    "app_secret": "your-app-secret"
                }
            )
        ]
    )

    # å¹¶å‘æ‰§è¡Œ - æ‰€æœ‰AgentåŒæ—¶å·¥ä½œ
    print("=== å¹¶å‘æ‰§è¡Œç¤ºä¾‹ ===")
    async for chunk in agent.astream("ä½ å¥½ï¼Œè¯·é—®åŒ—äº¬çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿç°åœ¨å‡ ç‚¹äº†ï¼Ÿ"):
        if isinstance(chunk, MarsResponseChunk):
            print(chunk.data.content, end="")

if __name__ == "__main__":
    asyncio.run(main())
```

### MarsPlanAgent (è§„åˆ’æ‰§è¡Œ) ç¤ºä¾‹

```python
from mars_agent import MarsPlanAgent
from mars_agent.schema import MarsModelConfig, MCPSSEConfig, MarsProgressChunk

async def plan_agent_example():
    # åˆå§‹åŒ–MarsPlanAgent
    plan_agent = MarsPlanAgent(
        tool_call_model_config=MarsModelConfig(
            model="qwen-plus",
            api_key="your-api-key", 
            base_url="https://dashscope.aliyuncs.com/compatible-mode/v1"
        ),
        model_config=MarsModelConfig(
            model="qwen-plus",
            api_key="your-api-key",
            base_url="https://dashscope.aliyuncs.com/compatible-mode/v1"
        ),
        mcp_configs=[
            MCPSSEConfig(
                server_name="åœ°å›¾æœåŠ¡",
                url="https://your-mcp-server.com/sse"
            ),
            MCPSSEConfig(
                server_name="ç½‘é¡µæŠ“å–",
                url="https://your-fetch-server.com/sse"
            )
        ]
    )

    # è§„åˆ’æ‰§è¡Œ - å…ˆåˆ¶å®šè®¡åˆ’ï¼Œå†é€æ­¥æ‰§è¡Œ
    print("=== è§„åˆ’æ‰§è¡Œç¤ºä¾‹ ===")
    async for chunk in plan_agent.astream("å¸®æˆ‘æŸ¥è¯¢åŒ—äº¬åˆ°ä¸Šæµ·çš„è·¯çº¿ï¼Œç„¶åæŠ“å–ç›¸å…³çš„äº¤é€šä¿¡æ¯ç½‘é¡µ"):
        if isinstance(chunk, MarsProgressChunk):
            print(f"æ‰§è¡Œè¿›åº¦: {chunk}")
        elif isinstance(chunk, MarsResponseChunk):
            print(chunk.data.accumulated)
```

### MCPé…ç½®é€‰é¡¹

```python
from mars_agent.schema import MCPSSEConfig, MCPStdioConfig

# SSEæ–¹å¼è¿æ¥MCPæœåŠ¡å™¨
sse_config = MCPSSEConfig(
    server_name="æœåŠ¡å™¨åç§°",
    url="https://your-server.com/sse",
    personal_config={
        "api_key": "your-api-key",
        "other_param": "value"
    }
)

# Stdioæ–¹å¼è¿æ¥MCPæœåŠ¡å™¨
stdio_config = MCPStdioConfig(
    server_name="æœ¬åœ°æœåŠ¡",
    command="python",
    args=["-m", "your_mcp_server"],
    env={"API_KEY": "your-api-key"}
)
```

### å“åº”ç±»å‹å¤„ç†

```python
from mars_agent import MarsResponseChunk
from mars_agent.schema import MarsProgressChunk

async for chunk in agent.astream("ä½ çš„é—®é¢˜"):
    # è¿›åº¦äº‹ä»¶ (MarsPlanAgentç‰¹æœ‰)
    if isinstance(chunk, MarsProgressChunk):
        print(f"æ‰§è¡Œè¿›åº¦: {chunk.message}")
    
    # å“åº”å†…å®¹
    elif isinstance(chunk, MarsResponseChunk):
        print(f"å›å¤: {chunk.data.content}")
    
    # å…¶ä»–äº‹ä»¶ç±»å‹
    else:
        print(f"äº‹ä»¶: {chunk}")
```

### é€‰æ‹©ä½¿ç”¨å»ºè®®

#### ä½¿ç”¨ MarsAgent çš„åœºæ™¯
- éœ€è¦å¿«é€Ÿå¹¶å‘æ‰§è¡Œå¤šä¸ªç‹¬ç«‹å·¥å…·
- å·¥å…·ä¹‹é—´æ— ä¾èµ–å…³ç³»
- è¿½æ±‚å“åº”é€Ÿåº¦
- ç®€å•çš„å¤šå·¥å…·è°ƒç”¨åœºæ™¯

#### ä½¿ç”¨ MarsPlanAgent çš„åœºæ™¯
- éœ€è¦å¤„ç†å¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡
- å·¥å…·è°ƒç”¨ä¹‹é—´æœ‰ä¾èµ–å…³ç³»
- éœ€è¦æ™ºèƒ½è§„åˆ’æ‰§è¡Œé¡ºåº
- è¿½æ±‚æ‰§è¡Œé€»è¾‘çš„æ¸…æ™°æ€§

### äº‹ä»¶ç±»å‹

ä¸»Agentä¼šäº§ç”Ÿä»¥ä¸‹ç±»å‹çš„äº‹ä»¶ï¼š

- **`MarsProgressChunk`**: è¿›åº¦äº‹ä»¶ï¼Œæ˜¾ç¤ºå„ä¸ªé˜¶æ®µçš„æ‰§è¡ŒçŠ¶æ€ï¼ˆMarsPlanAgentç‰¹æœ‰ï¼‰
- **`MarsResponseChunk`**: å“åº”å—äº‹ä»¶ï¼Œæµå¼æ¨¡å‹å›å¤å†…å®¹
- **`heartbeat`**: å¿ƒè·³äº‹ä»¶ï¼Œä¿æŒè¿æ¥æ´»è·ƒ  
- **`error`**: é”™è¯¯äº‹ä»¶ï¼Œå·¥å…·æ‰§è¡Œæˆ–æ¨¡å‹è°ƒç”¨é”™è¯¯

### é…ç½®é€‰é¡¹

#### æ¨¡å‹é…ç½®

```python
from mars_agent.schema import MarsModelConfig

# åŸºæœ¬é…ç½®
model_config = MarsModelConfig(
    model="qwen-plus",
    api_key="your-api-key",
    base_url="https://dashscope.aliyuncs.com/compatible-mode/v1"
)

# é«˜çº§é…ç½®
advanced_config = MarsModelConfig(
    model="gpt-4",
    api_key="your-openai-key", 
    base_url="https://api.openai.com/v1",
    temperature=0.7
)
```

#### ä¸»Agenté«˜çº§é…ç½®

```python
agent = MarsAgent(
    model_config=model_config,
    tool_call_model_config=tool_call_config,  # å¯ä½¿ç”¨ä¸åŒçš„æ¨¡å‹è¿›è¡Œå·¥å…·è°ƒç”¨
    functions=[your_functions],
    mcp_configs=[mcp_configs],
    mcp_as_agent=False,  # æ˜¯å¦å°†MCPä½œä¸ºAgentå•ç‹¬ä½¿ç”¨ï¼Œè¿™é‡Œé»˜è®¤ä¸ºTrue
)
```

---

**è®¾è®¡ç†å¿µ**: é€šè¿‡å¹¶å‘æ‰§è¡Œå’Œè§„åˆ’æ‰§è¡Œä¸¤ç§ç­–ç•¥ï¼Œä¸ºä¸åŒå¤æ‚åº¦çš„ä»»åŠ¡æä¾›æœ€ä¼˜çš„è§£å†³æ–¹æ¡ˆã€‚

