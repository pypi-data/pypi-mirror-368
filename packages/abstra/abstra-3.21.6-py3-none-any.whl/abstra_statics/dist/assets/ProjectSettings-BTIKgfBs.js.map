{"version":3,"file":"ProjectSettings-BTIKgfBs.js","sources":["../../node_modules/@ant-design/icons-vue/es/icons/CopyOutlined.js","../../src/apps/console/components/workspace/SubdomainEditor.vue","../../src/apps/console/views/ProjectSettings.vue"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport CopyOutlinedSvg from \"@ant-design/icons-svg/es/asn/CopyOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar CopyOutlined = function CopyOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": CopyOutlinedSvg\n  }), null);\n};\n\nCopyOutlined.displayName = 'CopyOutlined';\nCopyOutlined.inheritAttrs = false;\nexport default CopyOutlined;","<template>\n  <AntSpace direction=\"vertical\">\n    <AntTypographyTitle :level=\"2\">Subdomain</AntTypographyTitle>\n    <AntTypographyParagraph>\n      Every project in Abstra Cloud comes with a default subdomain, which will appear on all shared\n      project links.\n    </AntTypographyParagraph>\n    <AntRow>\n      <AntTypographyText>Forms available at:</AntTypographyText>\n      <AntTypographyText code>\n        <span>{{ project.getUrl('[PATH]') }}</span>\n      </AntTypographyText>\n    </AntRow>\n    <AntRow>\n      <AntTypographyText>Hooks available at:</AntTypographyText>\n      <AntTypographyText code>\n        <span>{{ project.getUrl('_hooks/[PATH]') }}</span>\n      </AntTypographyText>\n    </AntRow>\n    <AntForm>\n      <AntFormItem :validate-status=\"validateStatus\" :help=\"validateFeedback\" has-feedback>\n        <AntFlex gap=\"middle\">\n          <AntInput\n            :value=\"project.subdomain\"\n            type=\"text\"\n            :loading=\"subdomainFeedbackStatus === 'loading'\"\n            @blur=\"slugit\"\n            @change=\"emits('change-subdomain', $event.target.value as string)\"\n          >\n            <template #addonBefore>https://</template>\n            <template #addonAfter>.abstra.app/</template>\n          </AntInput>\n          <AntTooltip placement=\"top\" title=\"Copy\">\n            <CopyOutlined color=\"red\" @click=\"addPathToClipboard\" />\n          </AntTooltip>\n        </AntFlex>\n      </AntFormItem>\n      <SaveButton :model=\"project\" :disabled=\"saveDisabled\" @error=\"saveError\" />\n    </AntForm>\n  </AntSpace>\n</template>\n<script setup lang=\"ts\">\nimport SaveButton from '@/components/SaveButton.vue';\nimport { CopyOutlined } from '@ant-design/icons-vue';\nimport {\n  Flex as AntFlex,\n  Form as AntForm,\n  FormItem as AntFormItem,\n  Input as AntInput,\n  Row as AntRow,\n  Space as AntSpace,\n  Tooltip as AntTooltip,\n  TypographyParagraph as AntTypographyParagraph,\n  TypographyText as AntTypographyText,\n  TypographyTitle as AntTypographyTitle,\n} from 'ant-design-vue';\nimport { debounce } from 'lodash';\nimport { computed, ref } from 'vue';\nimport { ProjectModel } from '../../apis/cloud';\n\nconst props = defineProps<{\n  project: ProjectModel;\n}>();\n\nconst emits = defineEmits<{\n  (e: 'change-subdomain', subdomain: string): void;\n}>();\n\ntype SubdomainFeedbackStatus = 'loading' | 'available' | 'unavailable' | 'invalid' | undefined;\nconst subdomainFeedbackStatus = ref<SubdomainFeedbackStatus>(undefined);\n\nconst checkSubdomainRequest = debounce(async () => {\n  try {\n    const { available } = await props.project.checkSubdomain();\n    subdomainFeedbackStatus.value = available ? 'available' : 'unavailable';\n  } catch (e) {\n    subdomainFeedbackStatus.value = undefined;\n  }\n}, 500);\n\nfunction checkSubdomain() {\n  if (!props.project.hasChangesDeep('subdomain')) {\n    subdomainFeedbackStatus.value = undefined;\n    return;\n  }\n  if (props.project.subdomain) {\n    subdomainFeedbackStatus.value = 'loading';\n    checkSubdomainRequest();\n  } else {\n    subdomainFeedbackStatus.value = 'invalid';\n  }\n}\n\nconst saveDisabled = computed(() => {\n  return (\n    subdomainFeedbackStatus.value !== 'available' || !props.project.hasChangesDeep('subdomain')\n  );\n});\n\nconst addPathToClipboard = async () => {\n  await navigator.clipboard.writeText(props.project.getUrl());\n};\n\nconst validateStatus = computed(() => {\n  switch (subdomainFeedbackStatus.value) {\n    case 'invalid':\n      return 'error';\n    case 'loading':\n      return 'validating';\n    case 'available':\n      return 'success';\n    case 'unavailable':\n      return 'error';\n    default:\n      return undefined;\n  }\n});\nconst validateFeedback = computed(() => {\n  switch (subdomainFeedbackStatus.value) {\n    case 'loading':\n      return 'Checking availability...';\n    case 'available':\n      return 'Available';\n    case 'unavailable':\n      return 'Unavailable';\n    case 'invalid':\n      return 'Invalid subdomain';\n    default:\n      return undefined;\n  }\n});\n\nconst slugit = () => {\n  const formattedSubdomain = ProjectModel.formatSubdomain(props.project.subdomain);\n  emits('change-subdomain', formattedSubdomain);\n\n  checkSubdomain();\n};\n\nfunction saveError() {\n  props.project.resetChanges();\n  subdomainFeedbackStatus.value = undefined;\n}\n</script>\n","<template>\n  <div v-if=\"project\" class=\"project-settings\">\n    <AntTypographyTitle>Project Settings</AntTypographyTitle>\n    <SubdomainEditor :project=\"project\" @change-subdomain=\"updateProjectSubdomain\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { asyncComputed } from '@/utils/asyncComputed';\nimport { ProjectModel } from '../apis/cloud';\nimport { useRoute } from 'vue-router';\nimport SubdomainEditor from '../components/workspace/SubdomainEditor.vue';\nimport { TypographyTitle as AntTypographyTitle } from 'ant-design-vue';\n\nconst route = useRoute();\nconst projectId = route.params.projectId;\nconst { result: project } = asyncComputed(() => ProjectModel.get(projectId as string));\n\nconst updateProjectSubdomain = (subdomain: string) => {\n  project.value!.subdomain = subdomain;\n};\n</script>\n"],"names":["_objectSpread","target","i","source","ownKeys","sym","key","_defineProperty","obj","value","CopyOutlined","props","context","p","_createVNode","AntdIcon","CopyOutlinedSvg","subdomainFeedbackStatus","ref","checkSubdomainRequest","debounce","available","checkSubdomain","saveDisabled","computed","addPathToClipboard","validateStatus","validateFeedback","slugit","formattedSubdomain","ProjectModel","emits","saveError","projectId","useRoute","project","asyncComputed","updateProjectSubdomain","subdomain"],"mappings":"g5BAEA,SAASA,EAAcC,EAAQ,CAAE,QAASC,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAAE,IAAIC,EAAS,UAAUD,CAAC,GAAK,KAAO,OAAO,UAAUA,CAAC,CAAC,EAAI,CAAA,EAAQE,EAAU,OAAO,KAAKD,CAAM,EAAO,OAAO,OAAO,uBAA0B,aAAcC,EAAUA,EAAQ,OAAO,OAAO,sBAAsBD,CAAM,EAAE,OAAO,SAAUE,EAAK,CAAE,OAAO,OAAO,yBAAyBF,EAAQE,CAAG,EAAE,UAAY,CAAC,CAAC,GAAKD,EAAQ,QAAQ,SAAUE,EAAK,CAAEC,EAAgBN,EAAQK,EAAKH,EAAOG,CAAG,CAAC,CAAG,CAAC,CAAG,CAAE,OAAOL,CAAQ,CAExe,SAASM,EAAgBC,EAAKF,EAAKG,EAAO,CAAE,OAAIH,KAAOE,EAAO,OAAO,eAAeA,EAAKF,EAAK,CAAE,MAAOG,EAAO,WAAY,GAAM,aAAc,GAAM,SAAU,EAAI,CAAE,EAAYD,EAAIF,CAAG,EAAIG,EAAgBD,CAAK,CAOhN,IAAIE,EAAe,SAAsBC,EAAOC,EAAS,CACvD,IAAIC,EAAIb,EAAc,CAAA,EAAIW,EAAOC,EAAQ,KAAK,EAE9C,OAAOE,EAAaC,EAAUf,EAAc,CAAA,EAAIa,EAAG,CACjD,KAAQG,CACZ,CAAG,EAAG,IAAI,CACV,EAEAN,EAAa,YAAc,eAC3BA,EAAa,aAAe,iHCiDtBO,EAA0BC,EAA6B,MAAS,EAEhEC,EAAwBC,EAAAA,SAAS,SAAY,CACjD,GAAI,CACF,KAAM,CAAE,UAAAC,CAAA,EAAc,MAAMV,EAAM,QAAQ,eAAA,EAC1CM,EAAwB,MAAQI,EAAY,YAAc,aAC5D,MAAY,CACVJ,EAAwB,MAAQ,MAClC,CACF,EAAG,GAAG,EAEN,SAASK,GAAiB,CACxB,GAAI,CAACX,EAAM,QAAQ,eAAe,WAAW,EAAG,CAC9CM,EAAwB,MAAQ,OAChC,MACF,CACIN,EAAM,QAAQ,WAChBM,EAAwB,MAAQ,UAChCE,EAAA,GAEAF,EAAwB,MAAQ,SAEpC,CAEA,MAAMM,EAAeC,EAAS,IAE1BP,EAAwB,QAAU,aAAe,CAACN,EAAM,QAAQ,eAAe,WAAW,CAE7F,EAEKc,EAAqB,SAAY,CACrC,MAAM,UAAU,UAAU,UAAUd,EAAM,QAAQ,QAAQ,CAC5D,EAEMe,EAAiBF,EAAS,IAAM,CACpC,OAAQP,EAAwB,MAAA,CAC9B,IAAK,UACH,MAAO,QACT,IAAK,UACH,MAAO,aACT,IAAK,YACH,MAAO,UACT,IAAK,cACH,MAAO,QACT,QACE,MAAO,CAEb,CAAC,EACKU,EAAmBH,EAAS,IAAM,CACtC,OAAQP,EAAwB,MAAA,CAC9B,IAAK,UACH,MAAO,2BACT,IAAK,YACH,MAAO,YACT,IAAK,cACH,MAAO,cACT,IAAK,UACH,MAAO,oBACT,QACE,MAAO,CAEb,CAAC,EAEKW,EAAS,IAAM,CACnB,MAAMC,EAAqBC,EAAa,gBAAgBnB,EAAM,QAAQ,SAAS,EAC/EoB,EAAM,mBAAoBF,CAAkB,EAE5CP,EAAA,CACF,EAEA,SAASU,GAAY,CACnBrB,EAAM,QAAQ,aAAA,EACdM,EAAwB,MAAQ,MAClC,80CC/HA,MAAMgB,EADQC,EAAA,EACU,OAAO,UACzB,CAAE,OAAQC,GAAYC,EAAc,IAAMN,EAAa,IAAIG,CAAmB,CAAC,EAE/EI,EAA0BC,GAAsB,CACpDH,EAAQ,MAAO,UAAYG,CAC7B","x_google_ignoreList":[0]}