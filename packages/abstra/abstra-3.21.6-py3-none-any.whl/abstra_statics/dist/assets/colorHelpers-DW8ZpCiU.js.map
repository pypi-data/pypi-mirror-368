{"version":3,"file":"colorHelpers-DW8ZpCiU.js","sources":["../../src/widgets-lib/common/components/PlayerConfigProvider/colorHelpers.ts"],"sourcesContent":["function darken(color: string, amount: number) {\n  const { r, g, b, usePound } = hexToRgb(color);\n\n  return rgbToHex(\n    applyGradient(r, -amount),\n    applyGradient(g, -amount),\n    applyGradient(b, -amount),\n    usePound,\n  );\n}\n\nfunction applyGradient(colorValue: number, amount: number) {\n  const result = (colorValue * (100 + amount * 100)) / 100;\n  if (result > 255) return 255;\n  else if (result < 0) return 0;\n  return Math.round(result);\n}\n\nexport function isColor(strColor: string) {\n  return strColor.startsWith('#') || strColor.match(/^(rgb|hsl)/);\n}\nexport const lighten = (color: string, amount: number) => revert(darken(revert(color), amount));\n\nexport const alternate = (color: string) =>\n  isColorDark(color) ? lighten(color, 0.1) : darken(color, 0.1);\n\nexport function isColorDark(hex: string): boolean {\n  const { r, g, b } = hexToRgb(hex);\n  return r * 0.299 + g * 0.587 + b * 0.114 < 186;\n}\n\nfunction hexToRgb(color: string) {\n  let usePound = false;\n  if (color[0] == '#') {\n    color = color.slice(1);\n    usePound = true;\n  }\n\n  const num = parseInt(color, 16);\n\n  return {\n    r: (num >> 16) & 0xff,\n    g: (num >> 8) & 0xff,\n    b: num & 0xff,\n    usePound,\n  };\n}\n\nfunction revert(color: string) {\n  const { r, g, b, usePound } = hexToRgb(color);\n  return rgbToHex(255 - r, 255 - g, 255 - b, usePound);\n}\n\nconst rgbToHex = (r: number, g: number, b: number, usePound = true) =>\n  (usePound ? '#' : '') + (b | (g << 8) | (r << 16)).toString(16).padStart(6, '0');\n\nexport function isImageDark(imgSrc: string): Promise<boolean> {\n  return new Promise((resolve, reject) => {\n    const img = document.createElement('img');\n    img.src = imgSrc;\n    img.crossOrigin = 'Anonymous';\n    img.style.display = 'none';\n    document.body.appendChild(img);\n\n    let colorSum = 0;\n\n    img.onerror = (e) => reject(new Error(`Failed to load image: ${e}`));\n\n    img.onload = () => {\n      const { width, height } = img;\n      const canvas = document.createElement('canvas');\n\n      canvas.width = width;\n      canvas.height = height;\n\n      const ctx = canvas.getContext('2d');\n      if (!ctx) return resolve(false);\n\n      ctx.drawImage(img, 0, 0);\n\n      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      const { data } = imageData;\n      let r, g, b, avg;\n\n      for (let x = 0, len = data.length; x < len; x += 4) {\n        r = data[x];\n        g = data[x + 1];\n        b = data[x + 2];\n\n        avg = Math.floor((r + g + b) / 3);\n        colorSum += avg;\n      }\n\n      const brightness = Math.floor(colorSum / (width * height));\n      document.body.removeChild(img);\n\n      resolve(brightness <= 127);\n    };\n  });\n}\n"],"names":["darken","color","amount","r","g","b","usePound","hexToRgb","rgbToHex","applyGradient","colorValue","result","isColor","strColor","lighten","revert","alternate","isColorDark","hex","num","isImageDark","imgSrc","resolve","reject","img","colorSum","e","width","height","canvas","ctx","imageData","data","avg","x","len","brightness"],"mappings":"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"}