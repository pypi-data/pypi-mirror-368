{"version":3,"file":"Live-BAJo6KKl.js","sources":["../../node_modules/@phosphor-icons/vue/dist/icons/PhRocketLaunch.vue.mjs","../../src/apps/console/components/buildInspector/ExecutionsShort.vue","../../src/apps/console/apis/cloud/disabledStages.ts","../../src/apps/console/views/Live.vue"],"sourcesContent":["import { defineComponent as m, inject as c, computed as s, openBlock as t, createElementBlock as e, mergeProps as p, renderSlot as M, createCommentVNode as g, createElementVNode as o } from \"vue\";\nconst A = [\"width\", \"height\", \"fill\", \"transform\"], v = { key: 0 }, C = /* @__PURE__ */ o(\"path\", { d: \"M227.85,46.89a20,20,0,0,0-18.74-18.74c-13.13-.77-46.65.42-74.48,28.24L131,60H74.36a19.83,19.83,0,0,0-14.14,5.86L25.87,100.19a20,20,0,0,0,11.35,33.95l37.14,5.18,42.32,42.32,5.19,37.18A19.88,19.88,0,0,0,135.34,235a20.13,20.13,0,0,0,6.37,1,19.9,19.9,0,0,0,14.1-5.87l34.34-34.35A19.85,19.85,0,0,0,196,181.64V125l3.6-3.59C227.43,93.54,228.62,60,227.85,46.89ZM76,84h31L75.75,115.28l-27.23-3.8ZM151.6,73.37A72.27,72.27,0,0,1,204,52a72.17,72.17,0,0,1-21.38,52.41L128,159,97,128ZM172,180l-27.49,27.49-3.8-27.23L172,149Zm-72,22c-8.71,11.85-26.19,26-60,26a12,12,0,0,1-12-12c0-33.84,14.12-51.32,26-60A12,12,0,1,1,68.18,175.3C62.3,179.63,55.51,187.8,53,203c15.21-2.51,23.37-9.3,27.7-15.18A12,12,0,1,1,100,202Z\" }, null, -1), y = [\n  C\n], f = { key: 1 }, w = /* @__PURE__ */ o(\"path\", {\n  d: \"M184,120v61.65a8,8,0,0,1-2.34,5.65l-34.35,34.35a8,8,0,0,1-13.57-4.53L128,176ZM136,72H74.35a8,8,0,0,0-5.65,2.34L34.35,108.69a8,8,0,0,0,4.53,13.57L80,128ZM40,216c37.65,0,50.69-19.69,54.56-28.18L68.18,161.44C59.69,165.31,40,178.35,40,216Z\",\n  opacity: \"0.2\"\n}, null, -1), k = /* @__PURE__ */ o(\"path\", { d: \"M223.85,47.12a16,16,0,0,0-15-15c-12.58-.75-44.73.4-71.41,27.07L132.69,64H74.36A15.91,15.91,0,0,0,63,68.68L28.7,103a16,16,0,0,0,9.07,27.16l38.47,5.37,44.21,44.21,5.37,38.49a15.94,15.94,0,0,0,10.78,12.92,16.11,16.11,0,0,0,5.1.83A15.91,15.91,0,0,0,153,227.3L187.32,193A15.91,15.91,0,0,0,192,181.64V123.31l4.77-4.77C223.45,91.86,224.6,59.71,223.85,47.12ZM74.36,80h42.33L77.16,119.52,40,114.34Zm74.41-9.45a76.65,76.65,0,0,1,59.11-22.47,76.46,76.46,0,0,1-22.42,59.16L128,164.68,91.32,128ZM176,181.64,141.67,216l-5.19-37.17L176,139.31Zm-74.16,9.5C97.34,201,82.29,224,40,224a8,8,0,0,1-8-8c0-42.29,23-57.34,32.86-61.85a8,8,0,0,1,6.64,14.56c-6.43,2.93-20.62,12.36-23.12,38.91,26.55-2.5,36-16.69,38.91-23.12a8,8,0,1,1,14.56,6.64Z\" }, null, -1), V = [\n  w,\n  k\n], x = { key: 2 }, H = /* @__PURE__ */ o(\"path\", { d: \"M101.85,191.14C97.34,201,82.29,224,40,224a8,8,0,0,1-8-8c0-42.29,23-57.34,32.86-61.85a8,8,0,0,1,6.64,14.56c-6.43,2.93-20.62,12.36-23.12,38.91,26.55-2.5,36-16.69,38.91-23.12a8,8,0,1,1,14.56,6.64Zm122-144a16,16,0,0,0-15-15c-12.58-.75-44.73.4-71.4,27.07h0L88,108.7A8,8,0,0,1,76.67,97.39l26.56-26.57A4,4,0,0,0,100.41,64H74.35A15.9,15.9,0,0,0,63,68.68L28.7,103a16,16,0,0,0,9.07,27.16l38.47,5.37,44.21,44.21,5.37,38.49a15.94,15.94,0,0,0,10.78,12.92,16.11,16.11,0,0,0,5.1.83A15.91,15.91,0,0,0,153,227.3L187.32,193A16,16,0,0,0,192,181.65V155.59a4,4,0,0,0-6.83-2.82l-26.57,26.56a8,8,0,0,1-11.71-.42,8.2,8.2,0,0,1,.6-11.1l49.27-49.27h0C223.45,91.86,224.6,59.71,223.85,47.12Z\" }, null, -1), S = [\n  H\n], z = { key: 3 }, B = /* @__PURE__ */ o(\"path\", { d: \"M221.86,47.24a14,14,0,0,0-13.11-13.1c-12.31-.73-43.77.39-69.88,26.5L133.52,66H74.35a13.9,13.9,0,0,0-9.89,4.1L30.11,104.44a14,14,0,0,0,7.94,23.76l39.13,5.46,45.16,45.16L127.8,218a14,14,0,0,0,23.76,7.92l34.35-34.35a13.91,13.91,0,0,0,4.1-9.89V122.48l5.35-5.35h0C221.46,91,222.59,59.56,221.86,47.24ZM38.11,115a2,2,0,0,1,.49-2L72.94,78.58A2,2,0,0,1,74.35,78h47.17L77.87,121.64l-38.14-5.32A1.93,1.93,0,0,1,38.11,115ZM178,181.65a2,2,0,0,1-.59,1.41L143.08,217.4a2,2,0,0,1-3.4-1.11l-5.32-38.16L178,134.48Zm8.87-73h0L128,167.51,88.49,128l58.87-58.88a78.47,78.47,0,0,1,60.69-23A2,2,0,0,1,209.88,48,78.47,78.47,0,0,1,186.88,108.64ZM100,190.31C95.68,199.84,81.13,222,40,222a6,6,0,0,1-6-6c0-41.13,22.16-55.68,31.69-60a6,6,0,1,1,5,10.92c-7,3.17-22.53,13.52-24.47,42.91,29.39-1.94,39.74-17.52,42.91-24.47a6,6,0,1,1,10.92,5Z\" }, null, -1), N = [\n  B\n], b = { key: 4 }, E = /* @__PURE__ */ o(\"path\", { d: \"M223.85,47.12a16,16,0,0,0-15-15c-12.58-.75-44.73.4-71.41,27.07L132.69,64H74.36A15.91,15.91,0,0,0,63,68.68L28.7,103a16,16,0,0,0,9.07,27.16l38.47,5.37,44.21,44.21,5.37,38.49a15.94,15.94,0,0,0,10.78,12.92,16.11,16.11,0,0,0,5.1.83A15.91,15.91,0,0,0,153,227.3L187.32,193A15.91,15.91,0,0,0,192,181.64V123.31l4.77-4.77C223.45,91.86,224.6,59.71,223.85,47.12ZM74.36,80h42.33L77.16,119.52,40,114.34Zm74.41-9.45a76.65,76.65,0,0,1,59.11-22.47,76.46,76.46,0,0,1-22.42,59.16L128,164.68,91.32,128ZM176,181.64,141.67,216l-5.19-37.17L176,139.31Zm-74.16,9.5C97.34,201,82.29,224,40,224a8,8,0,0,1-8-8c0-42.29,23-57.34,32.86-61.85a8,8,0,0,1,6.64,14.56c-6.43,2.93-20.62,12.36-23.12,38.91,26.55-2.5,36-16.69,38.91-23.12a8,8,0,1,1,14.56,6.64Z\" }, null, -1), P = [\n  E\n], W = { key: 5 }, $ = /* @__PURE__ */ o(\"path\", { d: \"M219.86,47.36a12,12,0,0,0-11.22-11.22c-12-.71-42.82.38-68.35,25.91L134.35,68h-60a11.9,11.9,0,0,0-8.48,3.52L31.52,105.85a12,12,0,0,0,6.81,20.37l39.79,5.55,46.11,46.11,5.55,39.81a12,12,0,0,0,20.37,6.79l34.34-34.35a11.9,11.9,0,0,0,3.52-8.48v-60l5.94-5.94C219.48,90.18,220.57,59.41,219.86,47.36ZM36.21,115.6a3.94,3.94,0,0,1,1-4.09L71.53,77.17A4,4,0,0,1,74.35,76h52L78.58,123.76,39.44,118.3A3.94,3.94,0,0,1,36.21,115.6ZM180,181.65a4,4,0,0,1-1.17,2.83l-34.35,34.34a4,4,0,0,1-6.79-2.25l-5.46-39.15L180,129.65Zm-52-11.31L85.66,128l60.28-60.29c23.24-23.24,51.25-24.23,62.22-23.58a3.93,3.93,0,0,1,3.71,3.71c.65,11-.35,39-23.58,62.22ZM98.21,189.48C94,198.66,80,220,40,220a4,4,0,0,1-4-4c0-40,21.34-54,30.52-58.21a4,4,0,0,1,3.32,7.28c-7.46,3.41-24.43,14.66-25.76,46.85,32.19-1.33,43.44-18.3,46.85-25.76a4,4,0,1,1,7.28,3.32Z\" }, null, -1), j = [\n  $\n], R = {\n  name: \"PhRocketLaunch\"\n}, F = /* @__PURE__ */ m({\n  ...R,\n  props: {\n    weight: {\n      type: String\n    },\n    size: {\n      type: [String, Number]\n    },\n    color: {\n      type: String\n    },\n    mirrored: {\n      type: Boolean\n    }\n  },\n  setup(r) {\n    const l = r, h = c(\"weight\", \"regular\"), d = c(\"size\", \"1em\"), _ = c(\"color\", \"currentColor\"), L = c(\"mirrored\", !1), a = s(() => l.weight ?? h), n = s(() => l.size ?? d), u = s(() => l.color ?? _), Z = s(() => l.mirrored !== void 0 ? l.mirrored ? \"scale(-1, 1)\" : void 0 : L ? \"scale(-1, 1)\" : void 0);\n    return (i, q) => (t(), e(\"svg\", p({\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 256 256\",\n      width: n.value,\n      height: n.value,\n      fill: u.value,\n      transform: Z.value\n    }, i.$attrs), [\n      M(i.$slots, \"default\"),\n      a.value === \"bold\" ? (t(), e(\"g\", v, y)) : a.value === \"duotone\" ? (t(), e(\"g\", f, V)) : a.value === \"fill\" ? (t(), e(\"g\", x, S)) : a.value === \"light\" ? (t(), e(\"g\", z, N)) : a.value === \"regular\" ? (t(), e(\"g\", b, P)) : a.value === \"thin\" ? (t(), e(\"g\", W, j)) : g(\"\", !0)\n    ], 16, A));\n  }\n});\nexport {\n  F as default\n};\n","<template>\n  <div v-if=\"result\" class=\"flex-row\">\n    <AntPopover\n      v-for=\"execution in result\"\n      :key=\"execution.id\"\n      :title=\"prettyDate(execution.createdAt)\"\n      @click=\"select(execution)\"\n    >\n      <template #content>\n        <AntText>Status: {{ execution.status }}</AntText>\n        <AntText>Duration: {{ execution.duration_seconds }}</AntText>\n        <AntText>Version: {{ execution.buildId.slice(0, 6) }}</AntText>\n      </template>\n      <ExecutionStatusIcon :status=\"execution.status\" />\n    </AntPopover>\n  </div>\n  <div v-else-if=\"loading\" class=\"flex-row\">\n    <AntSpin />\n  </div>\n  <div v-else class=\"flex-row\">None</div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { asyncComputed } from '@/utils/asyncComputed';\nimport { getLocalizedString } from '@/utils/datetime';\nimport { usePolling } from '@/utils/polling';\nimport {\n  Popover as AntPopover,\n  Spin as AntSpin,\n  TypographyParagraph as AntText,\n} from 'ant-design-vue';\nimport { onBeforeUnmount, onMounted } from 'vue';\nimport { Execution, RemoteExecutionRepository } from '@/models/executions';\n\nimport ExecutionStatusIcon from './ExecutionStatusIcon.vue';\n\nconst props = defineProps<{ stageId: string; projectId: string }>();\n\nconst emits = defineEmits(['select']);\n\nconst repository = new RemoteExecutionRepository();\n\nconst { result, refetch, loading } = asyncComputed(async () => {\n  const { executions } = await repository.list({\n    projectId: props.projectId,\n    stageId: props.stageId,\n    limit: 6,\n  });\n\n  return executions;\n});\n\nconst select = (execution: Execution) => {\n  emits('select', execution);\n};\n\nconst prettyDate = (date: Date) => getLocalizedString(date, { weekday: undefined });\n\nconst { startPolling, endPolling } = usePolling({\n  task: refetch,\n  interval: 15000,\n});\n\nonMounted(() => startPolling());\nonBeforeUnmount(() => endPolling());\n</script>\n\n<style scoped>\n.flex-row {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: right;\n  gap: 5px;\n  height: 100%;\n  width: 100%;\n}\n</style>\n","import { CloudApiGateway } from './gateway';\n\nclass DisabledStagesApi {\n  async list(projectId: string): Promise<string[]> {\n    return CloudApiGateway.get(`projects/${projectId}/disabled-stages`);\n  }\n\n  async disableStage({\n    projectId,\n    stageId,\n  }: {\n    projectId: string;\n    stageId: string;\n  }): Promise<void> {\n    return CloudApiGateway.patch(`projects/${projectId}/disabled-stages/${stageId}`, {\n      enable: false,\n    });\n  }\n\n  async enableStage({ projectId, stageId }: { projectId: string; stageId: string }): Promise<void> {\n    return CloudApiGateway.patch(`projects/${projectId}/disabled-stages/${stageId}`, {\n      enable: true,\n    });\n  }\n}\n\nconst api = new DisabledStagesApi();\n\nexport class DisabledStagesModel {\n  id: string;\n\n  private constructor(private dto: string) {\n    this.id = dto;\n  }\n\n  static async list(projectId: string): Promise<DisabledStagesModel[]> {\n    const dtos = await api.list(projectId);\n    return dtos.map((dto) => new DisabledStagesModel(dto));\n  }\n\n  static async disableStage({\n    projectId,\n    stageId,\n  }: {\n    projectId: string;\n    stageId: string;\n  }): Promise<void> {\n    return api.disableStage({ projectId, stageId });\n  }\n\n  static async enableStage({\n    projectId,\n    stageId,\n  }: {\n    projectId: string;\n    stageId: string;\n  }): Promise<void> {\n    return api.enableStage({ projectId, stageId });\n  }\n}\n","<template>\n  <CrudView\n    v-if=\"loading || (result?.buildSpec?.runtimes.length ?? 0) > 0\"\n    empty-title=\"\"\n    entity-name=\"build\"\n    description=\"Access and monitor your project's current scripts here.\"\n    :table=\"table\"\n    :loading=\"loading\"\n    title=\"Live View\"\n  >\n    <template #description>\n      <AntFlex gap=\"middle\" style=\"margin-top: 12px\">\n        <AntButton @click=\"openHome\"> Home<PhArrowSquareOut class=\"icon\" :size=\"16\" /> </AntButton>\n      </AntFlex>\n    </template>\n    <template #title=\"{ payload }\">\n      <div\n        style=\"\n          max-width: 250px;\n          overflow: hidden;\n          text-overflow: ellipsis ellipsis;\n          white-space: nowrap;\n        \"\n      >\n        <AntText\n          v-if=\"payload.runtime.type != 'form'\"\n          :disabled=\"isRuntimeDisabled(payload.runtime)\"\n        >\n          {{ payload.runtime.title }}\n        </AntText>\n        <AntLink\n          v-else-if=\"payload.runtime.type == 'form'\"\n          :href=\"result?.project.getUrl(payload.runtime.path)\"\n          target=\"_blank\"\n          :disabled=\"isRuntimeDisabled(payload.runtime)\"\n        >\n          {{ payload.runtime.title }}\n        </AntLink>\n      </div>\n    </template>\n    <template #last-runs=\"{ payload }\">\n      <ExecutionsShort\n        :stage-id=\"payload.runtime.id\"\n        :project-id=\"projectId\"\n        @select=\"handleExecutionClick\"\n      />\n    </template>\n    <template #trigger=\"{ payload }\">\n      <AntTag color=\"default\" class=\"ellipsis\">\n        {{ getRuntimeTriggerText(payload.runtime) }}\n      </AntTag>\n    </template>\n  </CrudView>\n  <section v-else>\n    <AntFlex gap=\"middle\" align=\"center\" justify=\"center\" :vertical=\"true\" style=\"height: 100%\">\n      <AntTitle style=\"display: flex; align-items: center; gap: 5px\" :level=\"2\">\n        <PhRocketLaunch size=\"42\" color=\"#d14056\" />\n        Waiting for your first deploy!\n      </AntTitle>\n      <AntParagraph>\n        Your live stages will appear here once you make your first deploy\n      </AntParagraph>\n    </AntFlex>\n    <AntFlex\n      v-if=\"hasWebEditor\"\n      gap=\"middle\"\n      align=\"center\"\n      justify=\"center\"\n      :vertical=\"true\"\n      style=\"height: 100%\"\n    >\n      <AntFlex vertical gap=\"small\" align=\"center\" style=\"width: 80%\">\n        <AntTitle :level=\"5\"> Start with Abstra on your computer</AntTitle>\n\n        <AntParagraph>\n          Install the editor using pip:\n          <AntText code copyable>pip install abstra</AntText>\n        </AntParagraph>\n        <AntParagraph>\n          Run the editor:\n          <AntText code copyable>abstra editor my-new-project</AntText>\n        </AntParagraph>\n      </AntFlex>\n      <AntParagraph>\n        Check out the documentation:\n        <AntLink :href=\"ABSTRA_URLS.DOCS\" target=\"_blank\">Abstra Docs</AntLink>\n      </AntParagraph>\n\n      <AntParagraph>\n        Feeling lost?\n        <AntButton\n          target=\"_blank\"\n          type=\"default\"\n          size=\"small\"\n          @click=\"() => Comms.showNewMessage('I need help getting started with Abstra')\"\n        >\n          <PhChats\n        /></AntButton>\n      </AntParagraph>\n    </AntFlex>\n\n    <AntFlex\n      v-else\n      gap=\"middle\"\n      align=\"center\"\n      justify=\"center\"\n      :vertical=\"true\"\n      style=\"height: 100%\"\n    >\n      <AntTitle style=\"display: flex; align-items: center; gap: 5px\" :level=\"4\">\n        Set up your local environment\n      </AntTitle>\n\n      <AntParagraph>\n        Install the editor using pip:\n        <AntText code copyable>pip install abstra</AntText>\n        <br />\n        Run the editor:\n        <AntText code copyable>abstra editor my-new-project</AntText>\n      </AntParagraph>\n      <AntParagraph>\n        Check out the documentation:\n        <AntLink :href=\"ABSTRA_URLS.DOCS\" target=\"_blank\">Abstra Docs</AntLink>\n      </AntParagraph>\n\n      <AntParagraph>\n        Feeling lost?\n        <AntButton\n          target=\"_blank\"\n          type=\"default\"\n          size=\"small\"\n          @click=\"() => Comms.showNewMessage('I need help getting started with Abstra')\"\n        >\n          <PhChats\n        /></AntButton>\n      </AntParagraph>\n    </AntFlex>\n  </section>\n</template>\n\n<script lang=\"ts\" setup>\nimport CrudView, { type CrudTable } from '@/components/inputs/CrudView.vue';\nimport { Execution } from '@/models/executions';\nimport { asyncComputed } from '@/utils/asyncComputed';\nimport { ABSTRA_URLS } from '@/utils/constants';\nimport { computed } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { Build, BuildSpec, OrganizationModel, ProjectModel } from '../apis/cloud';\nimport { Comms } from '../apis/intercom';\nimport ExecutionsShort from '../components/buildInspector/ExecutionsShort.vue';\nimport router from '../router';\n\nimport {\n  Button as AntButton,\n  Flex as AntFlex,\n  TypographyLink as AntLink,\n  message as AntMessage,\n  TypographyParagraph as AntParagraph,\n  Tag as AntTag,\n  TypographyText as AntText,\n  TypographyTitle as AntTitle,\n} from 'ant-design-vue';\n\nimport {\n  PhArrowCounterClockwise,\n  PhArrowSquareOut,\n  PhChats,\n  PhCopySimple,\n  PhPause,\n  PhPlay,\n  PhRocketLaunch,\n} from '@phosphor-icons/vue';\nimport { DisabledStagesModel } from '../apis/cloud/disabledStages';\n\nconst route = useRoute();\nconst projectId = route.params.projectId as string;\n\nconst openHome = () => {\n  const url = result.value?.project.getUrl();\n  if (url) window.open(url, '_blank');\n};\n\nconst hasWebEditor = computed(() => result?.value?.organization.featureFlags.WEB_EDITOR);\n\nconst handleExecutionClick = (execution: Execution) => {\n  router.push({\n    name: 'logs',\n    params: {\n      projectId,\n    },\n    query: {\n      stageId: execution.stageId,\n      executionId: execution.id,\n    },\n  });\n};\n\nconst { loading, result } = asyncComputed(async () => {\n  const [project, builds] = await Promise.all([ProjectModel.get(projectId), Build.list(projectId)]);\n\n  const latest = builds.find((b) => b.latest);\n\n  const [buildSpec, organization] = await Promise.all([\n    latest && BuildSpec.get(latest.id),\n    OrganizationModel.get(project.organizationId),\n  ]);\n\n  return { buildSpec, project, organization };\n});\n\nconst handleCopyClick = (runtime: BuildSpec['runtimes'][number]) => {\n  if (!('path' in runtime) || !runtime.path) return;\n  const path = runtime.type === 'form' ? `/${runtime.path}` : `/_hooks/${runtime.path}`;\n  const url = result.value?.project.getUrl(path);\n  if (!url) return;\n  navigator.clipboard.writeText(url);\n  AntMessage.success('Copied URL to clipboard');\n};\n\nconst getRuntimeTriggerText = (runtime: BuildSpec['runtimes'][number]) => {\n  if (runtime.type == 'form') {\n    return `/${runtime.path}`;\n  } else if (runtime.type == 'hook') {\n    return `/_hooks/${runtime.path}`;\n  } else if (runtime.type == 'job') {\n    return `${runtime.schedule}`;\n  }\n  return '';\n};\n\nconst { result: disabledStages, refetch: refetchDisabledStages } = asyncComputed(async () => {\n  const disabledStageModels = await DisabledStagesModel.list(projectId);\n  return disabledStageModels.filter((stage) => stage);\n});\n\nconst isRuntimeDisabled = (runtime: BuildSpec['runtimes'][number]) => {\n  return disabledStages.value?.map((stageId) => stageId.id).includes(runtime.id);\n};\n\nconst handleToggleStage = async (runtime: BuildSpec['runtimes'][number]) => {\n  if (isRuntimeDisabled(runtime)) {\n    await DisabledStagesModel.enableStage({ projectId, stageId: runtime.id });\n  } else {\n    await DisabledStagesModel.disableStage({ projectId, stageId: runtime.id });\n  }\n  await refetchDisabledStages();\n};\n\nconst validateAbstraVersion = (version: string, minimumVersion: string) => {\n  const [major, minor, patch] = version.split('.').map(Number);\n  const [minMajor, minMinor, minPatch] = minimumVersion.split('.').map(Number);\n\n  if (major > minMajor) return true;\n  if (major < minMajor) return false;\n  if (minor > minMinor) return true;\n  if (minor < minMinor) return false;\n  return patch >= minPatch;\n};\n\nconst getDisableStageButton = (runtime: BuildSpec['runtimes'][number]) => {\n  const isStageDisabled = isRuntimeDisabled(runtime);\n  const icon = isStageDisabled ? PhPlay : PhPause;\n  const label = isStageDisabled ? 'Enable stage' : 'Disable stage';\n\n  const minimumVersion = '3.18.0';\n\n  const invalidVersion = !validateAbstraVersion(\n    result.value?.buildSpec?.abstraVersion || '0.0.0',\n    minimumVersion,\n  );\n\n  return {\n    icon,\n    label,\n    onClick: () => (invalidVersion ? undefined : handleToggleStage(runtime)),\n    disabled: invalidVersion,\n    popoverMessage: invalidVersion\n      ? `The Disable Stages feature is supported from version ${minimumVersion} onward. Make sure to deploy your app in the latest version to use this feature.`\n      : '',\n  };\n};\n\nconst table = computed(() => {\n  const columns = [\n    { title: 'Type', align: 'left' },\n    { title: 'Title', align: 'left' },\n    { title: 'Trigger', align: 'left' },\n    { title: 'Last Runs' },\n    { title: '', align: 'right' },\n  ] satisfies CrudTable['columns'];\n  const buildSpec = result.value?.buildSpec;\n  if (!buildSpec) return { columns, rows: [] } as CrudTable;\n  return {\n    columns,\n    rows: buildSpec.runtimes.map((runtime) => ({\n      key: runtime.id,\n      cells: [\n        {\n          type: 'tag',\n          text:\n            runtime.type === 'script'\n              ? 'Tasklet'\n              : runtime.type.charAt(0).toUpperCase() + runtime.type.slice(1),\n          tagColor: 'default',\n        },\n        {\n          type: 'slot',\n          key: 'title',\n          payload: {\n            runtime,\n          },\n        },\n        {\n          type: 'slot',\n          key: 'trigger',\n          payload: {\n            runtime,\n          },\n        },\n        {\n          type: 'slot',\n          key: 'last-runs',\n          payload: {\n            runtime,\n          },\n        },\n        {\n          type: 'actions',\n          actions: [\n            {\n              icon: PhArrowCounterClockwise,\n              label: 'View script logs',\n              onClick: () =>\n                router.push({\n                  name: 'logs',\n                  params: {\n                    projectId,\n                  },\n                  query: {\n                    stageId: runtime.id,\n                  },\n                }),\n            },\n            {\n              icon: PhCopySimple,\n              label: 'Copy URL',\n              onClick: () => handleCopyClick(runtime),\n              hide: !['form', 'hook'].includes(runtime.type),\n            },\n            getDisableStageButton(runtime),\n          ],\n        },\n      ] satisfies CrudTable['rows'][number]['cells'],\n    })),\n  };\n});\n</script>\n<style scoped lang=\"scss\">\n.trigger-buttons {\n  display: flex;\n  gap: 8px;\n  font-size: 14px;\n  color: gray;\n  & > * {\n    cursor: pointer;\n    :hover {\n      color: #f28392;\n    }\n    :active {\n      color: #f28392;\n    }\n  }\n}\n\n.centered {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  padding: 32px;\n}\n\n.icon {\n  margin: 0 0 -2px 4px;\n}\n\n.ellipsis {\n  max-width: 240px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.flex-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n}\n.flex-container:before,\n.flex-container:after {\n  content: '';\n  min-height: 40px;\n  padding: 0 1px;\n  background-color: black;\n}\n</style>\n"],"names":["A","v","C","o","y","f","w","k","V","x","H","S","z","B","N","b","E","P","W","$","j","R","F","m","r","l","h","c","d","_","L","a","s","n","u","i","q","t","e","p","M","g","repository","RemoteExecutionRepository","result","refetch","loading","asyncComputed","executions","props","select","execution","emits","prettyDate","date","getLocalizedString","startPolling","endPolling","usePolling","onMounted","onBeforeUnmount","DisabledStagesApi","projectId","CloudApiGateway","stageId","api","DisabledStagesModel","dto","useRoute","openHome","url","hasWebEditor","computed","handleExecutionClick","router","project","builds","ProjectModel","Build","latest","buildSpec","organization","BuildSpec","OrganizationModel","handleCopyClick","runtime","path","AntMessage","getRuntimeTriggerText","disabledStages","refetchDisabledStages","stage","isRuntimeDisabled","handleToggleStage","validateAbstraVersion","version","minimumVersion","major","minor","patch","minMajor","minMinor","minPatch","getDisableStageButton","isStageDisabled","icon","PhPlay","PhPause","label","invalidVersion","table","columns","PhArrowCounterClockwise","PhCopySimple"],"mappings":"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","x_google_ignoreList":[0]}