{"version":3,"file":"Files-CJ0_vt1o.js","sources":["../../node_modules/@ant-design/icons-svg/es/asn/FileAddOutlined.js","../../node_modules/@ant-design/icons-svg/es/asn/FolderAddOutlined.js","../../node_modules/@ant-design/icons-svg/es/asn/UploadOutlined.js","../../node_modules/@ant-design/icons-vue/es/icons/DeleteOutlined.js","../../node_modules/@ant-design/icons-vue/es/icons/EditOutlined.js","../../node_modules/@ant-design/icons-vue/es/icons/FileAddOutlined.js","../../node_modules/@ant-design/icons-vue/es/icons/FolderAddOutlined.js","../../node_modules/@ant-design/icons-vue/es/icons/UploadOutlined.js","../../src/apps/console/apis/cloud/file.ts","../../src/components/FilesNavigator.vue","../../src/apps/console/views/Files.vue"],"sourcesContent":["// This icon file is generated automatically.\nvar FileAddOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z\" } }] }, \"name\": \"file-add\", \"theme\": \"outlined\" };\nexport default FileAddOutlined;\n","// This icon file is generated automatically.\nvar FolderAddOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z\" } }] }, \"name\": \"folder-add\", \"theme\": \"outlined\" };\nexport default FolderAddOutlined;\n","// This icon file is generated automatically.\nvar UploadOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"upload\", \"theme\": \"outlined\" };\nexport default UploadOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport DeleteOutlinedSvg from \"@ant-design/icons-svg/es/asn/DeleteOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar DeleteOutlined = function DeleteOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": DeleteOutlinedSvg\n  }), null);\n};\n\nDeleteOutlined.displayName = 'DeleteOutlined';\nDeleteOutlined.inheritAttrs = false;\nexport default DeleteOutlined;","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport EditOutlinedSvg from \"@ant-design/icons-svg/es/asn/EditOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar EditOutlined = function EditOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": EditOutlinedSvg\n  }), null);\n};\n\nEditOutlined.displayName = 'EditOutlined';\nEditOutlined.inheritAttrs = false;\nexport default EditOutlined;","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport FileAddOutlinedSvg from \"@ant-design/icons-svg/es/asn/FileAddOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar FileAddOutlined = function FileAddOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": FileAddOutlinedSvg\n  }), null);\n};\n\nFileAddOutlined.displayName = 'FileAddOutlined';\nFileAddOutlined.inheritAttrs = false;\nexport default FileAddOutlined;","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport FolderAddOutlinedSvg from \"@ant-design/icons-svg/es/asn/FolderAddOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar FolderAddOutlined = function FolderAddOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": FolderAddOutlinedSvg\n  }), null);\n};\n\nFolderAddOutlined.displayName = 'FolderAddOutlined';\nFolderAddOutlined.inheritAttrs = false;\nexport default FolderAddOutlined;","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport UploadOutlinedSvg from \"@ant-design/icons-svg/es/asn/UploadOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar UploadOutlined = function UploadOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": UploadOutlinedSvg\n  }), null);\n};\n\nUploadOutlined.displayName = 'UploadOutlined';\nUploadOutlined.inheritAttrs = false;\nexport default UploadOutlined;","import { fileNameFromPath } from '@/utils/files';\nimport { CloudApiGateway } from './gateway';\n\ntype FileDTO = {\n  type: 'file';\n  path: string;\n  name: string;\n  size: string;\n  date: string;\n};\n\ntype DirectoryDTO = {\n  type: 'directory';\n  path: string;\n  name: string;\n  date: string;\n  children?: (FileDTO | DirectoryDTO)[];\n};\n\nexport type FileTreeDTO = FileDTO | DirectoryDTO;\n\nexport class FilesModel {\n  private constructor(private projectId: string) {}\n\n  static fromProjectId(projectId: string): FilesModel {\n    return new FilesModel(projectId);\n  }\n\n  async list(): Promise<FileTreeDTO[]> {\n    return CloudApiGateway.get(`projects/${this.projectId}/files`);\n  }\n\n  async upload(path: string, content?: Uint8Array): Promise<void> {\n    const overrideHeaders = {\n      'Content-Type': 'multipart/form-data',\n    };\n    const file = new File([new Blob(content ? [content] : [])], fileNameFromPath(path));\n\n    return CloudApiGateway.post(\n      `projects/${this.projectId}/files/upload?path=${encodeURIComponent(path)}`,\n      file,\n      overrideHeaders,\n    );\n  }\n\n  async download(path: string): Promise<Blob> {\n    return CloudApiGateway.getBlob(\n      `projects/${this.projectId}/files/download?path=${encodeURIComponent(path)}`,\n    );\n  }\n\n  async delete(path: string): Promise<void> {\n    return CloudApiGateway.delete(\n      `projects/${this.projectId}/files?path=${encodeURIComponent(path)}`,\n    );\n  }\n\n  async move(path: string, newPath: string): Promise<void> {\n    return CloudApiGateway.patch(\n      `projects/${this.projectId}/files?path=${encodeURIComponent(\n        path,\n      )}&newPath=${encodeURIComponent(newPath)}`,\n      {},\n    );\n  }\n}\n","<template>\n  <div class=\"files-navigator\">\n    <AntInputSearch\n      v-model:value=\"searchValue\"\n      :loading=\"props.loading\"\n      placeholder=\"Search files\"\n    />\n    <AntFlex justify=\"space-between\">\n      <AntTypographyParagraph v-if=\"numberOfFiles > 0\">\n        <b>\n          {{ numberOfFiles }} File<span v-if=\"numberOfFiles !== 1\">s</span>\n          <span v-if=\"searchValue\"> found </span>\n        </b>\n      </AntTypographyParagraph>\n      <AntButtonGroup v-if=\"!loading\">\n        <AntButton v-if=\"onCreate\" @click=\"() => newFile()\">\n          <FileAddOutlined />\n          New File\n        </AntButton>\n        <AntButton v-if=\"onCreate\" @click=\"() => uploadFile()\">\n          <UploadOutlined />\n          Upload\n        </AntButton>\n        <AntButton v-if=\"onMkdir\" @click=\"() => newFolder()\">\n          <FolderAddOutlined />\n          New Folder\n        </AntButton>\n      </AntButtonGroup>\n    </AntFlex>\n    <ScrollArea class=\"scroll-area\" :outer-style=\"{ flexGrow: '1' }\">\n      <AntDirectoryTree\n        v-if=\"treeData && treeData.length > 0\"\n        class=\"files-tree\"\n        :tree-data=\"treeData\"\n        selectable\n        @select=\"(_, { node: { file } }) => props.onOpen?.(file.pathParts)\"\n      >\n        <template #title=\"{ title, isLeaf, file }\">\n          <span>\n            <Component :is=\"titleHtml(title)\" />\n            <span v-if=\"isLeaf\" class=\"file-size\">({{ fileSize(file) }})</span>\n          </span>\n          <AntDropdown @click.stop>\n            <PhDotsThree style=\"cursor: pointer; float: inline-end\" size=\"25px\" />\n            <template #overlay>\n              <AntMenu :disabled=\"loading\">\n                <AntMenuItem v-if=\"isLeaf && onDownload\" @click=\"() => downloadFile(file)\">\n                  <DownloadOutlined />\n                  Download\n                </AntMenuItem>\n                <AntMenuItem v-if=\"onRename\" @click=\"() => renameFile(file)\">\n                  <EditOutlined />\n                  Rename\n                </AntMenuItem>\n                <AntMenuItem v-if=\"!isLeaf && onCreate\" @click=\"() => newFile(file)\">\n                  <FileAddOutlined />\n                  New File\n                </AntMenuItem>\n                <AntMenuItem v-if=\"onCreate\" :loading=\"loading\" @click=\"() => uploadFile(file)\">\n                  <UploadOutlined />\n                  Upload\n                </AntMenuItem>\n                <AntMenuItem v-if=\"onDelete\" danger @click=\"() => deleteFile(file)\">\n                  <DeleteOutlined />\n                  Delete\n                </AntMenuItem>\n              </AntMenu>\n            </template>\n          </AntDropdown>\n        </template>\n        <template #icon=\"{ file }\">\n          <slot name=\"icon\" :file=\"file\">\n            <PhFolder v-if=\"file.type === 'directory'\" />\n            <PhFile v-else />\n          </slot>\n        </template>\n      </AntDirectoryTree>\n      <AntEmpty v-else :description=\"loading ? 'Loading...' : 'No files'\" />\n    </ScrollArea>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { popupError } from '@/components/popupNotifcation';\nimport { CommonFileNode } from '@/contracts.generated';\nimport { askForConfirmation } from '@/utils/ant-design';\nimport { fileNameFromPathParts } from '@/utils/files';\nimport { fuzzyMatch } from '@/utils/string';\nimport {\n  DeleteOutlined,\n  DownloadOutlined,\n  EditOutlined,\n  FileAddOutlined,\n  FolderAddOutlined,\n  UploadOutlined,\n} from '@ant-design/icons-vue';\nimport { PhDotsThree, PhFile, PhFolder } from '@phosphor-icons/vue';\nimport {\n  Button as AntButton,\n  ButtonGroup as AntButtonGroup,\n  DirectoryTree as AntDirectoryTree,\n  Dropdown as AntDropdown,\n  Empty as AntEmpty,\n  Flex as AntFlex,\n  InputSearch as AntInputSearch,\n  Menu as AntMenu,\n  MenuItem as AntMenuItem,\n  TypographyParagraph as AntTypographyParagraph,\n  DirectoryTreeProps,\n} from 'ant-design-vue';\nimport { DataNode } from 'ant-design-vue/es/tree';\nimport { computed, h, ref } from 'vue';\nimport ScrollArea from './ScrollArea.vue';\n\nconst props = defineProps<{\n  files: CommonFileNode[] | null;\n  loading: boolean;\n  onCreate?: (pathParts: string[], content?: Uint8Array) => void;\n  onDownload?: (pathParts: string[]) => Promise<Blob>;\n  onDelete?: (pathParts: string[]) => void;\n  onRefetch?: () => void;\n  onRename?: (pathParts: string[], newPathParts: string[]) => void;\n  onOpen?: (pathParts: string[]) => void;\n  onMkdir?: (pathParts: string[]) => void;\n  separator: string;\n}>();\n\ntype TreeDataNode = {\n  key: string;\n  title: string;\n  isLeaf: boolean;\n  file?: CommonFileNode;\n  children?: TreeDataNode[];\n};\n\nconst fileModelEntryToTreeNode =\n  (opt: { keepFullPath: boolean }) =>\n  (node: CommonFileNode): TreeDataNode => {\n    return {\n      key: node.pathParts.join(props.separator),\n      title: opt.keepFullPath\n        ? node.pathParts.join(props.separator)\n        : fileNameFromPathParts(node.pathParts),\n      isLeaf: node.type === 'file',\n      file: node,\n      children: opt.keepFullPath\n        ? undefined\n        : node.children?.map((childPathParts) => {\n            const childNode = props.files?.find(\n              (f) => f.pathParts.join(props.separator) === childPathParts.join(props.separator),\n            );\n            if (!childNode) throw new Error('Child node not found');\n            return fileModelEntryToTreeNode({ keepFullPath: opt.keepFullPath })(childNode);\n          }) ?? [],\n    };\n  };\n\nconst titleHtml = (title: string) => {\n  if (!searchValue.value.trim()) return h('span', title);\n  const matches = fuzzyMatch(searchValue.value, title);\n  if (matches) {\n    return h(\n      'span',\n      title\n        .split('')\n        .map((char, idx) =>\n          matches.includes(idx) ? h('span', { class: 'char-match' }, char) : char,\n        ),\n    );\n  } else {\n    return h('span', title);\n  }\n};\n\nconst fileSize = (file: CommonFileNode) => {\n  if (file.type === 'directory') return '';\n  const sizeBytes = file.size;\n  if (sizeBytes < 1024) return `${sizeBytes} B`;\n  const sizeKb = sizeBytes / 1024;\n  if (sizeKb < 1024) return `${sizeKb.toFixed(2)} KB`;\n  const sizeMb = sizeKb / 1024;\n  if (sizeMb < 1024) return `${sizeMb.toFixed(2)} MB`;\n  const sizeGb = sizeMb / 1024;\n  return `${sizeGb.toFixed(2)} GB`;\n};\n\nconst treeData = computed<DirectoryTreeProps['treeData']>(() => {\n  if (searchValue.value.trim()) {\n    return props.files\n      ?.filter(\n        (f) =>\n          f.pathParts.length === 1 &&\n          fuzzyMatch(searchValue.value, f.pathParts.join(props.separator)),\n      )\n      .map(fileModelEntryToTreeNode({ keepFullPath: true }));\n  } else {\n    return props.files\n      ?.filter((f) => f.pathParts.length === 1)\n      .map(fileModelEntryToTreeNode({ keepFullPath: false }));\n  }\n});\n\nconst countNumberOfLeaves = (node: DataNode): number => {\n  if (node.isLeaf) return 1;\n  return node.children?.reduce((acc, child) => acc + countNumberOfLeaves(child), 0) ?? 0;\n};\n\nconst numberOfFiles = computed(() => {\n  if (!treeData.value) return 0;\n  return treeData?.value.reduce((acc, child) => acc + countNumberOfLeaves(child), 0);\n});\n\nconst loadingUpload = ref(false);\n\nfunction uploadFile(fileNode?: CommonFileNode) {\n  if (fileNode && fileNode.type === 'file') return;\n  const input = document.createElement('input');\n  input.type = 'file';\n  input.onchange = async () => {\n    const file = input.files?.[0];\n    const content = await file?.arrayBuffer();\n    if (!file) return;\n    try {\n      loadingUpload.value = true;\n      await props.onCreate?.(\n        [...(fileNode?.pathParts ?? []), file.name ?? 'Untitled file'],\n        content ? new Uint8Array(content) : undefined,\n      );\n      await props.onRefetch?.();\n    } catch (e) {\n      popupError('Failed to upload file', 'File already exists');\n    } finally {\n      loadingUpload.value = false;\n    }\n  };\n  input.click();\n}\n\nfunction newFile(path?: CommonFileNode) {\n  if (path && path.type === 'file') return;\n  const fileName = prompt('Enter the name of the new file');\n  if (!fileName) return;\n  const filePathParts = path ? [...path.pathParts, fileName] : [fileName];\n  props.onCreate?.(filePathParts);\n}\n\nasync function downloadFile(file: CommonFileNode) {\n  if (!file) return;\n  if (!props.onDownload) return;\n  const downloadedFile = await props.onDownload(file.pathParts);\n\n  const link = document.createElement('a');\n  link.href = URL.createObjectURL(downloadedFile);\n  link.download = fileNameFromPathParts(file.pathParts);\n  link.click();\n}\n\nasync function deleteFile(file: CommonFileNode) {\n  if (!file) return;\n  const confirmationFile =\n    `Are you sure you want to delete this ` +\n    (file.type === 'file' ? 'file' : 'directory and all its contents') +\n    '?';\n  if (await askForConfirmation(confirmationFile)) {\n    await props.onDelete?.(file.pathParts);\n    await props.onRefetch?.();\n  }\n}\n\nasync function renameFile(file: CommonFileNode) {\n  if (!file) return;\n  const newName = prompt('Enter the new name of the file', fileNameFromPathParts(file.pathParts));\n  if (!newName) return;\n  const newPath = [...file.pathParts.slice(0, -1), newName];\n  await props.onRename?.(file.pathParts, newPath);\n  await props.onRefetch?.();\n}\n\nasync function newFolder(path?: CommonFileNode) {\n  if (path && path.type === 'file') return;\n  const folderName = prompt('Enter the name of the new folder');\n  if (!folderName) return;\n  const folderPathParts = path ? [...path.pathParts, folderName] : [folderName];\n  props.onMkdir?.(folderPathParts);\n}\n\nconst searchValue = ref('');\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/styles/index.scss';\n\n.files-navigator {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n\n  .scroll-area {\n    border: 1px solid lightgray;\n    border-radius: 6px;\n  }\n\n  .file-size {\n    color: $medium-gray-color;\n    margin-left: 5px;\n  }\n\n  .char-match {\n    background-color: $primary-color;\n  }\n\n  :deep() .ant-tree {\n    height: 100%;\n  }\n}\n</style>\n","<template>\n  <ContentLayout>\n    <div class=\"files-layout\">\n      <AntTypographyTitle>Files</AntTypographyTitle>\n      <AntTypographyParagraph>\n        Here you can upload, download and delete files in your persistent dir.<br />\n        Files can be used in your scripts.\n        <DocsButton path=\"tools/files\"></DocsButton>\n        <slot name=\"description\" />\n      </AntTypographyParagraph>\n      <FilesNavigator\n        :files=\"fileNodes\"\n        :loading=\"loading\"\n        separator=\"/\"\n        @create=\"handleCreate\"\n        @download=\"handleDownload\"\n        @delete=\"handleDelete\"\n        @refetch=\"refetch\"\n      />\n    </div>\n  </ContentLayout>\n</template>\n\n<script lang=\"ts\" setup>\nimport DocsButton from '@/apps/editor/components/workspace/DocsButton.vue';\nimport ContentLayout from '@/components/ContentLayout.vue';\nimport FilesNavigator from '@/components/FilesNavigator.vue';\nimport { CommonFileNode } from '@/contracts.generated';\nimport { asyncComputed } from '@/utils/asyncComputed';\nimport { string2bytes } from '@/utils/files';\nimport {\n  TypographyParagraph as AntTypographyParagraph,\n  TypographyTitle as AntTypographyTitle,\n} from 'ant-design-vue';\nimport { computed } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { FilesModel, FileTreeDTO } from '../apis/cloud';\n\nconst route = useRoute();\nconst projectId = route.params.projectId as string;\nconst filesModel = FilesModel.fromProjectId(projectId);\n\nconst { loading, result: files, refetch } = asyncComputed(() => filesModel.list());\n\nconst normalizeFileNodes = (files: FileTreeDTO[]): CommonFileNode[] => {\n  return files.reduce((acc: CommonFileNode[], node: FileTreeDTO) => {\n    const currentNodeChildrenPaths =\n      node.type === 'file' ? [] : node.children?.map((child) => child.path.split('/')) ?? [];\n\n    const currentNode: CommonFileNode = {\n      pathParts: node.path.split('/'),\n      size: node.type === 'file' ? string2bytes(node.size) : 0,\n      lastModified: node.date,\n      type: node.type,\n      children: currentNodeChildrenPaths,\n    };\n\n    acc.push(currentNode);\n\n    if (node.type === 'directory' && node.children && node.children.length > 0) {\n      const childrenNodes = normalizeFileNodes(node.children);\n      acc.push(...childrenNodes);\n    }\n\n    return acc;\n  }, []);\n};\n\nconst fileNodes = computed(() => {\n  if (!files.value) return [];\n  return normalizeFileNodes(files.value);\n});\n\nasync function handleCreate(pathParts: string[], content?: Uint8Array) {\n  const path = pathParts.join('/');\n  await filesModel.upload(path, content);\n  await refetch();\n}\n\nfunction handleDownload(pathParts: string[]) {\n  const path = pathParts.join('/');\n  return filesModel.download(path);\n}\n\nfunction handleDelete(pathParts: string[]) {\n  const path = pathParts.join('/');\n  return filesModel.delete(path);\n}\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/styles/index.scss';\n\n.files {\n  margin-top: 20px;\n}\n\n.files-layout {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  height: 100%;\n}\n\n.files-navigator {\n  flex-grow: 1;\n}\n</style>\n"],"names":["FileAddOutlined","FolderAddOutlined","UploadOutlined","_objectSpread","target","i","source","ownKeys","sym","key","_defineProperty","obj","value","DeleteOutlined","props","context","p","_createVNode","AntdIcon","DeleteOutlinedSvg","EditOutlined","EditOutlinedSvg","FileAddOutlinedSvg","FolderAddOutlinedSvg","UploadOutlinedSvg","FilesModel","projectId","CloudApiGateway","path","content","overrideHeaders","file","fileNameFromPath","newPath","fileModelEntryToTreeNode","opt","node","fileNameFromPathParts","childPathParts","childNode","f","titleHtml","title","searchValue","h","matches","fuzzyMatch","char","idx","fileSize","sizeBytes","sizeKb","sizeMb","treeData","computed","countNumberOfLeaves","acc","child","numberOfFiles","loadingUpload","ref","uploadFile","fileNode","input","popupError","newFile","fileName","filePathParts","downloadFile","downloadedFile","link","deleteFile","confirmationFile","askForConfirmation","renameFile","newName","newFolder","folderName","folderPathParts","useRoute","filesModel","loading","files","refetch","asyncComputed","normalizeFileNodes","currentNodeChildrenPaths","currentNode","string2bytes","childrenNodes","fileNodes","handleCreate","pathParts","handleDownload","handleDelete"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7]}