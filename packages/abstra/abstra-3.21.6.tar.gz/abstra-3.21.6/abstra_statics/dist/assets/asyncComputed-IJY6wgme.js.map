{"version":3,"file":"asyncComputed-IJY6wgme.js","sources":["../../src/utils/asyncComputed.ts"],"sourcesContent":["import { computed, shallowRef } from 'vue';\n\nexport const asyncComputed = <T>(asyncFunc: () => Promise<T>) => {\n  const state = shallowRef<{\n    loading: boolean;\n    result: T | null;\n    error: Error | null;\n  }>({\n    loading: true,\n    result: null,\n    error: null,\n  });\n\n  const resolve = (res: T) => {\n    state.value = {\n      loading: false,\n      result: res,\n      error: null,\n    };\n    return res;\n  };\n\n  const reject = (err: Error) => {\n    state.value = {\n      loading: false,\n      result: null,\n      error: err,\n    };\n  };\n\n  const refetch = async () => {\n    state.value = {\n      loading: true,\n      result: state.value.result,\n      error: null,\n    };\n    return asyncFunc().then(resolve).catch(reject);\n  };\n\n  refetch();\n\n  const loading = computed(() => state.value.loading);\n  const result = computed(() => state.value.result);\n  const error = computed(() => state.value.error);\n\n  return { loading, result, error, refetch };\n};\n"],"names":["asyncComputed","asyncFunc","state","shallowRef","resolve","res","reject","err","refetch","loading","computed","result","error"],"mappings":"+WAEO,MAAMA,EAAoBC,GAAgC,CAC/D,MAAMC,EAAQC,EAIX,CACD,QAAS,GACT,OAAQ,KACR,MAAO,IAAA,CACR,EAEKC,EAAWC,IACfH,EAAM,MAAQ,CACZ,QAAS,GACT,OAAQG,EACR,MAAO,IAAA,EAEFA,GAGHC,EAAUC,GAAe,CAC7BL,EAAM,MAAQ,CACZ,QAAS,GACT,OAAQ,KACR,MAAOK,CAAA,CAEX,EAEMC,EAAU,UACdN,EAAM,MAAQ,CACZ,QAAS,GACT,OAAQA,EAAM,MAAM,OACpB,MAAO,IAAA,EAEFD,IAAY,KAAKG,CAAO,EAAE,MAAME,CAAM,GAG/CE,EAAA,EAEA,MAAMC,EAAUC,EAAS,IAAMR,EAAM,MAAM,OAAO,EAC5CS,EAASD,EAAS,IAAMR,EAAM,MAAM,MAAM,EAC1CU,EAAQF,EAAS,IAAMR,EAAM,MAAM,KAAK,EAE9C,MAAO,CAAE,QAAAO,EAAS,OAAAE,EAAQ,MAAAC,EAAO,QAAAJ,CAAA,CACnC"}