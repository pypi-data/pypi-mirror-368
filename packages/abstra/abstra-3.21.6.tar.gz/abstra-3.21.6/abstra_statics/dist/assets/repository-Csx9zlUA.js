import{g,I as p,bL as j,bM as v,d as S,B as a,p as I,m as c,D as u}from"./jwt-decode.esm-Dca5fHH5.js";import{L as _}from"./LoadingOutlined-DDGxAZbf.js";import{C as l}from"./router-D5wfdag3.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[t]="7495c752-96bd-41b8-a4fd-8b9e12115fc8",r._sentryDebugIdIdentifier="sentry-dbid-7495c752-96bd-41b8-a4fd-8b9e12115fc8")}catch{}})();var $={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h368c4.4 0 8 3.6 8 8v48z"}}]},name:"minus-circle",theme:"filled"};function O(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),n.forEach(function(s){x(r,s,e[s])})}return r}function x(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var m=function(t,e){var n=O({},t,e.attrs);return g(p,O({},n,{icon:j}),null)};m.displayName="CheckCircleFilled";m.inheritAttrs=!1;function w(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),n.forEach(function(s){P(r,s,e[s])})}return r}function P(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var h=function(t,e){var n=w({},t,e.attrs);return g(p,w({},n,{icon:v}),null)};h.displayName="CloseCircleFilled";h.inheritAttrs=!1;function C(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),n.forEach(function(s){E(r,s,e[s])})}return r}function E(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var b=function(t,e){var n=C({},t,e.attrs);return g(p,C({},n,{icon:$}),null)};b.displayName="MinusCircleFilled";b.inheritAttrs=!1;const A=S({__name:"ExecutionStatusIcon",props:{status:{}},setup(r){return(t,e)=>t.status==="finished"?(c(),a(u(m),{key:0,style:{color:"#33b891"}})):t.status==="failed"?(c(),a(u(h),{key:1,style:{color:"#fa675c"}})):t.status==="abandoned"||t.status==="lock-failed"?(c(),a(u(b),{key:2,style:{color:"#f69220"}})):t.status==="running"?(c(),a(u(_),{key:3})):I("",!0)}}),L=["running","lock-failed","failed","finished","abandoned"];class d{constructor(t){this.dto=t}static from(t){return new d(t)}get entries(){return this.dto.sort((t,e)=>t.sequence-e.sequence).filter(t=>t.event!=="form-message")}}class f{constructor(t){this.dto=t}static from(t){return new f(t)}get id(){return this.dto.id}get shortId(){return this.dto.id.slice(0,8)}get createdAt(){return new Date(this.dto.createdAt)}get updatedAt(){return new Date(this.dto.updatedAt)}get status(){return this.dto.status}get context(){return this.dto.context}get buildId(){return this.dto.buildId??""}get stageId(){return this.dto.stageId}get duration_seconds(){return this.status==="running"?"-":`${(this.updatedAt.getTime()-this.createdAt.getTime())/1e3} s`}get stageRunId(){return this.dto.stageRunId}get projectId(){return this.dto.projectId}}class M{async list({projectId:t,...e}){const n={...e,offset:e.offset?.toString(),limit:e.limit?.toString()};Object.keys(n).forEach(i=>n[i]===void 0&&delete n[i]);const s=await l.get(`projects/${t}/executions`,n);return{executions:s.executions.map(i=>f.from(i)),totalCount:s.totalCount}}async fetchLogs(t,e){const n=await l.get(`projects/${t}/executions/${e}/logs`);return d.from(n)}async fetchThreadData(t,e){return(await l.get(`projects/${t}/executions/${e}/thread-data`)).response}async getExecutionTasks(t,e){return await l.get(`projects/${t}/executions/${e}/tasks`)}async fetchStages(){throw new Error("Method not implemented.")}}class R{async list(t){const e={...t,offset:t.offset?.toString(),limit:t.limit?.toString()};Object.keys(e).forEach(o=>e[o]===void 0&&delete e[o]);const n=Object.fromEntries(Object.entries(e??{}).filter(([,o])=>o!=null)),s=Object.keys(n).length>0?`?${new URLSearchParams(n).toString()}`:"",y=await(await fetch(`/_editor/api/executions${s}`)).json();return{executions:y.executions.map(o=>f.from(o)),totalCount:y.totalCount}}async fetchLogs(t,e){const s=await(await fetch(`/_editor/api/logs/${e}`)).json();return d.from(s)}async fetchThreadData(){return{}}async getExecutionTasks(t,e){return await(await fetch(`/_editor/api/executions/${e}/tasks`)).json()}async fetchStages(){return await(await fetch("/_editor/api/executions/stages")).json()}}export{m as C,R as L,M as R,A as _,L as e};
//# sourceMappingURL=repository-Csx9zlUA.js.map
