{"version":3,"file":"polling-CKeyL76l.js","sources":["../../src/utils/polling.ts"],"sourcesContent":["type PollingParams = {\n  task: () => unknown;\n  interval?: number;\n  keepPollingOnOutOfFocus?: boolean;\n};\n\nconst DEFAULT_POLLING_INTERVAL = 1000;\n\nexport const usePolling = (params: PollingParams) => {\n  let timeout: ReturnType<typeof setTimeout> | null = null;\n\n  const startPolling = () => {\n    const poll = async () => {\n      try {\n        if (!document.hidden && !params.keepPollingOnOutOfFocus) {\n          await params.task();\n        }\n      } finally {\n        timeout = setTimeout(poll, params.interval ?? DEFAULT_POLLING_INTERVAL);\n      }\n    };\n    poll();\n  };\n\n  const endPolling = () => {\n    if (timeout) clearTimeout(timeout);\n  };\n\n  return {\n    startPolling,\n    endPolling,\n  };\n};\n"],"names":["DEFAULT_POLLING_INTERVAL","usePolling","params","timeout","poll"],"mappings":"4VAMA,MAAMA,EAA2B,IAEpBC,EAAcC,GAA0B,CACnD,IAAIC,EAAgD,KAmBpD,MAAO,CACL,aAlBmB,IAAM,CACzB,MAAMC,EAAO,SAAY,CACvB,GAAI,CACE,CAAC,SAAS,QAAU,CAACF,EAAO,yBAC9B,MAAMA,EAAO,KAAA,CAEjB,QAAA,CACEC,EAAU,WAAWC,EAAMF,EAAO,UAAYF,CAAwB,CACxE,CACF,EACAI,EAAA,CACF,EAQE,WANiB,IAAM,CACnBD,gBAAsBA,CAAO,CACnC,CAIE,CAEJ"}