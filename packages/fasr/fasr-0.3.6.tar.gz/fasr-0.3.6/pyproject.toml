[project]
name = "fasr"
version = "0.3.6"
description = "FASR: Fast Automatic Speech Recognition"
readme = "README.md"
authors = [
    { name = "wangmengdi06", email = "wangmengdi06@58.com" }
]
requires-python = ">=3.10, <3.13"
dependencies = [
    "docarray==0.40",
    "pydantic>=2.9.2",
    "torch>=2.1.0",
    "torchaudio>=2.1.0",
    "librosa>=0.9.2",
    "funasr>=1.2.6",
    "modelscope>=1.19.1",
    "jsonargparse[signatures,urls]>=4.38",
    "loguru>=0.7.2",
    "onnxruntime",
    "lightning-utilities>=0.11.8",
    "hydra-core>=1.3.2",
    "numpy==1.23.4",
    "aiohttp>=3.10.10",
    "aiofiles>=24.1.0",
    "confection>=0.1.5",
    "torch-complex>=0.4.4",
    "joblib>=1.4.2",
    "catalogue>=2.0.10",
    "sentencepiece>=0.1.97",
    "asr-decoder>=0.1.1",
    "online-fbank>=0.0.4",
    "wasabi>=1.1.3",
    "editdistance>=0.8.1",
    "protobuf>=3.20.0",
    "huggingface-hub>=0.27.0",
    "pydub>=0.25.1",
    "funasr-onnx>=0.4.1",
    "kaldifst>=1.7.14",
]

[project.scripts]
fasr = "fasr.__main__:run"

[project.optional-dependencies]
serve = [
    "fastapi>=0.115.12",
    "websockets>=15.0.1",
    "wsproto>=1.2.0",
]
benchmark = [
    "pyaudio>=0.2.14",
]
litdata = [
    "litdata>=0.2.47",
]

dolphin = [
    "dataoceanai-dolphin>=20250519",
]

[[tool.uv.index]]
name = "pypi"
url = "https://pypi.python.org/simple/"
default = true

[[tool.uv.index]]
name = "tsinghua"
url = "https://pypi.tuna.tsinghua.edu.cn/simple/"

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[dependency-groups]
dev = [
    "addict>=2.4.0",
    "datasets>=3.1.0",
    "fastapi>=0.115.4",
    "faster-whisper>=1.1.1",
    "funasr-onnx>=0.4.1",
    "ipykernel>=6.29.5",
    "ipywidgets>=8.1.5",
    "lightning-fabric>=2.4.0",
    "litdata>=0.2.46",
    "modelscope[framework]>=1.19.1",
    "polars>=1.26.0",
    "pre-commit>=4.0.1",
    "py-spy>=0.4.0",
    "pydantic-settings>=2.6.1",
    "ruff>=0.7.2",
    "wsproto>=1.2.0",
]

