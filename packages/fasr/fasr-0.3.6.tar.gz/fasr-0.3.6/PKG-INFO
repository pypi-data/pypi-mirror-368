Metadata-Version: 2.4
Name: fasr
Version: 0.3.6
Summary: FASR: Fast Automatic Speech Recognition
Author-email: wangmengdi06 <wangmengdi06@58.com>
Requires-Python: <3.13,>=3.10
Requires-Dist: aiofiles>=24.1.0
Requires-Dist: aiohttp>=3.10.10
Requires-Dist: asr-decoder>=0.1.1
Requires-Dist: catalogue>=2.0.10
Requires-Dist: confection>=0.1.5
Requires-Dist: docarray==0.40
Requires-Dist: editdistance>=0.8.1
Requires-Dist: funasr-onnx>=0.4.1
Requires-Dist: funasr>=1.2.6
Requires-Dist: huggingface-hub>=0.27.0
Requires-Dist: hydra-core>=1.3.2
Requires-Dist: joblib>=1.4.2
Requires-Dist: jsonargparse[signatures,urls]>=4.38
Requires-Dist: kaldifst>=1.7.14
Requires-Dist: librosa>=0.9.2
Requires-Dist: lightning-utilities>=0.11.8
Requires-Dist: loguru>=0.7.2
Requires-Dist: modelscope>=1.19.1
Requires-Dist: numpy==1.23.4
Requires-Dist: online-fbank>=0.0.4
Requires-Dist: onnxruntime
Requires-Dist: protobuf>=3.20.0
Requires-Dist: pydantic>=2.9.2
Requires-Dist: pydub>=0.25.1
Requires-Dist: sentencepiece>=0.1.97
Requires-Dist: torch-complex>=0.4.4
Requires-Dist: torch>=2.1.0
Requires-Dist: torchaudio>=2.1.0
Requires-Dist: wasabi>=1.1.3
Provides-Extra: benchmark
Requires-Dist: pyaudio>=0.2.14; extra == 'benchmark'
Provides-Extra: dolphin
Requires-Dist: dataoceanai-dolphin>=20250519; extra == 'dolphin'
Provides-Extra: litdata
Requires-Dist: litdata>=0.2.47; extra == 'litdata'
Provides-Extra: serve
Requires-Dist: fastapi>=0.115.12; extra == 'serve'
Requires-Dist: websockets>=15.0.1; extra == 'serve'
Requires-Dist: wsproto>=1.2.0; extra == 'serve'
Description-Content-Type: text/markdown

# ğŸª é¡¹ç›®: fasr

Fast Auto Speech Recognition

## ğŸ“‹ ç®€ä»‹

    fasræ˜¯ä¸€æ¬¾å¿«é€Ÿä¸”æ˜“äºä½¿ç”¨çš„pythonåº“ï¼Œå®ƒæºäºFunASRï¼Œä¸“æ³¨äºæ¨ç†æ€§èƒ½ï¼Œç›®æ ‡æ˜¯æˆä¸ºä¸€ä¸ªå·¥ä¸šçº§åˆ«çš„pythonè¯­éŸ³è¯†åˆ«æ¨ç†åº“ã€‚

## ğŸ“‹ å®‰è£…

fasrå¯ä»¥é€šè¿‡ç›´æ¥é€šè¿‡pipå®‰è£…ï¼Œä½†æ˜¯å¦‚æœéœ€è¦ä½¿ç”¨gpuï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…pytorchå’Œonnxruntime-gpu
- å®‰è£…pytorchï¼š é€šè¿‡[å®˜ç½‘](https://pytorch.org/get-started/locally/)å®‰è£…å¯¹åº”cudaç‰ˆæœ¬
- å®‰è£…onnxruntime-gpu: é€šè¿‡[å®˜ç½‘](https://onnxruntime.ai/docs/install/)å®‰è£…å¯¹åº”cudaç‰ˆæœ¬
- å®‰è£…fasr
```bash
pip install fasr --upgrade
```



## ğŸ“‹ ä½¿ç”¨

- ä¸‹è½½æ¨¡å‹
```bash
fasr prepare online # å®æ—¶è¯­éŸ³è¯†åˆ«æ¨¡å‹
fasr prepare offline # ç¦»çº¿è¯­éŸ³è¯†åˆ«æ¨¡å‹
```
- æ„å»ºç¦»çº¿è¯­éŸ³è¯†åˆ«pipeline
```python
from fasr import AudioPipeline

# è¯­éŸ³è¯†åˆ«pipeline: ç«¯ç‚¹æ£€æµ‹->è¯­éŸ³è¯†åˆ«->æ·»åŠ æ ‡ç‚¹
asr = AudioPipeline().add_pipe('detector').add_pipe('recognizer').add_pipe('sentencizer')

# è¿è¡Œpipelineå¹¶è·å–æ–‡æœ¬
url = "https://xxxxx.mp3"
audio = asr(url)
for channel in audio.channels:
    print(channel.text)

# æ‰¹æ¬¡å¤„ç†
urls = get_urls()
audios = asr.run(urls)
# è·å–æ–‡æœ¬
for audio in audios:
    for channel in audio.channels:
        print(channel.text)

```

- æ„å»ºå®æ—¶è¯­éŸ³è¯†åˆ«pipeline
```python
from fasr import AudioPipeline, Audio
asr = AudioPipeline().add_pipe("online_detector").add_pipe("online_recognizer")

# æ¨¡æ‹Ÿæµå¼æ¥æ”¶éŸ³é¢‘æµ
waveform, sample_rate, is_last = get_waveform_from_stream()
audio_chunk = Audio().append_channel()
audio_chunk.is_last = ia_last
audio_chunk.channels[0].waveform = waveform
audio_chunk.channels[0].sample_rate = sample_rate
for token in asr(audio_chunk).channels[0].stream:
    print(token.text)
# æ¸…é™¤cacheï¼Œæ¢å¤ç»„ä»¶åˆå§‹çŠ¶æ€
asr.get_pipe("online_recognizer").component.reset()
asr.get_pipe("online_detector").component.reset()

```


## ğŸ“‹ æ€§èƒ½å¯¹æ¯”

###  åŒé€šé“éŸ³é¢‘

**vad->asr->punc**


æµ‹è¯•ç»“æœ

cpu: Intel(R) Xeon(R) Silver 4210 CPU @ 2.20GHz (wpai cpu 2æ ¸)

gpu: rtx6000 ï¼ˆwpai vgpu 20ï¼‰

| æ¡†æ¶ | è€—æ—¶ | æ¨ç†é€Ÿåº¦ | åŠ é€Ÿæ¯” |
|:----|:----|:----|----:|
|funasr|368.8s|46.34| 1.0|
|fasr|153.92s|111.03| 2.4|


###  vad


æµ‹è¯•ç»“æœ

cpu: Intel(R) Xeon(R) Silver 4210 CPU @ 2.20GHz (wpai cpu 2æ ¸)

gpu: rtx6000 ï¼ˆwpai vgpu 20ï¼‰

| æ¡†æ¶ | è€—æ—¶ | æ¨ç†é€Ÿåº¦ | åŠ é€Ÿæ¯” |
|:----|:----|:----|----:|
|funasr|219.8s|77.75| 1.0|
|fasr|86.32s|197.98| 2.55|


## å•é€šé“éŸ³é¢‘

###  pipeline

**vad->asr->punc**


æµ‹è¯•ç»“æœ

cpu: Intel(R) Xeon(R) Silver 4210 CPU @ 2.20GHz (wpai cpu 2æ ¸)

gpu: rtx6000 ï¼ˆwpai vgpu 20ï¼‰

| æ¡†æ¶ | è€—æ—¶ | æ¨ç†é€Ÿåº¦ | åŠ é€Ÿæ¯” |
|:----|:----|:----|----:|
|funasr|123.8s|22.05| 1.0|
|fasr|59.04s|46.24| 2.1|


###  vad


æµ‹è¯•ç»“æœ

cpu: Intel(R) Xeon(R) Silver 4210 CPU @ 2.20GHz (wpai cpu 2æ ¸)

gpu: rtx6000 ï¼ˆwpai vgpu 20ï¼‰

| æ¡†æ¶ | è€—æ—¶ | æ¨ç†é€Ÿåº¦ | åŠ é€Ÿæ¯” |
|:----|:----|:----|----:|
|funasr|59.26s|46.07| 1.0|
|fasr|36.84s|74.1| 1.61|


## AISHELL

###  pipeline

**vad->asr->punc**

æµ‹è¯•ç»“æœ

cpu: Intel(R) Xeon(R) Silver 4210 CPU @ 2.20GHz (wpai cpu 2æ ¸)

gpu: rtx6000 ï¼ˆwpai vgpu 20ï¼‰

| æ¡†æ¶ | è€—æ—¶ | æ¨ç†é€Ÿåº¦ | åŠ é€Ÿæ¯” |
|:----|:----|:----|----:|
|funasr|123.8s|18.65| 1.0|
|fasr|59.04s|32.71| 1.8|