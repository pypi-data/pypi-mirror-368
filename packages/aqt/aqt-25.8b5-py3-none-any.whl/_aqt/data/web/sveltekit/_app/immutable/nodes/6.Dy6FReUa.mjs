var ga=Object.defineProperty;var va=(n,e,a)=>e in n?ga(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a;var we=(n,e,a)=>va(n,typeof e!="symbol"?e+"":e,a);import{L as $a,M as pa,N as ma,O as ha,P as ya,s as Rt,Q as Ca,S as bs,T as pr,U as Ot,V as ht,W as ss,X as ct,Y as Vt,Z as os,_ as zr,$ as wa,a0 as _a,a1 as ka,a2 as Pa,a3 as xa,a4 as ba,a5 as Ss,a6 as Sa,a7 as Oa,a8 as Ra,a9 as Ta,aa as Da}from"../chunks/DgPlQ0Ae.mjs";import{e as Ia,f as Aa,b as La}from"../chunks/ig1EcQ_l.mjs";import{s as f,bc as vn,g as s,Q as $n,u as r,C as Ea,aL as zt,G as Os,F as Rs,am as Ts,bd as Ma,as as Ds,p as Oe,e as it,f as ie,c as $,d as Re,aZ as Na,aY as fs,al as Fa,h as te,i as U,_ as v,r as E,b as W,n as oe,j as q,k as m,l as ce,m as R,a as Ye,b7 as At,t as Z,aM as Va,be as za}from"../chunks/3W_oWfQO.mjs";import{d as Ue,g as qe,v as Ha,r as pn,y as Ba,z as Ga,s as N,x as mn,e as Se,c as hn,o as gs,t as Wa}from"../chunks/BmEJtw2x.mjs";import{c as Fr}from"../chunks/nz3iQd6B.mjs";import{b as vs,i as Is,S as ja}from"../chunks/D1eTcRVE.mjs";import"../chunks/BbkoyQuY.mjs";import{i as Te}from"../chunks/BlVs9ZMX.mjs";import{b as er}from"../chunks/DAG-5t49.mjs";import{p as G,i as Le,s as yn}from"../chunks/D_GJ3sV_.mjs";import{e4 as Cn,t as ot,e5 as Hr,I as B,aw as at,e6 as qa,cc as $s,u as Ua,e7 as Qa,e8 as Ya,q as dt,U as Ze,e9 as Ka,ea as Xa,eb as Za,ec as Ja,ed as eo,ee as to,ef as ro,eg as so,eh as no,ei as ao,ej as oo,ek as io,el as lo,em as As,en as uo,eo as Ls,ep as co,eq as wn,er as fo,es as go,et as Es,eu as vo,ev as $o,ew as po,ex as mo,ey as Ms,ez as ho,eA as yo,eB as Co,eC as wo,eD as _o,eE as ko,eF as Po,eG as xo,eH as bo,eI as So,eJ as Oo,eK as Ro,eL as To,eM as Do,eN as Io,eO as Ao,eP as Lo,eQ as _n,eR as Eo,eS as Mo,eT as No,eU as Fo,eV as Vo,eW as zo,eX as Ho,eY as Bo,eZ as Go,e_ as Wo,e$ as jo,f0 as qo,f1 as Uo,f2 as Qo,f3 as Yo,f4 as Ko,f5 as Xo,f6 as Zo,f7 as Jo,f8 as ei,f9 as ti,fa as ri,fb as si,fc as ni,fd as ai,fe as oi,ff as ii,fg as li,fh as ui,fi as ci,fj as Ns,fk as di,fl as fi,fm as gi,fn as vi,fo as $i,fp as pi,fq as mi,fr as Fs,fs as hi,ft as kn,fu as Pn,fv as xn,fw as yi,fx as Ci,fy as wi,fz as _i,fA as ki,fB as Pi,fC as xi,fD as bi,fE as Si,fF as Oi,fG as Ri,fH as Ti,fI as yr,fJ as is,fK as Vs,fL as Di,fM as bn,fN as Ii,fO as Sn,fP as Ai,fQ as On,fR as Li,fS as zs,fT as Ei,fU as Mi,fV as Rn,fW as Ni,fX as Fi,fY as Vi,fZ as zi,f_ as Hi,f$ as Bi,g0 as Gi,g1 as Wi,g2 as Hs,g3 as ji,g4 as Tn,cZ as Dn,dt as qi,g5 as Ui,cI as In,g6 as Wr,cq as Qi,cp as Yi,co as Ki,g7 as Xi,g8 as Zi,g9 as Ji,ga as el,gb as tl,gc as rl,gd as sl,ge as nl,gf as al,gg as ol,gh as il,gi as ll,gj as ul,gk as cl,gl as Bs,dC as Gs,gm as Ws,gn as dl,go as An,gp as fl,gq as Ln,gr as gl,gs as vl,gt as $l,gu as pl,gv as ml,gw as hl,gx as En,gy as Mn,gz as ls,gA as yl,gB as Cl,gC as wl,gD as _l,gE as kl,gF as Nn,gG as Fn,gH as Pl,gI as Vn,gJ as xl,gK as bl,gL as Sl,gM as Ol,gN as Rl,gO as Tl,gP as js,gQ as Dl,gR as Il,gS as Al,gT as Ll,gU as El,gV as Ml,gW as Nl,gX as Fl,gY as Vl,gZ as zl,g_ as Hl,g$ as Bl,h0 as Gl,h1 as Wl,h2 as jl,h3 as ql,h4 as Ul,h5 as Ql,h6 as Yl,V as Kl,h7 as Xl,h8 as Zl,h9 as Jl,ha as eu,hb as tu,hc as ru,hd as su,he as nu,hf as zn,hg as qs,hh as au,hi as ou,hj as iu,hk as lu,hl as uu,hm as cu,hn as du,ho as fu,hp as gu,hq as vu,hr as $u,hs as Us,ht as pu,hu as mu,hv as hu,hw as yu,hx as Cu,hy as wu,hz as _u,hA as Qs,hB as ku,hC as Pu,hD as xu}from"../chunks/Dz13baWI.mjs";import{b as et}from"../chunks/CuVdaCGl.mjs";import{a as ye,s as We,b as Pt,m as Ht,d as re,e as bu}from"../chunks/D-RwVtBd.mjs";import{C as Su}from"../chunks/9CB6GlwI.mjs";import{e as _r,i as jr,R as je,p as Ou}from"../chunks/BGFuA24G.mjs";import{c as us}from"../chunks/CAnfnSx8.mjs";import{T as ft}from"../chunks/S1KSW0IF.mjs";import{b as tt,H as he,a as xt,M as Hn}from"../chunks/g7cEFgse.mjs";import{d as kr,M as Bn,S as Ru,k as Tu,l as Du,m as Iu,p as Au,a as Gn,W as Lu,P as Eu,D as mr}from"../chunks/DIOE7tn-.mjs";import{a as Mu}from"../chunks/CcaWrs5J.mjs";import{C as Gt,R as Pr,a as ae,S as Je,E as kt}from"../chunks/Br4EJn2k.mjs";import{c as xr,b as Ft}from"../chunks/DIbnkDWM.mjs";import{a as Br,j as Nu,I as Ys,c as Wn,$ as Fu}from"../chunks/CH2sZ_jI.mjs";import{C as Lt}from"../chunks/-kIbJv1m.mjs";import{j as Ks,S as Vu,g as Xs,p as zu}from"../chunks/BQ8zJtcb.mjs";import{W as Qe}from"../chunks/DqFH_byw.mjs";import{m as jn}from"../chunks/Dbye-yJ_.mjs";import{L as Hu,S as Bu}from"../chunks/S6kiMGxJ.mjs";import{I as Gu}from"../chunks/BMVC1o6a.mjs";import{r as Wu}from"../chunks/KdHa5jG-.mjs";import{r as Cr}from"../chunks/to1jE7KW.mjs";import{k as ju}from"../chunks/ByZLrhA1.mjs";import{ac as ps,B as qn,A as Un,y as Zs,z as Js,C as qu,D as Uu,E as Qu,H as en,F as Yu,b as Ku,G as Qn,I as Xu,M as Zu,L as Ju,J as ec,K as tc,N as rc}from"../chunks/TOqr3sli.mjs";import{I as sc,i as nc,c as ac,C as oc,T as ic}from"../chunks/BBD1OOdO.mjs";import{t as wr,T as yt,c as lc,a as uc,e as cc}from"../chunks/LI0FF3-K.mjs";import{t as dc}from"../chunks/CD4lDFyh.mjs";import{S as tn,a as fc}from"../chunks/DB8w6JNV.mjs";function gc(n){f(n,n.v+1)}function vc(n){let e=0,a=Ea(0),i;return()=>{vn()&&(s(a),$n(()=>(e===0&&(i=r(()=>n(()=>gc(a)))),e+=1,()=>{zt().then(()=>{e-=1,e===0&&(i==null||i(),i=void 0)})})))}}function $c(n,e){var a=Ts,i=Ds,t=n();const o=Ue(t,h=>{var y=t!==n(),c,u=Ds,g=Ts;Os(i),Rs(a);try{c=Ma(()=>{$n(()=>{const x=n();y&&h(x)})})}finally{Os(u),Rs(g)}return y=!0,c});return e?{set:e,update:h=>e(h(n())),subscribe:o.subscribe}:{subscribe:o.subscribe}}function pc(n){let e;const a=vc(t=>{let o=!1;const h=n.subscribe(y=>{e=y,o&&t()});return o=!0,h});function i(){return vn()?(a(),e):qe(n)}return"set"in n?{get current(){return i()},set current(t){n.set(t)}}:{get current(){return i()}}}const mc=Object.freeze(Object.defineProperty({__proto__:null,derived:Ha,fromStore:pc,get:qe,readable:pn,readonly:Ba,toStore:$c,writable:Ue},Symbol.toStringTag,{value:"Module"}));function hc(n,e,...a){return yc(n,nc,e,a)}function yc(n,e,a,i){return function t(o,h){if(h>=i.length)return a(o);const y=new sc,c=i[h++];let u=-1;for(const g of o){const x=c(g,++u,o),C=y.get(x);C?C.push(g):y.set(x,[g])}for(const[g,x]of y)y.set(g,t(x,h));return e(y)}(n,0)}const Cc=ac("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function wc(n,e){for(var a=-1,i=n==null?0:n.length,t=Array(i);++a<i;)t[a]=e(n[a],a,n);return t}var rn=tn?tn.prototype:void 0,sn=rn?rn.toString:void 0;function Yn(n){if(typeof n=="string")return n;if(kr(n))return wc(n,Yn)+"";if(ps(n))return sn?sn.call(n):"";var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function _c(n){return n}var kc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pc=/^\w*$/;function ms(n,e){if(kr(n))return!1;var a=typeof n;return a=="number"||a=="symbol"||a=="boolean"||n==null||ps(n)?!0:Pc.test(n)||!kc.test(n)||e!=null&&n in Object(e)}var xc="Expected a function";function hs(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(xc);var a=function(){var i=arguments,t=e?e.apply(this,i):i[0],o=a.cache;if(o.has(t))return o.get(t);var h=n.apply(this,i);return a.cache=o.set(t,h)||o,h};return a.cache=new(hs.Cache||Bn),a}hs.Cache=Bn;var bc=500;function Sc(n){var e=hs(n,function(i){return a.size===bc&&a.clear(),i}),a=e.cache;return e}var Oc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rc=/\\(\\)?/g,Tc=Sc(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(Oc,function(a,i,t,o){e.push(t?o.replace(Rc,"$1"):i||a)}),e});function Dc(n){return n==null?"":Yn(n)}function Kn(n,e){return kr(n)?n:ms(n,e)?[n]:Tc(Dc(n))}function qr(n){if(typeof n=="string"||ps(n))return n;var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function Xn(n,e){e=Kn(e,n);for(var a=0,i=e.length;n!=null&&a<i;)n=n[qr(e[a++])];return a&&a==i?n:void 0}function Ic(n,e,a){var i=n==null?void 0:Xn(n,e);return i===void 0?a:i}var Ac=1,Lc=2;function Ec(n,e,a,i){var t=a.length,o=t;if(n==null)return!o;for(n=Object(n);t--;){var h=a[t];if(h[2]?h[1]!==n[h[0]]:!(h[0]in n))return!1}for(;++t<o;){h=a[t];var y=h[0],c=n[y],u=h[1];if(h[2]){if(c===void 0&&!(y in n))return!1}else{var g=new Ru,x;if(!(x===void 0?vs(u,c,Ac|Lc,i,g):x))return!1}}return!0}function Zn(n){return n===n&&!fc(n)}function Mc(n){for(var e=Tu(n),a=e.length;a--;){var i=e[a],t=n[i];e[a]=[i,t,Zn(t)]}return e}function Jn(n,e){return function(a){return a==null?!1:a[n]===e&&(e!==void 0||n in Object(a))}}function Nc(n){var e=Mc(n);return e.length==1&&e[0][2]?Jn(e[0][0],e[0][1]):function(a){return a===n||Ec(a,n,e)}}function Fc(n,e){return n!=null&&e in Object(n)}function Vc(n,e,a){e=Kn(e,n);for(var i=-1,t=e.length,o=!1;++i<t;){var h=qr(e[i]);if(!(o=n!=null&&a(n,h)))break;n=n[h]}return o||++i!=t?o:(t=n==null?0:n.length,!!t&&Du(t)&&Iu(h,t)&&(kr(n)||Au(n)))}function zc(n,e){return n!=null&&Vc(n,e,Fc)}var Hc=1,Bc=2;function Gc(n,e){return ms(n)&&Zn(e)?Jn(qr(n),e):function(a){var i=Ic(a,n);return i===void 0&&i===e?zc(a,n):vs(e,i,Hc|Bc)}}function Wc(n){return function(e){return e==null?void 0:e[n]}}function jc(n){return function(e){return Xn(e,n)}}function qc(n){return ms(n)?Wc(qr(n)):jc(n)}function Uc(n){return typeof n=="function"?n:n==null?_c:typeof n=="object"?kr(n)?Gc(n[0],n[1]):Nc(n):qc(n)}function Qc(n,e,a){a=typeof a=="function"?a:void 0;var i=a?a(n,e):void 0;return i===void 0?vs(n,e,void 0,a):!!i}function Yc(n,e){for(var a,i=-1,t=n.length;++i<t;){var o=e(n[i]);o!==void 0&&(a=a===void 0?o:a+o)}return a}function Kc(n,e){return n&&n.length?Yc(n,Uc(e)):0}function cs(){let n;return[new Promise(a=>n=a),n]}class Xc{constructor(e,a){we(this,"currentConfig");we(this,"currentAuxData");we(this,"configList");we(this,"cardStateCustomizer");we(this,"currentDeck");we(this,"deckLimits");we(this,"defaults");we(this,"addonComponents");we(this,"newCardsIgnoreReviewLimit");we(this,"applyAllParentLimits");we(this,"fsrs");we(this,"fsrsReschedule",Ue(!1));we(this,"fsrsHealthCheck");we(this,"legacyEvaluate");we(this,"daysSinceLastOptimization");we(this,"currentPresetName");we(this,"originalConfigsPromise");we(this,"originalConfigsResolve");we(this,"targetDeckId");we(this,"configs");we(this,"selectedIdx");we(this,"configListSetter");we(this,"modifiedConfigs",new Set);we(this,"removedConfigs",[]);we(this,"schemaModified");we(this,"_presetAssignmentsChanged",!1);we(this,"loadedPresets",new Set);var i,t;this.targetDeckId=e,this.currentDeck=a.currentDeck,this.defaults=a.defaults.config,this.configs=a.allConfig.map(o=>({config:o.config,useCount:o.useCount})),this.selectedIdx=Math.max(0,this.configs.findIndex(o=>o.config.id===this.currentDeck.configId)),this.sortConfigs(),this.cardStateCustomizer=Ue(a.cardStateCustomizer),this.deckLimits=Ue((t=(i=a.currentDeck)==null?void 0:i.limits)!=null?t:Jc()),this.newCardsIgnoreReviewLimit=Ue(a.newCardsIgnoreReviewLimit),this.applyAllParentLimits=Ue(a.applyAllParentLimits),this.fsrs=Ue(a.fsrs),this.fsrsHealthCheck=Ue(a.fsrsHealthCheck),this.legacyEvaluate=a.fsrsLegacyEvaluate,this.daysSinceLastOptimization=Ue(a.daysSinceLastFsrsOptimize),this.configs[this.selectedIdx].useCount-=1,this.currentConfig=Ue(this.getCurrentConfig()),this.currentAuxData=Ue(this.getCurrentAuxData()),this.currentPresetName=Ue(this.configs[this.selectedIdx].config.name),this.configList=pn(this.getConfigList(),o=>{this.configListSetter=o}),this.schemaModified=a.schemaModified,this.addonComponents=Ue([]),qe(this.configList),this.currentConfig.subscribe(o=>this.onCurrentConfigChanged(o)),this.currentAuxData.subscribe(o=>this.onCurrentAuxDataChanged(o)),this.loadedPresets.add(this.configs[this.selectedIdx].config.id),[this.originalConfigsPromise,this.originalConfigsResolve]=cs()}async markCurrentPresetAsLoaded(){const e=this.configs[this.selectedIdx].config.id,a=this.loadedPresets;if(e&&!a.has(e)){a.add(e);const i=await this.originalConfigsPromise,t=i.configs.findIndex(o=>o.id===e);t!==-1&&(i.configs[t]=Fr(this.configs[this.selectedIdx].config))}}setCurrentIndex(e){this.selectedIdx=e,this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList(),zt().then(()=>this.markCurrentPresetAsLoaded())}getCurrentName(){return this.configs[this.selectedIdx].config.name}getCurrentNameForSearch(){return this.getCurrentName().replace(/([\\"])/g,"\\$1")}setCurrentName(e){if(this.configs[this.selectedIdx].config.name===e)return;const a=this.ensureNewNameUnique(e),i=this.configs[this.selectedIdx].config;i.name=a,i.id&&this.modifiedConfigs.add(i.id),this.sortConfigs(),this.updateConfigList()}addConfig(e){this.addConfigFrom(e,this.defaults)}cloneConfig(e){this.addConfigFrom(e,this.configs[this.selectedIdx].config.config)}addConfigFrom(e,a){const i=this.ensureNewNameUnique(e),o={config:new $a({id:0n,name:i,config:new pa(Fr(a))}),useCount:0};this.configs.push(o),this.selectedIdx=this.configs.length-1,this._presetAssignmentsChanged=!0,this.sortConfigs(),this.updateCurrentConfig(),this.updateConfigList()}removalWilLForceFullSync(){return!this.schemaModified&&this.configs[this.selectedIdx].config.id!==0n}defaultConfigSelected(){return this.configs[this.selectedIdx].config.id===1n}removeCurrentConfig(){const e=this.configs[this.selectedIdx].config.id;if(e===1n)throw Error("can't remove default config");e!==0n&&(this.removedConfigs.push(e),this.schemaModified=!0),this.configs.splice(this.selectedIdx,1);const a=Math.max(0,this.selectedIdx-1);this.setCurrentIndex(a)}dataForSaving(e){const i=[...this.configs.map(t=>t.config).filter((t,o)=>o!==this.selectedIdx&&(t.id===0n||this.modifiedConfigs.has(t.id))),this.configs[this.selectedIdx].config];return{targetDeckId:this.targetDeckId,removedConfigIds:this.removedConfigs,configs:i,mode:e,cardStateCustomizer:qe(this.cardStateCustomizer),limits:qe(this.deckLimits),newCardsIgnoreReviewLimit:qe(this.newCardsIgnoreReviewLimit),applyAllParentLimits:qe(this.applyAllParentLimits),fsrs:qe(this.fsrs),fsrsReschedule:qe(this.fsrsReschedule),fsrsHealthCheck:qe(this.fsrsHealthCheck)}}presetAssignmentsChanged(){return this._presetAssignmentsChanged}async save(e){await ma(this.dataForSaving(e))}onCurrentConfigChanged(e){const a=this.configs[this.selectedIdx].config;Is(e,a.config)||(a.config=e,a.id&&this.modifiedConfigs.add(a.id))}onCurrentAuxDataChanged(e){const a=this.getCurrentAuxData();Is(a,e)||this.currentConfig.update(i=>{const t=new TextEncoder().encode(JSON.stringify(e));return i.other=t,i})}ensureNewNameUnique(e){return this.configs.findIndex(i=>i.config.name===e)!==-1?e+(new Date().getTime()/1e3).toFixed(0):e}updateCurrentConfig(){this.currentConfig.set(this.getCurrentConfig()),this.currentAuxData.set(this.getCurrentAuxData())}updateConfigList(){var e;(e=this.configListSetter)==null||e.call(this,this.getConfigList()),this.currentPresetName.set(this.configs[this.selectedIdx].config.name)}getCurrentConfig(){return Fr(this.configs[this.selectedIdx].config.config)}getCurrentAuxData(){const e=this.configs[this.selectedIdx].config.config;return Zc(e.other)}sortConfigs(){const e=this.configs[this.selectedIdx].config.name;this.configs.sort((a,i)=>Ia(a.config.name,i.config.name,{sensitivity:"base"})),this.selectedIdx=this.configs.findIndex(a=>a.config.name==e)}getConfigList(){return this.configs.map((a,i)=>{const t=a.useCount+(i===this.selectedIdx?1:0);return{name:a.config.name,current:i===this.selectedIdx,idx:i,useCount:t}})}getAllConfigs(){return Fr({configs:this.configs.map(e=>e.config),cardStateCustomizer:qe(this.cardStateCustomizer),limits:qe(this.deckLimits),newCardsIgnoreReviewLimit:qe(this.newCardsIgnoreReviewLimit),applyAllParentLimits:qe(this.applyAllParentLimits),fsrs:qe(this.fsrs),fsrsReschedule:qe(this.fsrsReschedule),currentConfig:qe(this.currentConfig)})}async isModified(){const e=await this.originalConfigsPromise,a=this.getAllConfigs();return!Qc(e,a,(i,t)=>{if(typeof i=="number"&&typeof t=="number")return Math.fround(i)===Math.fround(t)})}resolveOriginalConfigs(){this.originalConfigsResolve(this.getAllConfigs())}}function Zc(n){if(!n.length)return{};let e;try{e=JSON.parse(new TextDecoder().decode(n))}catch{return console.log("invalid json in deck config"),{}}return e.constructor!==Object?(console.log("invalid object in deck config"),{}):e}function Jc(){return new ha({})}class wt{constructor(e,a,i,t,o){we(this,"title");we(this,"value");we(this,"setter");we(this,"disabledValue");we(this,"startValue");we(this,"initialValue");this.title=e,this.value=this.initialValue=a,this.setter=i,this.disabledValue=t,this.startValue=o}reset(){this.setter(this.initialValue)}disable(){this.setter(this.disabledValue)}enable(e){var a,i;this.value=(i=(a=this.value)!=null?a:this.startValue)!=null?i:e,this.setter(this.value)}setValue(e){this.value=e,this.setter(e)}}async function ys(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),await zt()}function hr(n){return n.fsrsParams6?n.fsrsParams6:n.fsrsParams5?n.fsrsParams5:n.fsrsParams4}const ed=async({params:n})=>{const e=Number(n.deckId),a=BigInt(e),i=await ya({did:a});return{state:new Xc(BigInt(a),i)}},Vg=Object.freeze(Object.defineProperty({__proto__:null,load:ed},Symbol.toStringTag,{value:"Module"}));Cn("svelte",Ga);Cn("svelte/store",mc);function td(n,e){Oe(e,!1);const[a,i]=We(),t=()=>ye(y,"$components",a),o=()=>ye(c,"$auxData",a);let h=G(e,"state",8);const y=h().addonComponents,c=h().currentAuxData;Te();var u=it(),g=ie(u);{var x=C=>{ft(C,{title:"Add-ons",children:(l,_)=>{var p=it(),d=ie(p);_r(d,1,t,jr,(O,k)=>{var L=it(),z=ie(L);us(z,()=>s(k).component,(T,H)=>{H(T,yn(()=>s(k),{get data(){return Ht(),o()},set data(w){Pt(c,w)},$$legacy:!0}))}),$(O,L)}),$(l,p)},$$slots:{default:!0}})};Le(g,C=>{t(),r(()=>t().length)&&C(x)})}$(n,u),Re(),i()}function ns(n,e){let a,i;if(e instanceof Element){if(a=e,i=Array.prototype.indexOf.call(n,a),i<0)return null}else if(typeof e=="string"){const t=n.namedItem(e);if(!t||(a=t,i=Array.prototype.indexOf.call(n,a),i<0))return null}else if(e<0){i=n.length+e;const t=n.item(i);if(!t)return null;a=t}else{i=e;const t=n.item(i);if(!t)return null;a=t}return[a,i]}class rd{constructor(e){we(this,"parent");this.parent=e}insertElement(e,a){const i=ns(this.parent.children,a);if(!i)return-1;const[t,o]=i;return this.parent.insertBefore(e,t[0]),o}appendElement(e,a){var y;const i=ns(this.parent.children,a);if(!i)return-1;const[t,o]=i,h=(y=t.nextElementSibling)!=null?y:null;return this.parent.insertBefore(e,h),o+1}updateElement(e,a){const i=ns(this.parent.children,a);return i?(e(...i),!0):!1}}function sd(n){return new rd(n)}function nd(n){return n.nodeType===Node.ELEMENT_NODE}function ad(n){function e(i){Fa(n,i)}return[{get(){return fs(n)},available(){return Na(n)}},e]}function od(n,e,a,i){const t=Ue([]);t.subscribe(e);function o(_,p){t.update(d=>(d.splice(_,0,p),d))}const[h,y]=cs(),c=h.then(sd),u=Ue([]);async function g(_,p){const[d,O]=cs(),k=await c,L=n();function z(D){return!_.id||D.id===_.id}async function T(D,I){for(const F of D)for(const b of F.addedNodes){if(!nd(b)||!z(b))continue;const M=p(b,k);return M>=0&&o(M,L),O(void 0),I.disconnect()}}new MutationObserver(T).observe(k.parent,{childList:!0});const w={component:_,hostProps:L};return u.update(D=>(D.push(w),D)),await d,{destroy(){u.update(D=>(Mu(D,w),D))}}}async function x(_,p){return(await c).updateElement((O,k)=>{t.update(L=>(L[k]=_(L[k]),L))},p)}const C=i({addComponent:g,updateProps:x});function l(){const _=n();return t.update(p=>(p.push(_),p)),_}return a({getProps:l}),{dynamicSlotted:u,resolveSlotContainer:y,slotsInterface:C}}function id(){return{detach:Ue(!1)}}function ld({addComponent:n,updateProps:e}){function a(y,c=0){return n(y,(u,g)=>g.insertElement(u,c))}function i(y,c=-1){return n(y,(u,g)=>g.appendElement(u,c))}function t(y){return e(c=>(c.detach.set(!1),c),y)}function o(y){return e(c=>(c.detach.set(!0),c),y)}function h(y){return e(c=>(c.detach.update(u=>!u),c),y)}return{insert:a,append:i,show:t,hide:o,toggle:h}}const ud=Symbol("dynamicSlotting"),[nn,cd]=ad(ud);var dd=te('<div class="dynamically-slottable svelte-8in7my"><!> <!></div>');function gt(n,e){Oe(e,!1);const[a,i]=We(),t=()=>ye(l,"$dynamicSlotted",a);function o(k){return k}let h=G(e,"slotHost",8),y=G(e,"createProps",8,id),c=G(e,"updatePropsList",8,o),u=G(e,"setSlotHostContext",8,cd),g=G(e,"createInterface",8,ld);const{slotsInterface:x,resolveSlotContainer:C,dynamicSlotted:l}=od(y(),c(),u(),g());let _=G(e,"api",8);Object.assign(_(),x),Te();var p=dd(),d=U(p);Rt(d,e,"default",{});var O=v(d,2);_r(O,1,t,({component:k,hostProps:L})=>k.id,(k,L)=>{let z=()=>s(L).component,T=()=>s(L).hostProps;var H=it(),w=ie(H);us(w,h,(D,I)=>{I(D,{get id(){return z(),r(()=>z().id)},get hostProps(){return T()},children:(F,b)=>{var S=it(),M=ie(S);us(M,()=>z().component,(Y,Q)=>{Q(Y,yn(()=>z().props))}),$(F,S)},$$slots:{default:!0}})}),$(k,H)}),E(p),Gn(p,k=>C==null?void 0:C(k)),$(n,p),Re(),i()}var fd=te('<div class="item svelte-u5rx4p"><!></div>');function J(n,e){var x;Oe(e,!1);const[a,i]=We(),t=()=>ye(y,"$detach",a);let o=G(e,"id",8,void 0),h=G(e,"hostProps",8,void 0);nn.available()||console.log("Item: should always have a slotHostContext");const{detach:y}=(x=h())!=null?x:nn.get().getProps();Te();var c=fd(),u=U(c);{var g=C=>{var l=it(),_=ie(l);Rt(_,e,"default",{}),$(C,l)};Le(u,C=>{t()||C(g)})}E(c),W(()=>ot(c,"id",o())),$(n,c),Re(),i()}var gd=te(' <div class="inline-icon svelte-cpy9wq"><!></div>',1);function Bt(n,e){Oe(e,!1);let a=G(e,"title",8);Te(),oe();var i=gd(),t=ie(i),o=v(t),h=U(o);Br(h,{get icon(){return Nu}}),E(o),W(y=>{var c;N(t,`${(c=a())!=null?c:""} `),ot(o,"title",y)},[()=>(m(B),r(()=>Hr()))],q),$(n,i),Re()}var vd=te('<details><summary><!></summary> <div class="text svelte-pjduvg"><textarea class="card-state-customizer form-control svelte-pjduvg" spellcheck="false" autocapitalize="none"></textarea></div></details>'),$d=te('<div class="m-2"><!></div>');function pd(n,e){let a=G(e,"value",12),i=G(e,"title",8);var t=$d(),o=U(t);Gt(o,{children:(h,y)=>{var c=vd(),u=U(c),g=U(u);Bt(g,{get title(){return i()}}),E(u);var x=v(u,2),C=U(x);mn(C),E(x),E(c),xr(C,a),$(h,c)},$$slots:{default:!0,revert:(h,y)=>{Pr(h,{slot:"revert",defaultValue:"",get value(){return a()},set value(c){a(c)},$$legacy:!0})}}}),E(t),$(n,t)}var md=te('<span class="invisible svelte-xwrhci"> </span>'),hd=te('<span class="suffix svelte-xwrhci"></span>'),yd=te('<div tabindex="-1" role="button"><!></div> <div tabindex="-1" role="button"><!></div>',1),Cd=te('<div class="spin-box svelte-xwrhci"><input type="number" pattern="[0-9]*" inputmode="numeric" class="svelte-xwrhci"/> <!> <!></div>');function ea(n,e){Oe(e,!1);const a=R();let i=G(e,"value",12),t=G(e,"step",8,1),o=G(e,"min",8,1),h=G(e,"max",8,9999),y=G(e,"percentage",8,!1),c=R(),u=G(e,"focused",12,!1),g=R();function x(A){Number.isNaN(A)||i(Math.min(h(),Math.max(o(),A))),zt().then(()=>{At(c,s(c).value=s(l)),L(s(l))})}function C(A){if(Math.floor(A)===A)return 0;const j=A.toString().split(".")[1].length||0,K=y()?j-2:j;return Math.max(0,K)}let l=R();function _(){x(parseFloat(this.value)/s(g))}function p(A){u()&&(x(i()+(A.deltaY<0?t():-t())),A.preventDefault())}function d(A){x(i()+A),s(H)&&setTimeout(()=>d(A),w)}const O=[1500,1250,1e3,750,500,250];async function k(A){f(H,!0),w=128,f(D,setTimeout(A,250));for(const j of O)w=await new Promise(K=>setTimeout(()=>K(s(H)?w/2:128),j))}function L(A){f(T,qa({pct:A}).replaceAll("%","-%-").split("-"))}function z(){L(s(c).value)}let T=R(),H=R(!1),w,D=R();ce(()=>m(y()),()=>{f(g,y()?100:1)}),ce(()=>(m(i()),s(g),m(t())),()=>{f(l,(i()*s(g)).toFixed(C(t())))}),ce(()=>s(l),()=>{L(s(l))}),ce(()=>(m(y()),s(T)),()=>{f(a,y()&&!s(T)[0]?"2.2ch":void 0)}),Ye(),Te();var I=Cd(),F=U(I);at(F);let b;er(F,A=>f(c,A),()=>s(c));var S=v(F,2);{var M=A=>{var j=hd();_r(j,5,()=>s(T),jr,(K,se)=>{var ne=it(),ve=ie(ne);{var X=de=>{var $e=Z("%");$(de,$e)},be=de=>{var $e=md(),ke=U($e,!0);E($e),W(()=>N(ke,s(se))),$(de,$e)};Le(ve,de=>{s(se)=="%"?de(X):de(be,!1)})}$(K,ne)}),E(j),$(A,j)};Le(S,A=>{y()&&A(M)})}var Y=v(S,2);{var Q=A=>{var j=yd(),K=ie(j);let se;var ne=U(K);Ys(ne,{children:(de,$e)=>{Br(de,{get icon(){return Wn}})},$$slots:{default:!0}}),E(K);var ve=v(K,2);let X;var be=U(ve);Ys(be,{children:(de,$e)=>{Br(de,{get icon(){return Fu}})},$$slots:{default:!0}}),E(ve),W((de,$e,ke,Fe)=>{se=dt(K,1,"spinner decrement svelte-xwrhci",null,se,de),ot(K,"title",$e),X=dt(ve,1,"spinner increment svelte-xwrhci",null,X,ke),ot(ve,"title",Fe)},[()=>({active:i()>o()}),()=>(m(B),r(()=>Qa())),()=>({active:i()<h()}),()=>(m(B),r(()=>Ya()))],q),Se("click",K,()=>{s(c).focus(),i()>o()&&d(-t())}),Se("mousedown",K,()=>k(()=>{i()>o()&&d(-t())})),Se("mouseup",K,()=>{clearTimeout(s(D)),f(H,!1)}),Se("click",ve,()=>{s(c).focus(),i()<h()&&d(t())}),Se("mousedown",ve,()=>k(()=>{i()<h()&&d(t())})),Se("mouseup",ve,()=>{clearTimeout(s(D)),f(H,!1)}),$(A,j)};Le(Y,A=>{m(Ks),r(Ks)&&A(Q)})}E(I),W(()=>{ot(F,"min",o()*s(g)),ot(F,"max",h()*s(g)),ot(F,"step",t()*s(g)),$s(F,s(l)),b=Ua(F,"",b,{"padding-left":s(a)})}),Se("blur",F,_),Se("change",F,_),Se("input",F,z),Se("focusin",F,()=>u(!0)),Se("focusout",F,()=>u(!1)),Se("wheel",I,p),$(n,I),Re()}var wd=te("<!> <!>",1),_d=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),kd=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function _t(n,e){let a=G(e,"value",12),i=G(e,"defaultValue",8),t=G(e,"min",8,0),o=G(e,"max",8,9999),h=G(e,"step",8,.01),y=G(e,"percentage",8,!1),c=G(e,"focused",12,!1);var u=kd(),g=ie(u);Ze(g,()=>({"--cols":13})),je(g.lastChild,{children:(x,C)=>{var l=_d(),_=ie(l);Ze(_,()=>({"--col-size":7})),Lt(_.lastChild,{breakpoint:"xs",children:(d,O)=>{var k=it(),L=ie(k);Rt(L,e,"default",{}),$(d,k)},$$slots:{default:!0}}),E(_);var p=v(_,2);Ze(p,()=>({"--col-size":6})),Lt(p.lastChild,{breakpoint:"xs",children:(d,O)=>{je(d,{class:"flex-grow-1",children:(k,L)=>{var z=wd(),T=ie(z);Rt(T,e,"tabs",{});var H=v(T,2);Gt(H,{children:(w,D)=>{ea(w,{get min(){return t()},get max(){return o()},get step(){return h()},get percentage(){return y()},get value(){return a()},set value(I){a(I)},get focused(){return c()},set focused(I){c(I)},$$legacy:!0})},$$slots:{default:!0,revert:(w,D)=>{Pr(w,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(I){a(I)},$$legacy:!0})}}}),$(k,z)},$$slots:{default:!0}})},$$slots:{default:!0}}),E(p),$(x,l)},$$slots:{default:!0}}),E(g),$(n,u)}var Pd=te("<!> <!>",1),xd=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),bd=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function st(n,e){let a=G(e,"value",12),i=G(e,"defaultValue",8),t=G(e,"min",8,0),o=G(e,"max",8,9999);var h=bd(),y=ie(h);Ze(y,()=>({"--cols":13})),je(y.lastChild,{children:(c,u)=>{var g=xd(),x=ie(g);Ze(x,()=>({"--col-size":7})),Lt(x.lastChild,{breakpoint:"xs",children:(l,_)=>{var p=it(),d=ie(p);Rt(d,e,"default",{}),$(l,p)},$$slots:{default:!0}}),E(x);var C=v(x,2);Ze(C,()=>({"--col-size":6})),Lt(C.lastChild,{breakpoint:"xs",children:(l,_)=>{je(l,{class:"flex-grow-1",children:(p,d)=>{var O=Pd(),k=ie(O);Rt(k,e,"tabs",{});var L=v(k,2);Gt(L,{children:(z,T)=>{ea(z,{get min(){return t()},get max(){return o()},get value(){return a()},set value(H){a(H)},$$legacy:!0})},$$slots:{default:!0,revert:(z,T)=>{Pr(z,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(H){a(H)},$$legacy:!0})}}}),$(p,O)},$$slots:{default:!0}})},$$slots:{default:!0}}),E(C),$(c,g)},$$slots:{default:!0}}),E(y),$(n,h)}var Sd=te('<input type="date" class="svelte-67zife"/>'),Od=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Rd=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Td=te("<div><!></div>");function Dd(n,e){Oe(e,!1);let a=G(e,"date",12);ce(()=>m(a()),()=>{a(a()?a():"1970-01-01")}),Ye();var i=Td(),t=U(i);Gt(t,{children:(o,h)=>{var y=Rd(),c=ie(y);Ze(c,()=>({"--cols":13})),je(c.lastChild,{children:(u,g)=>{var x=Od(),C=ie(x);Ze(C,()=>({"--col-size":7})),Lt(C.lastChild,{breakpoint:"xs",children:(_,p)=>{var d=it(),O=ie(d);Rt(O,e,"default",{}),$(_,d)},$$slots:{default:!0}}),E(C);var l=v(C,2);Ze(l,()=>({"--col-size":6})),Lt(l.lastChild,{breakpoint:"xs",children:(_,p)=>{var d=Sd();at(d),xr(d,a),$(_,d)},$$slots:{default:!0}}),E(l),$(u,x)},$$slots:{default:!0}}),E(c),$(o,y)},$$slots:{default:!0}}),E(i),$(n,i),Re()}var Id=te("<!> <!> <!> <!> <!>",1),Ad=te("<!> <!> <!>",1),Ld=te("<!> <!> <!> <!>",1);function Ed(n,e){Oe(e,!1);const[a,i]=We(),t=()=>ye(C,"$config",a),o=()=>ye(p,"$fsrs",a),h=()=>ye(_,"$cardStateCustomizer",a),y=R(),c=R(),u=R();let g=G(e,"state",8),x=G(e,"api",8);const C=g().currentConfig,l=g().defaults,_=g().cardStateCustomizer,p=g().fsrs,d={maximumInterval:{title:wn(),help:co(),url:he.DeckOptions.maximumInterval},historicalRetention:{title:Ls(),help:uo(),sched:tt.FSRS},ignoreRevlogsBeforeMs:{title:As(),help:lo(),sched:tt.FSRS},startingEase:{title:io(),help:oo(),url:he.DeckOptions.startingEase,sched:tt.SM2},easyBonus:{title:ao(),help:no(),url:he.DeckOptions.easyBonus,sched:tt.SM2},intervalModifier:{title:so(),help:ro(),url:he.DeckOptions.intervalModifier,sched:tt.SM2},hardInterval:{title:to(),help:eo(),url:he.DeckOptions.hardInterval,sched:tt.SM2},newInterval:{title:Ja(),help:Za(),url:he.DeckOptions.newInterval,sched:tt.SM2},customScheduling:{title:Xa(),help:Ka(),url:"https://faqs.ankiweb.net/the-2021-scheduler.html#add-ons-and-custom-scheduling",global:!0}},O=Object.values(d);let k=R(null),L="";function z(M){L!=M&&(H&&M&&M!="1970-01-01"?(L=M,Ca({search:t().paramSearch||`preset:"${g().getCurrentNameForSearch()}" -is:suspended`,ignoreRevlogsBeforeDate:M}).then(Y=>{f(k,Y)})):f(k,null),H=!0)}let T=R(void 0),H=!0;const w=1e3;let D=R("alert-warning"),I=R(),F=R();function b(M){s(I).show(),s(F).to(M)}ce(()=>t(),()=>{f(y,t().maximumReviewInterval<50?"alert-danger":"alert-warning")}),ce(()=>(t(),B),()=>{f(c,t().maximumReviewInterval<180?fo():"")}),ce(()=>(s(T),t()),()=>{clearTimeout(s(T)),f(T,setTimeout(()=>{z(t().ignoreRevlogsBeforeDate)},w))}),ce(()=>s(k),()=>{s(k)&&(Number(s(k).included)/Number(s(k).total)<.1?f(D,"alert-danger"):s(k).included!=s(k).total?f(D,"alert-warning"):f(D,"alert-info"))}),ce(()=>(s(k),B),()=>{f(u,s(k)?go({included:s(k).included.toString(),totalCards:s(k).total.toString()}):"")}),Ye(),Te();const S=q(()=>(m(B),r(()=>Es())));ft(n,{get title(){return s(S)},children:(M,Y)=>{gt(M,{get slotHost(){return J},get api(){return x()},children:(Q,A)=>{var j=Ld(),K=ie(j);J(K,{children:(de,$e)=>{st(de,{get defaultValue(){return r(()=>l.maximumReviewInterval)},min:1,max:365*100,get value(){return t().maximumReviewInterval},set value(ke){re(C,r(t).maximumReviewInterval=ke,r(t))},children:(ke,Fe)=>{ae(ke,{$$events:{click:()=>b(Object.keys(d).indexOf("maximumInterval"))},children:(le,Pe)=>{oe();var Ge=Z();W(()=>N(Ge,r(()=>d.maximumInterval.title))),$(le,Ge)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var se=v(K,2);J(se,{children:(de,$e)=>{Qe(de,{get warning(){return s(c)},get className(){return s(y)}})},$$slots:{default:!0}});var ne=v(se,2);{var ve=de=>{var $e=Id(),ke=ie($e);J(ke,{children:(Ve,Ee)=>{_t(Ve,{get defaultValue(){return r(()=>l.initialEase)},min:1.31,max:5,get value(){return t().initialEase},set value(Ce){re(C,r(t).initialEase=Ce,r(t))},children:(Ce,_e)=>{ae(Ce,{$$events:{click:()=>b(Object.keys(d).indexOf("startingEase"))},children:(Me,Ne)=>{oe();var De=Z();W(()=>N(De,r(()=>d.startingEase.title))),$(Me,De)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Fe=v(ke,2);J(Fe,{children:(Ve,Ee)=>{_t(Ve,{get defaultValue(){return r(()=>l.easyMultiplier)},min:1,max:5,get value(){return t().easyMultiplier},set value(Ce){re(C,r(t).easyMultiplier=Ce,r(t))},children:(Ce,_e)=>{ae(Ce,{$$events:{click:()=>b(Object.keys(d).indexOf("easyBonus"))},children:(Me,Ne)=>{oe();var De=Z();W(()=>N(De,r(()=>d.easyBonus.title))),$(Me,De)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var le=v(Fe,2);J(le,{children:(Ve,Ee)=>{_t(Ve,{get defaultValue(){return r(()=>l.intervalMultiplier)},min:.5,max:2,get value(){return t().intervalMultiplier},set value(Ce){re(C,r(t).intervalMultiplier=Ce,r(t))},children:(Ce,_e)=>{ae(Ce,{$$events:{click:()=>b(Object.keys(d).indexOf("intervalModifier"))},children:(Me,Ne)=>{oe();var De=Z();W(()=>N(De,r(()=>d.intervalModifier.title))),$(Me,De)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Pe=v(le,2);J(Pe,{children:(Ve,Ee)=>{_t(Ve,{get defaultValue(){return r(()=>l.hardMultiplier)},min:.5,max:1.3,get value(){return t().hardMultiplier},set value(Ce){re(C,r(t).hardMultiplier=Ce,r(t))},children:(Ce,_e)=>{ae(Ce,{$$events:{click:()=>b(Object.keys(d).indexOf("hardInterval"))},children:(Me,Ne)=>{oe();var De=Z();W(()=>N(De,r(()=>d.hardInterval.title))),$(Me,De)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Ge=v(Pe,2);J(Ge,{children:(Ve,Ee)=>{_t(Ve,{get defaultValue(){return r(()=>l.lapseMultiplier)},max:1,get value(){return t().lapseMultiplier},set value(Ce){re(C,r(t).lapseMultiplier=Ce,r(t))},children:(Ce,_e)=>{ae(Ce,{$$events:{click:()=>b(Object.keys(d).indexOf("newInterval"))},children:(Me,Ne)=>{oe();var De=Z();W(()=>N(De,r(()=>d.newInterval.title))),$(Me,De)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),$(de,$e)},X=de=>{var $e=Ad(),ke=ie($e);_t(ke,{get defaultValue(){return r(()=>l.historicalRetention)},min:.5,max:1,percentage:!0,get value(){return t().historicalRetention},set value(Pe){re(C,r(t).historicalRetention=Pe,r(t))},children:(Pe,Ge)=>{ae(Pe,{$$events:{click:()=>b(Object.keys(d).indexOf("historicalRetention"))},children:(Ve,Ee)=>{oe();var Ce=Z();W(_e=>N(Ce,_e),[()=>(m(B),r(()=>Ls()))],q),$(Ve,Ce)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Fe=v(ke,2);J(Fe,{children:(Pe,Ge)=>{Dd(Pe,{get date(){return t().ignoreRevlogsBeforeDate},set date(Ve){re(C,r(t).ignoreRevlogsBeforeDate=Ve,r(t))},children:(Ve,Ee)=>{ae(Ve,{$$events:{click:()=>b(Object.keys(d).indexOf("ignoreRevlogsBeforeMs"))},children:(Ce,_e)=>{oe();var Me=Z();W(Ne=>N(Me,Ne),[()=>(m(B),r(()=>As()))],q),$(Ce,Me)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var le=v(Fe,2);J(le,{children:(Pe,Ge)=>{Qe(Pe,{get warning(){return s(u)},get className(){return s(D)}})},$$slots:{default:!0}}),$(de,$e)};Le(ne,de=>{o()?de(X,!1):de(ve)})}var be=v(ne,2);J(be,{children:(de,$e)=>{pd(de,{get title(){return r(()=>d.customScheduling.title)},get value(){return Ht(),h()},set value(ke){Pt(_,ke)},$$events:{click:()=>b(Object.keys(d).indexOf("customScheduling"))},$$legacy:!0})},$$slots:{default:!0}}),$(Q,j)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(M,Y)=>{const Q=q(()=>(m(B),r(()=>Es())));xt(M,{get title(){return s(Q)},get url(){return m(he),r(()=>he.DeckOptions.advanced)},slot:"tooltip",get fsrs(){return o()},get helpSections(){return O},$$events:{mount:A=>{f(I,A.detail.modal),f(F,A.detail.carousel)}}})}}}),Re(),i()}var Md=te("<!> <!>",1);function Nd(n,e){Oe(e,!1);const[a,i]=We(),t=()=>ye(y,"$config",a);let o=G(e,"state",8),h=G(e,"api",8);const y=o().currentConfig,c=o().defaults,u={disableAutoplay:{title:mo(),help:po()},skipQuestionWhenReplaying:{title:$o(),help:vo()}},g=Object.values(u);let x=R(),C=R();function l(p){s(x).show(),s(C).to(p)}Te();const _=q(()=>(m(B),r(()=>Ms())));ft(n,{get title(){return s(_)},children:(p,d)=>{gt(p,{get slotHost(){return J},get api(){return h()},children:(O,k)=>{var L=Md(),z=ie(L);J(z,{children:(H,w)=>{Je(H,{get defaultValue(){return r(()=>c.disableAutoplay)},get value(){return t().disableAutoplay},set value(D){re(y,r(t).disableAutoplay=D,r(t))},children:(D,I)=>{ae(D,{$$events:{click:()=>l(Object.keys(u).indexOf("disableAutoplay"))},children:(F,b)=>{oe();var S=Z();W(()=>N(S,r(()=>u.disableAutoplay.title))),$(F,S)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var T=v(z,2);J(T,{children:(H,w)=>{Je(H,{get defaultValue(){return r(()=>c.skipQuestionWhenReplayingAnswer)},get value(){return t().skipQuestionWhenReplayingAnswer},set value(D){re(y,r(t).skipQuestionWhenReplayingAnswer=D,r(t))},children:(D,I)=>{ae(D,{$$events:{click:()=>l(Object.keys(u).indexOf("skipQuestionWhenReplaying"))},children:(F,b)=>{oe();var S=Z();W(()=>N(S,r(()=>u.skipQuestionWhenReplaying.title))),$(F,S)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),$(O,L)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(p,d)=>{const O=q(()=>(m(B),r(()=>Ms())));xt(p,{get title(){return s(O)},get url(){return m(he),r(()=>he.DeckOptions.audio)},slot:"tooltip",get helpSections(){return g},$$events:{mount:k=>{f(x,k.detail.modal),f(C,k.detail.carousel)}}})}}}),Re(),i()}function an(){return[{label:xo(),value:Ot.DECK},{label:bo(),value:Ot.DECK_THEN_RANDOM_NOTES},{label:So(),value:Ot.LOWEST_POSITION},{label:Oo(),value:Ot.HIGHEST_POSITION},{label:Ro(),value:Ot.RANDOM_NOTES},{label:To(),value:Ot.RANDOM_CARDS}]}function on(){return[{label:Do(),value:ht.TEMPLATE},{label:Io(),value:ht.NO_SORT},{label:Ao(),value:ht.TEMPLATE_THEN_RANDOM},{label:Lo(),value:ht.RANDOM_NOTE_THEN_TEMPLATE},{label:_n(),value:ht.RANDOM_CARD}]}function Gr(n){return[{label:Fo(),value:ct.DAY},{label:Vo(),value:ct.DAY_THEN_DECK},{label:zo(),value:ct.DECK_THEN_DAY},{label:Ho(),value:ct.INTERVALS_ASCENDING},{label:Bo(),value:ct.INTERVALS_DESCENDING},...Fd(n),{label:Go(),value:ct.RETRIEVABILITY_ASCENDING},{label:Wo(),value:ct.RETRIEVABILITY_DESCENDING},{label:_n(),value:ct.RANDOM},{label:jo(),value:ct.ADDED},{label:qo(),value:ct.REVERSE_ADDED}]}function Vr(){return[{label:Eo(),value:ss.MIX_WITH_REVIEWS},{label:Mo(),value:ss.AFTER_REVIEWS},{label:No(),value:ss.BEFORE_REVIEWS}]}function ln(){return[{label:Xo(),value:Vt.SUSPEND},{label:Zo(),value:Vt.TAG_ONLY}]}function un(){return[{label:Jo(),value:os.DUE},{label:ei(),value:os.RANDOM}]}function cn(){return[{label:Co(),value:pr.BURY_CARD},{label:wo(),value:pr.ANSWER_AGAIN},{label:_o(),value:pr.ANSWER_GOOD},{label:ko(),value:pr.ANSWER_HARD},{label:Po(),value:pr.SHOW_REMINDER}]}function dn(){return[{label:ho(),value:bs.SHOW_ANSWER},{label:yo(),value:bs.SHOW_REMINDER}]}function Fd(n){const e=[{label:n?Uo():Qo(),value:ct.EASE_ASCENDING},{label:n?Yo():Ko(),value:ct.EASE_DESCENDING}];return n&&e.reverse(),e}var Vd=te("<!> <!> <!> <!> <!>",1);function zd(n,e){Oe(e,!1);const[a,i]=We(),t=()=>ye(y,"$config",a);let o=G(e,"state",8),h=G(e,"api",8);const y=o().currentConfig,c=o().defaults,u={secondsToShowQuestion:{title:ci(),help:ui()},secondsToShowAnswer:{title:li(),help:ii()},waitForAudio:{title:oi(),help:ai()},questionAction:{title:ni(),help:si()},answerAction:{title:ri(),help:ti()}},g=Object.values(u);let x=R(),C=R();function l(p){s(x).show(),s(C).to(p)}Te();const _=q(()=>(m(B),r(()=>Ns())));ft(n,{get title(){return s(_)},children:(p,d)=>{gt(p,{get slotHost(){return J},get api(){return h()},children:(O,k)=>{var L=Vd(),z=ie(L);J(z,{children:(I,F)=>{_t(I,{get defaultValue(){return r(()=>c.secondsToShowQuestion)},step:.1,get value(){return t().secondsToShowQuestion},set value(b){re(y,r(t).secondsToShowQuestion=b,r(t))},children:(b,S)=>{ae(b,{$$events:{click:()=>l(Object.keys(u).indexOf("secondsToShowQuestion"))},children:(M,Y)=>{oe();var Q=Z();W(()=>N(Q,r(()=>u.secondsToShowQuestion.title))),$(M,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var T=v(z,2);J(T,{children:(I,F)=>{_t(I,{get defaultValue(){return r(()=>c.secondsToShowAnswer)},step:.1,get value(){return t().secondsToShowAnswer},set value(b){re(y,r(t).secondsToShowAnswer=b,r(t))},children:(b,S)=>{ae(b,{$$events:{click:()=>l(Object.keys(u).indexOf("secondsToShowAnswer"))},children:(M,Y)=>{oe();var Q=Z();W(()=>N(Q,r(()=>u.secondsToShowAnswer.title))),$(M,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var H=v(T,2);J(H,{children:(I,F)=>{Je(I,{get defaultValue(){return r(()=>c.waitForAudio)},get value(){return t().waitForAudio},set value(b){re(y,r(t).waitForAudio=b,r(t))},children:(b,S)=>{ae(b,{$$events:{click:()=>l(Object.keys(u).indexOf("waitForAudio"))},children:(M,Y)=>{oe();var Q=Z();W(()=>N(Q,r(()=>u.waitForAudio.title))),$(M,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var w=v(H,2);J(w,{children:(I,F)=>{const b=q(()=>(m(dn),r(dn)));kt(I,{get defaultValue(){return r(()=>c.questionAction)},get choices(){return s(b)},get value(){return t().questionAction},set value(S){re(y,r(t).questionAction=S,r(t))},children:(S,M)=>{ae(S,{$$events:{click:()=>l(Object.keys(u).indexOf("questionAction"))},children:(Y,Q)=>{oe();var A=Z();W(()=>N(A,r(()=>u.questionAction.title))),$(Y,A)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var D=v(w,2);J(D,{children:(I,F)=>{const b=q(()=>(m(cn),r(cn)));kt(I,{get defaultValue(){return r(()=>c.answerAction)},get choices(){return s(b)},get value(){return t().answerAction},set value(S){re(y,r(t).answerAction=S,r(t))},children:(S,M)=>{ae(S,{$$events:{click:()=>l(Object.keys(u).indexOf("answerAction"))},children:(Y,Q)=>{oe();var A=Z();W(()=>N(A,r(()=>u.answerAction.title))),$(Y,A)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),$(O,L)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(p,d)=>{const O=q(()=>(m(B),r(()=>Ns())));xt(p,{get title(){return s(O)},get url(){return m(he),r(()=>he.DeckOptions.autoAdvance)},slot:"tooltip",get helpSections(){return g},$$events:{mount:k=>{f(x,k.detail.modal),f(C,k.detail.carousel)}}})}}}),Re(),i()}var Hd=te("<!> <!> <!>",1);function Bd(n,e){Oe(e,!1);const[a,i]=We(),t=()=>ye(y,"$config",a);let o=G(e,"state",8),h=G(e,"api",8);const y=o().currentConfig,c=o().defaults,u=`

`+di(),g={buryNewSiblings:{title:mi(),help:pi()+u},buryReviewSiblings:{title:$i(),help:vi()+u},buryInterdayLearningSiblings:{title:gi(),help:fi()+u}},x=Object.values(g);let C=R(),l=R();function _(d){s(C).show(),s(l).to(d)}Te();const p=q(()=>(m(B),r(()=>Fs())));ft(n,{get title(){return s(p)},children:(d,O)=>{gt(d,{get slotHost(){return J},get api(){return h()},children:(k,L)=>{var z=Hd(),T=ie(z);J(T,{children:(D,I)=>{Je(D,{get defaultValue(){return r(()=>c.buryNew)},get value(){return t().buryNew},set value(F){re(y,r(t).buryNew=F,r(t))},children:(F,b)=>{ae(F,{$$events:{click:()=>_(Object.keys(g).indexOf("buryNewSiblings"))},children:(S,M)=>{oe();var Y=Z();W(()=>N(Y,r(()=>g.buryNewSiblings.title))),$(S,Y)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var H=v(T,2);J(H,{children:(D,I)=>{Je(D,{get defaultValue(){return r(()=>c.buryReviews)},get value(){return t().buryReviews},set value(F){re(y,r(t).buryReviews=F,r(t))},children:(F,b)=>{ae(F,{$$events:{click:()=>_(Object.keys(g).indexOf("buryReviewSiblings"))},children:(S,M)=>{oe();var Y=Z();W(()=>N(Y,r(()=>g.buryReviewSiblings.title))),$(S,Y)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var w=v(H,2);J(w,{children:(D,I)=>{Je(D,{get defaultValue(){return r(()=>c.buryInterdayLearning)},get value(){return t().buryInterdayLearning},set value(F){re(y,r(t).buryInterdayLearning=F,r(t))},children:(F,b)=>{ae(F,{$$events:{click:()=>_(Object.keys(g).indexOf("buryInterdayLearningSiblings"))},children:(S,M)=>{oe();var Y=Z();W(()=>N(Y,r(()=>g.buryInterdayLearningSiblings.title))),$(S,Y)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),$(k,z)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(d,O)=>{const k=q(()=>(m(B),r(()=>Fs())));xt(d,{get title(){return s(k)},get url(){return m(he),r(()=>he.Studying.siblingsAndBurying)},slot:"tooltip",get helpSections(){return x},$$events:{mount:L=>{f(C,L.detail.modal),f(l,L.detail.carousel)}}})}}}),Re(),i()}function Gd(){}var Wd=te('<hr class="dropdown-divider"/>');function jd(n){var e=Wd();$(n,e)}var qd=te('<div class="save svelte-ymxw35"> </div>'),Ud=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Qd=te("<!> <!> <!> <!> <!> <!>",1),Yd=te('<div class="d-flex"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!> <!></div>');function Kd(n,e){Oe(e,!1);const a=window.getComputedStyle(document.body).direction=="rtl",i=hn();let t=G(e,"state",8);async function o(){if(await zt(),t().defaultConfigSelected()){alert(wi());return}const _=(t().removalWilLForceFullSync()?_i()+" ":"")+ki({name:t().getCurrentName()});if(confirm(Aa(_)))try{t().removeCurrentConfig(),i("remove")}catch(p){alert(p)}}async function h(_){await ys(),t().save(_)}const y="Control+Enter";let c=R(!1);Te();var u=Yd(),g=U(u);const x=q(()=>(m(Xs),r(()=>Xs(y))));Ze(g,()=>({"--border-left-radius":a?"0":"var(--border-radius)","--border-right-radius":a?"var(--border-radius)":"0"})),Hu(g.lastChild,{primary:!0,get tooltip(){return s(x)},$$events:{click:()=>h(zr.NORMAL)},children:(_,p)=>{var d=qd(),O=U(d,!0);E(d),W(k=>N(O,k),[()=>(m(B),r(()=>hi()))],q),$(_,d)},$$slots:{default:!0}}),E(g);var C=v(g,2);Vu(C,{keyCombination:y,$$events:{action:()=>h(zr.NORMAL)}});var l=v(C,2);Lu(l,{get show(){return s(c)},closeOnInsideClick:!0,inline:!0,$$events:{close:()=>f(c,!1)},$$slots:{reference:(_,p)=>{var d=Ud(),O=ie(d);Ze(O,()=>({"--border-right-radius":a?"0":"var(--border-radius)","--border-left-radius":a?"var(--border-radius)":"0"})),Gu(O.lastChild,{class:"chevron",slot:"reference",iconSize:80,$$events:{click:()=>f(c,!s(c))},children:(k,L)=>{Br(k,{get icon(){return Wn}})},$$slots:{default:!0}}),E(O),$(_,d)},floating:(_,p)=>{Eu(_,{slot:"floating",children:(d,O)=>{var k=Qd(),L=ie(k);mr(L,{$$events:{click:()=>i("add")},children:(I,F)=>{oe();var b=Z();W(S=>N(b,S),[()=>(m(B),r(()=>kn()))],q),$(I,b)},$$slots:{default:!0}});var z=v(L,2);mr(z,{$$events:{click:()=>i("clone")},children:(I,F)=>{oe();var b=Z();W(S=>N(b,S),[()=>(m(B),r(()=>Pn()))],q),$(I,b)},$$slots:{default:!0}});var T=v(z,2);mr(T,{$$events:{click:()=>i("rename")},children:(I,F)=>{oe();var b=Z();W(S=>N(b,S),[()=>(m(B),r(()=>xn()))],q),$(I,b)},$$slots:{default:!0}});var H=v(T,2);mr(H,{$$events:{click:o},children:(I,F)=>{oe();var b=Z();W(S=>N(b,S),[()=>(m(B),r(()=>yi()))],q),$(I,b)},$$slots:{default:!0}});var w=v(H,2);jd(w);var D=v(w,2);mr(D,{$$events:{click:()=>h(zr.APPLY_TO_CHILDREN)},children:(I,F)=>{oe();var b=Z();W(S=>N(b,S),[()=>(m(B),r(()=>Ci()))],q),$(I,b)},$$slots:{default:!0}}),$(d,k)},$$slots:{default:!0}})}}}),E(u),$(n,u),Re()}var Xd=te('<div class="modal fade" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true"><div class="modal-dialog"><div><div class="modal-header"><h5 class="modal-title" id="modalLabel"> </h5> <button type="button" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><form><div class="mb-3"><label for="prompt-input" class="col-form-label"> </label> <input id="prompt-input" type="text"/></div></form></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-primary">OK</button></div></div></div></div>');function Zd(n,e){Oe(e,!1);const[a,i]=We(),t=()=>ye(Ou,"$pageTheme",a),o=R();let h=G(e,"title",8),y=G(e,"prompt",8),c=G(e,"initialValue",8,""),u=G(e,"onOk",8);const g=Math.random().toString(36).substring(2),x=fs(jn);let C=R(),l,_=R();function p(){u()(s(_).value),l.hide(),f(o,c())}function d(){l.hide(),f(o,c())}function O(){s(_).focus(),L(!0)}function k(){L(!1)}const{set:L,remove:z}=Wu(d);gs(()=>{s(C).addEventListener("shown.bs.modal",O),s(C).addEventListener("hidden.bs.modal",k),l=new Hn(s(C),{keyboard:!1}),x.set(g,l)}),Wa(()=>{z(),s(C).removeEventListener("shown.bs.modal",O),s(C).removeEventListener("hidden.bs.modal",k)}),ce(()=>m(c()),()=>{f(o,c())}),Ye(),Te();var T=Xd(),H=U(T),w=U(H);let D;var I=U(w),F=U(I),b=U(F,!0);E(F);var S=v(F,2);let M;E(I);var Y=v(I,2),Q=U(Y),A=U(Q),j=U(A),K=U(j);E(j);var se=v(j,2);at(se);let ne;er(se,$e=>f(_,$e),()=>s(_)),E(A),E(Q),E(Y);var ve=v(Y,2),X=U(ve),be=v(X,2);E(ve),E(w),E(H),E(T),er(T,$e=>f(C,$e),()=>s(C)),W(($e,ke,Fe)=>{var le;D=dt(w,1,"modal-content svelte-18qg9px",null,D,$e),N(b,h()),M=dt(S,1,"btn-close svelte-18qg9px",null,M,ke),N(K,`${(le=y())!=null?le:""}:`),ne=dt(se,1,"form-control svelte-18qg9px",null,ne,Fe)},[()=>({"default-colors":t().isDark}),()=>({invert:t().isDark}),()=>({nightMode:t().isDark})],q),xr(se,()=>s(o),$e=>f(o,$e)),Se("submit",Q,zu(p)),Se("click",X,d),Se("click",be,p),$(n,T),et(e,"modalKey",g);var de=Re({modalKey:g});return i(),de}var Jd=te('<div class="button-bar svelte-1h7iokg"><!> <!></div>'),ef=te('<!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function tf(n,e){Oe(e,!1);const[a,i]=We(),t=()=>ye(c,"$configList",a),o=R(),h=R();let y=G(e,"state",8);const c=y().configList,u=hn(),g=()=>u("presetchange");function x(S){const M=Pi({decks:S.useCount});return`${S.name} (${M})`}function C(S){y().setCurrentIndex(S.detail.value),g()}function l(S){const M=S.trim();M.length&&(y().addConfig(M),g())}function _(S){const M=S.trim();M.length&&(y().cloneConfig(M),g())}function p(S){y().setCurrentName(S)}const d=fs(jn);let O=R(),k=R(""),L=R(""),z=R(Gd);function T(){f(L,kn()),f(z,l),f(k,""),d.get(s(O)).show()}function H(){f(L,Pn()),f(z,_),f(k,y().getCurrentName()),d.get(s(O)).show()}function w(){f(L,xn()),f(z,p),f(k,y().getCurrentName()),d.get(s(O)).show()}ce(()=>t(),()=>{f(o,t().findIndex(S=>S.current))}),ce(()=>(t(),s(o)),()=>{f(h,x(t()[s(o)]))}),Ye(),Te();var D=ef(),I=ie(D);const F=q(()=>(m(B),r(()=>xi())));Zd(I,{get title(){return s(L)},get prompt(){return s(F)},get initialValue(){return s(k)},get onOk(){return s(z)},get modalKey(){return s(O)},set modalKey(S){f(O,S)},$$legacy:!0});var b=v(I,2);Ze(b,()=>({"--gutter-block":"0.5rem","--sticky-borders":"0 0 1px"})),Bu(b.lastChild,{breakpoint:"sm",children:(S,M)=>{var Y=Jd(),Q=U(Y);ja(Q,{class:"flex-grow-1 mr1",get label(){return s(h)},get list(){return t()},parser:j=>({content:x(j),value:j.idx}),get value(){return s(o)},set value(j){f(o,j)},$$events:{change:C},$$legacy:!0});var A=v(Q,2);Kd(A,{get state(){return y()},$$events:{add:T,clone:H,rename:w,remove:g}}),E(Y),$(S,Y)},$$slots:{default:!0}}),E(b),$(n,D),Re(),i()}var rf=te('<li><button class="svelte-kyz7n1"> </button></li>'),sf=te('<ul class="svelte-kyz7n1"></ul>');function ds(n,e){Oe(e,!1);let a=G(e,"tabs",8),i=G(e,"value",12),t=R(o());function o(){const u=a().slice().reverse().findIndex(g=>g.value!==null);return u===-1?0:a().length-u-1}function h(u){for(const[g,x]of a().entries())u===g?x.enable(i()):u>g?x.reset():x.disable()}const y=u=>()=>f(t,u);ce(()=>s(t),()=>{h(s(t))}),ce(()=>(m(a()),s(t)),()=>{var u;i((u=a()[s(t)].value)!=null?u:0)}),ce(()=>(m(a()),s(t),m(i())),()=>{a()[s(t)].setValue(i())}),Ye(),Te();var c=sf();_r(c,5,a,jr,(u,g,x)=>{var C=rf();let l;var _=U(C),p=Va(()=>y(x)),d=U(_,!0);E(_),E(C),W(O=>{l=dt(C,1,"svelte-kyz7n1",null,l,O),N(d,(s(g),r(()=>s(g).title)))},[()=>({active:s(t)===x})],q),Se("click",_,function(...O){var k;(k=s(p))==null||k.apply(this,O)}),$(u,C)}),E(c),$(n,c),Re()}var nf=te("<!> <!> <!> <!> <!>",1);function af(n,e){var A,j,K,se,ne,ve;Oe(e,!1);const[a,i]=We(),t=()=>ye(C,"$config",a),o=()=>ye(l,"$limits",a),h=()=>ye(p,"$newCardsIgnoreReviewLimit",a),y=()=>ye(d,"$applyAllParentLimits",a),c=R();let u=G(e,"state",8),g=G(e,"api",8);function x(){At(T,s(T)[0]=new wt(yr(),t().newPerDay,X=>re(C,r(t).newPerDay=X,r(t)),t().newPerDay,null)),At(H,s(H)[0]=new wt(yr(),t().reviewsPerDay,X=>re(C,r(t).reviewsPerDay=X,r(t)),t().reviewsPerDay,null))}const C=u().currentConfig,l=u().deckLimits,_=u().defaults,p=u().newCardsIgnoreReviewLimit,d=u().applyAllParentLimits,O=`

`+bi()+`

`+Si(),k=`

`+Oi()+O,L=Hr()+`

`+Ri(),z=Hr()+`

`+Ti(),T=R([new wt(yr(),t().newPerDay,X=>re(C,r(t).newPerDay=X,r(t)),t().newPerDay,null),new wt(is(),(A=o().new)!=null?A:null,X=>re(l,r(o).new=X!=null?X:void 0,r(o)),null,null),new wt(Vs(),o().newTodayActive&&(j=o().newToday)!=null?j:null,X=>re(l,r(o).newToday=X!=null?X:void 0,r(o)),null,(K=o().newToday)!=null?K:null)]),H=R([new wt(yr(),t().reviewsPerDay,X=>re(C,r(t).reviewsPerDay=X,r(t)),t().reviewsPerDay,null),new wt(is(),(se=o().review)!=null?se:null,X=>re(l,r(o).review=X!=null?X:void 0,r(o)),null,null),new wt(Vs(),o().reviewTodayActive&&(ne=o().reviewToday)!=null?ne:null,X=>re(l,r(o).reviewToday=X!=null?X:void 0,r(o)),null,(ve=o().reviewToday)!=null?ve:null)]);let w=R(0),D=R(0);const I={newLimit:{title:On(),help:Ai()+O,url:he.DeckOptions.newCardsday},reviewLimit:{title:Sn(),help:Ii()+k,url:he.DeckOptions.maximumReviewsday},newCardsIgnoreReviewLimit:{title:bn(),help:L,url:he.DeckOptions.newCardsday,global:!0},applyAllParentLimits:{title:Di(),help:z,url:he.DeckOptions.limitsFromTop,global:!0}},F=Object.values(I);let b=R(),S=R();function M(X){s(b).show(),s(S).to(X)}ce(()=>(s(w),s(D),B),()=>{f(c,Math.min(9999,s(w)*10)>s(D)?Li({cards:s(w),expected:Math.min(9999,s(w)*10)}):"")}),Ye(),Te();const Y=q(()=>(m(B),r(()=>zs())));ft(n,{get title(){return s(Y)},children:(X,be)=>{gt(X,{get slotHost(){return J},get api(){return g()},children:(de,$e)=>{var ke=nf(),Fe=ie(ke);J(Fe,{children:(Ee,Ce)=>{st(Ee,{get defaultValue(){return r(()=>_.newPerDay)},get value(){return s(w)},set value(_e){f(w,_e)},children:(_e,Me)=>{ae(_e,{$$events:{click:()=>M(Object.keys(I).indexOf("newLimit"))},children:(Ne,De)=>{oe();var nt=Z();W(()=>N(nt,r(()=>I.newLimit.title))),$(Ne,nt)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(_e,Me)=>{ds(_e,{slot:"tabs",get tabs(){return s(T)},get value(){return s(w)},set value(Ne){f(w,Ne)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var le=v(Fe,2);J(le,{children:(Ee,Ce)=>{st(Ee,{get defaultValue(){return r(()=>_.reviewsPerDay)},get value(){return s(D)},set value(_e){f(D,_e)},children:(_e,Me)=>{ae(_e,{$$events:{click:()=>M(Object.keys(I).indexOf("reviewLimit"))},children:(Ne,De)=>{oe();var nt=Z();W(()=>N(nt,r(()=>I.reviewLimit.title))),$(Ne,nt)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(_e,Me)=>{ds(_e,{slot:"tabs",get tabs(){return s(H)},get value(){return s(D)},set value(Ne){f(D,Ne)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var Pe=v(le,2);J(Pe,{children:(Ee,Ce)=>{Qe(Ee,{get warning(){return s(c)}})},$$slots:{default:!0}});var Ge=v(Pe,2);J(Ge,{children:(Ee,Ce)=>{Je(Ee,{defaultValue:!1,get value(){return Ht(),h()},set value(_e){Pt(p,_e)},children:(_e,Me)=>{ae(_e,{$$events:{click:()=>M(Object.keys(I).indexOf("newCardsIgnoreReviewLimit"))},children:(Ne,De)=>{Bt(Ne,{get title(){return r(()=>I.newCardsIgnoreReviewLimit.title)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Ve=v(Ge,2);J(Ve,{children:(Ee,Ce)=>{Je(Ee,{defaultValue:!1,get value(){return Ht(),y()},set value(_e){Pt(d,_e)},children:(_e,Me)=>{ae(_e,{$$events:{click:()=>M(Object.keys(I).indexOf("applyAllParentLimits"))},children:(Ne,De)=>{Bt(Ne,{get title(){return r(()=>I.applyAllParentLimits.title)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),$(de,ke)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(X,be)=>{const de=q(()=>(m(B),r(()=>zs())));xt(X,{get title(){return s(de)},get url(){return m(he),r(()=>he.DeckOptions.dailyLimits)},slot:"tooltip",get helpSections(){return F},$$events:{mount:$e=>{f(b,$e.detail.modal),f(S,$e.detail.carousel)}}})}}}),et(e,"onPresetChange",x);var Q=Re({onPresetChange:x});return i(),Q}var of=te("<!> <!> <!> <!> <!>",1);function lf(n,e){Oe(e,!1);const[a,i]=We(),t=()=>ye(c,"$config",a),o=()=>ye(g,"$fsrs",a);let h=G(e,"state",8),y=G(e,"api",8);const c=h().currentConfig,u=h().defaults,g=h().fsrs,x=`

`+Ei();let C=R([]);const l={newGatherPriority:{title:Wi(),help:Gi()+x},newCardSortOrder:{title:Bi(),help:Hi()+x},newReviewPriority:{title:zi(),help:Vi()+x},interdayStepPriority:{title:Fi(),help:Ni()+x},reviewSortOrder:{title:Rn(),help:Mi()+x}},_=Object.values(l);let p=R(),d=R();function O(L){s(p).show(),s(d).to(L)}ce(()=>(t(),s(C),Ot),()=>{switch(t().newCardGatherPriority){case Ot.RANDOM_NOTES:f(C,[ht.TEMPLATE_THEN_RANDOM,ht.RANDOM_NOTE_THEN_TEMPLATE]);break;case Ot.RANDOM_CARDS:f(C,[ht.TEMPLATE_THEN_RANDOM,ht.RANDOM_NOTE_THEN_TEMPLATE,ht.RANDOM_CARD]);break;default:f(C,[]);break}s(C).includes(t().newCardSortOrder)&&re(c,r(t).newCardSortOrder=0,r(t)),t().newCardSortOrder in ht||re(c,r(t).newCardSortOrder=0,r(t))}),Ye(),Te();const k=q(()=>(m(B),r(()=>Hs())));ft(n,{get title(){return s(k)},children:(L,z)=>{gt(L,{get slotHost(){return J},get api(){return y()},children:(T,H)=>{var w=of(),D=ie(w);J(D,{children:(M,Y)=>{const Q=q(()=>(m(an),r(an)));kt(M,{get defaultValue(){return r(()=>u.newCardGatherPriority)},get choices(){return s(Q)},get value(){return t().newCardGatherPriority},set value(A){re(c,r(t).newCardGatherPriority=A,r(t))},children:(A,j)=>{ae(A,{$$events:{click:()=>O(Object.keys(l).indexOf("newGatherPriority"))},children:(K,se)=>{oe();var ne=Z();W(()=>N(ne,r(()=>l.newGatherPriority.title))),$(K,ne)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var I=v(D,2);J(I,{children:(M,Y)=>{const Q=q(()=>(m(on),r(on)));kt(M,{get defaultValue(){return r(()=>u.newCardSortOrder)},get choices(){return s(Q)},get disabledChoices(){return s(C)},get value(){return t().newCardSortOrder},set value(A){re(c,r(t).newCardSortOrder=A,r(t))},children:(A,j)=>{ae(A,{$$events:{click:()=>O(Object.keys(l).indexOf("newCardSortOrder"))},children:(K,se)=>{oe();var ne=Z();W(()=>N(ne,r(()=>l.newCardSortOrder.title))),$(K,ne)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var F=v(I,2);J(F,{children:(M,Y)=>{const Q=q(()=>(m(Vr),r(Vr)));kt(M,{get defaultValue(){return r(()=>u.newMix)},get choices(){return s(Q)},get value(){return t().newMix},set value(A){re(c,r(t).newMix=A,r(t))},children:(A,j)=>{ae(A,{$$events:{click:()=>O(Object.keys(l).indexOf("newReviewPriority"))},children:(K,se)=>{oe();var ne=Z();W(()=>N(ne,r(()=>l.newReviewPriority.title))),$(K,ne)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var b=v(F,2);J(b,{children:(M,Y)=>{const Q=q(()=>(m(Vr),r(Vr)));kt(M,{get defaultValue(){return r(()=>u.interdayLearningMix)},get choices(){return s(Q)},get value(){return t().interdayLearningMix},set value(A){re(c,r(t).interdayLearningMix=A,r(t))},children:(A,j)=>{ae(A,{$$events:{click:()=>O(Object.keys(l).indexOf("interdayStepPriority"))},children:(K,se)=>{oe();var ne=Z();W(()=>N(ne,r(()=>l.interdayStepPriority.title))),$(K,ne)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var S=v(b,2);J(S,{children:(M,Y)=>{const Q=q(()=>(m(Gr),o(),r(()=>Gr(o()))));kt(M,{get defaultValue(){return r(()=>u.reviewOrder)},get choices(){return s(Q)},get value(){return t().reviewOrder},set value(A){re(c,r(t).reviewOrder=A,r(t))},children:(A,j)=>{ae(A,{$$events:{click:()=>O(Object.keys(l).indexOf("reviewSortOrder"))},children:(K,se)=>{oe();var ne=Z();W(()=>N(ne,r(()=>l.reviewSortOrder.title))),$(K,ne)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),$(T,w)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(L,z)=>{const T=q(()=>(m(B),r(()=>Hs())));xt(L,{get title(){return s(T)},get url(){return m(he),r(()=>he.DeckOptions.displayOrder)},slot:"tooltip",get helpSections(){return _},$$events:{mount:H=>{f(p,H.detail.modal),f(d,H.detail.carousel)}}})}}}),Re(),i()}var uf=te('<textarea class="w-100 svelte-29jwoy"></textarea>');function cf(n,e){Oe(e,!1);let a=G(e,"value",12),i=G(e,"defaults",8),t=R(),o=R();function h(){s(o)&&(At(o,s(o).style.height="auto"),At(o,s(o).style.height=`${s(o).scrollHeight+2}px`))}function y(x){return x.map(C=>C.toFixed(4)).join(", ")}const c=[0,17,19,21];function u(x){const C=x.target,l=C.value.replace(/ /g,"").split(",").filter(_=>_).map(_=>Number(_));c.includes(l.length)?a(l):(alert(ji()),C.value=s(t))}ce(()=>(m(a()),zt),()=>{f(t,y(a())),zt().then(h)}),Ye(),Te();var g=uf();Se("resize",za,h),mn(g),er(g,x=>f(o,x),()=>s(o)),W(x=>{$s(g,s(t)),ot(g,"placeholder",x)},[()=>(m(i()),r(()=>y(i())))],q),Se("blur",g,u),$(n,g),Re()}var df=te("<!> <!>",1);function ff(n,e){let a=G(e,"value",12),i=G(e,"defaultValue",8),t=G(e,"defaults",8);var o=df(),h=ie(o);Rt(h,e,"default",{});var y=v(h,2);Gt(y,{children:(c,u)=>{cf(c,{get defaults(){return t()},get value(){return a()},set value(g){a(g)},$$legacy:!0})},$$slots:{default:!0,revert:(c,u)=>{Pr(c,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(g){a(g)},$$legacy:!0})}}}),$(n,o)}var gf=te('<input type="text" class="w-100 mb-1"/>');function vf(n,e){let a=G(e,"value",12),i=G(e,"placeholder",8);Gt(n,{children:(t,o)=>{var h=gf();at(h),W(()=>ot(h,"placeholder",i())),xr(h,a),$(t,h)},$$slots:{default:!0}})}var Be=(n=>(n[n.time=0]="time",n[n.count=1]="count",n[n.memorized=2]="memorized",n))(Be||{}),Ie=(n=>(n[n.ratio=0]="ratio",n[n.time=1]="time",n[n.count=2]="count",n[n.memorized=3]="memorized",n))(Ie||{});function fn(n,e,a,i){const h=qn().domain([70,99]).range([e.marginLeft,e.width-e.marginRight]),y={0:a.map(l=>({...l,y:l.timeCost/l.memorized})),1:a.map(l=>({...l,y:l.timeCost/l.learnSpan})),2:a.map(l=>({...l,y:l.count/l.learnSpan})),3:a.map(l=>({...l,y:l.memorized}))}[i],c=l=>i==1||i==0?wr(l,!0):l.toString(),u=new Intl.NumberFormat(void 0,{style:"percent",minimumFractionDigits:0,maximumFractionDigits:0}),g=l=>u.format(l/100),x={0:l=>Ui({time:wr(l)}),1:l=>qi({count:parseFloat((l/60).toPrecision(2))}),2:l=>Dn({count:Math.round(l)}),3:l=>Tn({memorized:Math.round(l).toFixed(0)})}[i];function C(l){return`${Wr()}: ${g(l)}<br>`}return ta(n,e,y,h,x,C,(l,_)=>{},c,g)}function as(n,e,a,i){const t=new Date,o=a.map(p=>({...p,x:new Date(t.getTime()+p.x*24*60*60*1e3)})),h={1:o.map(p=>({...p,y:p.count})),0:o.map(p=>({...p,y:p.timeCost})),2:o.map(p=>({...p,y:p.memorized}))}[i],y=t,c=Un(h,p=>p.x),u=dc().domain([y,c]).range([e.marginLeft,e.width-e.marginRight]),g=p=>i==0?wr(p,!0):p.toString(),x={0:wr,1:p=>In({reviews:Math.round(p)}),2:p=>Tn({memorized:Math.round(p).toFixed(0)})}[i],C={1:Dn,0:({count:p})=>wr(p),2:Yi}[i];function l(p,d){const O=h.filter(z=>z.label==d),k=i==2?O[O.length-1].memorized-O[0].memorized:Kc(O,z=>z.y),L=k/((O==null?void 0:O.length)||1);Qn(`#${d}:<br/>
                ${Qi()}: ${C({count:L})}<br/>
                ${Ki()}: ${x(k)}`,p.pageX,p.pageY)}function _(p){const d=+((p.getTime()-Date.now())/864e5).toFixed();return`Date: ${La(p)}<br>In ${d} Days<br>`}return ta(n,e,h,u,x,_,l,g,void 0)}function ta(n,e,a,i,t,o,h,y,c){const u=Zs(n);if(u.selectAll(".lines").remove(),u.selectAll(".hover-columns").remove(),u.selectAll(".focus-line").remove(),u.selectAll(".legend").remove(),a.length==0)return Js(u,!1),[];const g=u.transition().duration(600);u.select(".x-ticks").call(w=>w.transition(g).call(qu(i).ticks(7).tickSizeOuter(0).tickFormat(c))).attr("direction","ltr");const x=Un(a,w=>w.y),C=qn().range([e.height-e.marginBottom,e.marginTop]).domain([0,x]).nice();u.select(".y-ticks").call(w=>w.transition(g).call(Uu(C).ticks(e.height/50).tickSizeOuter(0).tickFormat(y))).attr("direction","ltr"),u.select(".y-ticks .y-axis-title").remove(),u.select(".y-ticks").append("text").attr("class","y-axis-title").attr("transform","rotate(-90)").attr("y",0-e.marginLeft).attr("x",0-e.height/2).attr("font-size","1rem").attr("dy","1.1em").attr("fill","currentColor");const l=a.map(w=>[i(w.x),C(w.y),w.label]),_=hc(l,w=>Object.assign(w,{z:w[0][2]}),w=>w[2]),p=Cc;u.append("g").attr("class","lines").attr("fill","none").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(Array.from(_.entries())).join("path").attr("vector-effect","non-scaling-stroke").attr("stroke",(w,D)=>p[D%p.length]).attr("d",w=>Qu()(w[1].map(D=>[D[0],D[1]]))).attr("data-group",w=>w[0]);const d=u.append("line").attr("class","focus-line").attr("y1",e.marginTop).attr("y2",e.height-e.marginBottom).attr("stroke","black").attr("stroke-width",1).style("opacity",0),O=Array.from(_.values()).reduce((w,D)=>w.length>D.length?w:D),k=e.width/O.length;u.append("g").attr("class","hover-columns").selectAll("rect").data(O).join("rect").attr("x",w=>w[0]-k/2).attr("y",e.marginTop).attr("width",k).attr("height",e.height-e.marginTop-e.marginBottom).attr("fill","transparent").on("mousemove",L).on("mouseout",()=>{d.style("opacity",0),en()});function L(w,D){Yu(w,document.body);const I=i.invert(D[0]),F={};_.forEach((S,M)=>{const Y=Ku(j=>i.invert(j[0])).left,Q=Y(S,I),A=S[Q];A&&(F[M]=C.invert(A[1]))}),d.attr("x1",D[0]).attr("x2",D[0]).style("opacity",1);let b=o(I);for(const[S,M]of Object.entries(F))u.select(`path[data-group="${S}"]`).classed("hidden")||(b+=`<span style="color:${p[(parseInt(S)-1)%p.length]}">■</span> #${S}: ${t(M)}<br>`);Qn(b,w.pageX,w.pageY)}const z=u.append("g").attr("class","legend").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","start").selectAll("g").data(Array.from(_.keys())).join("g").attr("transform",(w,D)=>`translate(0,${D*20})`).attr("cursor","pointer").on("click",(w,D)=>T(w,D)).on("mousemove",h).on("mouseout",en);z.append("rect").attr("x",e.width-e.marginRight+36).attr("width",12).attr("height",12).attr("fill",(w,D)=>p[D%p.length]),z.append("text").attr("x",e.width-e.marginRight+52).attr("y",7).attr("dy","0.3em").attr("fill","currentColor").text(w=>`#${w}`);const T=(w,D)=>{const I=D,F=u.select(`path[data-group="${I}"]`),b=F.classed("hidden"),S=w.currentTarget;F.classed("hidden",!b),F.style("display",()=>b?null:"none"),Zs(S).select("rect").style("opacity",b?1:.5)};return Js(u,!0),[]}var $f=te('<span class="day svelte-4k9s7n"> </span> <div class="input-container svelte-4k9s7n"><input type="range" list="easy_day_steplist" class="svelte-4k9s7n"/></div>',1),pf=te('<div class="container svelte-4k9s7n"><div class="easy-days-settings svelte-4k9s7n"><span class="svelte-4k9s7n"></span> <span class="header min-col svelte-4k9s7n"> </span> <span class="header svelte-4k9s7n"> </span> <span class="header normal-col svelte-4k9s7n"> </span> <!></div></div>');function ra(n,e){Oe(e,!1);const a=[Xi(),Zi(),Ji(),el(),tl(),rl(),sl()];let i=G(e,"values",28,()=>[0,0,0,0,0,0,0]);Te(),J(n,{children:(t,o)=>{var h=pf(),y=U(h),c=v(U(y),2),u=U(c,!0);E(c);var g=v(c,2),x=U(g,!0);E(g);var C=v(g,2),l=U(C,!0);E(C);var _=v(C,2);_r(_,1,()=>a,jr,(p,d,O)=>{var k=$f(),L=ie(k),z=U(L,!0);E(L);var T=v(L,2),H=U(T);at(H),ot(H,"step",.5),ot(H,"max",1),ot(H,"min",0),E(T),W(()=>N(z,s(d))),xr(H,()=>i()[O],w=>i(i()[O]=w,!0)),$(p,k)}),E(y),E(h),W((p,d,O)=>{N(u,p),N(x,d),N(l,O)},[()=>(m(B),r(()=>nl())),()=>(m(B),r(()=>al())),()=>(m(B),r(()=>ol()))],q),$(t,h)},$$slots:{default:!0}}),Re()}var mf=te(" <!>",1),hf=te("<div> </div>"),yf=te('<label><input type="radio"/> </label> <label><input type="radio"/> </label> <label><input type="radio"/> </label>',1),Cf=te('<label><input type="radio"/> </label> <label><input type="radio"/> </label> <label><input type="radio"/> </label> <label><input type="radio"/> </label>',1),wf=te('<div class="radio-group svelte-v4wvzr"><!></div> <div class="svg-container svelte-v4wvzr"><svg class="svelte-v4wvzr"><!><!><!><!></svg></div> <!>',1),_f=te('<div class="modal svelte-v4wvzr" tabindex="-1"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header svelte-v4wvzr"><h5 class="modal-title"><!></h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><!> <!> <!> <!> <!> <details><summary class="svelte-v4wvzr"> </summary> <!></details> <details><summary class="svelte-v4wvzr"> </summary> <!> <!> <!> <!> <!> <!></details> <div style="display:none;"><details><summary class="svelte-v4wvzr"> </summary> <button><!></button> <!> <!></details></div> <div><button> </button> <button> </button> <button> </button> <!></div> <!></div></div></div></div>');function gn(n,e){Oe(e,!1);const[a,i]=We(),t=()=>ye(T,"$config",a),o=()=>ye(Q,"$newCardsIgnoreReviewLimit",a),h=()=>ye(F,"$fsrs",a),y=R(),c=R(),u=R(),g=R(),x=R(),C=R(),l=[],_=[];let p=G(e,"state",8),d=G(e,"simulateFsrsRequest",12),O=G(e,"computing",8),k=G(e,"openHelpModal",8),L=G(e,"onPresetChange",8),z=G(e,"workload",8,!1);const T=p().currentConfig;let H=R(Be.count),w=R(Ie.ratio),D=R([]),I=R(!1);const F=p().fsrs,b=tc();let S=R(null),M=0,Y=R([]);const Q=p().newCardsIgnoreReviewLimit;let A=R(!0),j=R(t().leechAction==Vt.SUSPEND),K=R(t().leechThreshold),se=R(null),ne=R(!1),ve=R(void 0);function X(P,ee){const ue=[];for(let me=0;me<P.length;me++){let fe=0,pe=0;for(let Xe=Math.max(0,me-ee+1);Xe<=me;Xe++)fe+=P[Xe],pe++;ue.push(fe/pe)}return ue}function be(P,ee){return P.map((ue,me)=>ue+ee[me])}function de(P){return P?wl({num:P.toFixed(2)}):""}function $e(){d(d().daysToSimulate=s(y),!0),d(d().deckSize=s(c),!0),d(d().suspendAfterLapseCount=s(j)?s(K):void 0,!0),d(d().easyDaysPercentages=s(C),!0)}function ke(P){return P?pl({count:P.current}):""}async function Fe(){let P;$e();try{await Cr(async()=>{f(ne,!0),P=await wa(d())},ee=>{ee.value.case==="computeRetention"&&f(ve,ee.value.value)})}finally{f(ne,!1),P&&f(se,P.optimalRetention)}}async function le(){let P;$e();try{await Cr(async()=>{f(I,!0),P=await _a(d())},()=>{})}finally{if(f(I,!1),P){M+=1;const ee=be(P.dailyReviewCount,P.dailyNewCount),ue=P.accumulatedKnowledgeAcquisition;f(Y,s(Y).concat(P.dailyTimeCost.map((me,fe)=>({x:fe,timeCost:me,count:ee[fe],memorized:ue[fe],label:M})))),f(D,as(s(S),b,s(Y),s(H)))}}}async function Pe(){let P;$e();try{await Cr(async()=>{f(I,!0),P=await ka(d())},()=>{})}finally{f(I,!1),P&&(M+=1,f(Y,s(Y).concat(Object.entries(P.memorized).map(([ee,ue])=>({x:parseInt(ee),timeCost:P.cost[ee],memorized:ue,count:P.reviewCount[ee],label:M,learnSpan:d().daysToSimulate})))),f(D,fn(s(S),b,s(Y),s(w))))}}function Ge(){f(Y,s(Y).filter(P=>P.label!==M)),M=Math.max(0,M-1),f(D,as(s(S),b,s(Y),s(H)))}function Ve(){confirm(ml())&&(re(T,r(t).newPerDay=d().newLimit,r(t)),re(T,r(t).reviewsPerDay=d().reviewLimit,r(t)),re(T,r(t).maximumReviewInterval=d().maxInterval,r(t)),z()||re(T,r(t).desiredRetention=d().desiredRetention,r(t)),Pt(Q,d().newCardsIgnoreReviewLimit),re(T,r(t).reviewOrder=d().reviewOrder,r(t)),re(T,r(t).leechAction=s(j)?Vt.SUSPEND:Vt.TAG_ONLY,r(t)),re(T,r(t).leechThreshold=s(K),r(t)),re(T,r(t).easyDaysPercentages=[...s(C)],r(t)),L()())}let Ee=G(e,"modal",12,null);function Ce(P){return Ee(new Hn(P)),{destroy(){var ee;(ee=Ee())==null||ee.dispose(),Ee(null)}}}ce(()=>{},()=>{f(y,365)}),ce(()=>{},()=>{f(c,0)}),ce(()=>s(y),()=>{f(u,Math.ceil(s(y)/365))}),ce(()=>(s(I),s(ne)),()=>{f(g,s(I)||s(ne))}),ce(()=>s(ve),()=>{f(x,ke(s(ve)))}),ce(()=>(s(S),s(Y),s(A),s(u),m(z()),s(w),s(H)),()=>{if(s(S)){let P=s(Y);if(s(A)){const ue=s(Y).reduce((me,fe)=>(me[fe.label]=me[fe.label]||[],me[fe.label].push(fe),me),{});P=Object.values(ue).flatMap(me=>{const fe=X(me.map(Ct=>Ct.timeCost),s(u)),pe=X(me.map(Ct=>Ct.count),s(u)),Xe=X(me.map(Ct=>Ct.memorized),s(u));return me.map((Ct,Yt)=>({...Ct,timeCost:fe[Yt],count:pe[Yt],memorized:Xe[Yt]}))})}const ee=z()?fn:as;f(D,ee(s(S),b,P,z()?s(w):s(H)))}}),ce(()=>t(),()=>{f(C,[...t().easyDaysPercentages])}),Ye(),Te();var _e=_f(),Me=U(_e),Ne=U(Me),De=U(Ne),nt=U(De),br=U(nt);{var Sr=P=>{var ee=Z();W(ue=>N(ee,ue),[()=>(m(B),r(()=>hl()))],q),$(P,ee)},Wt=P=>{var ee=Z();W(ue=>N(ee,ue),[()=>(m(B),r(()=>En()))],q),$(P,ee)};Le(br,P=>{z()?P(Sr):P(Wt,!1)})}E(nt);var Ur=v(nt,2);E(De);var tr=v(De,2),rr=U(tr);st(rr,{defaultValue:365,min:1,max:3650,get value(){return s(y)},set value(P){f(y,P)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("simulateFsrsReview")},children:(ue,me)=>{oe();var fe=Z();W(pe=>N(fe,pe),[()=>(m(B),r(()=>il()))],q),$(ue,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var jt=v(rr,2);st(jt,{defaultValue:0,min:0,max:1e5,get value(){return s(c)},set value(P){f(c,P)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("simulateFsrsReview")},children:(ue,me)=>{oe();var fe=Z();W(pe=>N(fe,pe),[()=>(m(B),r(()=>ll()))],q),$(ue,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var sr=v(jt,2);{var Or=P=>{_t(P,{get defaultValue(){return t(),r(()=>t().desiredRetention)},min:.7,max:.99,percentage:!0,get value(){return d().desiredRetention},set value(ee){d(d().desiredRetention=ee,!0)},children:(ee,ue)=>{ae(ee,{$$events:{click:()=>k()("desiredRetention")},children:(me,fe)=>{oe();var pe=Z();W(Xe=>N(pe,Xe),[()=>(m(B),r(()=>Wr()))],q),$(me,pe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};Le(sr,P=>{z()||P(Or)})}var nr=v(sr,2);st(nr,{get defaultValue(){return t(),r(()=>t().newPerDay)},min:0,max:9999,get value(){return d().newLimit},set value(P){d(d().newLimit=P,!0)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("newLimit")},children:(ue,me)=>{oe();var fe=Z();W(pe=>N(fe,pe),[()=>(m(B),r(()=>On()))],q),$(ue,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ar=v(nr,2);st(ar,{get defaultValue(){return t(),r(()=>t().reviewsPerDay)},min:0,max:9999,get value(){return d().reviewLimit},set value(P){d(d().reviewLimit=P,!0)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("reviewLimit")},children:(ue,me)=>{oe();var fe=Z();W(pe=>N(fe,pe),[()=>(m(B),r(()=>Sn()))],q),$(ue,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var or=v(ar,2),qt=U(or),Tt=U(qt,!0);E(qt);var Qr=v(qt,2);ju(Qr,()=>s(C),P=>{ra(P,{get values(){return s(C)},set values(ee){f(C,ee)},$$legacy:!0})}),E(or);var ir=v(or,2),lr=U(ir),Rr=U(lr,!0);E(lr);var Tr=v(lr,2);st(Tr,{get defaultValue(){return t(),r(()=>t().maximumReviewInterval)},min:1,max:36500,get value(){return d().maxInterval},set value(P){d(d().maxInterval=P,!0)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("maximumInterval")},children:(ue,me)=>{oe();var fe=Z();W(pe=>N(fe,pe),[()=>(m(B),r(()=>wn()))],q),$(ue,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ur=v(Tr,2);const Yr=q(()=>(m(Gr),h(),r(()=>Gr(h()))));kt(ur,{get defaultValue(){return t(),r(()=>t().reviewOrder)},get choices(){return s(Yr)},get value(){return d().reviewOrder},set value(P){d(d().reviewOrder=P,!0)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("reviewSortOrder")},children:(ue,me)=>{oe();var fe=Z();W(pe=>N(fe,pe),[()=>(m(B),r(()=>Rn()))],q),$(ue,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Dr=v(ur,2);Je(Dr,{get defaultValue(){return o()},get value(){return d().newCardsIgnoreReviewLimit},set value(P){d(d().newCardsIgnoreReviewLimit=P,!0)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("newCardsIgnoreReviewLimit")},children:(ue,me)=>{const fe=q(()=>(m(B),r(()=>bn())));Bt(ue,{get title(){return s(fe)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ir=v(Dr,2);Je(Ir,{defaultValue:!0,get value(){return s(A)},set value(P){f(A,P)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("simulateFsrsReview")},children:(ue,me)=>{oe();var fe=Z();W(pe=>N(fe,pe),[()=>(m(B),r(()=>ul()))],q),$(ue,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ut=v(Ir,2);const Ar=q(()=>(t(),m(Vt),r(()=>t().leechAction==Vt.SUSPEND)));Je(Ut,{get defaultValue(){return s(Ar)},get value(){return s(j)},set value(P){f(j,P)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("leechAction")},children:(ue,me)=>{oe();var fe=Z();W(pe=>N(fe,pe),[()=>(m(B),r(()=>cl()))],q),$(ue,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var cr=v(Ut,2);{var Kr=P=>{st(P,{get defaultValue(){return t(),r(()=>t().leechThreshold)},min:1,max:9999,get value(){return s(K)},set value(ee){f(K,ee)},children:(ee,ue)=>{ae(ee,{$$events:{click:()=>k()("leechThreshold")},children:(me,fe)=>{oe();var pe=Z();W(Xe=>N(pe,Xe),[()=>(m(B),r(()=>Mn()))],q),$(me,pe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};Le(cr,P=>{s(j)&&P(Kr)})}E(ir);var Et=v(ir,2),Qt=U(Et),dr=U(Qt),Lr=U(dr,!0);E(dr);var Dt=v(dr,2),Er=U(Dt);{var Mr=P=>{var ee=Z();W(ue=>N(ee,ue),[()=>(m(B),r(()=>ls()))],q),$(P,ee)},V=P=>{var ee=Z();W(ue=>N(ee,ue),[()=>(m(B),r(()=>yl()))],q),$(P,ee)};Le(Er,P=>{s(ne)?P(Mr):P(V,!1)})}E(Dt);var ge=v(Dt,2);{var Ae=P=>{var ee=mf(),ue=ie(ee),me=v(ue);{var fe=pe=>{const Xe=q(()=>(m(B),r(()=>_l())));Qe(pe,{get warning(){return s(Xe)},className:"alert-warning"})};Le(me,pe=>{s(se),t(),r(()=>s(se)-t().desiredRetention>=.01)&&pe(fe)})}W(pe=>N(ue,`${pe!=null?pe:""} `),[()=>(s(se),r(()=>de(s(se))))],q),$(P,ee)};Le(ge,P=>{s(se)&&P(Ae)})}var Ke=v(ge,2);{var xe=P=>{var ee=hf(),ue=U(ee,!0);E(ee),W(()=>N(ue,s(x))),$(P,ee)};Le(Ke,P=>{s(ne)&&P(xe)})}E(Qt),E(Et);var ze=v(Et,2),He=U(ze),bt=U(He,!0);E(He);var lt=v(He,2),vt=U(lt,!0);E(lt);var It=v(lt,2),na=U(It,!0);E(It);var aa=v(It,2);{var oa=P=>{var ee=Z();W(ue=>N(ee,ue),[()=>(m(B),r(()=>Cl()))],q),$(P,ee)};Le(aa,P=>{s(g)&&P(oa)})}E(ze);var ia=v(ze,2);Xu(ia,{children:(P,ee)=>{var ue=wf(),me=ie(ue),fe=U(me);Zu(fe,{children:(Xr,eg)=>{var ws=it(),ca=ie(ws);{var da=Kt=>{var fr=yf(),Mt=ie(fr),$t=U(Mt);at($t);var gr,Zr=v($t);E(Mt);var Nt=v(Mt,2),pt=U(Nt);at(pt);var vr,Jr=v(pt);E(Nt);var Xt=v(Nt,2),mt=U(Xt);at(mt);var $r,es=v(mt);E(Xt),W((ut,St,Zt)=>{var Nr,rt,Jt;gr!==(gr=(m(Be),r(()=>Be.count)))&&($t.value=(Nr=$t.__value=(m(Be),r(()=>Be.count)))!=null?Nr:""),N(Zr,` ${ut!=null?ut:""}`),vr!==(vr=(m(Be),r(()=>Be.time)))&&(pt.value=(rt=pt.__value=(m(Be),r(()=>Be.time)))!=null?rt:""),N(Jr,` ${St!=null?St:""}`),$r!==($r=(m(Be),r(()=>Be.memorized)))&&(mt.value=(Jt=mt.__value=(m(Be),r(()=>Be.memorized)))!=null?Jt:""),N(es,` ${Zt!=null?Zt:""}`)},[()=>(m(B),r(()=>Bs())),()=>(m(B),r(()=>Gs())),()=>(m(B),r(()=>Ws()))],q),Ft(l,[],$t,()=>(m(Be),r(()=>Be.count),s(H)),ut=>f(H,ut)),Ft(l,[],pt,()=>(m(Be),r(()=>Be.time),s(H)),ut=>f(H,ut)),Ft(l,[],mt,()=>(m(Be),r(()=>Be.memorized),s(H)),ut=>f(H,ut)),$(Kt,fr)},fa=Kt=>{var fr=Cf(),Mt=ie(fr),$t=U(Mt);at($t);var gr,Zr=v($t);E(Mt);var Nt=v(Mt,2),pt=U(Nt);at(pt);var vr,Jr=v(pt);E(Nt);var Xt=v(Nt,2),mt=U(Xt);at(mt);var $r,es=v(mt);E(Xt);var ut=v(Xt,2),St=U(ut);at(St);var Zt,Nr=v(St);E(ut),W((rt,Jt,ts,rs)=>{var _s,ks,Ps,xs;gr!==(gr=(m(Ie),r(()=>Ie.ratio)))&&($t.value=(_s=$t.__value=(m(Ie),r(()=>Ie.ratio)))!=null?_s:""),N(Zr,` ${rt!=null?rt:""}`),vr!==(vr=(m(Ie),r(()=>Ie.count)))&&(pt.value=(ks=pt.__value=(m(Ie),r(()=>Ie.count)))!=null?ks:""),N(Jr,` ${Jt!=null?Jt:""}`),$r!==($r=(m(Ie),r(()=>Ie.time)))&&(mt.value=(Ps=mt.__value=(m(Ie),r(()=>Ie.time)))!=null?Ps:""),N(es,` ${ts!=null?ts:""}`),Zt!==(Zt=(m(Ie),r(()=>Ie.memorized)))&&(St.value=(xs=St.__value=(m(Ie),r(()=>Ie.memorized)))!=null?xs:""),N(Nr,` ${rs!=null?rs:""}`)},[()=>(m(B),r(()=>dl())),()=>(m(B),r(()=>Bs())),()=>(m(B),r(()=>Gs())),()=>(m(B),r(()=>Ws()))],q),Ft(_,[],$t,()=>(m(Ie),r(()=>Ie.ratio),s(w)),rt=>f(w,rt)),Ft(_,[],pt,()=>(m(Ie),r(()=>Ie.count),s(w)),rt=>f(w,rt)),Ft(_,[],mt,()=>(m(Ie),r(()=>Ie.time),s(w)),rt=>f(w,rt)),Ft(_,[],St,()=>(m(Ie),r(()=>Ie.memorized),s(w)),rt=>f(w,rt)),$(Kt,fr)};Le(ca,Kt=>{z()?Kt(fa,!1):Kt(da)})}$(Xr,ws)},$$slots:{default:!0}}),E(me);var pe=v(me,2),Xe=U(pe),Ct=U(Xe);oc(Ct);var Yt=v(Ct);Ju(Yt);var Cs=v(Yt);ec(Cs,{get bounds(){return b}});var la=v(Cs);rc(la,{get bounds(){return b}}),E(Xe),er(Xe,Xr=>f(S,Xr),()=>s(S)),E(pe);var ua=v(pe,2);ic(ua,{get tableData(){return s(D)}}),W(()=>ot(Xe,"viewBox",r(()=>`0 0 ${b.width} ${b.height}`))),$(P,ue)},$$slots:{default:!0}}),E(tr),E(Ne),E(Me),E(_e),Gn(_e,P=>Ce==null?void 0:Ce(P)),W((P,ee,ue,me,fe,pe)=>{N(Tt,P),N(Rr,ee),N(Lr,ue),dt(Dt,1,`btn ${s(ne)?"btn-warning":"btn-primary"}`,"svelte-v4wvzr"),Dt.disabled=!s(ne)&&O(),dt(He,1,`btn ${O()?"btn-warning":"btn-primary"}`,"svelte-v4wvzr"),He.disabled=O(),N(bt,me),dt(lt,1,`btn ${O()?"btn-warning":"btn-primary"}`,"svelte-v4wvzr"),lt.disabled=O(),N(vt,fe),dt(It,1,`btn ${O()?"btn-warning":"btn-primary"}`,"svelte-v4wvzr"),It.disabled=O(),N(na,pe)},[()=>(m(B),r(()=>An())),()=>(m(B),r(()=>fl())),()=>(m(B),r(()=>Ln())),()=>(m(B),r(()=>gl())),()=>(m(B),r(()=>vl())),()=>(m(B),r(()=>$l()))],q),Se("click",Ur,()=>{var P;return(P=Ee())==null?void 0:P.hide()}),Se("click",Dt,()=>Fe()),Se("click",He,function(...P){var ee;(ee=z()?Pe:le)==null||ee.apply(this,P)}),Se("click",lt,Ge),Se("click",It,Ve),$(n,_e),Re(),i()}var kf=te("<button><!></button>"),Pf=te('<!> <button class="btn btn-primary svelte-1oyy9sz"> </button> <!> <!> <div class="ms-1 me-1"><!> <!> <!> <!> <!> <button><!></button> <!> <div><!></div></div> <div class="m-1"><!> <button class="btn btn-primary svelte-1oyy9sz"> </button></div> <hr class="svelte-1oyy9sz"/> <div class="m-1"><button class="btn btn-primary svelte-1oyy9sz"> </button></div> <!> <!>',1);function xf(n,e){var Er,Mr;Oe(e,!1);const[a,i]=We(),t=()=>ye(S,"$daysSinceLastOptimization",a),o=()=>ye(I,"$config",a),h=()=>ye(M,"$limits",a),y=()=>ye(s(O),"$newCardsIgnoreReviewLimit",a),c=()=>ye(ne,"$healthCheck",a),u=()=>ye(b,"$fsrsReschedule",a),g=R(),x=R(),C=R(),l=R(),_=R(),p=R(),d=R(),O=R(),k=R(),L=R(),z=R();let T=G(e,"state",8),H=G(e,"openHelpModal",8),w=G(e,"onPresetChange",8),D=G(e,"newlyEnabled",8,!1);const I=T().currentConfig,F=T().defaults,b=T().fsrsReschedule,S=T().daysSinceLastOptimization,M=T().deckLimits;let Y=R(!1),Q=R(!1),A=R(!1),j=R(),K=R(!1),se=R(!1);const ne=T().fsrsHealthCheck;let ve=R("");const X=[new wt(yr(),o().desiredRetention,V=>re(I,r(o).desiredRetention=V,r(o)),o().desiredRetention,null),new wt(is(),(Er=h().desiredRetention)!=null?Er:null,V=>re(M,r(h).desiredRetention=V!=null?V:void 0,r(h)),null,null)];let be=R((Mr=h().desiredRetention)!=null?Mr:o().desiredRetention);const de=s(be).toFixed(2),$e=.8,ke=.95;function Fe(V){return V<$e?Sl():V>ke?Ol():""}let le,Pe=[...hr(o())];async function Ge(V,ge){if(+de==s(_)){f(ve,Rl());return}if(!le||Pe.toString()!==ge.toString()){const He=new xa({w:ge,search:s(l)});Pe=[...ge],le=ba(He)}const Ae=+de*100,Ke=V*100,xe=await le,ze=xe.costs[Ke]/xe.costs[Ae];f(ve,Tl({factor:ze.toFixed(2),previousDr:Ae.toString()}))}function Ve(V){return V<.7||V>.97?"alert-danger":V<$e||V>ke?"alert-warning":"alert-info"}function Ee(){return BigInt(o().ignoreRevlogsBeforeDate?new Date(o().ignoreRevlogsBeforeDate).getTime():0)}async function Ce(){if(s(K)){await Ss({});return}if(T().presetAssignmentsChanged()){alert(js());return}f(K,!0),f(j,void 0);try{await Cr(async()=>{const V=hr(o()),ge=o().relearnSteps;let Ae=0,Ke=0;for(let vt=0;vt<ge.length&&(Ke+=ge[vt],!(Ke>=1440));vt++)Ae++;const xe=await Sa({search:o().paramSearch?o().paramSearch:s(l),ignoreRevlogsBeforeMs:Ee(),currentParams:V,numOfRelearningSteps:Ae,healthCheck:c()}),ze=V.length&&V.every((vt,It)=>vt.toFixed(4)===xe.params[It].toFixed(4))||xe.params.length===0;let He="";xe.healthCheckPassed!==void 0&&(He=xe.healthCheckPassed?Dl():Il());let bt="";ze&&(bt=xe.fsrsItems?Al():Ll());const lt=[bt,He].filter(vt=>vt).join(`

`);lt&&setTimeout(()=>alert(lt),200),ze||(re(I,r(o).fsrsParams6=xe.params,r(o)),setTimeout(()=>{f(A,!0)},201)),s(j)&&At(j,s(j).current=s(j).total)},V=>{V.value.case==="computeParams"&&f(j,V.value.value)})}finally{f(K,!1)}}async function _e(){if(s(se)){await Ss({});return}if(T().presetAssignmentsChanged()){alert(js());return}f(se,!0),f(j,void 0);try{await Cr(async()=>{const V=o().paramSearch?o().paramSearch:s(l),ge=await Ra({search:V,ignoreRevlogsBeforeMs:Ee(),params:hr(o())});s(j)&&At(j,s(j).current=s(j).total),setTimeout(()=>alert(`Log loss: ${ge.logLoss.toFixed(4)}, RMSE(bins): ${(ge.rmseBins*100).toFixed(2)}%. ${Vl()}`),200)},V=>{V.value.case==="computeParams"&&f(j,V.value.value)})}finally{f(se,!1)}}function Me(V){if(!V||!V.total)return"";const ge=(V.current/V.total*100).toFixed(1);return V instanceof Oa?`${ge}%`:V.current===V.total?El():Ml({pct:ge,reviews:V.reviews})}async function Ne(){await ys(),T().save(zr.COMPUTE_ALL_PARAMS)}let De=R(),nt=R();ce(()=>(t(),B),()=>{f(g,t()>30?kl():"")}),ce(()=>s(Y),()=>{s(Y)&&f(Q,!0)}),ce(()=>(m(D()),s(Q),s(A)),()=>{f(x,D()||s(Q)||s(A))}),ce(()=>(s(K),s(se)),()=>{f(C,s(K)||s(se))}),ce(()=>m(T()),()=>{f(l,`preset:"${T().getCurrentNameForSearch()}" -is:suspended`)}),ce(()=>s(be),()=>{f(_,Number(s(be).toFixed(2)))}),ce(()=>s(_),()=>{f(p,Fe(s(_)))}),ce(()=>(s(x),s(_),o()),()=>{s(x)&&Ge(s(_),hr(o()))}),ce(()=>s(_),()=>{f(d,Ve(s(_)))}),ce(()=>m(T()),()=>{bu(f(O,T().newCardsIgnoreReviewLimit),"$newCardsIgnoreReviewLimit",a)}),ce(()=>(o(),m(T()),y()),()=>{f(k,new Pa({params:hr(o()),desiredRetention:o().desiredRetention,newLimit:o().newPerDay,reviewLimit:o().reviewsPerDay,maxInterval:o().maximumReviewInterval,search:`preset:"${T().getCurrentNameForSearch()}" -is:suspended`,newCardsIgnoreReviewLimit:y(),easyDaysPercentages:o().easyDaysPercentages,reviewOrder:o().reviewOrder,historicalRetention:o().historicalRetention,learningStepCount:o().learnSteps.length,relearningStepCount:o().relearnSteps.length}))}),ce(()=>s(j),()=>{f(L,Me(s(j)))}),ce(()=>s(j),()=>{var V,ge;f(z,(ge=(V=s(j))==null?void 0:V.reviews)!=null?ge:void 0)}),Ye(),Te();var br=Pf(),Sr=ie(br);gt(Sr,{get slotHost(){return J},api:{},children:(V,ge)=>{J(V,{children:(Ae,Ke)=>{_t(Ae,{get defaultValue(){return r(()=>F.desiredRetention)},min:.7,max:.99,percentage:!0,get value(){return s(be)},set value(xe){f(be,xe)},get focused(){return s(Y)},set focused(xe){f(Y,xe)},children:(xe,ze)=>{ae(xe,{$$events:{click:()=>H()("desiredRetention")},children:(He,bt)=>{oe();var lt=Z();W(vt=>N(lt,vt),[()=>(m(B),r(()=>Wr()))],q),$(He,lt)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(xe,ze)=>{ds(xe,{slot:"tabs",get tabs(){return X},get value(){return s(be)},set value(He){f(be,He)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}})},$$slots:{default:!0}});var Wt=v(Sr,2),Ur=U(Wt,!0);E(Wt);var tr=v(Wt,2);Qe(tr,{get warning(){return s(ve)},className:"alert-info two-line"});var rr=v(tr,2);Qe(rr,{get warning(){return s(p)},get className(){return s(d)}});var jt=v(rr,2),sr=U(jt);ff(sr,{defaultValue:[],get defaults(){return r(()=>F.fsrsParams6)},get value(){return o().fsrsParams6},set value(V){re(I,r(o).fsrsParams6=V,r(o))},children:(V,ge)=>{ae(V,{$$events:{click:()=>H()("modelParams")},children:(Ae,Ke)=>{oe();var xe=Z();W(ze=>N(xe,ze),[()=>(m(B),r(()=>Nn()))],q),$(Ae,xe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Or=v(sr,2);vf(Or,{get placeholder(){return s(l)},get value(){return o().paramSearch},set value(V){re(I,r(o).paramSearch=V,r(o))},$$legacy:!0});var nr=v(Or,2);Je(nr,{defaultValue:!1,get value(){return Ht(),u()},set value(V){Pt(b,V)},children:(V,ge)=>{ae(V,{$$events:{click:()=>H()("rescheduleCardsOnChange")},children:(Ae,Ke)=>{const xe=q(()=>(m(B),r(()=>Fn())));Bt(Ae,{get title(){return s(xe)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ar=v(nr,2);{var or=V=>{const ge=q(()=>(m(B),r(()=>Fl())));Qe(V,{get warning(){return s(ge)}})};Le(ar,V=>{u()&&V(or)})}var qt=v(ar,2);Je(qt,{defaultValue:!1,get value(){return Ht(),c()},set value(V){Pt(ne,V)},children:(V,ge)=>{ae(V,{$$events:{click:()=>H()("healthCheck")},children:(Ae,Ke)=>{const xe=q(()=>(m(B),r(()=>Pl({text:Vn()}))));Bt(Ae,{get title(){return s(xe)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Tt=v(qt,2),Qr=U(Tt);{var ir=V=>{var ge=Z();W(Ae=>N(ge,Ae),[()=>(m(B),r(()=>ls()))],q),$(V,ge)},lr=V=>{var ge=Z();W(Ae=>N(ge,Ae),[()=>(m(B),r(()=>Nl()))],q),$(V,ge)};Le(Qr,V=>{s(K)?V(ir):V(lr,!1)})}E(Tt);var Rr=v(Tt,2);{var Tr=V=>{var ge=kf(),Ae=U(ge);{var Ke=ze=>{var He=Z();W(bt=>N(He,bt),[()=>(m(B),r(()=>ls()))],q),$(ze,He)},xe=ze=>{var He=Z();W(bt=>N(He,bt),[()=>(m(B),r(()=>zl()))],q),$(ze,He)};Le(Ae,ze=>{s(se)?ze(Ke):ze(xe,!1)})}E(ge),W(()=>{dt(ge,1,`btn ${s(se)?"btn-warning":"btn-primary"}`,"svelte-1oyy9sz"),ge.disabled=!s(se)&&s(C)}),Se("click",ge,()=>_e()),$(V,ge)};Le(Rr,V=>{m(T()),r(()=>T().legacyEvaluate)&&V(Tr)})}var ur=v(Rr,2),Yr=U(ur);{var Dr=V=>{var ge=Z();W(()=>N(ge,s(L))),$(V,ge)},Ir=(V,ge)=>{{var Ae=Ke=>{var xe=Z();W(ze=>N(xe,ze),[()=>(m(B),s(z),r(()=>In({reviews:s(z)})))],q),$(Ke,xe)};Le(V,Ke=>{s(z)!==void 0&&Ke(Ae)},ge)}};Le(Yr,V=>{s(K)||s(se)?V(Dr):V(Ir,!1)})}E(ur),E(jt);var Ut=v(jt,2),Ar=U(Ut);Qe(Ar,{get warning(){return s(g)},className:"alert-warning"});var cr=v(Ar,2),Kr=U(cr,!0);E(cr),E(Ut);var Et=v(Ut,4),Qt=U(Et),dr=U(Qt,!0);E(Qt),E(Et);var Lr=v(Et,2);gn(Lr,{get state(){return T()},get simulateFsrsRequest(){return s(k)},get computing(){return s(C)},get openHelpModal(){return H()},get onPresetChange(){return w()},get modal(){return s(De)},set modal(V){f(De,V)},$$legacy:!0});var Dt=v(Lr,2);gn(Dt,{workload:!0,get state(){return T()},get simulateFsrsRequest(){return s(k)},get computing(){return s(C)},get openHelpModal(){return H()},get onPresetChange(){return w()},get modal(){return s(nt)},set modal(V){f(nt,V)},$$legacy:!0}),W((V,ge,Ae)=>{N(Ur,V),dt(Tt,1,`btn ${s(K)?"btn-warning":"btn-primary"}`,"svelte-1oyy9sz"),Tt.disabled=!s(K)&&s(C),N(Kr,ge),N(dr,Ae)},[()=>(m(B),r(()=>xl())),()=>(m(B),r(()=>bl())),()=>(m(B),r(()=>En()))],q),Se("click",Wt,()=>{var V;At(k,s(k).reviewLimit=9999),(V=s(nt))==null||V.show()}),Se("click",Tt,()=>Ce()),Se("click",cr,()=>Ne()),Se("click",Qt,()=>{var V;return(V=s(De))==null?void 0:V.show()}),$(n,br),Re(),i()}var bf=te("<!> <!>",1);function Sf(n,e){Oe(e,!1);const[a,i]=We(),t=()=>ye(c,"$fsrs",a);let o=G(e,"state",8),h=G(e,"api",8),y=G(e,"onPresetChange",8);const c=o().fsrs;let u=R(!1);const g={fsrs:{title:"FSRS",help:Yl(),url:he.DeckOptions.fsrs,global:!0},desiredRetention:{title:Wr(),help:Ul()+`

`+Ql(),sched:tt.FSRS},modelParams:{title:Nn(),help:jl()+`

`+ql(),sched:tt.FSRS},rescheduleCardsOnChange:{title:Fn(),help:Wl(),sched:tt.FSRS,global:!0},computeOptimalRetention:{title:Ln(),help:Gl(),sched:tt.FSRS},healthCheck:{title:Vn(),help:Hr()+`

`+Hl()+`

`+Bl(),sched:tt.FSRS,global:!0}},x=Object.values(g);let C=R(),l=R();function _(p){s(C).show(),s(l).to(p)}ce(()=>t(),()=>{t()||f(u,!0)}),Ye(),Te(),ft(n,{title:"FSRS",children:(p,d)=>{gt(p,{get slotHost(){return J},get api(){return h()},children:(O,k)=>{var L=bf(),z=ie(L);J(z,{children:(w,D)=>{Je(w,{defaultValue:!1,get value(){return Ht(),t()},set value(I){Pt(c,I)},children:(I,F)=>{ae(I,{$$events:{click:()=>_(Object.keys(g).indexOf("fsrs"))},children:(b,S)=>{Bt(b,{get title(){return r(()=>g.fsrs.title)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var T=v(z,2);{var H=w=>{xf(w,{get state(){return o()},get newlyEnabled(){return s(u)},openHelpModal:D=>_(Object.keys(g).indexOf(D)),get onPresetChange(){return y()}})};Le(T,w=>{t()&&w(H)})}$(O,L)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(p,d)=>{xt(p,{title:"FSRS",get url(){return m(he),r(()=>he.DeckOptions.fsrs)},slot:"tooltip",get fsrs(){return t()},get helpSections(){return x},$$events:{mount:O=>{f(C,O.detail.modal),f(l,O.detail.carousel)}}})}}}),Re(),i()}function Of(n,e){Oe(e,!1);let a=G(e,"html",8),i=G(e,"mounted",8);gs(i()),Te();var t=it(),o=ie(t);Kl(o,a),$(n,t),Re()}function Rf(n){switch(n){case yt.Seconds:return"s";case yt.Minutes:return"m";case yt.Hours:return"h";case yt.Days:return"d";default:return""}}function Tf(n){switch(n){case"s":return yt.Seconds;case"h":return yt.Hours;case"d":return yt.Days;default:return yt.Minutes}}function Df(n){const e=n*60;let a=lc(e);return[yt.Months,yt.Years].includes(a)&&(a=yt.Days),`${Math.round(uc(a,e))}${Rf(a)}`}function If(n){const e=n.match(/(\d+)(.*)/);if(e){const[a,i,t]=e,o=Tf(t),h=cc(o)*parseInt(i,10);return Math.min(h,2**31)/60}else return 0}function Af(n){return n.map(Df).join(" ")}function Lf(n){return n.split(" ").map(If).filter(e=>e)}var Ef=te('<input type="text" class="svelte-f5c9s0"/>');function Mf(n,e){Oe(e,!1);let a=G(e,"value",12),i=R();function t(){a(Lf(this.value))}ce(()=>m(a()),()=>{f(i,Af(a()))}),Ye(),Te();var o=Ef();at(o),W(()=>$s(o,s(i))),Se("blur",o,t),$(n,o),Re()}var Nf=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Ff=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function sa(n,e){let a=G(e,"value",12),i=G(e,"defaultValue",8);var t=Ff(),o=ie(t);Ze(o,()=>({"--cols":13})),je(o.lastChild,{children:(h,y)=>{var c=Nf(),u=ie(c);Ze(u,()=>({"--col-size":7})),Lt(u.lastChild,{breakpoint:"xs",children:(x,C)=>{var l=it(),_=ie(l);Rt(_,e,"default",{}),$(x,l)},$$slots:{default:!0}}),E(u);var g=v(u,2);Ze(g,()=>({"--col-size":6})),Lt(g.lastChild,{breakpoint:"xs",children:(x,C)=>{Gt(x,{children:(l,_)=>{Mf(l,{get value(){return a()},set value(p){a(p)},$$legacy:!0})},$$slots:{default:!0,revert:(l,_)=>{Pr(l,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(p){a(p)},$$legacy:!0})}}})},$$slots:{default:!0}}),E(g),$(h,c)},$$slots:{default:!0}}),E(o),$(n,t)}var Vf=te("<!> <!> <!> <!> <!> <!>",1);function zf(n,e){Oe(e,!1);const[a,i]=We(),t=()=>ye(c,"$config",a),o=()=>ye(g,"$fsrs",a);let h=G(e,"state",8),y=G(e,"api",24,()=>({}));const c=h().currentConfig,u=h().defaults,g=h().fsrs;let x=R(),C=R();const l={relearningSteps:{title:su(),help:ru(),url:he.DeckOptions.relearningSteps},minimumInterval:{title:tu(),help:eu(),url:he.DeckOptions.minimumInterval,sched:tt.SM2},leechThreshold:{title:Mn(),help:Jl(),url:he.Leeches.leeches},leechAction:{title:Zl(),help:Xl(),url:he.Leeches.waiting}},_=Object.values(l);let p=R(),d=R();function O(L){s(p).show(),s(d).to(L)}ce(()=>(t(),o(),B),()=>{const L=t().relearnSteps.length?t().relearnSteps[t().relearnSteps.length-1]/60/24:0;f(x,!o()&&L>t().minimumLapseInterval?nu():""),f(C,o()&&L>=1?zn():"")}),Ye(),Te();const k=q(()=>(m(B),r(()=>qs())));ft(n,{get title(){return s(k)},children:(L,z)=>{gt(L,{get slotHost(){return J},get api(){return y()},children:(T,H)=>{var w=Vf(),D=ie(w);J(D,{children:(Q,A)=>{sa(Q,{get defaultValue(){return r(()=>u.relearnSteps)},get value(){return t().relearnSteps},set value(j){re(c,r(t).relearnSteps=j,r(t))},children:(j,K)=>{ae(j,{$$events:{click:()=>O(Object.keys(l).indexOf("relearningSteps"))},children:(se,ne)=>{oe();var ve=Z();W(()=>N(ve,r(()=>l.relearningSteps.title))),$(se,ve)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var I=v(D,2);J(I,{children:(Q,A)=>{Qe(Q,{get warning(){return s(C)}})},$$slots:{default:!0}});var F=v(I,2);{var b=Q=>{J(Q,{children:(A,j)=>{st(A,{get defaultValue(){return r(()=>u.minimumLapseInterval)},min:1,get value(){return t().minimumLapseInterval},set value(K){re(c,r(t).minimumLapseInterval=K,r(t))},children:(K,se)=>{ae(K,{$$events:{click:()=>O(Object.keys(l).indexOf("minimumInterval"))},children:(ne,ve)=>{oe();var X=Z();W(()=>N(X,r(()=>l.minimumInterval.title))),$(ne,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}})};Le(F,Q=>{o()||Q(b)})}var S=v(F,2);J(S,{children:(Q,A)=>{Qe(Q,{get warning(){return s(x)}})},$$slots:{default:!0}});var M=v(S,2);J(M,{children:(Q,A)=>{st(Q,{get defaultValue(){return r(()=>u.leechThreshold)},min:1,get value(){return t().leechThreshold},set value(j){re(c,r(t).leechThreshold=j,r(t))},children:(j,K)=>{ae(j,{$$events:{click:()=>O(Object.keys(l).indexOf("leechThreshold"))},children:(se,ne)=>{oe();var ve=Z();W(()=>N(ve,r(()=>l.leechThreshold.title))),$(se,ve)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Y=v(M,2);J(Y,{children:(Q,A)=>{const j=q(()=>(m(ln),r(ln)));kt(Q,{get defaultValue(){return r(()=>u.leechAction)},get choices(){return s(j)},breakpoint:"md",get value(){return t().leechAction},set value(K){re(c,r(t).leechAction=K,r(t))},children:(K,se)=>{ae(K,{$$events:{click:()=>O(Object.keys(l).indexOf("leechAction"))},children:(ne,ve)=>{oe();var X=Z();W(()=>N(X,r(()=>l.leechAction.title))),$(ne,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),$(T,w)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(L,z)=>{const T=q(()=>(m(B),r(()=>qs())));xt(L,{get title(){return s(T)},get url(){return m(he),r(()=>he.DeckOptions.lapses)},slot:"tooltip",get fsrs(){return o()},get helpSections(){return _},$$events:{mount:H=>{f(p,H.detail.modal),f(d,H.detail.carousel)}}})}}}),Re(),i()}var Hf=te("<!> <!> <!> <!>",1),Bf=te("<!> <!> <!> <!> <!>",1);function Gf(n,e){Oe(e,!1);const[a,i]=We(),t=()=>ye(g,"$config",a),o=()=>ye(C,"$fsrs",a),h=R(),y=R();let c=G(e,"state",8),u=G(e,"api",24,()=>({}));const g=c().currentConfig,x=c().defaults,C=c().fsrs;let l=R(),_=R();const p={learningSteps:{title:fu(),help:du(),url:he.DeckOptions.learningSteps},graduatingInterval:{title:cu(),help:uu(),url:he.DeckOptions.graduatingInterval,sched:tt.SM2},easyInterval:{title:lu(),help:iu(),url:he.DeckOptions.easyInterval,sched:tt.SM2},insertionOrder:{title:ou(),help:au(),url:he.DeckOptions.insertionOrder}},d=Object.values(p);let O=R(),k=R();function L(T){s(O).show(),s(k).to(T)}ce(()=>(t(),o()),()=>{const T=t().learnSteps.length?t().learnSteps[t().learnSteps.length-1]/60/24:0;f(l,T>t().graduatingIntervalGood?gu():""),f(_,o()&&T>=1?zn():"")}),ce(()=>(t(),B),()=>{f(h,t().graduatingIntervalGood>t().graduatingIntervalEasy?vu():"")}),ce(()=>(t(),B),()=>{f(y,t().newCardInsertOrder==os.RANDOM?$u():"")}),Ye(),Te();const z=q(()=>(m(B),r(()=>Us())));ft(n,{get title(){return s(z)},children:(T,H)=>{gt(T,{get slotHost(){return J},get api(){return u()},children:(w,D)=>{var I=Bf(),F=ie(I);J(F,{children:(A,j)=>{sa(A,{get defaultValue(){return r(()=>x.learnSteps)},get value(){return t().learnSteps},set value(K){re(g,r(t).learnSteps=K,r(t))},children:(K,se)=>{ae(K,{$$events:{click:()=>L(Object.keys(p).indexOf("learningSteps"))},children:(ne,ve)=>{oe();var X=Z();W(()=>N(X,r(()=>p.learningSteps.title))),$(ne,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var b=v(F,2);J(b,{children:(A,j)=>{Qe(A,{get warning(){return s(_)}})},$$slots:{default:!0}});var S=v(b,2);{var M=A=>{var j=Hf(),K=ie(j);J(K,{children:(X,be)=>{st(X,{get defaultValue(){return r(()=>x.graduatingIntervalGood)},get value(){return t().graduatingIntervalGood},set value(de){re(g,r(t).graduatingIntervalGood=de,r(t))},children:(de,$e)=>{ae(de,{$$events:{click:()=>L(Object.keys(p).indexOf("graduatingInterval"))},children:(ke,Fe)=>{oe();var le=Z();W(()=>N(le,r(()=>p.graduatingInterval.title))),$(ke,le)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var se=v(K,2);J(se,{children:(X,be)=>{Qe(X,{get warning(){return s(l)}})},$$slots:{default:!0}});var ne=v(se,2);J(ne,{children:(X,be)=>{st(X,{get defaultValue(){return r(()=>x.graduatingIntervalEasy)},get value(){return t().graduatingIntervalEasy},set value(de){re(g,r(t).graduatingIntervalEasy=de,r(t))},children:(de,$e)=>{ae(de,{$$events:{click:()=>L(Object.keys(p).indexOf("easyInterval"))},children:(ke,Fe)=>{oe();var le=Z();W(()=>N(le,r(()=>p.easyInterval.title))),$(ke,le)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var ve=v(ne,2);J(ve,{children:(X,be)=>{Qe(X,{get warning(){return s(h)}})},$$slots:{default:!0}}),$(A,j)};Le(S,A=>{o()||A(M)})}var Y=v(S,2);J(Y,{children:(A,j)=>{const K=q(()=>(m(un),r(un)));kt(A,{get defaultValue(){return r(()=>x.newCardInsertOrder)},get choices(){return s(K)},breakpoint:"md",get value(){return t().newCardInsertOrder},set value(se){re(g,r(t).newCardInsertOrder=se,r(t))},children:(se,ne)=>{ae(se,{$$events:{click:()=>L(Object.keys(p).indexOf("insertionOrder"))},children:(ve,X)=>{oe();var be=Z();W(()=>N(be,r(()=>p.insertionOrder.title))),$(ve,be)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Q=v(Y,2);J(Q,{children:(A,j)=>{Qe(A,{get warning(){return s(y)}})},$$slots:{default:!0}}),$(w,I)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(T,H)=>{const w=q(()=>(m(B),r(()=>Us())));xt(T,{get title(){return s(w)},get url(){return m(he),r(()=>he.DeckOptions.newCards)},slot:"tooltip",get helpSections(){return d},get fsrs(){return o()},$$events:{mount:D=>{f(O,D.detail.modal),f(k,D.detail.carousel)}}})}}}),Re(),i()}var Wf=te('<div class="show-timer-switch" style="display: contents;"><!></div>'),jf=te('<div class="show-timer-switch" style="display: contents;"><!></div>'),qf=te("<!> <!> <!> <!>",1);function Uf(n,e){Oe(e,!1);const[a,i]=We(),t=()=>ye(c,"$config",a),o=R();let h=G(e,"state",8),y=G(e,"api",8);const c=h().currentConfig,u=h().defaults,g={maximumAnswerSecs:{title:wu(),help:Cu()},showAnswerTimer:{title:yu(),help:hu()},stopTimerOnAnswer:{title:mu(),help:pu()}},x=Object.values(g);let C=R(),l=R();function _(d){s(C).show(),s(l).to(d)}ce(()=>(t(),B),()=>{f(o,t().capAnswerTimeToSecs>600?_u():"")}),Ye(),Te();const p=q(()=>(m(B),r(()=>Qs())));ft(n,{get title(){return s(p)},children:(d,O)=>{gt(d,{get slotHost(){return J},get api(){return y()},children:(k,L)=>{var z=qf(),T=ie(z);J(T,{children:(I,F)=>{st(I,{get defaultValue(){return r(()=>u.capAnswerTimeToSecs)},min:1,max:7200,get value(){return t().capAnswerTimeToSecs},set value(b){re(c,r(t).capAnswerTimeToSecs=b,r(t))},children:(b,S)=>{ae(b,{$$events:{click:()=>_(Object.keys(g).indexOf("maximumAnswerSecs"))},children:(M,Y)=>{oe();var Q=Z();W(()=>N(Q,r(()=>g.maximumAnswerSecs.title))),$(M,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var H=v(T,2);J(H,{children:(I,F)=>{Qe(I,{get warning(){return s(o)}})},$$slots:{default:!0}});var w=v(H,2);J(w,{children:(I,F)=>{var b=Wf(),S=U(b);Je(S,{get defaultValue(){return r(()=>u.showTimer)},get value(){return t().showTimer},set value(M){re(c,r(t).showTimer=M,r(t))},children:(M,Y)=>{ae(M,{$$events:{click:()=>_(Object.keys(g).indexOf("showAnswerTimer"))},children:(Q,A)=>{oe();var j=Z();W(()=>N(j,r(()=>g.showAnswerTimer.title))),$(Q,j)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),E(b),$(I,b)},$$slots:{default:!0}});var D=v(w,2);J(D,{children:(I,F)=>{var b=jf(),S=U(b);Je(S,{get defaultValue(){return r(()=>u.stopTimerOnAnswer)},get value(){return t().stopTimerOnAnswer},set value(M){re(c,r(t).stopTimerOnAnswer=M,r(t))},children:(M,Y)=>{ae(M,{$$events:{click:()=>_(Object.keys(g).indexOf("stopTimerOnAnswer"))},children:(Q,A)=>{oe();var j=Z();W(()=>N(j,r(()=>g.stopTimerOnAnswer.title))),$(Q,j)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),E(b),$(I,b)},$$slots:{default:!0}}),$(k,z)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(d,O)=>{const k=q(()=>(m(B),r(()=>Qs())));xt(d,{get title(){return s(k)},get url(){return m(he),r(()=>he.DeckOptions.timer)},slot:"tooltip",get helpSections(){return x},$$events:{mount:L=>{f(C,L.detail.modal),f(l,L.detail.carousel)}}})}}}),Re(),i()}var Qf=te("<!> <!> <!>",1),Yf=te('<datalist id="easy_day_steplist"><option>0.5</option></datalist> <!>',1);function Kf(n,e){Oe(e,!1);const[a,i]=We(),t=()=>ye(_,"$config",a),o=()=>ye(C,"$fsrsEnabled",a),h=()=>ye(l,"$reschedule",a),y=R(),c=R(),u=R();let g=G(e,"state",8),x=G(e,"api",8);const C=g().fsrs,l=g().fsrsReschedule,_=g().currentConfig,p=g().defaults,d=t().easyDaysPercentages.slice();ce(()=>t(),()=>{t().easyDaysPercentages.length!==7&&re(_,r(t).easyDaysPercentages=p.easyDaysPercentages.slice(),r(t))}),ce(()=>t(),()=>{f(y,t().easyDaysPercentages.some((z,T)=>z!==d[T]))}),ce(()=>(t(),B),()=>{f(c,t().easyDaysPercentages.some(z=>z===1)?"":ku())}),ce(()=>(s(y),o(),h(),B),()=>{f(u,s(y)&&!(o()&&h())?Pu():"")}),Ye(),Te();var O=Yf(),k=v(ie(O),2);const L=q(()=>(m(B),r(()=>An())));ft(k,{get title(){return s(L)},children:(z,T)=>{gt(z,{get slotHost(){return J},get api(){return x()},children:(H,w)=>{var D=Qf(),I=ie(D);ra(I,{get values(){return t().easyDaysPercentages},set values(S){re(_,r(t).easyDaysPercentages=S,r(t))},$$legacy:!0});var F=v(I,2);J(F,{children:(S,M)=>{Qe(S,{get warning(){return s(c)}})},$$slots:{default:!0}});var b=v(F,2);J(b,{children:(S,M)=>{Qe(S,{get warning(){return s(u)}})},$$slots:{default:!0}}),$(H,D)},$$slots:{default:!0}})},$$slots:{default:!0}}),$(n,O),Re(),i()}var Xf=te("<div><!> <!> <!> <!> <!></div> <div><!> <!> <!> <!> <!> <!> <!></div>",1),Zf=te('<!> <div class="deck-options-page svelte-htbfcn"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>',1);function Jf(n,e){Oe(e,!1);const[a,i]=We(),t=()=>ye(h,"$addons",a);let o=G(e,"state",8);const h=o().addonComponents;function y(){return o().currentAuxData}function c(F){Pt(h,[...t(),F])}function u(F,b){Pt(h,[...t(),{component:Of,html:F,mounted:b}])}const g={},x={},C={},l={},_={},p={},d={},O={},k={},L={};let z=R();Te();var T=Zf(),H=ie(T);tf(H,{get state(){return o()},$$events:{presetchange(...F){var b;(b=s(z))==null||b.apply(this,F)}}});var w=v(H,2),D=U(w);Ze(D,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.75rem"})),Su(D.lastChild,{breakpoint:"sm",class:"container-columns",children:(F,b)=>{var S=Xf(),M=ie(S),Y=U(M);je(Y,{class:"row-columns",children:(le,Pe)=>{af(le,{get state(){return o()},get api(){return x},get onPresetChange(){return s(z)},set onPresetChange(Ge){f(z,Ge)},$$legacy:!0})},$$slots:{default:!0}});var Q=v(Y,2);je(Q,{class:"row-columns",children:(le,Pe)=>{Gf(le,{get state(){return o()},get api(){return C}})},$$slots:{default:!0}});var A=v(Q,2);je(A,{class:"row-columns",children:(le,Pe)=>{zf(le,{get state(){return o()},get api(){return l}})},$$slots:{default:!0}});var j=v(A,2);je(j,{class:"row-columns",children:(le,Pe)=>{lf(le,{get state(){return o()},get api(){return p}})},$$slots:{default:!0}});var K=v(j,2);je(K,{class:"row-columns",children:(le,Pe)=>{Sf(le,{get state(){return o()},api:{},get onPresetChange(){return s(z)},set onPresetChange(Ge){f(z,Ge)},$$legacy:!0})},$$slots:{default:!0}}),E(M);var se=v(M,2),ne=U(se);je(ne,{class:"row-columns",children:(le,Pe)=>{Bd(le,{get state(){return o()},get api(){return _}})},$$slots:{default:!0}});var ve=v(ne,2);je(ve,{class:"row-columns",children:(le,Pe)=>{Nd(le,{get state(){return o()},get api(){return O}})},$$slots:{default:!0}});var X=v(ve,2);je(X,{class:"row-columns",children:(le,Pe)=>{Uf(le,{get state(){return o()},get api(){return d}})},$$slots:{default:!0}});var be=v(X,2);je(be,{class:"row-columns",children:(le,Pe)=>{zd(le,{get state(){return o()},get api(){return d}})},$$slots:{default:!0}});var de=v(be,2);{var $e=le=>{je(le,{class:"row-columns",children:(Pe,Ge)=>{td(Pe,{get state(){return o()}})},$$slots:{default:!0}})};Le(de,le=>{t(),r(()=>t().length)&&le($e)})}var ke=v(de,2);je(ke,{class:"row-columns",children:(le,Pe)=>{Kf(le,{get state(){return o()},get api(){return L}})},$$slots:{default:!0}});var Fe=v(ke,2);je(Fe,{class:"row-columns",children:(le,Pe)=>{Ed(le,{get state(){return o()},get api(){return k}})},$$slots:{default:!0}}),E(se),$(F,S)},$$slots:{default:!0}}),E(D),E(w),$(n,T),et(e,"auxData",y),et(e,"addSvelteAddon",c),et(e,"addHtmlAddon",u),et(e,"options",g),et(e,"dailyLimits",x),et(e,"newOptions",C),et(e,"lapseOptions",l),et(e,"buryOptions",_),et(e,"displayOrder",p),et(e,"timerOptions",d),et(e,"audioOptions",O),et(e,"advancedOptions",k),et(e,"easyDays",L);var I=Re({auxData:y,addSvelteAddon:c,addHtmlAddon:u,options:g,dailyLimits:x,newOptions:C,lapseOptions:l,buryOptions:_,displayOrder:p,timerOptions:d,audioOptions:O,advancedOptions:k,easyDays:L});return i(),I}function zg(n,e){Oe(e,!1);let a=G(e,"data",8),i=R();globalThis.anki||(globalThis.anki={}),globalThis.anki.deckOptionsPendingChanges=async()=>{await ys(),(!await a().state.isModified()||confirm(xu()))&&Ta({})},gs(()=>{globalThis.$deckOptions=new Promise((t,o)=>{t(s(i))}),a().state.resolveOriginalConfigs(),Da({})}),Te(),er(Jf(n,{get state(){return m(a()),r(()=>a().state)},$$legacy:!0}),t=>f(i,t),()=>s(i)),Re()}export{zg as component,Vg as universal};
