{"version":3,"sources":["docassemble_webapp/docassemble/webapp/static/bootstrap-combobox/js/bootstrap-combobox.js"],"sourcesContent":["/* =============================================================\n * bootstrap-combobox.js v1.1.8\n * =============================================================\n * Copyright 2012 Daniel Farrell\n * Modified 2018 for docassemble by Jonathan Pyle\n * Modified 2022 for docassemble by Bryce Willey\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================ */\n\n(function ($) {\n  \"use strict\";\n\n  /* COMBOBOX PUBLIC CLASS DEFINITION\n   * ================================ */\n\n  var Combobox = function (element, options) {\n    this.options = $.extend({}, $.fn.combobox.defaults, options);\n    this.template = this.options.template || this.template;\n    this.$source = $(element);\n    if (this.$source.hasClass(\"da-combobox-floating\")) {\n      this.$label = this.$source.next(\"label\");\n    } else {\n      this.$label = null;\n    }\n    this.$container = this.setup();\n    this.$element = this.$container.find(\"input[type=text]\");\n    this.$target = this.$container.find(\"input[type=hidden]\");\n    this.mousedover = false;\n    if (this.$source.attr(\"disabled\") !== undefined) {\n      this.$target.prop(\"disabled\", true);\n    }\n    this.$button = this.$container.find(\".dacomboboxtoggle\");\n    if (this.$float) {\n      this.$menu = $(this.options.menu).insertAfter(this.$float);\n    } else {\n      this.$menu = $(this.options.menu).insertAfter(this.$element);\n    }\n    this.matcher = this.options.matcher || this.matcher;\n    this.sorter = this.options.sorter || this.sorter;\n    this.highlighter = this.options.highlighter || this.highlighter;\n    this.clearIfNoMatch = this.options.clearIfNoMatch;\n    this.shown = false;\n    this.selected = false;\n    this.refresh();\n    this.transferAttributes();\n    this.listen();\n  };\n\n  Combobox.prototype = {\n    constructor: Combobox,\n\n    setup: function () {\n      //console.log('setup');\n      var combobox = $(this.template());\n      this.$source.before(combobox);\n      this.$source.hide();\n      if (this.$label) {\n        this.$float = $('<div class=\"form-floating\"></div>');\n        var innerText = this.$label.text();\n        var inputElement = combobox.find('input[type=\"text\"]');\n        inputElement.attr(\"placeholder\", innerText);\n        inputElement.detach();\n        this.$label.detach();\n        this.$float.append(inputElement, this.$label);\n        this.$float.insertAfter(inputElement);\n      } else {\n        this.$float = null;\n      }\n      return combobox;\n    },\n\n    template: function () {\n      //console.log('template');\n      if (this.options.showButton) {\n        if (this.options.functionalButton) {\n          return (\n            '<div class=\"combobox-container\"> <input type=\"hidden\" /> ' +\n            '<div class=\"input-group\"> <input type=\"text\" alt=\"' +\n            this.options.inputBox +\n            '\" role=\"combobox\" aria-autocomplete=\"list\" aria-expanded=\"false\" aria-activedescendant=\"\" autocomplete=\"off\" /> ' +\n            '<button class=\"btn btn-outline-secondary dacomboboxtoggle\" type=\"button\" tabindex=\"-1\" aria-label=\"' +\n            this.options.buttonLabel +\n            '\" aria-expanded=\"false\" aria-controls=\"id_controls\">' +\n            '<span class=\"fa-solid fa-caret-down\"></span><span class=\"fa-solid fa-xmark\"></span>' +\n            \"</button></div> </div>\"\n          );\n        } else {\n          return (\n            '<div class=\"combobox-container\"> <input type=\"hidden\" /> ' +\n            '<div class=\"input-group\"> <input type=\"text\" alt=\"' +\n            this.options.inputBox +\n            '\" role=\"combobox\" aria-autocomplete=\"list\" aria-expanded=\"false\" aria-activedescendant=\"\" autocomplete=\"off\" /> ' +\n            '<button class=\"btn btn-outline-secondary\" type=\"button\" disabled tabindex=\"-1\">' +\n            '<span class=\"fa-solid fa-caret-down\"></span>' +\n            \"</button></div> </div>\"\n          );\n        }\n      } else {\n        return (\n          '<div class=\"combobox-container\"> <input type=\"hidden\" /> ' +\n          '<input type=\"text\" alt=\"' +\n          this.options.inputBox +\n          '\" role=\"combobox\" aria-autocomplete=\"list\" aria-expanded=\"false\" aria-activedescendant=\"\" autocomplete=\"off\" /></div>'\n        );\n      }\n    },\n\n    disable: function () {\n      console.log(\"disable\");\n      this.$element.prop(\"disabled\", true);\n      this.$button.attr(\"disabled\", true);\n      this.$target.prop(\"disabled\", true);\n      this.$source.prop(\"disabled\", true);\n      this.disabled = true;\n      this.$container.addClass(\"combobox-disabled\");\n    },\n\n    enable: function () {\n      console.log(\"enable\");\n      this.$element.prop(\"disabled\", false);\n      this.$button.attr(\"disabled\", false);\n      this.$target.prop(\"disabled\", false);\n      this.$source.prop(\"disabled\", false);\n      this.disabled = false;\n      this.$container.removeClass(\"combobox-disabled\");\n    },\n    parse: function () {\n      //console.log('parse');\n      var that = this,\n        map = {},\n        revMap = {},\n        source = [],\n        selected = false,\n        selectedValue = \"\";\n      this.$source.find(\"option\").each(function () {\n        var option = $(this);\n        if (option.val() === \"\") {\n          that.options.placeholder = option.text();\n          return;\n        }\n        map[option.text()] = option.val();\n        revMap[option.val()] = option.text();\n        source.push(option.text());\n        if (option.prop(\"selected\")) {\n          selected = option.text();\n          selectedValue = option.val();\n        }\n      });\n      this.map = map;\n      this.revMap = revMap;\n      if (selected) {\n        var triggerElement = false;\n        var triggerTarget = false;\n        var oldVal;\n        oldVal = this.$element.val();\n        if (oldVal !== selected) {\n          this.$element.val(selected);\n          triggerElement = true;\n        }\n        oldVal = this.$target.val();\n        if (oldVal !== selectedValue) {\n          this.$target.val(selectedValue);\n          triggerTarget = true;\n        }\n        this.$container.addClass(\"combobox-selected\");\n        this.selected = true;\n        if (triggerTarget) {\n          this.$target.trigger(\"change\");\n        }\n        if (triggerElement) {\n          this.$element.trigger(\"change\");\n        }\n      } else {\n        this.$container.removeClass(\"combobox-selected\");\n        this.selected = false;\n      }\n      return source;\n    },\n\n    transferAttributes: function () {\n      //console.log('transferAttributes');\n      this.options.placeholder =\n        this.$source.attr(\"data-placeholder\") || this.options.placeholder;\n      if (this.options.appendId !== \"undefined\") {\n        // keep the source id on the input, otherwise the label (which refers to it by id) will be lost\n        this.$element.attr(\"id\", this.$source.attr(\"id\"));\n        this.$source.attr(\n          \"id\",\n          this.$source.attr(\"id\") + this.options.appendId,\n        );\n        daComboBoxes[this.$element.attr(\"id\")] = this;\n      }\n      this.$menu.attr(\"id\", this.$element.attr(\"id\") + \"menu\");\n      // Set aria-controls now that things have ids\n      this.$element.attr(\"aria-controls\", this.$menu.attr(\"id\"));\n      this.$element.attr(\"aria-owns\", this.$menu.attr(\"id\"));\n      this.$button.attr(\"aria-controls\", this.$menu.attr(\"id\"));\n      this.$button.attr(\"aria-label\", this.$source.attr(\"aria-label\"));\n      if (this.$source.attr(\"aria-labelledby\")) {\n        this.$element.attr(\n          \"aria-labelledby\",\n          this.$source.attr(\"aria-labelledby\"),\n        );\n      } else {\n        this.$source.attr(\"aria-labelledby\", \"daMainQuestion\");\n      }\n      this.$button.attr(\n        \"aria-labelledby\",\n        this.$source.attr(\"aria-labelledby\"),\n      );\n      this.$button.attr(\n        \"aria-describedby\",\n        this.$source.attr(\"aria-describedby\"),\n      );\n      this.$element.attr(\"placeholder\", this.options.placeholder);\n      this.$target.prop(\"name\", this.$source.prop(\"name\"));\n      this.$target.val(this.$source.val());\n      this.$source.removeAttr(\"name\"); // Remove from source otherwise form will pass parameter twice.\n      this.$element.attr(\"required\", this.$source.attr(\"required\"));\n      this.$element.attr(\"rel\", this.$source.attr(\"rel\"));\n      this.$element.attr(\"title\", this.$source.attr(\"title\"));\n      this.$element.attr(\"class\", this.$source.attr(\"class\"));\n      if (this.$element.hasClass(\"daspaceafter\")) {\n        this.$element.removeClass(\"daspaceafter\");\n        this.$container.addClass(\"daspaceafter\");\n      }\n      this.$element.attr(\"tabindex\", this.$source.attr(\"tabindex\"));\n      this.$source.removeAttr(\"tabindex\");\n      if (!this.$target.val() && this.$source.data(\"default\")) {\n        var defaultVal = this.$source.data(\"default\");\n        this.$element.val(defaultVal);\n        this.$target.val(defaultVal);\n      }\n      if (this.$source.attr(\"disabled\") !== undefined) this.disable();\n    },\n\n    select: function () {\n      //console.log(\"select\");\n      var val = this.$menu.find(\".active\").attr(\"data-value\");\n      var oldVal;\n      var triggerElement = false;\n      var triggerTarget = false;\n      var triggerSource = false;\n      this.$container.parent().find(\".da-has-error\").remove();\n      oldVal = this.$element.val();\n      var newVal = this.updater(val);\n      if (oldVal !== newVal) {\n        this.$element.val(newVal);\n        triggerElement = true;\n      }\n      oldVal = this.$target.val();\n      if (oldVal !== this.map[val]) {\n        this.$target.val(this.map[val]); //.trigger(\"change\");\n        triggerTarget = true;\n      }\n      oldVal = this.$source.val();\n      if (oldVal !== this.map[val]) {\n        this.$source.val(this.map[val]);\n        triggerSource = true;\n      }\n      this.$container.addClass(\"combobox-selected\");\n      this.selected = true;\n      this.hide();\n      if (triggerTarget) {\n        this.$target.trigger(\"change\");\n      }\n      if (triggerElement) {\n        this.$element.trigger(\"change\");\n      }\n      if (triggerSource) {\n        this.$source.trigger(\"change\");\n      }\n      return;\n    },\n\n    manualSelect: function (val) {\n      //console.log(\"manualSelect\");\n      var oldVal;\n      var found = false;\n      var triggerSource = false;\n      var triggerTarget = false;\n      this.$container.parent().find(\".da-has-error\").remove();\n      if (val !== \"\" && this.revMap[val] !== undefined) {\n        this.$element.val(this.revMap[val]);\n        found = true;\n      } else {\n        this.$element.val(val);\n      }\n      oldVal = this.$target.val();\n      if (oldVal !== val) {\n        this.$target.val(val);\n        triggerTarget = true;\n      }\n      oldVal = this.$source.val();\n      if (oldVal !== val) {\n        this.$source.val(val);\n        triggerSource = true;\n      }\n      if (val !== \"\" && found) {\n        this.$container.addClass(\"combobox-selected\");\n        this.selected = true;\n      }\n      if (triggerTarget) {\n        this.$target.trigger(\"change\");\n      }\n      this.$element.trigger(\"change\");\n      if (triggerSource) {\n        this.$source.trigger(\"change\");\n      }\n      return;\n    },\n\n    updater: function (item) {\n      //console.log('updater');\n      return item;\n    },\n\n    show: function () {\n      //console.log(\"show\");\n      var pos = $.extend({}, this.$element.position(), {\n        height: this.$element[0].offsetHeight,\n      });\n      this.$menu\n        .insertAfter(this.$element)\n        .css({\n          top: pos.top + pos.height,\n          left: pos.left,\n        })\n        .show();\n\n      this.hidden = false;\n\n      this.$element.attr(\"aria-expanded\", true);\n      this.$button.attr(\"aria-expanded\", true);\n\n      this.shown = true;\n      return this;\n    },\n\n    hide: function () {\n      //console.log('hide');\n      this.$menu.hide();\n      this.hidden = true;\n      this.$element.on(\"blur\", $.proxy(this.blur, this));\n      this.$element.attr(\"aria-expanded\", false);\n      this.$button.attr(\"aria-expanded\", false);\n      this.shown = false;\n      return this;\n    },\n\n    lookup: function (event) {\n      //console.log(\"lookup\");\n      this.query = this.$element.val();\n      this.process(this.source);\n    },\n\n    process: function (items) {\n      var that = this;\n\n      items = $.grep(items, function (item) {\n        return that.matcher(item);\n      });\n\n      items = this.sorter(items);\n\n      if (!items.length) {\n        return this.shown ? this.hide() : this;\n      }\n\n      return this.render(items.slice(0, this.options.items)).show();\n    },\n\n    matcher: function (item) {\n      //console.log('matcher');\n      return ~item.toLowerCase().indexOf(this.query.toLowerCase());\n    },\n\n    sorter: function (items) {\n      //console.log('sorter');\n      var beginswith = [],\n        caseSensitive = [],\n        caseInsensitive = [],\n        item;\n\n      while ((item = items.shift())) {\n        if (!item.toLowerCase().indexOf(this.query.toLowerCase())) {\n          beginswith.push(item);\n        } else if (~item.indexOf(this.query)) {\n          caseSensitive.push(item);\n        } else {\n          caseInsensitive.push(item);\n        }\n      }\n\n      return beginswith.concat(caseSensitive, caseInsensitive);\n    },\n\n    highlighter: function (item) {\n      //console.log('highlighter');\n      var query = this.query.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\");\n      if (!query) {\n        return item;\n      }\n      return item.replace(\n        new RegExp(\"(\" + query + \")\", \"ig\"),\n        function ($1, match) {\n          return \"<b>\" + match + \"</b>\";\n        },\n      );\n    },\n\n    render: function (items) {\n      //console.log('render');\n      var that = this;\n\n      items = $(items).map(function (i, item) {\n        i = $(that.options.item)\n          .attr(\"data-value\", item)\n          .attr(\"aria-label\", item);\n        i.attr(\"id\", that.$element.attr(\"id\") + \"-option-\" + item);\n        i.html(that.highlighter(item));\n        return i[0];\n      });\n\n      this.setActive(items.first());\n      this.$menu.html(items);\n      return this;\n    },\n\n    setActive: function (elem) {\n      elem.addClass(\"active\").attr(\"aria-selected\", true);\n      this.$element.attr(\"aria-activedescendant\", elem.attr(\"id\"));\n    },\n\n    swapActive: function (oldElem, newElem) {\n      oldElem.removeClass(\"active\").attr(\"aria-selected\", false);\n      this.setActive(newElem);\n    },\n\n    next: function (event) {\n      //console.log('next');\n      var active = this.$menu.find('[aria-selected=\"true\"]');\n      var next = active.next();\n\n      if (!next.length) {\n        next = $(this.$menu.find(\"li\")[0]);\n      }\n\n      this.swapActive(active, next);\n    },\n\n    prev: function (event) {\n      //console.log('prev');\n      var active = this.$menu.find('[aria-selected=\"true\"]');\n      var prev = active.prev();\n\n      if (!prev.length) {\n        prev = this.$menu.find(\"li\").last();\n      }\n\n      this.swapActive(active, prev);\n    },\n\n    toggle: function (e) {\n      //console.log(\"toggle\");\n      if (!this.disabled) {\n        if (this.$container.hasClass(\"combobox-selected\")) {\n          this.clearAll();\n          this.$element.attr(\"aria-expanded\", false);\n          this.$button.attr(\"aria-expanded\", false);\n        } else {\n          if (this.shown) {\n            this.$element.attr(\"aria-expanded\", false);\n            this.$button.attr(\"aria-expanded\", false);\n            this.hide();\n          } else {\n            this.$element.attr(\"aria-expanded\", true);\n            this.$button.attr(\"aria-expanded\", true);\n            this.clearElement();\n            this.lookup();\n          }\n        }\n      }\n      if (e) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n      return false;\n    },\n\n    clearAll: function () {\n      //console.log('clearAll');\n      var triggerElement = false;\n      var triggerSource = false;\n      var triggerTarget = false;\n      var oldVal;\n      oldVal = this.$element.val();\n      if (oldVal !== \"\") {\n        this.$element.val(\"\");\n        triggerElement = true;\n      }\n      oldVal = this.$source.val();\n      if (oldVal !== \"\") {\n        this.$source.val(\"\");\n        triggerSource = true;\n      }\n      oldVal = this.$target.val();\n      if (oldVal !== \"\") {\n        this.$target.val(\"\");\n        triggerTarget = true;\n      }\n      this.$container.removeClass(\"combobox-selected\");\n      if (triggerTarget) {\n        this.$target.trigger(\"change\");\n      }\n      if (triggerElement) {\n        this.$element.trigger(\"change\");\n      }\n      if (triggerSource) {\n        this.$source.trigger(\"change\");\n      }\n    },\n\n    clearElement: function () {\n      //console.log('clearElement');\n      this.$element.val(\"\").focus();\n    },\n\n    clearTarget: function () {\n      //console.log('clearTarget');\n      this.$source.val(\"\");\n      this.$target.val(\"\");\n      this.$container.removeClass(\"combobox-selected\");\n      this.selected = false;\n    },\n\n    refresh: function () {\n      //console.log('refresh');\n      this.source = this.parse();\n      this.options.items = this.source.length;\n    },\n\n    listen: function () {\n      //console.log('listen');\n      this.$element\n        .on(\"focus\", $.proxy(this.focus, this))\n        .on(\"change\", $.proxy(this.change, this))\n        .on(\"blur\", $.proxy(this.blur, this))\n        .on(\"keypress\", $.proxy(this.keypress, this))\n        .on(\"keyup\", $.proxy(this.keyup, this));\n\n      if (this.eventSupported(\"keydown\")) {\n        this.$element.on(\"keydown\", $.proxy(this.keydown, this));\n      }\n\n      this.$menu\n        .on(\"click\", $.proxy(this.click, this))\n        .on(\"mouseenter\", \"li\", $.proxy(this.mouseenter, this))\n        .on(\"mouseleave\", \"li\", $.proxy(this.mouseleave, this))\n        .on(\"mousedown\", \"li\", $.proxy(this.mousedown, this));\n\n      if (this.options.showButton && this.options.functionalButton) {\n        this.$button.on(\"click touchend\", $.proxy(this.toggle, this));\n      }\n    },\n\n    eventSupported: function (eventName) {\n      //console.log('eventSupported');\n      var isSupported = eventName in this.$element;\n      if (!isSupported) {\n        this.$element.setAttribute(eventName, \"return;\");\n        isSupported = typeof this.$element[eventName] === \"function\";\n      }\n      return isSupported;\n    },\n\n    move: function (e) {\n      //console.log(\"move\");\n      if (!this.shown) {\n        return;\n      }\n\n      switch (e.keyCode) {\n        case 9: // tab\n        case 13: // enter\n        case 27: // escape\n          e.preventDefault();\n          break;\n\n        case 38: // up arrow\n          e.preventDefault();\n          this.prev();\n          this.fixMenuScroll();\n          break;\n\n        case 40: // down arrow\n          e.preventDefault();\n          this.next();\n          this.fixMenuScroll();\n          break;\n      }\n      e.stopPropagation();\n    },\n\n    fixMenuScroll: function () {\n      //console.log('fixMenuScroll');\n      var active = this.$menu.find(\".active\");\n      if (active.length) {\n        this.$element.attr(\"aria-activedescendant\", active.attr(\"id\"));\n        var top = active.position().top;\n        var bottom = top + active.height();\n        var scrollTop = this.$menu.scrollTop();\n        var menuHeight = this.$menu.height();\n        if (bottom > menuHeight) {\n          this.$menu.scrollTop(scrollTop + bottom - menuHeight);\n        } else if (top < 0) {\n          this.$menu.scrollTop(scrollTop + top);\n        }\n      }\n    },\n\n    setActiveDescendant: function (e) {\n      if (this.mousedover) {\n        this.swapActive(this.$menu.find(\".active\"), $(e.currentTarget));\n      }\n    },\n\n    keydown: function (e) {\n      //console.log('keyDown');\n      this.suppressKeyPressRepeat = ~$.inArray(e.keyCode, [40, 38, 9, 13, 27]);\n      this.move(e);\n    },\n\n    keypress: function (e) {\n      //console.log('keyPress');\n      if (this.suppressKeyPressRepeat) {\n        return;\n      }\n      this.move(e);\n    },\n\n    keyup: function (e) {\n      //console.log(\"keyUp\");\n      switch (e.keyCode) {\n        case 40: // down arrow\n          if (!this.shown) {\n            this.toggle();\n          }\n          break;\n        case 39: // right arrow\n        case 38: // up arrow\n        case 37: // left arrow\n        case 36: // home\n        case 35: // end\n        case 16: // shift\n        case 17: // ctrl\n        case 18: // alt\n          break;\n\n        case 9: // tab\n        case 13: // enter\n          if (e) {\n            e.stopPropagation();\n            e.preventDefault();\n          }\n          daFetchAjaxTimeoutFetchAfter = false;\n          daFetchAcceptIncoming = false;\n          if (!this.shown) {\n            return;\n          }\n          if (!this.selected) {\n            this.select();\n          } else {\n            var val = this.$element.val();\n            var opts = this.$menu.find(\"li\");\n            var n = opts.length;\n            for (var i = 0; i < n; ++i) {\n              if ($(opts[i]).attr(\"data-value\") == val) {\n                e.stopPropagation();\n                e.preventDefault();\n                $(opts[i]).click();\n                return false;\n              }\n            }\n          }\n          break;\n\n        case 27: // escape\n          if (e) {\n            e.stopPropagation();\n            e.preventDefault();\n          }\n          daFetchAjaxTimeoutFetchAfter = false;\n          daFetchAcceptIncoming = false;\n          if (!this.shown) {\n            return;\n          }\n          this.hide();\n          break;\n\n        default:\n          if (this.options.lookupWhileTyping) {\n            this.clearTarget();\n            this.$target.val(this.$element.val());\n            this.lookup();\n          } else {\n            this.query = this.$element.val();\n          }\n      }\n\n      e.stopPropagation();\n      e.preventDefault();\n    },\n\n    focus: function (e) {\n      //console.log('focus');\n      this.focused = true;\n    },\n\n    blur: function (e) {\n      //console.log('blur');\n      var that = this;\n      this.focused = false;\n      var val = this.$element.val();\n      if (this.shown) {\n        var opts = this.$menu.find(\"li\");\n        var n = opts.length;\n        for (var i = 0; i < n; ++i) {\n          if ($(opts[i]).attr(\"data-value\") == val) {\n            $(opts[i]).click();\n            return;\n          }\n        }\n      }\n      var oldVal;\n      var triggerElement = false;\n      var triggerSource = false;\n      var triggerTarget = false;\n      if (this.clearIfNoMatch && !this.selected && val !== \"\") {\n        oldVal = this.$element.val();\n        if (oldVal !== \"\") {\n          this.$element.val(\"\");\n          triggerElement = true;\n        }\n        oldVal = this.$source.val();\n        if (oldVal !== \"\") {\n          this.$source.val(\"\");\n          triggerSource = true;\n        }\n        oldVal = this.$target.val();\n        if (oldVal !== \"\") {\n          this.$target.val(\"\"); //.trigger(\"change\");\n          triggerTarget = true;\n        }\n      }\n      if (!this.selected) {\n        oldVal = this.$target.val();\n        if (oldVal !== val) {\n          this.$target.val(val); //.trigger(\"change\");\n          triggerTarget = true;\n        }\n      }\n      if (triggerTarget) {\n        this.$target.trigger(\"change\");\n      }\n      if (triggerElement) {\n        this.$element.trigger(\"change\");\n      }\n      if (triggerSource) {\n        this.$source.trigger(\"change\");\n      }\n      if (!this.mousedover && this.shown) {\n        setTimeout(function () {\n          that.hide();\n        }, 200);\n      }\n    },\n\n    click: function (e) {\n      //console.log(\"click\");\n      if (e) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n      daFetchAjaxTimeoutFetchAfter = false;\n      daFetchAcceptIncoming = false;\n      this.select();\n      this.$element.focus();\n    },\n\n    mouseenter: function (e) {\n      //console.log('mouseenter');\n      this.mousedover = true;\n      this.setActiveDescendant(e);\n    },\n\n    mousedown: function (e) {\n      this.mousedover = true;\n      this.setActiveDescendant(e);\n      this.mousedover = false;\n      if (!this.hidden) {\n        if (e.target.tagName == \"UL\") {\n          this.$element.off(\"blur\");\n        }\n      }\n    },\n\n    mouseleave: function (e) {\n      //console.log('mouseleave');\n      this.mousedover = false;\n      this.setActiveDescendant(e);\n    },\n  };\n\n  /* COMBOBOX PLUGIN DEFINITION\n   * =========================== */\n  $.fn.combobox = function (option) {\n    return this.each(function () {\n      var $this = $(this),\n        data = $this.data(\"combobox\"),\n        options = typeof option == \"object\" && option;\n      if (!data) {\n        $this.data(\"combobox\", (data = new Combobox(this, options)));\n      }\n      if (typeof option == \"string\") {\n        data[option]();\n      }\n    });\n  };\n\n  $.fn.combobox.defaults = {\n    bsVersion: \"5\",\n    menu: '<ul role=\"listbox\" class=\"typeahead typeahead-long dropdown-menu\"></ul>',\n    item: '<li role=\"option\" class=\"dropdown-item dapointer\"></li>',\n    appendId: \"combobox\",\n    buttonLabel: \"dropdown\",\n    clearIfNoMatch: false,\n    showButton: true,\n    functionalButton: true,\n    inputBox: \"Input box\",\n    lookupWhileTyping: true,\n  };\n\n  $.fn.combobox.Constructor = Combobox;\n})(window.jQuery);\n"],"names":["$","Combobox","element","options","this","extend","fn","combobox","defaults","template","$source","hasClass","$label","next","$container","setup","$element","find","$target","mousedover","attr","undefined","prop","$button","$float","$menu","menu","insertAfter","matcher","sorter","highlighter","clearIfNoMatch","shown","selected","refresh","transferAttributes","listen","prototype","constructor","before","hide","innerText","text","inputElement","detach","append","showButton","functionalButton","inputBox","buttonLabel","disable","console","log","disabled","addClass","enable","removeClass","parse","that","map","revMap","source","selectedValue","each","option","val","placeholder","push","triggerElement","triggerTarget","oldVal","trigger","appendId","daComboBoxes","removeAttr","data","defaultVal","select","triggerSource","parent","remove","newVal","updater","manualSelect","found","item","show","pos","position","height","offsetHeight","css","top","left","hidden","on","proxy","blur","lookup","event","query","process","items","grep","length","render","slice","toLowerCase","indexOf","beginswith","caseSensitive","caseInsensitive","shift","concat","replace","RegExp","$1","match","i","html","setActive","first","elem","swapActive","oldElem","newElem","active","prev","last","toggle","e","clearAll","clearElement","preventDefault","stopPropagation","focus","clearTarget","change","keypress","keyup","eventSupported","keydown","click","mouseenter","mouseleave","mousedown","eventName","isSupported","setAttribute","move","keyCode","fixMenuScroll","bottom","scrollTop","menuHeight","setActiveDescendant","currentTarget","suppressKeyPressRepeat","inArray","daFetchAjaxTimeoutFetchAfter","daFetchAcceptIncoming","opts","n","lookupWhileTyping","focused","setTimeout","target","tagName","off","$this","bsVersion","Constructor","window","jQuery"],"mappings":"CAoBA,SAAWA,GACT,aAKA,IAAIC,SAAW,SAAUC,QAASC,SAChCC,KAAKD,QAAUH,EAAEK,OAAO,GAAIL,EAAEM,GAAGC,SAASC,SAAUL,OAAO,EAC3DC,KAAKK,SAAWL,KAAKD,QAAQM,UAAYL,KAAKK,SAC9CL,KAAKM,QAAUV,EAAEE,OAAO,EACxB,GAAIE,KAAKM,QAAQC,SAAS,sBAAsB,EAAG,CACjDP,KAAKQ,OAASR,KAAKM,QAAQG,KAAK,OAAO,CACzC,KAAO,CACLT,KAAKQ,OAAS,IAChB,CACAR,KAAKU,WAAaV,KAAKW,MAAM,EAC7BX,KAAKY,SAAWZ,KAAKU,WAAWG,KAAK,kBAAkB,EACvDb,KAAKc,QAAUd,KAAKU,WAAWG,KAAK,oBAAoB,EACxDb,KAAKe,WAAa,MAClB,GAAIf,KAAKM,QAAQU,KAAK,UAAU,IAAMC,UAAW,CAC/CjB,KAAKc,QAAQI,KAAK,WAAY,IAAI,CACpC,CACAlB,KAAKmB,QAAUnB,KAAKU,WAAWG,KAAK,mBAAmB,EACvD,GAAIb,KAAKoB,OAAQ,CACfpB,KAAKqB,MAAQzB,EAAEI,KAAKD,QAAQuB,IAAI,EAAEC,YAAYvB,KAAKoB,MAAM,CAC3D,KAAO,CACLpB,KAAKqB,MAAQzB,EAAEI,KAAKD,QAAQuB,IAAI,EAAEC,YAAYvB,KAAKY,QAAQ,CAC7D,CACAZ,KAAKwB,QAAUxB,KAAKD,QAAQyB,SAAWxB,KAAKwB,QAC5CxB,KAAKyB,OAASzB,KAAKD,QAAQ0B,QAAUzB,KAAKyB,OAC1CzB,KAAK0B,YAAc1B,KAAKD,QAAQ2B,aAAe1B,KAAK0B,YACpD1B,KAAK2B,eAAiB3B,KAAKD,QAAQ4B,eACnC3B,KAAK4B,MAAQ,MACb5B,KAAK6B,SAAW,MAChB7B,KAAK8B,QAAQ,EACb9B,KAAK+B,mBAAmB,EACxB/B,KAAKgC,OAAO,CACd,EAEAnC,SAASoC,UAAY,CACnBC,YAAarC,SAEbc,MAAO,WAEL,IAAIR,SAAWP,EAAEI,KAAKK,SAAS,CAAC,EAChCL,KAAKM,QAAQ6B,OAAOhC,QAAQ,EAC5BH,KAAKM,QAAQ8B,KAAK,EAClB,GAAIpC,KAAKQ,OAAQ,CACfR,KAAKoB,OAASxB,EAAE,mCAAmC,EACnD,IAAIyC,UAAYrC,KAAKQ,OAAO8B,KAAK,EACjC,IAAIC,aAAepC,SAASU,KAAK,oBAAoB,EACrD0B,aAAavB,KAAK,cAAeqB,SAAS,EAC1CE,aAAaC,OAAO,EACpBxC,KAAKQ,OAAOgC,OAAO,EACnBxC,KAAKoB,OAAOqB,OAAOF,aAAcvC,KAAKQ,MAAM,EAC5CR,KAAKoB,OAAOG,YAAYgB,YAAY,CACtC,KAAO,CACLvC,KAAKoB,OAAS,IAChB,CACA,OAAOjB,QACT,EAEAE,SAAU,WAER,GAAIL,KAAKD,QAAQ2C,WAAY,CAC3B,GAAI1C,KAAKD,QAAQ4C,iBAAkB,CACjC,MACE,4DACA,qDACA3C,KAAKD,QAAQ6C,SACb,mHACA,sGACA5C,KAAKD,QAAQ8C,YACb,uDACA,sFACA,wBAEJ,KAAO,CACL,MACE,4DACA,qDACA7C,KAAKD,QAAQ6C,SACb,mHACA,kFACA,+CACA,wBAEJ,CACF,KAAO,CACL,MACE,4DACA,2BACA5C,KAAKD,QAAQ6C,SACb,uHAEJ,CACF,EAEAE,QAAS,WACPC,QAAQC,IAAI,SAAS,EACrBhD,KAAKY,SAASM,KAAK,WAAY,IAAI,EACnClB,KAAKmB,QAAQH,KAAK,WAAY,IAAI,EAClChB,KAAKc,QAAQI,KAAK,WAAY,IAAI,EAClClB,KAAKM,QAAQY,KAAK,WAAY,IAAI,EAClClB,KAAKiD,SAAW,KAChBjD,KAAKU,WAAWwC,SAAS,mBAAmB,CAC9C,EAEAC,OAAQ,WACNJ,QAAQC,IAAI,QAAQ,EACpBhD,KAAKY,SAASM,KAAK,WAAY,KAAK,EACpClB,KAAKmB,QAAQH,KAAK,WAAY,KAAK,EACnChB,KAAKc,QAAQI,KAAK,WAAY,KAAK,EACnClB,KAAKM,QAAQY,KAAK,WAAY,KAAK,EACnClB,KAAKiD,SAAW,MAChBjD,KAAKU,WAAW0C,YAAY,mBAAmB,CACjD,EACAC,MAAO,WAEL,IAAIC,KAAOtD,KACTuD,IAAM,GACNC,OAAS,GACTC,OAAS,GACT5B,SAAW,MACX6B,cAAgB,GAClB1D,KAAKM,QAAQO,KAAK,QAAQ,EAAE8C,KAAK,WAC/B,IAAIC,OAAShE,EAAEI,IAAI,EACnB,GAAI4D,OAAOC,IAAI,IAAM,GAAI,CACvBP,KAAKvD,QAAQ+D,YAAcF,OAAOtB,KAAK,EACvC,MACF,CACAiB,IAAIK,OAAOtB,KAAK,GAAKsB,OAAOC,IAAI,EAChCL,OAAOI,OAAOC,IAAI,GAAKD,OAAOtB,KAAK,EACnCmB,OAAOM,KAAKH,OAAOtB,KAAK,CAAC,EACzB,GAAIsB,OAAO1C,KAAK,UAAU,EAAG,CAC3BW,SAAW+B,OAAOtB,KAAK,EACvBoB,cAAgBE,OAAOC,IAAI,CAC7B,CACF,CAAC,EACD7D,KAAKuD,IAAMA,IACXvD,KAAKwD,OAASA,OACd,GAAI3B,SAAU,CACZ,IAAImC,eAAiB,MACrB,IAAIC,cAAgB,MACpB,IAAIC,OACJA,OAASlE,KAAKY,SAASiD,IAAI,EAC3B,GAAIK,SAAWrC,SAAU,CACvB7B,KAAKY,SAASiD,IAAIhC,QAAQ,EAC1BmC,eAAiB,IACnB,CACAE,OAASlE,KAAKc,QAAQ+C,IAAI,EAC1B,GAAIK,SAAWR,cAAe,CAC5B1D,KAAKc,QAAQ+C,IAAIH,aAAa,EAC9BO,cAAgB,IAClB,CACAjE,KAAKU,WAAWwC,SAAS,mBAAmB,EAC5ClD,KAAK6B,SAAW,KAChB,GAAIoC,cAAe,CACjBjE,KAAKc,QAAQqD,QAAQ,QAAQ,CAC/B,CACA,GAAIH,eAAgB,CAClBhE,KAAKY,SAASuD,QAAQ,QAAQ,CAChC,CACF,KAAO,CACLnE,KAAKU,WAAW0C,YAAY,mBAAmB,EAC/CpD,KAAK6B,SAAW,KAClB,CACA,OAAO4B,MACT,EAEA1B,mBAAoB,WAElB/B,KAAKD,QAAQ+D,YACX9D,KAAKM,QAAQU,KAAK,kBAAkB,GAAKhB,KAAKD,QAAQ+D,YACxD,GAAI9D,KAAKD,QAAQqE,WAAa,YAAa,CAEzCpE,KAAKY,SAASI,KAAK,KAAMhB,KAAKM,QAAQU,KAAK,IAAI,CAAC,EAChDhB,KAAKM,QAAQU,KACX,KACAhB,KAAKM,QAAQU,KAAK,IAAI,EAAIhB,KAAKD,QAAQqE,QACzC,EACAC,aAAarE,KAAKY,SAASI,KAAK,IAAI,GAAKhB,IAC3C,CACAA,KAAKqB,MAAML,KAAK,KAAMhB,KAAKY,SAASI,KAAK,IAAI,EAAI,MAAM,EAEvDhB,KAAKY,SAASI,KAAK,gBAAiBhB,KAAKqB,MAAML,KAAK,IAAI,CAAC,EACzDhB,KAAKY,SAASI,KAAK,YAAahB,KAAKqB,MAAML,KAAK,IAAI,CAAC,EACrDhB,KAAKmB,QAAQH,KAAK,gBAAiBhB,KAAKqB,MAAML,KAAK,IAAI,CAAC,EACxDhB,KAAKmB,QAAQH,KAAK,aAAchB,KAAKM,QAAQU,KAAK,YAAY,CAAC,EAC/D,GAAIhB,KAAKM,QAAQU,KAAK,iBAAiB,EAAG,CACxChB,KAAKY,SAASI,KACZ,kBACAhB,KAAKM,QAAQU,KAAK,iBAAiB,CACrC,CACF,KAAO,CACLhB,KAAKM,QAAQU,KAAK,kBAAmB,gBAAgB,CACvD,CACAhB,KAAKmB,QAAQH,KACX,kBACAhB,KAAKM,QAAQU,KAAK,iBAAiB,CACrC,EACAhB,KAAKmB,QAAQH,KACX,mBACAhB,KAAKM,QAAQU,KAAK,kBAAkB,CACtC,EACAhB,KAAKY,SAASI,KAAK,cAAehB,KAAKD,QAAQ+D,WAAW,EAC1D9D,KAAKc,QAAQI,KAAK,OAAQlB,KAAKM,QAAQY,KAAK,MAAM,CAAC,EACnDlB,KAAKc,QAAQ+C,IAAI7D,KAAKM,QAAQuD,IAAI,CAAC,EACnC7D,KAAKM,QAAQgE,WAAW,MAAM,EAC9BtE,KAAKY,SAASI,KAAK,WAAYhB,KAAKM,QAAQU,KAAK,UAAU,CAAC,EAC5DhB,KAAKY,SAASI,KAAK,MAAOhB,KAAKM,QAAQU,KAAK,KAAK,CAAC,EAClDhB,KAAKY,SAASI,KAAK,QAAShB,KAAKM,QAAQU,KAAK,OAAO,CAAC,EACtDhB,KAAKY,SAASI,KAAK,QAAShB,KAAKM,QAAQU,KAAK,OAAO,CAAC,EACtD,GAAIhB,KAAKY,SAASL,SAAS,cAAc,EAAG,CAC1CP,KAAKY,SAASwC,YAAY,cAAc,EACxCpD,KAAKU,WAAWwC,SAAS,cAAc,CACzC,CACAlD,KAAKY,SAASI,KAAK,WAAYhB,KAAKM,QAAQU,KAAK,UAAU,CAAC,EAC5DhB,KAAKM,QAAQgE,WAAW,UAAU,EAClC,GAAI,CAACtE,KAAKc,QAAQ+C,IAAI,GAAK7D,KAAKM,QAAQiE,KAAK,SAAS,EAAG,CACvD,IAAIC,WAAaxE,KAAKM,QAAQiE,KAAK,SAAS,EAC5CvE,KAAKY,SAASiD,IAAIW,UAAU,EAC5BxE,KAAKc,QAAQ+C,IAAIW,UAAU,CAC7B,CACA,GAAIxE,KAAKM,QAAQU,KAAK,UAAU,IAAMC,UAAWjB,KAAK8C,QAAQ,CAChE,EAEA2B,OAAQ,WAEN,IAAIZ,IAAM7D,KAAKqB,MAAMR,KAAK,SAAS,EAAEG,KAAK,YAAY,EACtD,IAAIkD,OACJ,IAAIF,eAAiB,MACrB,IAAIC,cAAgB,MACpB,IAAIS,cAAgB,MACpB1E,KAAKU,WAAWiE,OAAO,EAAE9D,KAAK,eAAe,EAAE+D,OAAO,EACtDV,OAASlE,KAAKY,SAASiD,IAAI,EAC3B,IAAIgB,OAAS7E,KAAK8E,QAAQjB,GAAG,EAC7B,GAAIK,SAAWW,OAAQ,CACrB7E,KAAKY,SAASiD,IAAIgB,MAAM,EACxBb,eAAiB,IACnB,CACAE,OAASlE,KAAKc,QAAQ+C,IAAI,EAC1B,GAAIK,SAAWlE,KAAKuD,IAAIM,KAAM,CAC5B7D,KAAKc,QAAQ+C,IAAI7D,KAAKuD,IAAIM,IAAI,EAC9BI,cAAgB,IAClB,CACAC,OAASlE,KAAKM,QAAQuD,IAAI,EAC1B,GAAIK,SAAWlE,KAAKuD,IAAIM,KAAM,CAC5B7D,KAAKM,QAAQuD,IAAI7D,KAAKuD,IAAIM,IAAI,EAC9Ba,cAAgB,IAClB,CACA1E,KAAKU,WAAWwC,SAAS,mBAAmB,EAC5ClD,KAAK6B,SAAW,KAChB7B,KAAKoC,KAAK,EACV,GAAI6B,cAAe,CACjBjE,KAAKc,QAAQqD,QAAQ,QAAQ,CAC/B,CACA,GAAIH,eAAgB,CAClBhE,KAAKY,SAASuD,QAAQ,QAAQ,CAChC,CACA,GAAIO,cAAe,CACjB1E,KAAKM,QAAQ6D,QAAQ,QAAQ,CAC/B,CACA,MACF,EAEAY,aAAc,SAAUlB,KAEtB,IAAIK,OACJ,IAAIc,MAAQ,MACZ,IAAIN,cAAgB,MACpB,IAAIT,cAAgB,MACpBjE,KAAKU,WAAWiE,OAAO,EAAE9D,KAAK,eAAe,EAAE+D,OAAO,EACtD,GAAIf,MAAQ,IAAM7D,KAAKwD,OAAOK,OAAS5C,UAAW,CAChDjB,KAAKY,SAASiD,IAAI7D,KAAKwD,OAAOK,IAAI,EAClCmB,MAAQ,IACV,KAAO,CACLhF,KAAKY,SAASiD,IAAIA,GAAG,CACvB,CACAK,OAASlE,KAAKc,QAAQ+C,IAAI,EAC1B,GAAIK,SAAWL,IAAK,CAClB7D,KAAKc,QAAQ+C,IAAIA,GAAG,EACpBI,cAAgB,IAClB,CACAC,OAASlE,KAAKM,QAAQuD,IAAI,EAC1B,GAAIK,SAAWL,IAAK,CAClB7D,KAAKM,QAAQuD,IAAIA,GAAG,EACpBa,cAAgB,IAClB,CACA,GAAIb,MAAQ,IAAMmB,MAAO,CACvBhF,KAAKU,WAAWwC,SAAS,mBAAmB,EAC5ClD,KAAK6B,SAAW,IAClB,CACA,GAAIoC,cAAe,CACjBjE,KAAKc,QAAQqD,QAAQ,QAAQ,CAC/B,CACAnE,KAAKY,SAASuD,QAAQ,QAAQ,EAC9B,GAAIO,cAAe,CACjB1E,KAAKM,QAAQ6D,QAAQ,QAAQ,CAC/B,CACA,MACF,EAEAW,QAAS,SAAUG,MAEjB,OAAOA,IACT,EAEAC,KAAM,WAEJ,IAAIC,IAAMvF,EAAEK,OAAO,GAAID,KAAKY,SAASwE,SAAS,EAAG,CAC/CC,OAAQrF,KAAKY,SAAS,GAAG0E,YAC3B,CAAC,EACDtF,KAAKqB,MACFE,YAAYvB,KAAKY,QAAQ,EACzB2E,IAAI,CACHC,IAAKL,IAAIK,IAAML,IAAIE,OACnBI,KAAMN,IAAIM,IACZ,CAAC,EACAP,KAAK,EAERlF,KAAK0F,OAAS,MAEd1F,KAAKY,SAASI,KAAK,gBAAiB,IAAI,EACxChB,KAAKmB,QAAQH,KAAK,gBAAiB,IAAI,EAEvChB,KAAK4B,MAAQ,KACb,OAAO5B,IACT,EAEAoC,KAAM,WAEJpC,KAAKqB,MAAMe,KAAK,EAChBpC,KAAK0F,OAAS,KACd1F,KAAKY,SAAS+E,GAAG,OAAQ/F,EAAEgG,MAAM5F,KAAK6F,KAAM7F,IAAI,CAAC,EACjDA,KAAKY,SAASI,KAAK,gBAAiB,KAAK,EACzChB,KAAKmB,QAAQH,KAAK,gBAAiB,KAAK,EACxChB,KAAK4B,MAAQ,MACb,OAAO5B,IACT,EAEA8F,OAAQ,SAAUC,OAEhB/F,KAAKgG,MAAQhG,KAAKY,SAASiD,IAAI,EAC/B7D,KAAKiG,QAAQjG,KAAKyD,MAAM,CAC1B,EAEAwC,QAAS,SAAUC,OACjB,IAAI5C,KAAOtD,KAEXkG,MAAQtG,EAAEuG,KAAKD,MAAO,SAAUjB,MAC9B,OAAO3B,KAAK9B,QAAQyD,IAAI,CAC1B,CAAC,EAEDiB,MAAQlG,KAAKyB,OAAOyE,KAAK,EAEzB,GAAI,CAACA,MAAME,OAAQ,CACjB,OAAOpG,KAAK4B,MAAQ5B,KAAKoC,KAAK,EAAIpC,IACpC,CAEA,OAAOA,KAAKqG,OAAOH,MAAMI,MAAM,EAAGtG,KAAKD,QAAQmG,KAAK,CAAC,EAAEhB,KAAK,CAC9D,EAEA1D,QAAS,SAAUyD,MAEjB,MAAO,CAACA,KAAKsB,YAAY,EAAEC,QAAQxG,KAAKgG,MAAMO,YAAY,CAAC,CAC7D,EAEA9E,OAAQ,SAAUyE,OAEhB,IAAIO,WAAa,GACfC,cAAgB,GAChBC,gBAAkB,GAClB1B,KAEF,MAAQA,KAAOiB,MAAMU,MAAM,EAAI,CAC7B,GAAI,CAAC3B,KAAKsB,YAAY,EAAEC,QAAQxG,KAAKgG,MAAMO,YAAY,CAAC,EAAG,CACzDE,WAAW1C,KAAKkB,IAAI,CACtB,MAAO,GAAI,CAACA,KAAKuB,QAAQxG,KAAKgG,KAAK,EAAG,CACpCU,cAAc3C,KAAKkB,IAAI,CACzB,KAAO,CACL0B,gBAAgB5C,KAAKkB,IAAI,CAC3B,CACF,CAEA,OAAOwB,WAAWI,OAAOH,cAAeC,eAAe,CACzD,EAEAjF,YAAa,SAAUuD,MAErB,IAAIe,MAAQhG,KAAKgG,MAAMc,QAAQ,8BAA+B,MAAM,EACpE,GAAI,CAACd,MAAO,CACV,OAAOf,IACT,CACA,OAAOA,KAAK6B,QACV,IAAIC,OAAO,IAAMf,MAAQ,IAAK,IAAI,EAClC,SAAUgB,GAAIC,OACZ,MAAO,MAAQA,MAAQ,MACzB,CACF,CACF,EAEAZ,OAAQ,SAAUH,OAEhB,IAAI5C,KAAOtD,KAEXkG,MAAQtG,EAAEsG,KAAK,EAAE3C,IAAI,SAAU2D,EAAGjC,MAChCiC,EAAItH,EAAE0D,KAAKvD,QAAQkF,IAAI,EACpBjE,KAAK,aAAciE,IAAI,EACvBjE,KAAK,aAAciE,IAAI,EAC1BiC,EAAElG,KAAK,KAAMsC,KAAK1C,SAASI,KAAK,IAAI,EAAI,WAAaiE,IAAI,EACzDiC,EAAEC,KAAK7D,KAAK5B,YAAYuD,IAAI,CAAC,EAC7B,OAAOiC,EAAE,EACX,CAAC,EAEDlH,KAAKoH,UAAUlB,MAAMmB,MAAM,CAAC,EAC5BrH,KAAKqB,MAAM8F,KAAKjB,KAAK,EACrB,OAAOlG,IACT,EAEAoH,UAAW,SAAUE,MACnBA,KAAKpE,SAAS,QAAQ,EAAElC,KAAK,gBAAiB,IAAI,EAClDhB,KAAKY,SAASI,KAAK,wBAAyBsG,KAAKtG,KAAK,IAAI,CAAC,CAC7D,EAEAuG,WAAY,SAAUC,QAASC,SAC7BD,QAAQpE,YAAY,QAAQ,EAAEpC,KAAK,gBAAiB,KAAK,EACzDhB,KAAKoH,UAAUK,OAAO,CACxB,EAEAhH,KAAM,SAAUsF,OAEd,IAAI2B,OAAS1H,KAAKqB,MAAMR,KAAK,wBAAwB,EACrD,IAAIJ,KAAOiH,OAAOjH,KAAK,EAEvB,GAAI,CAACA,KAAK2F,OAAQ,CAChB3F,KAAOb,EAAEI,KAAKqB,MAAMR,KAAK,IAAI,EAAE,EAAE,CACnC,CAEAb,KAAKuH,WAAWG,OAAQjH,IAAI,CAC9B,EAEAkH,KAAM,SAAU5B,OAEd,IAAI2B,OAAS1H,KAAKqB,MAAMR,KAAK,wBAAwB,EACrD,IAAI8G,KAAOD,OAAOC,KAAK,EAEvB,GAAI,CAACA,KAAKvB,OAAQ,CAChBuB,KAAO3H,KAAKqB,MAAMR,KAAK,IAAI,EAAE+G,KAAK,CACpC,CAEA5H,KAAKuH,WAAWG,OAAQC,IAAI,CAC9B,EAEAE,OAAQ,SAAUC,GAEhB,GAAI,CAAC9H,KAAKiD,SAAU,CAClB,GAAIjD,KAAKU,WAAWH,SAAS,mBAAmB,EAAG,CACjDP,KAAK+H,SAAS,EACd/H,KAAKY,SAASI,KAAK,gBAAiB,KAAK,EACzChB,KAAKmB,QAAQH,KAAK,gBAAiB,KAAK,CAC1C,KAAO,CACL,GAAIhB,KAAK4B,MAAO,CACd5B,KAAKY,SAASI,KAAK,gBAAiB,KAAK,EACzChB,KAAKmB,QAAQH,KAAK,gBAAiB,KAAK,EACxChB,KAAKoC,KAAK,CACZ,KAAO,CACLpC,KAAKY,SAASI,KAAK,gBAAiB,IAAI,EACxChB,KAAKmB,QAAQH,KAAK,gBAAiB,IAAI,EACvChB,KAAKgI,aAAa,EAClBhI,KAAK8F,OAAO,CACd,CACF,CACF,CACA,GAAIgC,EAAG,CACLA,EAAEG,eAAe,EACjBH,EAAEI,gBAAgB,CACpB,CACA,OAAO,KACT,EAEAH,SAAU,WAER,IAAI/D,eAAiB,MACrB,IAAIU,cAAgB,MACpB,IAAIT,cAAgB,MACpB,IAAIC,OACJA,OAASlE,KAAKY,SAASiD,IAAI,EAC3B,GAAIK,SAAW,GAAI,CACjBlE,KAAKY,SAASiD,IAAI,EAAE,EACpBG,eAAiB,IACnB,CACAE,OAASlE,KAAKM,QAAQuD,IAAI,EAC1B,GAAIK,SAAW,GAAI,CACjBlE,KAAKM,QAAQuD,IAAI,EAAE,EACnBa,cAAgB,IAClB,CACAR,OAASlE,KAAKc,QAAQ+C,IAAI,EAC1B,GAAIK,SAAW,GAAI,CACjBlE,KAAKc,QAAQ+C,IAAI,EAAE,EACnBI,cAAgB,IAClB,CACAjE,KAAKU,WAAW0C,YAAY,mBAAmB,EAC/C,GAAIa,cAAe,CACjBjE,KAAKc,QAAQqD,QAAQ,QAAQ,CAC/B,CACA,GAAIH,eAAgB,CAClBhE,KAAKY,SAASuD,QAAQ,QAAQ,CAChC,CACA,GAAIO,cAAe,CACjB1E,KAAKM,QAAQ6D,QAAQ,QAAQ,CAC/B,CACF,EAEA6D,aAAc,WAEZhI,KAAKY,SAASiD,IAAI,EAAE,EAAEsE,MAAM,CAC9B,EAEAC,YAAa,WAEXpI,KAAKM,QAAQuD,IAAI,EAAE,EACnB7D,KAAKc,QAAQ+C,IAAI,EAAE,EACnB7D,KAAKU,WAAW0C,YAAY,mBAAmB,EAC/CpD,KAAK6B,SAAW,KAClB,EAEAC,QAAS,WAEP9B,KAAKyD,OAASzD,KAAKqD,MAAM,EACzBrD,KAAKD,QAAQmG,MAAQlG,KAAKyD,OAAO2C,MACnC,EAEApE,OAAQ,WAENhC,KAAKY,SACF+E,GAAG,QAAS/F,EAAEgG,MAAM5F,KAAKmI,MAAOnI,IAAI,CAAC,EACrC2F,GAAG,SAAU/F,EAAEgG,MAAM5F,KAAKqI,OAAQrI,IAAI,CAAC,EACvC2F,GAAG,OAAQ/F,EAAEgG,MAAM5F,KAAK6F,KAAM7F,IAAI,CAAC,EACnC2F,GAAG,WAAY/F,EAAEgG,MAAM5F,KAAKsI,SAAUtI,IAAI,CAAC,EAC3C2F,GAAG,QAAS/F,EAAEgG,MAAM5F,KAAKuI,MAAOvI,IAAI,CAAC,EAExC,GAAIA,KAAKwI,eAAe,SAAS,EAAG,CAClCxI,KAAKY,SAAS+E,GAAG,UAAW/F,EAAEgG,MAAM5F,KAAKyI,QAASzI,IAAI,CAAC,CACzD,CAEAA,KAAKqB,MACFsE,GAAG,QAAS/F,EAAEgG,MAAM5F,KAAK0I,MAAO1I,IAAI,CAAC,EACrC2F,GAAG,aAAc,KAAM/F,EAAEgG,MAAM5F,KAAK2I,WAAY3I,IAAI,CAAC,EACrD2F,GAAG,aAAc,KAAM/F,EAAEgG,MAAM5F,KAAK4I,WAAY5I,IAAI,CAAC,EACrD2F,GAAG,YAAa,KAAM/F,EAAEgG,MAAM5F,KAAK6I,UAAW7I,IAAI,CAAC,EAEtD,GAAIA,KAAKD,QAAQ2C,YAAc1C,KAAKD,QAAQ4C,iBAAkB,CAC5D3C,KAAKmB,QAAQwE,GAAG,iBAAkB/F,EAAEgG,MAAM5F,KAAK6H,OAAQ7H,IAAI,CAAC,CAC9D,CACF,EAEAwI,eAAgB,SAAUM,WAExB,IAAIC,YAAcD,aAAa9I,KAAKY,SACpC,GAAI,CAACmI,YAAa,CAChB/I,KAAKY,SAASoI,aAAaF,UAAW,SAAS,EAC/CC,YAAc,OAAO/I,KAAKY,SAASkI,aAAe,UACpD,CACA,OAAOC,WACT,EAEAE,KAAM,SAAUnB,GAEd,GAAI,CAAC9H,KAAK4B,MAAO,CACf,MACF,CAEA,OAAQkG,EAAEoB,SACR,KAAK,EACL,KAAK,GACL,KAAK,GACHpB,EAAEG,eAAe,EACjB,MAEF,KAAK,GACHH,EAAEG,eAAe,EACjBjI,KAAK2H,KAAK,EACV3H,KAAKmJ,cAAc,EACnB,MAEF,KAAK,GACHrB,EAAEG,eAAe,EACjBjI,KAAKS,KAAK,EACVT,KAAKmJ,cAAc,EACnB,KACJ,CACArB,EAAEI,gBAAgB,CACpB,EAEAiB,cAAe,WAEb,IAAIzB,OAAS1H,KAAKqB,MAAMR,KAAK,SAAS,EACtC,GAAI6G,OAAOtB,OAAQ,CACjBpG,KAAKY,SAASI,KAAK,wBAAyB0G,OAAO1G,KAAK,IAAI,CAAC,EAC7D,IAAIwE,IAAMkC,OAAOtC,SAAS,EAAEI,IAC5B,IAAI4D,OAAS5D,IAAMkC,OAAOrC,OAAO,EACjC,IAAIgE,UAAYrJ,KAAKqB,MAAMgI,UAAU,EACrC,IAAIC,WAAatJ,KAAKqB,MAAMgE,OAAO,EACnC,GAAI+D,OAASE,WAAY,CACvBtJ,KAAKqB,MAAMgI,UAAUA,UAAYD,OAASE,UAAU,CACtD,MAAO,GAAI9D,IAAM,EAAG,CAClBxF,KAAKqB,MAAMgI,UAAUA,UAAY7D,GAAG,CACtC,CACF,CACF,EAEA+D,oBAAqB,SAAUzB,GAC7B,GAAI9H,KAAKe,WAAY,CACnBf,KAAKuH,WAAWvH,KAAKqB,MAAMR,KAAK,SAAS,EAAGjB,EAAEkI,EAAE0B,aAAa,CAAC,CAChE,CACF,EAEAf,QAAS,SAAUX,GAEjB9H,KAAKyJ,uBAAyB,CAAC7J,EAAE8J,QAAQ5B,EAAEoB,QAAS,CAAC,GAAI,GAAI,EAAG,GAAI,GAAG,EACvElJ,KAAKiJ,KAAKnB,CAAC,CACb,EAEAQ,SAAU,SAAUR,GAElB,GAAI9H,KAAKyJ,uBAAwB,CAC/B,MACF,CACAzJ,KAAKiJ,KAAKnB,CAAC,CACb,EAEAS,MAAO,SAAUT,GAEf,OAAQA,EAAEoB,SACR,KAAK,GACH,GAAI,CAAClJ,KAAK4B,MAAO,CACf5B,KAAK6H,OAAO,CACd,CACA,MACF,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACH,MAEF,KAAK,EACL,KAAK,GACH,GAAIC,EAAG,CACLA,EAAEI,gBAAgB,EAClBJ,EAAEG,eAAe,CACnB,CACA0B,6BAA+B,MAC/BC,sBAAwB,MACxB,GAAI,CAAC5J,KAAK4B,MAAO,CACf,MACF,CACA,GAAI,CAAC5B,KAAK6B,SAAU,CAClB7B,KAAKyE,OAAO,CACd,KAAO,CACL,IAAIZ,IAAM7D,KAAKY,SAASiD,IAAI,EAC5B,IAAIgG,KAAO7J,KAAKqB,MAAMR,KAAK,IAAI,EAC/B,IAAIiJ,EAAID,KAAKzD,OACb,IAAK,IAAIc,EAAI,EAAGA,EAAI4C,EAAG,EAAE5C,EAAG,CAC1B,GAAItH,EAAEiK,KAAK3C,EAAE,EAAElG,KAAK,YAAY,GAAK6C,IAAK,CACxCiE,EAAEI,gBAAgB,EAClBJ,EAAEG,eAAe,EACjBrI,EAAEiK,KAAK3C,EAAE,EAAEwB,MAAM,EACjB,OAAO,KACT,CACF,CACF,CACA,MAEF,KAAK,GACH,GAAIZ,EAAG,CACLA,EAAEI,gBAAgB,EAClBJ,EAAEG,eAAe,CACnB,CACA0B,6BAA+B,MAC/BC,sBAAwB,MACxB,GAAI,CAAC5J,KAAK4B,MAAO,CACf,MACF,CACA5B,KAAKoC,KAAK,EACV,MAEF,QACE,GAAIpC,KAAKD,QAAQgK,kBAAmB,CAClC/J,KAAKoI,YAAY,EACjBpI,KAAKc,QAAQ+C,IAAI7D,KAAKY,SAASiD,IAAI,CAAC,EACpC7D,KAAK8F,OAAO,CACd,KAAO,CACL9F,KAAKgG,MAAQhG,KAAKY,SAASiD,IAAI,CACjC,CACJ,CAEAiE,EAAEI,gBAAgB,EAClBJ,EAAEG,eAAe,CACnB,EAEAE,MAAO,SAAUL,GAEf9H,KAAKgK,QAAU,IACjB,EAEAnE,KAAM,SAAUiC,GAEd,IAAIxE,KAAOtD,KACXA,KAAKgK,QAAU,MACf,IAAInG,IAAM7D,KAAKY,SAASiD,IAAI,EAC5B,GAAI7D,KAAK4B,MAAO,CACd,IAAIiI,KAAO7J,KAAKqB,MAAMR,KAAK,IAAI,EAC/B,IAAIiJ,EAAID,KAAKzD,OACb,IAAK,IAAIc,EAAI,EAAGA,EAAI4C,EAAG,EAAE5C,EAAG,CAC1B,GAAItH,EAAEiK,KAAK3C,EAAE,EAAElG,KAAK,YAAY,GAAK6C,IAAK,CACxCjE,EAAEiK,KAAK3C,EAAE,EAAEwB,MAAM,EACjB,MACF,CACF,CACF,CACA,IAAIxE,OACJ,IAAIF,eAAiB,MACrB,IAAIU,cAAgB,MACpB,IAAIT,cAAgB,MACpB,GAAIjE,KAAK2B,gBAAkB,CAAC3B,KAAK6B,UAAYgC,MAAQ,GAAI,CACvDK,OAASlE,KAAKY,SAASiD,IAAI,EAC3B,GAAIK,SAAW,GAAI,CACjBlE,KAAKY,SAASiD,IAAI,EAAE,EACpBG,eAAiB,IACnB,CACAE,OAASlE,KAAKM,QAAQuD,IAAI,EAC1B,GAAIK,SAAW,GAAI,CACjBlE,KAAKM,QAAQuD,IAAI,EAAE,EACnBa,cAAgB,IAClB,CACAR,OAASlE,KAAKc,QAAQ+C,IAAI,EAC1B,GAAIK,SAAW,GAAI,CACjBlE,KAAKc,QAAQ+C,IAAI,EAAE,EACnBI,cAAgB,IAClB,CACF,CACA,GAAI,CAACjE,KAAK6B,SAAU,CAClBqC,OAASlE,KAAKc,QAAQ+C,IAAI,EAC1B,GAAIK,SAAWL,IAAK,CAClB7D,KAAKc,QAAQ+C,IAAIA,GAAG,EACpBI,cAAgB,IAClB,CACF,CACA,GAAIA,cAAe,CACjBjE,KAAKc,QAAQqD,QAAQ,QAAQ,CAC/B,CACA,GAAIH,eAAgB,CAClBhE,KAAKY,SAASuD,QAAQ,QAAQ,CAChC,CACA,GAAIO,cAAe,CACjB1E,KAAKM,QAAQ6D,QAAQ,QAAQ,CAC/B,CACA,GAAI,CAACnE,KAAKe,YAAcf,KAAK4B,MAAO,CAClCqI,WAAW,WACT3G,KAAKlB,KAAK,CACZ,EAAG,GAAG,CACR,CACF,EAEAsG,MAAO,SAAUZ,GAEf,GAAIA,EAAG,CACLA,EAAEI,gBAAgB,EAClBJ,EAAEG,eAAe,CACnB,CACA0B,6BAA+B,MAC/BC,sBAAwB,MACxB5J,KAAKyE,OAAO,EACZzE,KAAKY,SAASuH,MAAM,CACtB,EAEAQ,WAAY,SAAUb,GAEpB9H,KAAKe,WAAa,KAClBf,KAAKuJ,oBAAoBzB,CAAC,CAC5B,EAEAe,UAAW,SAAUf,GACnB9H,KAAKe,WAAa,KAClBf,KAAKuJ,oBAAoBzB,CAAC,EAC1B9H,KAAKe,WAAa,MAClB,GAAI,CAACf,KAAK0F,OAAQ,CAChB,GAAIoC,EAAEoC,OAAOC,SAAW,KAAM,CAC5BnK,KAAKY,SAASwJ,IAAI,MAAM,CAC1B,CACF,CACF,EAEAxB,WAAY,SAAUd,GAEpB9H,KAAKe,WAAa,MAClBf,KAAKuJ,oBAAoBzB,CAAC,CAC5B,CACF,EAIAlI,EAAEM,GAAGC,SAAW,SAAUyD,QACxB,OAAO5D,KAAK2D,KAAK,WACf,IAAI0G,MAAQzK,EAAEI,IAAI,EAChBuE,KAAO8F,MAAM9F,KAAK,UAAU,EAC5BxE,QAAU,OAAO6D,QAAU,UAAYA,OACzC,GAAI,CAACW,KAAM,CACT8F,MAAM9F,KAAK,WAAaA,KAAO,IAAI1E,SAASG,KAAMD,OAAO,CAAE,CAC7D,CACA,GAAI,OAAO6D,QAAU,SAAU,CAC7BW,KAAKX,QAAQ,CACf,CACF,CAAC,CACH,EAEAhE,EAAEM,GAAGC,SAASC,SAAW,CACvBkK,UAAW,IACXhJ,KAAM,0EACN2D,KAAM,0DACNb,SAAU,WACVvB,YAAa,WACblB,eAAgB,MAChBe,WAAY,KACZC,iBAAkB,KAClBC,SAAU,YACVmH,kBAAmB,IACrB,EAEAnK,EAAEM,GAAGC,SAASoK,YAAc1K,QAC7B,GAAE2K,OAAOC,MAAM"}