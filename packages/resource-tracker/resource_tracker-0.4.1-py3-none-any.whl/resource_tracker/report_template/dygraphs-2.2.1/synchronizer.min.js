"use strict";!function(){var t;window.Dygraph?t=window.Dygraph:"undefined"!=typeof module&&void 0===(t=require("../dygraph")).NAME&&void 0!==t.default&&(t=t.default);function y(a,n){if(Array.isArray(a)&&Array.isArray(n)){var t=a.length;if(t===n.length){for(;t--;)if(a[t]!==n[t])return;return 1}}}t.synchronize=function(){if(0===arguments.length)throw"Invalid invocation of Dygraph.synchronize(). Need >= 1 argument.";function a(a){if(!(a instanceof Object))throw"Last argument must be either Dygraph or Object.";for(var n=0;n<e.length;n++){var t=e[n];a.hasOwnProperty(t)&&(f[t]=a[t])}}var e=["selection","zoom","range"],f={selection:!0,zoom:!0,range:!0},d=[],u=[];if(arguments[0]instanceof t){for(var n=0;n<arguments.length&&arguments[n]instanceof t;n++)d.push(arguments[n]);if(n<arguments.length-1)throw"Invalid invocation of Dygraph.synchronize(). All but the last argument must be Dygraph objects.";n==arguments.length-1&&a(arguments[arguments.length-1])}else{if(!arguments[0].length)throw"Invalid invocation of Dygraph.synchronize(). First parameter must be either Dygraph or list of Dygraphs.";for(n=0;n<arguments[0].length;n++)d.push(arguments[0][n]);if(2==arguments.length)a(arguments[1]);else if(2<arguments.length)throw"Invalid invocation of Dygraph.synchronize(). Expected two arguments: array and optional options argument."}if(d.length<2)throw"Invalid invocation of Dygraph.synchronize(). Need two or more dygraphs to synchronize.";for(var p=d.length,n=0;n<d.length;n++)d[n].ready(function(){if(0==--p){for(var a=["drawCallback","highlightCallback","unhighlightCallback"],n=0;n<d.length;n++){u[n]||(u[n]={});for(var t=a.length-1;0<=t;t--)u[n][a[t]]=d[n].getFunctionOption(a[t])}if(f.zoom)for(var r=d,l=f,o=u,h=!1,e=0;e<r.length;e++)r[e].updateOptions({drawCallback:function(a,n){if(h||n){for(var t=0;t<r.length;t++)if(r[t]==a){o[t]&&o[t].drawCallback&&o[t].drawCallback.apply(this,arguments);break}}else{h=!0;var e={dateWindow:a.xAxisRange()};a.isZoomed("x")||(e.dateWindow=null),l.range&&(e.valueRange=a.yAxisRange());for(var i=0;i<r.length;i++)r[i]==a?o[i]&&o[i].drawCallback&&o[i].drawCallback.apply(this,arguments):y(e.dateWindow,r[i].getOption("dateWindow"))&&(!l.range||y(e.valueRange,r[i].getOption("valueRange")))||r[i].updateOptions(e);h=!1}}},!0);if(f.selection)for(var g=d,c=u,s=!1,i=0;i<g.length;i++)g[i].updateOptions({highlightCallback:function(a,n,t,e,i){if(!s){s=!0;for(var r,l=0;l<g.length;l++)this==g[l]?c[l]&&c[l].highlightCallback&&c[l].highlightCallback.apply(this,arguments):null!==(r=g[l].getRowForX(n))&&g[l].setSelection(r,i,void 0,!0);s=!1}},unhighlightCallback:function(a){if(!s){s=!0;for(var n=0;n<g.length;n++)this==g[n]?c[n]&&c[n].unhighlightCallback&&c[n].unhighlightCallback.apply(this,arguments):g[n].clearSelection();s=!1}}},!0)}});return{detach:function(){for(var a=0;a<d.length;a++){var n=d[a];f.zoom&&n.updateOptions({drawCallback:u[a].drawCallback}),f.selection&&n.updateOptions({highlightCallback:u[a].highlightCallback,unhighlightCallback:u[a].unhighlightCallback})}u=f=d=null}}},t._require.add("dygraphs/src/extras/synchronizer.js",{})}();