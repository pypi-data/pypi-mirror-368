[build-system]
requires = ["poetry-core>=1.9.0"]
build-backend = "poetry.core.masonry.api"

[tool.poetry]
name = "rd-cdm"
version = "2.0.2"
description = "An ontology-based rare disease common data model (RD-CDM) harmonising international registries, HL7 FHIR, and GA4GH Phenopackets."
readme = "README.md"
license = "MIT"
authors = [
  "Adam SL Graefe <adam.graefe@charite.de>",
  "Filip Rehburg <filip.rehburg@charite.de>",
  "Daniel Danis <daniel.danis@bih-charite.de>",
  "Samer Alkarkoukly <mabbouda@uni-koeln.de>",
  "Oya Beyan <oya.beyan@uni-koeln.de>",
  "Peter N Robinson <peter.robinson@bih-charite.de>",
  "Sylvia Thun <sylvia.thun@bih-charite.de>",
]
homepage = "https://github.com/BIH-CEI/rd-cdm"
repository = "https://github.com/BIH-CEI/rd-cdm"
documentation = "https://rd-cdm.readthedocs.io/en/latest/"
keywords = [
  "Rare Diseases",
  "Interoperability",
  "Ontology",
  "GA4GH Phenopackets",
  "HL7 FHIR",
  "International Patient Summary",
  "Genomics Reporting",
]
classifiers = [
  "License :: OSI Approved :: MIT License",
  "Operating System :: OS Independent",
  "Development Status :: 3 - Alpha",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Intended Audience :: Science/Research",
  "Topic :: Scientific/Engineering :: Medical Science Apps.",
]

packages = [
  { include = "rd_cdm", from = "src" }
]

include = [
  "src/rd_cdm/schema/rd_cdm.yaml",
  "src/rd_cdm/instances/*/*.yaml",
  "src/rd_cdm/instances/*/jsons/*.json",
  "src/rd_cdm/instances/*/csvs/*.csv",
  "src/rd_cdm/python_classes/*.py",
]

[tool.poetry.dependencies]
python = ">=3.10,<3.13"
numpy = "*"
jsonschema = "*"
"ruamel.yaml" = ">=0.17.21"
requests = ">=2.31.0,<3.0.0"
requests-cache = ">=1.2.1,<2.0.0"
linkml-runtime = ">=1.9.4"
linkml = ">=1.7.0"
oaklib = ">=0.6.23"
pydantic = ">=2.4,<3.0"
pydantic-settings = ">=2.3,<3.0"

# make test/docs deps optional here (with versions!)
pytest = { version = ">=7.0.0,<9.0.0", optional = true }
requests-mock = { version = ">=1.11.0", optional = true }

sphinx = { version = ">=7.0.0", optional = true }
sphinx-rtd-theme = { version = ">=1.3.0", optional = true }
sphinx-copybutton = { version = ">=0.5.0", optional = true }

[tool.poetry.extras]
# extras list ONLY the package names (no versions)
test = ["pytest", "requests-mock"]
docs = ["sphinx", "sphinx-rtd-theme", "sphinx-copybutton"]

[tool.poetry.scripts]
rdcdm-merge = "rd_cdm.utils.merge_instances:main"
rdcdm-json = "rd_cdm.utils.json_parsing:main"
rdcdm-csv = "rd_cdm.utils.csv_parsing:write_csvs_from_instances"
rdcdm-validate = "rd_cdm.utils.validation:main"

[tool.poetry.plugins."oaklib.plugins"]
rdcdm = "oakx_rdcdm.rdcdm_implementation:RdCdmValidator"