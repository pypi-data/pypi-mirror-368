import{r as n,I as G,S as We,w as je,u as Ue,a as Ge,c as we,s as Ze,j as e,B as $,R as Xe,F as R,b as H,d as Ye,e as Q,T as A,f as Se,g as me,h as K,D as Je,_ as P,i as D,k as Oe,l as et,p as tt,m as U,n as Z,o as J,q as Y,t as st,v as q,x as nt,y as se,z as at,A as rt,C as _e,E as fe,G as Ce,H as ot,J as ct,K as Be,L as it,M as lt,N as dt,O as ut,P as Te,Q as te,U as Fe,V as Ne,W as ht,X as pt,Y as mt,Z as ft,$ as gt}from"./index-A3iGyq-k.js";import{R as ne,A as Me,S as Le,u as qe,M as ae}from"./keychain.query-ByNHJhQ4.js";import{P as xt}from"./index-CXHdxoId.js";var bt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"};function re(){return re=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},re.apply(this,arguments)}const vt=(s,t)=>n.createElement(G,re({},s,{ref:t,icon:bt})),yt=n.forwardRef(vt);var kt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};function oe(){return oe=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},oe.apply(this,arguments)}const jt=(s,t)=>n.createElement(G,oe({},s,{ref:t,icon:kt})),wt=n.forwardRef(jt);var Ct={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};function ce(){return ce=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},ce.apply(this,arguments)}const Ft=(s,t)=>n.createElement(G,ce({},s,{ref:t,icon:Ct})),Nt=n.forwardRef(Ft);var Pt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5l-41.1 41.1-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-44.9 44.9-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-65.3 65.3a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 00608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8-43.1-43-66.8-100.3-66.8-161.2 0-60.9 23.7-118.2 66.8-161.2 43-43.1 100.3-66.8 161.2-66.8 60.9 0 118.2 23.7 161.2 66.8 43.1 43 66.8 100.3 66.8 161.2 0 60.9-23.7 118.2-66.8 161.2z"}}]},name:"key",theme:"outlined"};function ie(){return ie=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},ie.apply(this,arguments)}const Et=(s,t)=>n.createElement(G,ie({},s,{ref:t,icon:Pt})),It=n.forwardRef(Et);var $t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"};function le(){return le=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},le.apply(this,arguments)}const Rt=(s,t)=>n.createElement(G,le({},s,{ref:t,icon:$t})),ze=n.forwardRef(Rt);function de(){return de=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},de.apply(this,arguments)}const St=(s,t)=>n.createElement(G,de({},s,{ref:t,icon:We})),Ot=n.forwardRef(St);function _t(s,t,a){const r=n.useRef({});return(!("value"in r.current)||a(r.current.condition,t))&&(r.current.value=s(),r.current.condition=t),r.current.value}Number(n.version.split(".")[0]);const Bt=(s,t)=>{typeof s=="function"?s(t):typeof s=="object"&&s&&"current"in s&&(s.current=t)},Tt=(...s)=>{const t=s.filter(Boolean);return t.length<=1?t[0]:a=>{s.forEach(r=>{Bt(r,a)})}},Mt=(...s)=>_t(()=>Tt(...s),s,(t,a)=>t.length!==a.length||t.every((r,c)=>r!==a[c]));function ee(){return ee=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},ee.apply(this,arguments)}const De=n.forwardRef((s,t)=>{const{className:a,component:r,viewBox:c,spin:d,rotate:o,tabIndex:i,onClick:u,children:l,...v}=s,h=n.useRef(),b=Mt(h,t);je(!!(r||l),"Should have `component` prop or `children`."),Ue(h);const{prefixCls:E="anticon",rootClassName:C}=n.useContext(Ge),p=we(C,E,{[`${E}-spin`]:!!d&&!!r},a),O=we({[`${E}-spin`]:!!d}),y=o?{msTransform:`rotate(${o}deg)`,transform:`rotate(${o}deg)`}:void 0,S={...Ze,className:O,style:y,viewBox:c};c||delete S.viewBox;const B=()=>r?n.createElement(r,S,l):l?(je(!!c||n.Children.count(l)===1&&n.isValidElement(l)&&n.Children.only(l).type==="use","Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),n.createElement("svg",ee({},S,{viewBox:c}),l)):null;let z=i;return z===void 0&&u&&(z=-1),n.createElement("span",ee({role:"img"},v,{ref:b,tabIndex:z,onClick:u,className:p}),B())});De.displayName="AntdIcon";function Lt({isOpen:s,onClose:t,children:a,title:r,width:c=400,offset:d={right:24,top:0,bottom:0},footer:o}){const[i,u]=n.useState(!1),[l,v]=n.useState(!1),h={right:d.right??24,top:d.top??0,bottom:d.bottom??0};return n.useEffect(()=>{if(s)u(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{v(!0)})});else{v(!1);const b=setTimeout(()=>{u(!1)},300);return()=>clearTimeout(b)}},[s]),i?e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-opacity-25 transition-opacity duration-300",style:{opacity:l?1:0}}),e.jsxs("div",{className:"absolute right-0 bg-white shadow-lg rounded-[var(--ant-border-radius)] flex flex-col",style:{width:typeof c=="number"?`${c}px`:c,transform:l?"translateX(0) scale(1)":"translateX(100%) scale(0.9)",transformOrigin:"right center",right:`${h.right}px`,top:h.top>0?h.top:0,bottom:h.bottom>0?h.bottom:0,height:h.top>0||h.bottom>0?"auto":"100%",pointerEvents:"auto",overflowY:"auto",maxHeight:`calc(100vh - ${h.top+h.bottom}px)`,boxShadow:"-4px 0 15px rgba(0, 0, 0, 0.1)",transition:"transform 0.2s ease-in-out"},children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium",children:r}),e.jsx($,{onClick:t,type:"text",size:"small",icon:e.jsx(Xe,{})})]}),e.jsx("div",{className:"p-6 flex-1 min-h-0 overflow-y-auto",children:a}),o&&e.jsx("div",{className:"p-4 border-t border-gray-200",children:o})]})]}):null}function ge(s,t=!0){return a=>({validator:async(r,c)=>{const d=a.getFieldsValue(),o=P.get(d,r.field.replace("path","endpoint")),i=P.get(d,r.field.replace("path","keychain_id"));if(!i)return Promise.reject(new Error(D.t("bucketForm.keychainIdRequired")));if(!o)return Promise.reject(new Error(D.t("bucketForm.endpointRequired")));if(!c)return Promise.reject(new Error(D.t("bucketForm.pathRequired")));if(!c.startsWith("s3://"))return Promise.reject(new Error(D.t("bucketForm.pathValidMessage")));if(P.filter(d.buckets,l=>l&&l.path===c&&l.keychain_id===i).length>1)return Promise.reject(new Error(D.t("bucketForm.pathDuplicated")));if(t){const l=await Oe(c);if(P.find(l.data,h=>h.keychain_id===i))return Promise.reject(new Error(D.t("bucketForm.duplicatedPathExists")))}try{const l=P.find(s,h=>h.value===i);if(!l)return Promise.reject(new Error(D.t("bucketForm.keychainIdRequired")));const v=await et({endpoint:o,keychain_id:l.value,path:c});return P.get(v,"data")?Promise.resolve():Promise.reject(new Error(D.t("bucketForm.noPermission")))}catch(l){return Promise.reject(new Error(P.get(l,"message")))}}})}const ue="open-bucket-manager";function qt(s){const t=new CustomEvent(ue,{detail:s});document.dispatchEvent(t)}function xe(){return{async validator(s,t){if(!t)return Promise.reject(new Error(D.t("bucketForm.endpointRequired")));const a=await tt(t);return P.get(a,"data",!1)?Promise.resolve(D.t("bucketForm.endpointAccessible")):Promise.reject(new Error(D.t("bucketForm.endpointInvalid")))}}}function Ae(){const{data:s,isLoading:t,...a}=qe();return{keyOptions:n.useMemo(()=>P.map(s,c=>({label:c.name,value:c.id,access_key_id:c.access_key_id})),[s]),isLoading:t,keyChainQuery:a}}function zt({modalRef:s,className:t,showTrigger:a=!0}){const[r,c]=n.useState(!1),[d]=R.useForm(),{t:o}=H(),{keyOptions:i,isLoading:u,keyChainQuery:l}=Ae(),{mutateAsync:v,isPending:h}=Ye(),b=Q();n.useEffect(()=>{const y=S=>{d.resetFields(),S.detail&&setTimeout(()=>{d.setFieldsValue(S.detail)}),c(!0)};return document.addEventListener(ue,y),()=>{document.removeEventListener(ue,y)}},[d,r]),n.useImperativeHandle(s,()=>({open:y=>{d.resetFields(),y&&setTimeout(()=>{d.setFieldsValue(y)}),c(!0)},close:()=>{d.resetFields(),c(!1)}}));const E=()=>{d.resetFields(),c(!1)},C=async y=>{if(P.size(y==null?void 0:y.buckets)===0){U.error(o("bucketForm.atLeastOnePath"));return}await v(y.buckets),U.success(o("bucketForm.pathAdded")),E(),b.invalidateQueries({queryKey:["bucket"]})},p=()=>{d.submit()},O=n.useMemo(()=>{var y;return{buckets:[{keychain_id:(y=i[0])==null?void 0:y.value,endpoint:"",path:""}]}},[i]);return e.jsxs(e.Fragment,{children:[a&&e.jsx(A,{title:o("bucketForm.triggerTooltipMessage"),placement:"bottomLeft",children:e.jsx($,{className:t,onClick:()=>c(!0),type:"primary",icon:e.jsx(ne,{}),children:o("bucketForm.addBucket")})}),e.jsx(Lt,{isOpen:r,onClose:E,title:o("bucketForm.addBucket"),width:600,offset:{right:16,top:72,bottom:16},footer:e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{type:"primary",loading:h,onClick:p,children:o("bucketForm.save")}),e.jsx($,{type:"default",onClick:E,children:o("bucketForm.cancel")})]}),children:e.jsx("div",{className:"",children:e.jsxs(R,{form:d,layout:"vertical",onFinish:C,initialValues:O,children:[e.jsx(Me,{className:"!mb-4",type:"info",showIcon:!0,message:e.jsxs("div",{children:[o("bucketForm.alertMessage")," → ",e.jsxs($,{type:"link",className:"!text-[var(--ant-color-primary)] !px-0",target:"_blank",size:"small",href:`${window.__CONFIG__.BASE_URL??""}/keychain`,children:[o("bucketForm.AS&SKManagement"),e.jsx(Se,{})]})]})}),e.jsx(R.List,{name:"buckets",children:(y,{add:S,remove:B})=>e.jsxs(e.Fragment,{children:[y.map((z,m)=>e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("span",{className:"font-bold text-black",children:[o("bucketForm.path"),"  ",m+1]}),e.jsx(A,{title:o("bucketForm.remove"),children:e.jsx($,{size:"small",type:"text",danger:!0,icon:e.jsx(De,{component:Le}),onClick:()=>B(m)})})]}),e.jsx(R.Item,{className:"!mb-0",label:e.jsxs("div",{className:"flex items-center gap-2",children:["AK&SK",e.jsx(A,{title:o("bucketForm.refresh"),children:e.jsx($,{type:"text",size:"small",icon:e.jsx(ze,{}),loading:l.isFetching,onClick:()=>l.refetch()})})]}),required:!0,name:[m,"keychain_id"],rules:[{required:!0,message:o("bucketForm.keychainIdRequired")}],children:e.jsx(me,{className:"w-full",loading:u,options:i,placeholder:o("bucketForm.keychainIdRequired"),optionRender:j=>e.jsxs("div",{className:"flex flex-col gap-1",children:[j.label,e.jsx("span",{className:"text-gray-400",children:j.data.access_key_id})]})})}),e.jsx(R.Item,{label:"Endpoint",required:!0,hasFeedback:!0,className:"!mb-0",name:[m,"endpoint"],validateDebounce:1e3,rules:[{type:"url",message:o("bucketForm.endpointValidMessage")},xe],children:e.jsx(K,{placeholder:o("bucketForm.endpointPlaceholder")})}),e.jsx(R.Item,{label:o("bucketForm.path"),tooltip:o("bucketForm.pathTooltip"),required:!0,hasFeedback:!0,className:"!mb-0",name:[m,"path"],validateDebounce:1e3,rules:[ge(i)],children:e.jsx(K,{placeholder:o("bucketForm.pathPlaceholder")})}),y.length>1&&m<y.length-1&&e.jsx(Je,{})]},z.key)),e.jsx($,{className:"mt-6",block:!0,icon:e.jsx(ne,{}),onClick:()=>S(),children:o("bucketForm.add")})]})})]})})})]})}const Dt="_tree_1b5hq_2",Pe={tree:Dt},At=s=>n.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:0,viewBox:"0 0 24 24",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",...s},n.createElement("path",{d:"M4 6h2v12H4zm4 7h8.586l-4.293 4.293 1.414 1.414L20.414 12l-6.707-6.707-1.414 1.414L16.586 11H8z"})),Vt=s=>n.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:0,viewBox:"0 0 24 24",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",...s},n.createElement("path",{d:"M18 6h2v12h-2zm-2 5H7.414l4.293-4.293-1.414-1.414L3.586 12l6.707 6.707 1.414-1.414L7.414 13H16z"})),Ht=s=>n.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},n.createElement("path",{d:"M8.03243 3.33325C8.25344 3.33325 8.4654 3.42105 8.62168 3.57733L9.80019 4.75584C9.95647 4.91212 10.1684 4.99992 10.3894 4.99992H17.5443C18.0045 4.99992 18.3776 5.37301 18.3776 5.83325V15.8333C18.3776 16.2935 18.0045 16.6666 17.5443 16.6666H2.54427C2.08403 16.6666 1.71094 16.2935 1.71094 15.8333V4.16659C1.71094 3.70635 2.08403 3.33325 2.54427 3.33325H8.03243Z",fill:"#3477EB"}),n.createElement("path",{d:"M3.37695 8.75C3.37695 8.05964 3.9366 7.5 4.62695 7.5H15.4603C16.1506 7.5 16.7103 8.05964 16.7103 8.75H3.37695Z",fill:"white"}));function Ee(s){const t=s.replace(/^s3:\/\//,"").split("/");return t.map((a,r)=>{const c=t.slice(0,r+1).join("/");return{fragment:a,path:c,fullPath:`s3://${c}/`}})}function Kt(){const{open:s,setOpen:t}=He(),{t:a}=H(),r=n.useCallback(()=>{document.dispatchEvent(new CustomEvent("toggleDirectoryTree",{detail:{open:!s}}))},[s,t]);return e.jsx(A,{title:a(s?"directoryTree.hide":"directoryTree.show"),placement:"bottomLeft",children:e.jsx($,{icon:s?e.jsx(Vt,{}):e.jsx(At,{}),onClick:r})})}const Ve=n.createContext({open:!1,setOpen:()=>{}});function He(){const s=n.useContext(Ve);if(!s)throw new Error("useTreeContext must be used within a DirectoryTreeProvider");return s}function Qt({children:s}){const[t,a]=n.useState(!1),r=n.useMemo(()=>({open:t,setOpen:a}),[t]);return e.jsx(Ve.Provider,{value:r,children:s})}function Wt({treeRef:s,className:t}){const[a,r]=n.useState({}),c=n.useRef(!1),o=Z().search,i=o.path||"",u=i==null?void 0:i.split("?")[0],[l,v]=n.useState([`${o.id}-${u}`]),[h,b]=n.useState([i]),{open:E,setOpen:C}=He(),[p,O]=n.useState(!1),y=Q(),S=J(),B=Number(o.page_size)||50,{t:z}=H(),[m,j]=n.useState(!1),k=n.useCallback((f,x,I)=>f?["bucket",{path:f,pageNo:x??P.get(a,[f,"pageNo"],1),pageSize:B,id:I??o.id}]:["bucket"],[a,o.id]);n.useEffect(()=>{v([`${o.id}-${u}`])},[u]),n.useEffect(()=>{const f=Ee(i).slice(0,-1);i&&b(f.map(x=>`${o.id}-${x.fullPath}`))},[i]);const _=n.useCallback(async f=>{if(C(f),c.current)return;c.current=!0;const x=Ee(i).slice(0,-1);O(!0);const T=(await Promise.all([y.fetchQuery({queryKey:k(),staleTime:1e4,queryFn:()=>Y({path:"/"})}),...x.map(M=>y.fetchQuery({queryKey:k(M.fullPath),staleTime:1e4,queryFn:()=>Y({path:M.fullPath,id:o.id?Number(o.id):void 0})}))]).finally(()=>{O(!1)})).reduce((M,F,L)=>(L===0?M["s3://"]={total:F.total??0,data:F.data,pageNo:F.page_no??1}:M[`${F.data[0].id}-${x[L-1].fullPath}`]={total:F.total??0,data:F.data,pageNo:F.page_no??1},M),{});r(T)},[i,o.id]);n.useEffect(()=>{const f=x=>{_(x.detail.open)};return document.addEventListener("toggleDirectoryTree",f),()=>{document.removeEventListener("toggleDirectoryTree",f)}},[_]),n.useImperativeHandle(s,()=>({toggle:_}));const W=n.useCallback(async(f,x,I)=>{let T=x;if(f==="file")return;x.startsWith("s3://")||(T=`${i}${x}`),["bucket","dir"].includes(f)&&!T.endsWith("/")&&(T=`${T}/`);const M=await y.fetchQuery({queryKey:k(T,void 0,I),staleTime:1e4,queryFn:()=>Y({path:T,id:I})});r(F=>{const L=`${I}-${T}`;return F[L]?F:{...F,[L]:{total:M.total??0,data:M.data,pageNo:M.page_no??1}}})},[i]),N=n.useCallback(async({key:f,raw:x})=>{if(f.endsWith("///load-more")){if(m)return;const I=`${x.id}-${x.path}`,T=P.get(a,[I,"pageNo"],1)+1;j(!0);const M=await y.fetchQuery({queryKey:k(x.path,T,x.id),staleTime:1e4,queryFn:()=>Y({path:x.path,id:x.id,pageNo:T})});r(F=>{const L=F[I];return{...F,[I]:{total:M.total+((L==null?void 0:L.total)??0),data:[...(L==null?void 0:L.data)??[],...M.data],pageNo:T}}}),j(!1);return}S({to:"/",search:{...o,path:x.path,id:x.id}})},[o,a,m]),g=n.useCallback(f=>{const x=f.raw.path,I=`${f.raw.id}-${x}`;return a[I]?Promise.resolve():W(P.get(f,"raw.type"),x,f.raw.id)},[W,a]),w=n.useMemo(()=>{var x;const f=(I,T=0,M="")=>P.map(I,F=>{var ve,ye,ke;const L=F.path.replace(M,"").replace(/\/$/,""),X=`${F.id}-${F.path}`,Qe={title:e.jsx("span",{className:"whitespace-nowrap",children:z("directoryTree.loadMore")}),key:`${X}///load-more`,isLeaf:!0,icon:m?e.jsx(at,{spin:!0}):e.jsx(yt,{}),raw:F},be=f(((ve=a[X])==null?void 0:ve.data)||[],T+1,F.path);return((ye=a[X])==null?void 0:ye.total)%B===0&&((ke=a[X])==null?void 0:ke.total)>0&&be.push(Qe),{title:e.jsx("span",{className:"whitespace-nowrap",children:L}),key:X,children:be,isLeaf:F.type==="file",icon:e.jsx("div",{className:"text-lg w-4 h-4",children:F.path.endsWith("/")?e.jsx(se,{type:"folder"}):e.jsx(se,{path:F.path})}),raw:F}});return f(((x=a["s3://"])==null?void 0:x.data)||[],0,"s3://")},[i,a,m]);return p?e.jsx(st,{className:Pe.tree,active:!0}):e.jsx("div",{className:q(Pe.tree,t,{hidden:!E||!i}),children:e.jsx(nt.DirectoryTree,{expandedKeys:h,onExpand:f=>b(f),loadData:g,icon:e.jsx(Ht,{className:"text-lg"}),blockNode:!0,selectedKeys:l,onSelect:(f,{node:x})=>N(x),treeData:w})})}const Ut="_shortcutPathDropdown_1klmh_7",Gt="_listItem_1klmh_14",he={shortcutPathDropdown:Ut,listItem:Gt},pe=e.jsx(Be,{className:"text-gray-300 text-[12px]"});function Ie({fragment:s,hideArrow:t,clickable:a=!0,onClick:r,className:c}){const d=Q(),o=J(),u=Z().search,l=u.path||"",v=n.useCallback(h=>{h.stopPropagation(),h.preventDefault();const b=`s3://${l}${l.endsWith("/")?"":"/"}`;d.invalidateQueries(),o({to:"/",search:{...u,id:l?u.id:void 0,path:b,page_no:1}})},[l,u,o]);return e.jsxs("div",{className:q("flex items-center whitespace-nowrap",c),children:[!t&&pe,e.jsx("div",{className:q({"cursor-pointer duration-100 hover:bg-(--ant-color-primary-bg) hover:text-(--ant-color-primary) rounded":a,"cursor-text":!a},"px-1 py-0.5"),onClick:a?r??v:void 0,children:s})]})}function $e(s){const t=s.replace(/^s3:\/\//,"").split("/");return t.map((a,r)=>({fragment:a,path:t.slice(0,r+1).join("/")}))}function Zt(s){document.dispatchEvent(new CustomEvent("correct-path",{detail:s}))}function Xt({containerRef:s}){const t=n.useRef(null),a=n.useRef(null),[r,c]=n.useState(!1),d=J(),o=n.useRef(null),[i,u]=n.useState([]),[l,v]=n.useState([]),{t:h}=H(),[b]=R.useForm(),C=Z().search,p=C.path||"",O=Q();n.useEffect(()=>{v($e(p))},[p]),n.useImperativeHandle(s,()=>({toggleFocus:g=>{c(g)},form:b})),n.useEffect(()=>{const g=w=>{setTimeout(()=>{b.setFieldValue("path",w.detail),v($e(w.detail))})};return document.addEventListener("correct-path",g),()=>{document.removeEventListener("correct-path",g)}},[]),n.useLayoutEffect(()=>{if(!t.current||!o.current)return;o.current.style.width=`${t.current.offsetWidth}px`,o.current.style.height=`${t.current.offsetHeight}px`;let g=0;o.current.innerHTML="";const w=[],f=[{fragment:"s3",path:""},...l];for(let x=0;x<f.length;x++){const I=document.createElement("div");I.style.display="flex",I.style.alignItems="center",I.style.whiteSpace="nowrap",I.innerHTML=`
        <div style="display: flex;align-items: center;white-space: nowrap;">
          <div style="width: 14px;height: 14px;background-color: #000;"></div>
          <div style="padding-left: 0.25rem;padding-right: 0.25rem;">${f[x].fragment}</div>
        </div>
      `,w.push(I)}for(o.current.append(...w);o.current&&o.current.scrollWidth-o.current.offsetWidth>0;){const x=o.current.firstChild;if(x&&o.current.contains(x))o.current.removeChild(x);else break;g+=1}u(l.slice(0,g))},[l,r]),n.useEffect(()=>{b.setFieldValue("path",p??"")},[p]);const y=g=>{g.key==="Enter"&&b.submit()},S=g=>{var w;(w=document.querySelector(".shortcut-path-dropdown"))!=null&&w.contains(g.target)||(c(!0),setTimeout(()=>{var f;(f=a.current)==null||f.focus()},100))},B=async()=>{const g=await b.validateFields(),w=b.getFieldValue("path");g&&w.split("?")[0]===p.split("?")[0]&&c(!1)},z=g=>{g.stopPropagation(),g.preventDefault(),d({to:"/",search:{page_no:1}})},m=n.useCallback(g=>w=>{w.stopPropagation(),w.preventDefault();const f=`s3://${g}${g.endsWith("/")?"":"/"}`;O.invalidateQueries(),d({to:"/",search:{...C,id:p?C.id:void 0,path:f,page_no:1}})},[p,C,d]),j=g=>{const w=g.path.trim();O.invalidateQueries(),d({to:"/",search:{...C,id:void 0,path:w}}),setTimeout(()=>{c(!1)},1e3)},k=g=>{b.setFieldValue("path",g.path.trim())},_=n.useMemo(()=>({onClick:({key:g,domEvent:w})=>{m(g)(w)},items:i.map(g=>({key:g.path,label:g.fragment}))}),[m,i]),W=n.useMemo(()=>({path:p}),[p]),N=r||!p;return e.jsxs(e.Fragment,{children:[e.jsx(R,{layout:"inline",form:b,className:q({"w-full":N,visible:N,absolute:!N,invisible:!N,"z-[-1]":!N,"left-8":!N}),onFinish:j,initialValues:W,onValuesChange:k,children:e.jsx(R.Item,{label:"",name:"path",className:"!flex-1 !m-0",rules:[{pattern:/^s3:\/\//,message:h("bucket.pathMustStartWithS3")}],children:e.jsx(K,{className:q("w-full rounded-none !shadow-none"),ref:a,allowClear:!0,placeholder:h("bucket.searchPlaceholder"),onKeyDown:y,onBlur:B})})}),e.jsxs("div",{id:"path-container",ref:t,className:q({visible:!r,invisible:r||!p,"z-[-1]":r||!p,absolute:r||!p},"flex items-center flex-1 cursor-text overflow-auto w-0 border-t border-b border-gray-300 bg-white"),onClick:S,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ie,{fragment:"s3",path:"",className:"ml-1",hideArrow:!0,onClick:z}),pe]}),i.length>0&&e.jsx(it,{rootClassName:he.shortcutPathDropdown,menu:_,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"hover:bg-(--ant-color-primary-bg) hover:text-(--ant-color-primary) px-1 cursor-pointer rounded duration-100",children:"..."}),pe]})}),e.jsx("div",{className:"flex items-center",children:l.slice(i.length).map((g,w)=>e.jsx(Ie,{hideArrow:w===0,clickable:w+i.length!==l.length-1,onClick:m(g.path),fragment:g.fragment,path:g.path},w))})]}),e.jsx("div",{id:"path-contaner-shadow",className:"absolute top-0 left-0 flex items-center flex-1 overflow-auto min-w-0 invisible z-[-1]",ref:o})]})}function Yt(){const{t:s}=H(),t=n.useRef(null),a=rt(),c=Z().search,d=J(),[,o,i,u]=_e(),l=fe(),v=()=>{let p=o;o.endsWith("/")?p=o.replace(/[^/]+\/$/,""):p=o.replace(/[^/]+$/,""),p==="s3://"&&(p=""),d({to:"/",search:{...c,id:p?c.id:void 0,path:p}})},h=P.get(l,"data.total",0),b=()=>{navigator.clipboard.writeText(o),U.success(s("copied"))},E=o.split("?")[0],C=o&&E.endsWith("/");return e.jsxs("div",{className:q("bucket-header"," flex items-center gap-2"),children:[o&&e.jsx(Kt,{}),e.jsxs(Ce.Compact,{className:"flex flex-1 text-sm relative",children:[e.jsx(A,{title:s("bucket.returnToParent"),placement:"bottomLeft",children:e.jsx($,{disabled:!o||o==="s3://",icon:e.jsx(ot,{}),onClick:v})}),e.jsx(Xt,{containerRef:t}),e.jsx(A,{title:s("bucket.searchPath"),children:e.jsx($,{disabled:a>0,icon:e.jsx(Ot,{}),onClick:()=>{var p;return(p=t.current)==null?void 0:p.form.submit()}})}),e.jsx(A,{title:s("bucket.copyPath"),children:e.jsx($,{disabled:!o,icon:e.jsx(wt,{}),onClick:b})})]}),e.jsxs(e.Fragment,{children:[C&&e.jsxs(Ce.Compact,{children:[e.jsx(A,{title:s("bucket.prevPage"),children:e.jsx($,{disabled:!i||i===1,onClick:()=>d({to:"/",search:{...c,page_no:i-1}}),icon:e.jsx(ct,{})})}),e.jsx(K,{className:"!w-16 text-center",min:1,readOnly:!0,value:i??"1"}),e.jsx(A,{title:s("bucket.nextPage"),children:e.jsx($,{onClick:()=>d({to:"/",search:{...c,page_no:i+1}}),icon:e.jsx(Be,{}),disabled:h<i*u})})]}),e.jsx(A,{title:s("bucketForm.addBucket"),placement:"topLeft",children:e.jsx($,{type:"primary",icon:e.jsx(ne,{}),onClick:()=>{qt()}})})]})]})}const Jt=s=>n.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},n.createElement("path",{d:"M8.03243 3.33325C8.25344 3.33325 8.4654 3.42105 8.62168 3.57733L9.80019 4.75584C9.95647 4.91212 10.1684 4.99992 10.3894 4.99992H17.5443C18.0045 4.99992 18.3776 5.37301 18.3776 5.83325V15.8333C18.3776 16.2935 18.0045 16.6666 17.5443 16.6666H2.54427C2.08403 16.6666 1.71094 16.2935 1.71094 15.8333V4.16659C1.71094 3.70635 2.08403 3.33325 2.54427 3.33325H8.03243Z",fill:"#FFBA52"}),n.createElement("path",{d:"M3.37793 8.75C3.37793 8.05964 3.93757 7.5 4.62793 7.5H15.4613C16.1516 7.5 16.7113 8.05964 16.7113 8.75H3.37793Z",fill:"white"})),V="ORIGIN";function Re(){return Math.random().toString(36).substring(2,15)}function es(s,t){const a=document.createElement("a");a.href=s,t&&a.setAttribute("download",t),document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a)})}async function ts(s){if(!s.startsWith("s3://"))throw new Error("s3路径必须以s3://开头");const t=s.split("/").pop();try{const a={path:s},r=new URLSearchParams(a),c=`${window.__CONFIG__.BASE_URL??""}/api/v1/bucket/download?${r.toString()}`,d=await fetch(c).then(o=>o.json());es(d,t)}catch{throw new Error("下载失败")}}function Ke({modalRef:s}){const[t,a]=n.useState(null),[r,c]=n.useState(!1),{data:d,isLoading:o}=qe(typeof t=="number"),[i]=R.useForm(),{t:u}=H(),{mutateAsync:l}=lt(),v=Q(),h=d==null?void 0:d.map(p=>({label:p.name,value:p.id}));n.useImperativeHandle(s,()=>({open:p=>{a(p),c(!0)}}));const{data:b}=dt(t);n.useEffect(()=>{b&&i.setFieldsValue(b)},[b]);const E=()=>{c(!1),a(null)},C=async()=>{await i.validateFields();const p=i.getFieldsValue(),O=P.get(p,"endpoint"),y=P.get(p,"keychain_id"),S=P.get(p,"path"),B=P.get(p,"name");await l({id:t,body:{endpoint:O,keychain_id:y,path:S,name:B}}),v.invalidateQueries({queryKey:["bucket"]}),U.success(u("bucketUpdated")),c(!1),a(null)};return e.jsx(ae,{title:u("editBucket"),open:r,onCancel:E,onOk:C,loading:o,children:e.jsxs(R,{form:i,layout:"vertical",name:"bucket",initialValues:b,onFinish:C,children:[e.jsx(R.Item,{label:u("bucketForm.path"),hasFeedback:!0,name:"path",required:!0,validateDebounce:1e3,rules:[ge(h,!1)],children:e.jsx(K,{placeholder:u("bucketForm.pathPlaceholder")})}),e.jsx(R.Item,{label:u("bucketForm.endpoint"),name:"endpoint",required:!0,hasFeedback:!0,validateDebounce:1e3,rules:[{type:"url",message:u("bucketForm.endpointValidMessage")},xe],children:e.jsx(K,{placeholder:u("bucketForm.endpointPlaceholder")})}),e.jsx(R.Item,{label:u("bucketForm.keychainId"),name:"keychain_id",rules:[{required:!0,message:u("bucketForm.keychainIdRequired")}],children:e.jsx(me,{options:h})})]})})}function ss({block:s,onClose:t,pageSize:a=50,pageNo:r=1,updateBlock:c,onLinkClick:d,...o}){const{path:i,id:u,bucketId:l}=s,[v,h]=n.useState(a),[b,E]=n.useState(r),C=J(),O=Z().search,y=n.useMemo(()=>i?["bucket",{path:i,pageSize:v,pageNo:b,id:l}]:["bucket"],[i,v,b,l]);n.useEffect(()=>{u===V&&E(r)},[r]),n.useEffect(()=>{u===V&&h(a)},[a]);const S=n.useMemo(()=>({staleTime:i?1e4:0,queryKey:y,queryFn:()=>Y({path:i,pageSize:v,pageNo:b,id:u===V&&l?Number(l):void 0}).then(g=>g),select:N=>N.data}),[y]),{data:B,isLoading:z}=pt(S),m=n.useCallback(N=>{u===V&&Zt(N)},[u]),j=n.useCallback(N=>{if(u===V){const{path:g,...w}=N,f={};typeof N.path=="string"&&(f.path=g),w.pageNo&&(f.page_no=w.pageNo),w.pageSize&&(f.page_size=w.pageSize),C({to:"/",search:{...O,...f,id:!f.path&&Object.keys(w).length===0?void 0:O.id}})}else N.pageSize&&h(N.pageSize),N.pageNo&&E(N.pageNo);c==null||c(u,{path:N.path})},[u,O,c]),k=n.useCallback(N=>{window.open(`${window.location.origin}${window.location.pathname}?path=${encodeURIComponent(N)}&pageSize=${v}&pageNo=${b}`,"_blank","noopener,noreferrer")},[v,b,l]),_=u===V,W=Te(i);return e.jsx(mt,{id:s.id,path:s.path,loading:z,dataSource:B,onClose:t,onPathCorrection:m,onDownload:ts,previewUrl:`${window.__CONFIG__.BASE_URL??""}/api/v1/bucket/preview?id=${l}`,showGoParent:!_&&!!i,showPagination:!_&&W==="folder",onChange:j,closeable:!_,onOpenInNewTab:k,showOpenInNewTab:!_,onLinkClick:d,...o})}function ns({className:s}){const t=n.useRef(null),a=n.useRef(null),r=Z(),c=Q(),{t:d}=H(),o=r.search,i=o.id,u=o.path||"",l=ut(u),v=Number(o.page_size)||50,h=Number(o.page_no)||1,b=Te(l)||"txt",[E,C]=n.useState([{id:V,path:u,bucketId:i}]);n.useEffect(()=>{C(m=>[{...m[0],bucketId:i},...m.slice(1)])},[i]);const p=n.useCallback((m,j)=>{C(k=>k.map(_=>_.id===m?{..._,...j}:_))},[]);n.useEffect(()=>{C(m=>[{...m[0],path:u,pathType:b}])},[u,b]);const O=n.useCallback(async m=>{const j=await Oe(m);j.data.length>1?ae.info({title:d("bucket.duplicatedBuckets"),content:e.jsx(te,{size:"small",bordered:!0,dataSource:j.data.map(k=>({name:k.name,path:k.path,id:k.id})),renderItem:k=>e.jsx(te.Item,{className:q(he.listItem,"!flex !items-center"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jt,{}),e.jsx("a",{href:"javascript:void(0)",className:"!hover:underline",onClick:()=>{C(_=>[..._.slice(0,1),..._.slice(1),{id:Re(),path:k.path,bucketId:k.id}]),ae.destroyAll()},children:`${k.path}/`}),k.name&&e.jsx(Fe,{children:k.name})]})})})}):j.data&&j.data.length?C(k=>[...k.slice(0,1),...k.slice(1),{id:Re(),path:m,bucketId:j.data[0].id}]):U.error(d("noBucketFound")),setTimeout(()=>{t.current&&t.current.scrollTo({left:t.current.scrollWidth,behavior:"smooth"})})},[d]),y=n.useCallback(m=>{C(j=>j.filter(k=>k.id!==m))},[]),S=n.useCallback(m=>Ne(m).then(()=>{U.success(d("upload.deleteSuccess")),c.invalidateQueries({queryKey:["bucket"]})}),[Ne,c]),B=fe(),z=n.useCallback(m=>P.get(B,"data.data",[]).filter(k=>k.path===m).length>1,[B]);return e.jsxs("div",{ref:t,className:q(s,"block-previewer","flex","items-start","gap-4","overflow-x-auto","h-full relative"),children:[E.map(m=>e.jsx(ss,{block:m,updateBlock:p,onClose:()=>y(m.id),pageSize:m.id===V?v:void 0,pageNo:m.id===V?h:void 0,style:{width:`calc(100% / ${E.length})`},onLinkClick:O,renderBucketItem:m.id===V&&!u?j=>e.jsxs(te.Item,{className:q(he.listItem,"!flex !items-center"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-lg w-4 h-4",children:e.jsx(se,{path:j.fullPath})}),e.jsx(ht,{className:"hover:!underline",to:"/",search:{path:`${j.fullPath}`,id:j.id},children:`${j.path}`}),z(j.fullPath)&&e.jsxs(Fe,{color:"blue",children:[e.jsx(It,{})," ",j.keychain_name]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{type:"text",size:"small",icon:e.jsx(Nt,{}),onClick:()=>{var k;return(k=a.current)==null?void 0:k.open(j.id)}}),e.jsx(xt,{title:d("bucketForm.deleteConfirm"),onConfirm:()=>S(j.id),okText:d("ok"),cancelText:d("cancel"),children:e.jsx($,{danger:!0,type:"text",size:"small",icon:e.jsx(Le,{})})})]})]}):void 0},m.id)),e.jsx(Ke,{modalRef:a})]})}function as({className:s}){const{t}=H(),[a]=R.useForm(),{keyOptions:r,isLoading:c,keyChainQuery:d}=Ae(),{mutateAsync:o,isPending:i}=gt(),u=Q(),l=async h=>{await o(h),u.invalidateQueries({queryKey:["bucket"]}),a.resetFields()},v=[{name:t("supportedCloudPlatforms.aws"),icon:"aws.png"},{name:t("supportedCloudPlatforms.aliyun"),icon:"aliyun.png"},{name:t("supportedCloudPlatforms.huawei"),icon:"huawei.png"},{name:t("supportedCloudPlatforms.tencent"),icon:"tencent.png"},{name:t("supportedCloudPlatforms.sensetime"),icon:"sensetime.png"},{name:t("supportedCloudPlatforms.inspur"),icon:"inspur.png"}];return e.jsxs("div",{className:q("flex flex-col items-center justify-center bg-[url(/bg.png)] bg-cover bg-center fixed inset-0 z-10",s),children:[e.jsx("div",{className:"text-center mb-12",children:e.jsx("h1",{className:"text-4xl font-bold mb-4",children:t("addFirstBucket")})}),e.jsxs(R,{form:a,className:"max-w-2xl",layout:"vertical",onFinish:l,children:[e.jsx(Me,{className:"!mb-4",type:"info",showIcon:!0,message:e.jsxs("div",{children:[t("bucketForm.alertMessage")," → ",e.jsxs($,{type:"link",target:"_blank",size:"small",className:"!text-[var(--ant-color-primary)] !px-0",href:`${window.__CONFIG__.BASE_URL??""}/keychain`,children:[t("bucketForm.AS&SKManagement")," ",e.jsx(Se,{})]})]})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(R.Item,{className:"!mb-0",label:e.jsxs("div",{className:"flex items-center gap-2",children:["AK&SK",e.jsx(A,{title:t("bucketForm.refresh"),children:e.jsx($,{type:"text",size:"small",icon:e.jsx(ze,{}),loading:d.isFetching,onClick:()=>d.refetch()})})]}),required:!0,name:"keychain_id",rules:[{required:!0,message:t("bucketForm.keychainIdRequired")}],children:e.jsx(me,{className:"w-full",loading:c,options:r,placeholder:t("bucketForm.keychainIdRequired"),optionRender:h=>e.jsxs("div",{className:"flex flex-col gap-1",children:[h.label,e.jsx("span",{className:"text-gray-400",children:h.data.access_key_id})]})})}),e.jsx(R.Item,{label:"Endpoint",required:!0,hasFeedback:!0,className:"!mb-0",name:"endpoint",validateDebounce:1e3,rules:[{type:"url",message:t("bucketForm.endpointValidMessage")},xe],children:e.jsx(K,{placeholder:t("bucketForm.endpointPlaceholder")})}),e.jsx(R.Item,{label:t("bucketForm.path"),tooltip:t("bucketForm.pathTooltip"),required:!0,hasFeedback:!0,className:"!mb-0",name:"path",validateDebounce:1e3,rules:[ge(r)],children:e.jsx(K,{placeholder:t("bucketForm.pathPlaceholder")})}),e.jsx(R.Item,{children:e.jsx($,{block:!0,type:"primary",size:"large",loading:i,onClick:a.submit,children:t("bucketForm.add")})})]})]}),e.jsxs("div",{className:"text-center text-gray-600 mt-4",children:[e.jsx("p",{children:t("currentSupport")}),e.jsx("div",{className:"flex justify-center items-center space-x-6 mt-4",children:v.map(h=>e.jsx("div",{className:"bg-white rounded-md w-8 h-8 p-1",title:h.name,children:e.jsx("img",{src:h.icon,alt:h.name,className:"w-full h-full object-contain"})},h.name))})]})]})}const is=function(){const t=n.useRef(null),a=n.useRef(null),[,r]=_e(),c=ft(),{fetchingCount:d,data:o}=fe(),{t:i}=H();n.useEffect(()=>{document.title=`Vis3 - ${i("cloud")}`},[i]);const u=P.get(o,"total",0),l=!!o&&!r&&u===0&&d===0&&c.status==="idle",v=n.useMemo(()=>r?!0:u>0&&c.status==="idle",[r,u,c.status]);return e.jsxs("div",{className:q("p-4",{"flex flex-1 flex-col":!l}),ref:t,children:[e.jsx(as,{className:q({block:l,hidden:!l})}),e.jsx(Qt,{children:e.jsxs("div",{className:q("flex-col gap-4 h-[calc(100vh-88px)]",{hidden:!v,flex:v}),children:[e.jsx(Yt,{}),e.jsxs("div",{className:"flex flex-1 min-h-0 overflow-y-auto relative gap-4",children:[e.jsx(Wt,{}),e.jsx(ns,{className:"flex-1"})]})]})}),e.jsx(zt,{showTrigger:!1}),e.jsx(Ke,{modalRef:a})]})};export{is as component};
